function StructureOrganizerBuilder(){this.m_structureOrganizer=null,this.m_nodeCount=0,this.m_namespace=""}function JSONStructureOrganizerBuilder(){this.m_structureJSON=null}function StructureNode(){this.m_activityId=0,this.m_children=null,this.m_dirty=!1,this.m_displayPosition=0,this.m_id="",this.m_initialState=null,this.m_namespace="",this.m_numberDocumented=0,this.m_ocid="",this.m_parent=null,this.m_previousState=null,this.m_rootElement=null,this.m_shouldRender=!0,this.m_isDefaultDisplayed=!0,this.m_state=null,this.m_title="",this.m_type="",this.m_inNavigateStructureTree=!0,this.m_shouldSave=!0}function StructureHtml(){this.m_html=""}function StructureOrganizer(){this.m_lookup=null,this.m_navigator=null,this.m_referenceSectionId=null,this.m_type="SECTION",this.m_templateIds={},this.m_templateRelations=null,this.m_rootElement=null,this.m_contentElement=null,this.m_navigatorElement=null,this.m_resizeFunction=null,this.m_dirtyNodeList=null,this.m_onDirtyChangeCallback=null,this.m_previousHighlightedNode=null,this.m_rendered=!1,this.m_isPriorityEnabled=!0,this.m_isMultiSection=!1,this.m_activeSection=null}function StructureGroup(){}function StructureItemGroup(){}function StructureSubGroup(){}function StructureTermGroup(){return this.m_activeTerm=null,this.m_previousActiveTerm=null,this.m_isShowMore=!1,this}function SingleStructureTermGroup(){}function MultiStructureTermGroup(){}function YesNoStructureTermGroup(){}function TableStructureTermGroup(){this.m_comment="",this.m_inNavigateStructureTree=!1,this.m_shouldSave=!1,SingleStructureTermGroup.call(this),CycleStructureTerm.call(this)}function ExpandStructureTermGroup(){this.m_inNavigateStructureTree=!1,this.m_shouldSave=!1,StructureTermGroup.call(this),CycleStructureTerm.call(this)}function TermState(){return this.m_value=null,this.m_cssClass="",this.m_key="",this.m_data={},this}function StructureTerm(){return this.m_caption="",this.m_comment="",this.m_savedComment="",this}function LineStructureTerm(){return this.m_type="LINE",this}function CycleStructureTerm(){return this.m_currentState=0,this.m_states=null,this}function YesNoStructureTerm(){return this}function InputStructureTerm(){return this.m_dataType="",this.m_currentValue="",this.m_previousValue="",this.m_validators=null,this.m_activeState=null,this.m_inactiveState=null,this.m_isValid=!0,this}function FreeTextStructureTerm(){return this}function NoneStructureTerm(){return this}function TableStructureTerm(){return this}function Navigator(){return this.m_activeNavigation=null,this.m_clickCallback=null,this.m_id="",this.m_navigationMap=null,this.m_navigations=null,this.m_skin="",this}function Navigation(){return this.m_id="",this.m_label="",this.m_element=null,this}function ScrollNavigation(){return this.m_anchorId="",this.m_anchorElement=null,this.m_containerId="",this.m_containerElement=null,this}function CallbackNavigation(){return this.m_onSelect=null,this}function StructureNavigation(){this.m_node=null}function StructureQuestionSet(){this.m_onCompleteCallback=null,this.m_lookup=null}function StructureQuestion(){this.m_questionDisplay="",this.m_diagnosisGroup=0,this.m_parentEntityId=0,this.m_parentEntityName=""}function StructureAnswer(){return this.m_answerDisplay="",this.m_templateId=0,this.addState((new TermState).setValue(null).setCSSClass("")),this.addState((new TermState).setValue(!0).setCSSClass("structure-answer-yes")),this.setInitialState(this.m_states[0]),this.m_state=this.m_states[0],this}function StructureTermController(){}function InputStructureTermController(){}function CycleStructureTermController(){}function YesNoStructureTermController(){}function StructureGroupController(){}function TableTermController(){}function StructureTabController(){this.m_scrollMap={},this.m_organizer=null,this.m_$structureTabGroup=null,this.m_$structureTabParent=null,this.m_$structureTabWrapper=null,this.m_$structureTabMenuButton=null}function StructureTermGroupController(){}function StructureManager(){this.m_replyData=null,this.m_referenceData=null,this.m_activityData=null,this.m_questionData=null,this.m_status="",this.m_organizer=null,this.m_resizeFunction=null,this.m_tabController=null,this.m_questionSet=null,this.m_openExistingCheckFunction=null,this.m_answers=null,this.m_openExistingFunction=null,this.m_queryTemplateFunction=null,this.m_onDirtyChangeCallback=null,this.m_$structureManagerContainer=null,this.m_$structureContainer=null,this.m_$structureOrganizerContents=null,this.m_$questionContainer=null,this.m_$questionContents=null,this.m_$messageContainer=null,this.m_$addTemplateButton=null,this.m_namespace=""}function InputValidator(){}function DataTypeValidator(){return this.m_dataType=DataTypeValidator.ALPHA_TYPE,this.m_dataRegex=DataTypeValidator.ALPHA_REGEX,this}function DataRangeValidator(){return this.m_minValue=Number.NEGATIVE_INFINITY,this.m_maxValue=Number.POSITIVE_INFINITY,this}function ModalButton(a){this.m_buttonId=a,this.m_buttonText="",this.m_dithered=!1,this.m_onClickFunction=null,this.m_closeOnClick=!0,this.m_focusInd=!1,this.m_separatorInd=!1}function ModalDialog(a){this.m_modalId=a,this.m_isModalActive=!1,this.m_isFixedToIcon=!1,this.m_hasGrayBackground=!0,this.m_showCloseIcon=!0,this.m_margins={top:5,right:5,bottom:5,left:5},this.m_icon={elementId:a+"icon",cssClass:"",text:"",hoverText:"",isActive:!0},this.m_header={elementId:a+"header",title:"",closeFunction:null,verifyCloseFunctionResponse:!1},this.m_body={elementId:a+"body",dataFunction:null,isBodySizeFixed:!0},this.m_footer={isAlwaysShown:!1,elementId:a+"footer",buttons:[],checkbox:{enabled:!1,elementId:a+"FooterChkBox",isChecked:!1,onClick:function(){return!1},label:""},footerText:{text:"",elementId:a+"FooterText"}}}function MessageModal(a){this.m_line1="",this.m_line2="",this.m_customClass="",ModalDialog.apply(this,[a])}function ErrorModal(a){MessageModal.apply(this,[a])}function WarningModal(a){MessageModal.apply(this,[a])}function InfoModal(a){MessageModal.apply(this,[a])}function BusyModal(a){MessageModal.apply(this,[a])}function Template(){this.id="",this.templateFunction=null}function TemplateBuilder(){}function TemplateCache(){}function MenuItem(a){this.m_activeInd=!1,this.m_clickFunc=function(){},this.m_closeOnClick=!0,this.m_defaultClickFunction=function(){},this.m_disabledInd=!1,this.m_elementId="",this.m_label="",this.m_menuItemId=a,this.m_menuItemTypeClass=""}function Menu(a){this.setId(a),this.setCloseOnClick(!1),this.setDefaultClickFunction(function(a){MP_MenuManager.showMenu(this.getId())}),this.m_autoFlipVertical=!0,this.m_autoFlipHorizontal=!0,this.m_anchorActiveClass="",this.m_anchorElementId="",this.anchorCorner=null,this.contentCorner=null,this.m_contentElementId="",this.m_contentParentId="",this.m_isPersistent=!1,this.m_hoverTimout=null,this.m_menuItemArr=null,this.m_onCloseFunction=null,this.m_rootMenuInd=!1,this.m_mouseOverContent=!1,this.m_mouseOverAnchor=!1,this.m_visibleInd=!1}function DynamicMenu(a){this.setId(a),this.setCloseOnClick(!1),this.m_contentCreationFunc=function(){}}function AdvancedFilterMenu(a){this.setId(a),this.setTypeClass("adv-filter-menu-override"),this.setAutoFlipVertical(!1),this.settings={cancel:{enabled:!1,onclick:function(){return!1},label:i18n.CANCEL},checkbox:{enabled:!1,isChecked:!1,onclick:function(){return!1},label:""},actionLink:{enabled:!1,onclick:function(){return!1},label:""},advancedFilterCreationFunction:function(){return null},dimensions:{width:600},save:{enabled:!1,onclick:function(){return!1},label:i18n.SAVE}},this.setContentCreationFunction(function(){var a=this.settings.checkbox,b=this.settings.actionLink,c=this.settings.save,d=this.settings.cancel,e=$("<div class='adv-filter-menu'></div>").width(this.settings.dimensions.width),f=$("<div class='adv-filter-menu-inner-container'></div>").appendTo(e);if($("<div class='adv-filter-menu-label'>"+this.getLabel()+"</div>").appendTo(f),$("<div class='adv-filter-menu-custom-content'></div>").html(this.settings.advancedFilterCreationFunction()).appendTo(f),!(a.enabled||c.enabled||d.enabled||b.enabled))return e;var g=$("<div class='adv-filter-menu-control-container'></div>").appendTo(e),h=$("<span class='adv-filter-menu-button-container'></span>"),i=0;if(a.enabled&&a.label){var j=$("<span class='adv-filter-menu-checkbox-container'></span>"),k=$("<input type='checkbox'>");k[0].checked=a.isChecked,k.click(a.onclick).appendTo(j),$("<span class='adv-filter-menu-checkbox-label'>"+a.label+"</span>").appendTo(j),j.appendTo(g)}else if(b.enabled&&b.label){var l=$("<span class='adv-filter-menu-action-container'></span>");$("<span class='adv-filter-menu-action-label'>"+b.label+"</span>").click(b.onclick).appendTo(l),l.appendTo(g)}return d.enabled&&($("<button type='button' class='adv-filter-menu-button'>").html(d.label).click(d.onclick).appendTo(h),i=6,h.appendTo(g)),c.enabled&&($("<button type='button' class='adv-filter-menu-button'>").html(c.label).css("margin-right",i).click(c.onclick).appendTo(h),h.appendTo(g)),e})}function ContextMenu(a){this.setId(a),this.m_xOffset=0,this.m_yOffset=0}function MenuSelection(a){this.setId(a),this.setDefaultClickFunction(function(a){this.closeOnClick()||this.isDisabled()||this.toggleSelection()}),this.m_selectedInd=!1,this.m_selectedClass="menu-item-selected"}function MenuSeparator(a){this.setId(a),this.setTypeClass("menu-separator")}function MenuSeparator(a){this.setId(a),this.setTypeClass("menu-separator")}function ThemeSelector(a,b,c,d){this.m_componentId=b,this.m_styleId=d+b,this.setId(a),this.setLabel(i18n.discernabu.COLOR_THEME),this.setAnchorElementId(c),this.setAnchorConnectionCorner(["top","left"]),this.setContentConnectionCorner(["top","right"]),this.setContentCreationFunction(function(){for(var a,b,c,d,e,f,g="",h=i18n.discernabu,i=[{title:h.COLOR_STANDARD,name:"lightgrey",capsName:"LightGrey"},{title:h.COLOR_BROWN,name:"brown",capsName:"Brown"},{title:h.COLOR_CERNER_BLUE,name:"cernerblue",capsName:"CernerBlue"},{title:h.COLOR_DARK_GREEN,name:"darkgreen",capsName:"DarkGreen"},{title:h.COLOR_GREEN,name:"green",capsName:"Green"},{title:h.COLOR_GREY,name:"grey",capsName:"Grey"},{title:h.COLOR_LIGHT_BLUE,name:"lightblue",capsName:"LightBlue"},{title:h.COLOR_NAVY,name:"navy",capsName:"Navy"},{title:h.COLOR_ORANGE,name:"orange",capsName:"Orange"},{title:h.COLOR_PINK,name:"pink",capsName:"Pink"},{title:h.COLOR_PURPLE,name:"purple",capsName:"Purple"},{title:h.COLOR_YELLOW,name:"yellow",capsName:"Yellow"}],j=0;j<i.length;j++)a=' title="'+i[j].title+'"',b=' id="optConfigMnu'+i[j].capsName+'"',c=' class="opts-menu-config-item opt-config-mnu-'+i[j].name+'"',d=' data-color="'+i[j].name+'"',e=' component-id="'+this.m_componentId+'"',f=' style-id="'+this.m_styleId+'"',g+="<div"+a+c+d+e+f+b+"></div>";return g='<div class="opts-menu-config-content-custom" id="optMenuConfig'+this.m_componentId+'">'+g+"</div>",[$("<span>&nbsp;</span>").html(g).click(this.themeSelectorClickHandler)]})}function UtilitiesMenu(a){this.setId(a),this.setTypeClass("utilities-menu-override"),this.setAnchorActiveClass("vwp-util-active"),this.setIsPersistent(!0),this.setIsRootMenu(!0),this.settings={utilitiesContentCreationFunction:function(){return null},dimensions:{width:300,maxHeight:""}},this.setContentCreationFunction(function(){var a=$("<div class='utilities-menu'></div>").width(this.settings.dimensions.width),b=$("<div class='utilities-menu-inner-container'></div>").appendTo(a);return $("<div class='utilities-menu-label'>"+this.getLabel()+"</div>").appendTo(b),$("<div class='utilities-menu-custom-content'></div>").css("max-height",this.settings.dimensions.maxHeight||"").html(this.settings.utilitiesContentCreationFunction()).appendTo(b),a})}StructureOrganizerBuilder.prototype.getNamespace=function(){return this.m_namespace},StructureOrganizerBuilder.prototype.setNamespace=function(a){if("string"!=typeof a)throw new Error("Attempted to call StructureOrganizerBuilder.prototype.setNamespace with invalid parameter.");return this.m_namespace=a,this},StructureOrganizerBuilder.prototype.getNodeCount=function(){return this.m_nodeCount},StructureOrganizerBuilder.prototype.setNodeCount=function(a){if("number"!=typeof a)throw new Error("Attempted to call StructureOrganizerBuilder.prototype.setNodeCount with invalid parameter.");return this.m_nodeCount=a,this},StructureOrganizerBuilder.prototype.getStructureOrganizer=function(){return this.m_structureOrganizer},StructureOrganizerBuilder.prototype.startNewStructureOrganizer=function(){this.m_structureOrganizer=new StructureOrganizer,this.m_structureOrganizer.setNamespace(this.getNamespace()),this.m_structureOrganizer.setId(""+this.m_nodeCount++)},StructureOrganizerBuilder.prototype.buildNavigator=function(){throw new Error("Attempted to call StructureOrganizerBuilder.prototype.buildNavigator. This function must be implemented by a sub-class")},JSONStructureOrganizerBuilder.prototype=new StructureOrganizerBuilder,JSONStructureOrganizerBuilder.prototype.constructor=StructureOrganizerBuilder,JSONStructureOrganizerBuilder.prototype.getStructureJSON=function(){return this.m_structureJSON},JSONStructureOrganizerBuilder.prototype.setStructureJSON=function(a){return this.m_structureJSON=a,this},JSONStructureOrganizerBuilder.prototype.buildStructureTree=function(){this.m_nodeCount=0;var a=this.m_structureJSON,b=new StructureOrganizer;return this.m_structureOrganizer=b,b.setTemplateRelations(a.template_rltns),b.setReferenceSectionId(a.dd_sref_section_id),b.setNamespace(this.getNamespace()),b.setId(""+this.m_nodeCount++),b.setOrganizer(b),this.traverse(a,b),this.handleMultiSectionStructure(),b.isMultiSection()||b.setNavigator(this.buildNavigatorForSection(b)),b},JSONStructureOrganizerBuilder.prototype.handleMultiSectionStructure=function(){for(var a=this.m_structureOrganizer,b=a.getChildren(),c=b.length,d=null,e=0;e<c;e++)d=b[e],StructureOrganizer.prototype.isPrototypeOf(d)&&(a.setIsMultiSection(!0),d.setNavigator(this.buildNavigatorForSection(d)),a.m_activeSection||a.setActiveSection(d))},JSONStructureOrganizerBuilder.prototype.buildNavigatorForSection=function(a){var b=new Navigator;b.setId(this.getNamespace()+":structureNavigator:"+a.getId());for(var c=a.getChildren(),d=null,e=c.length,f=this.m_namespace,g=0;g<e;g++){d=c[g];var h=new StructureNavigation;h.setContainerId(f+":organizer:CONTENT:"+a.getId()),h.setAnchorId(f+":group:ROOT:"+d.getId()),h.setLabel(d.getTitle().replace(":","")),h.setId(f+":structureNavigation:"+d.getId()),h.setNode(d),b.addNavigation(h)}return b},JSONStructureOrganizerBuilder.prototype.buildNavigator=function(){var a=new Navigator;a.setId(this.getNamespace()+":structureNavigator");for(var b=this.m_structureOrganizer.getChildren(),c=null,d=b.length,e=0;e<d;e++){c=b[e];var f=new StructureNavigation;f.setContainerId(this.getNamespace()+":organizer:CONTENT:"+this.m_structureOrganizer.getId()),f.setAnchorId(this.getNamespace()+":group:ROOT:"+c.getId()),f.setLabel(c.getTitle().replace(":","")),f.setId(this.getNamespace()+":structureNavigation:"+c.getId()),a.addNavigation(f)}return a},JSONStructureOrganizerBuilder.prototype.traverse=function(a,b){var c;if(a instanceof Object)for(c in a)if(a.hasOwnProperty(c)){if(!(a[c]instanceof Object))continue;if(Array.prototype.isPrototypeOf(a[c]))for(var d=a[c],e=0;e<d.length;e++){var f=this.buildNode(c,d[e],b);"attribute_menu_items"!==c||"EXPAND"!==d[e].ui_type&&"TABLE"!==d[e].ui_type||this.extractMatchingChildren(d,e),this.traverse(d[e],f)}else this.traverse(a[c],b)}},JSONStructureOrganizerBuilder.prototype.extractMatchingChildren=function(a,b){for(var c=0,d=a[b],e=a.length,f=b+1;f<e;f++){var g=a[f];d.label_id&&g.child_label_id&&d.label_id===g.child_label_id&&(g.label_id&&(e=this.extractMatchingChildren(a,f)),"undefined"==typeof d.attribute_menu_items&&(d.attribute_menu_items=[]),d.attribute_menu_items[c++]=g,a.splice(f,1),e--,f--)}return e},JSONStructureOrganizerBuilder.prototype.buildNode=function(a,b,c){var d=null;if("subsections"===a)d=new StructureOrganizer,d.setReferenceSectionId(b.dd_sref_section_id),d.setTemplateRelations(b.template_rltns);else if("groupbys"===a)d=new StructureGroup;else if("subgroupbys"===a)d=new StructureSubGroup;else if("items"===a)d=new StructureItemGroup;else if("attributes"===a)d=this.buildStructureTermGroupNode(b);else{if("attribute_menu_items"!==a)return null;b.user_input?d="FREE_TEXT"===b.ui_type?this.buildFreeTextNode(b):this.buildInputNode(b):"LINE"===b.ui_type?d=new LineStructureTerm:"EXPAND"===b.ui_type?(d=new ExpandStructureTermGroup,this.addNormality(d,b)):d="TABLE"===b.ui_type?this.buildTableStructureTermGroupNode(b):this.buildCycleNode(b,c),d.setCaption(b.caption||""),d.setDisplayPosition(b.display_seq),d.setUIValue(b.ui_value),d.setPriority(b.priority)}return"undefined"!=typeof b.displayflag&&d.setShouldRender(!!b.displayflag),d.setNamespace(this.getNamespace()),d.setOCID(b.ocid||""),d.setType(a),d.setTitle(b.label||b.value||b.name||b.section_label||""),d.setId(this.m_nodeCount++ +""),d.setOrganizer(this.getStructureOrganizer()),this.m_structureOrganizer.addTermToLookup(d),c.addChild(d),d},JSONStructureOrganizerBuilder.prototype.buildStructureTermGroupNode=function(a){switch(a.attrib_type){case"Single":return new SingleStructureTermGroup;case"Multiple":return new MultiStructureTermGroup;case"YesNo":return new YesNoStructureTermGroup;default:throw new Error("Attempted to call JSONStructureOrganizerBuilder.prototype.buildStructureTermGroupNode with unsupported ATTRIB_TYPE")}},JSONStructureOrganizerBuilder.prototype.buildInputNode=function(a){var b=new InputStructureTerm;return b.setDataType(a.data_type),b.setActiveState((new TermState).setCSSClass("Abnormal"===a.normalfinding?"documented-abnormal":"documented").setValue(!0)),b.setInactiveState((new TermState).setCSSClass("undocumented").setValue(null)),b.setInitialState(b.getInactiveState()),"NUMERIC"===a.data_type&&(0===a.min_value&&0===a.max_value?b.addValidator(new DataRangeValidator):b.addValidator((new DataRangeValidator).setMinValue(a.min_value).setMaxValue(a.max_value))),b.addValidator((new DataTypeValidator).setDataType(a.data_type)),b},JSONStructureOrganizerBuilder.prototype.buildFreeTextNode=function(a){var b=new FreeTextStructureTerm;return b.setDataType(a.data_type),b.setActiveState((new TermState).setCSSClass("Abnormal"===a.normalfinding?"documented-abnormal":"documented").setValue(!0)),b.setInactiveState((new TermState).setCSSClass("undocumented").setValue(null)),b.setInitialState(b.getInactiveState()),b},JSONStructureOrganizerBuilder.prototype.buildTableStructureTermGroupNode=function(a){var b=new TableStructureTermGroup;return this.addNormality(b,a),b},JSONStructureOrganizerBuilder.prototype.buildCycleNode=function(a,b){var c=null,d=a.ui_type,e=YesNoStructureTermGroup.prototype.isPrototypeOf(b)&&"NONE"!==d;return c=e?new YesNoStructureTerm:"NONE"===d?new NoneStructureTerm:TableStructureTermGroup.prototype.isPrototypeOf(b)?new TableStructureTerm:new CycleStructureTerm,this.addNormality(c,a),c},JSONStructureOrganizerBuilder.prototype.addNormality=function(a,b){var c=YesNoStructureTerm.prototype.isPrototypeOf(a),d=b.normalfinding;switch(a.addState((new TermState).setCSSClass("undocumented").setValue(null)),d){case"Neutral":a.addState((new TermState).setCSSClass("documented").setValue(!0)),c&&a.addState((new TermState).setCSSClass("documented").setValue(!1));break;case"Normal":a.addState((new TermState).setCSSClass("documented").setValue(!0)),c&&a.addState((new TermState).setCSSClass("documented-abnormal").setValue(!1));break;case"Abnormal":a.addState((new TermState).setCSSClass("documented-abnormal").setValue(!0)),c&&a.addState((new TermState).setCSSClass("documented").setValue(!1));break;default:throw new Error("Unexpected normal finding value in the JSON: "+d)}return a.setInitialState(a.getStates()[0]),a},JSONStructureOrganizerBuilder.prototype.update=function(a,b){a.setActivityId(b.dd_section_id),this.updateTraverse(b,a)},JSONStructureOrganizerBuilder.prototype.updateTraverse=function(a,b){var c;if(a instanceof Object)for(c in a)if(a.hasOwnProperty(c)){if(!(a[c]instanceof Object))continue;if(Array.prototype.isPrototypeOf(a[c]))for(var d=a[c],e=0;e<d.length;e++){var f=this.updateNode(c,d[e],b);f&&this.updateTraverse(d[e],f)}else this.updateTraverse(a[c],b)}},JSONStructureOrganizerBuilder.prototype.updateNode=function(a,b,c){var d,e,f=null,g=c.getChildren();if("subsections"===a){for(d=0;d<g.length;d++)if(e=g[d],this.matchesSubsection(g[d],b)){f=e,f.setActivityId(b.dd_section_id);break}}else if("groupbys"===a){for(d=0;d<g.length;d++)if(e=g[d],b.label===e.getTitle()){f=e,f.setActivityId(b.dd_groupby_id);break}}else if("subgroupbys"===a){for(d=0;d<g.length;d++)if(e=g[d],b.label===e.getTitle()){f=e,f.setActivityId(b.dd_sgroupby_id);break}}else if("items"===a){for(d=0;d<g.length;d++)if(e=g[d],b.ocid===e.getOCID()){f=e,f.setActivityId(b.dd_item_id);break}}else if("attributes"===a){for(d=0;d<g.length;d++)if(e=g[d],b.ocid===e.getOCID()){f=e,f.setActivityId(b.dd_attribute_id);break}}else if("attribute_menu_items"===a)for(d=0;d<g.length;d++)if(e=g[d],e.getChildren().length>0&&this.updateNode(a,b,e),b.ocid===e.getOCID()&&b.display_seq===e.getDisplayPosition()){f=e,f.setActivityId(b.dd_attr_menu_item_id),b.comment&&f.displayComment(b.comment),f instanceof InputStructureTerm?(f.setCurrentValue(b.value_text?f.unescapePlaintextAsHtml(b.value_text):b.value_number+""),f.update()):f instanceof CycleStructureTerm&&f.jumpToState("T"===b.truth_state_mean?1:2);break}return f},JSONStructureOrganizerBuilder.prototype.matchesSubsection=function(a,b){var c=a.getTemplateRelations(),d=b.template_rltns,e=c.length,f=d.length,g=null,h=null,i=!1;if(e!==f)return!1;for(var j=0;j<e;j++){g=c[j],i=!1;for(var k=0;k<f;k++)if(h=d[k],g.dd_sref_chf_cmplnt_crit_id===h.dd_sref_chf_cmplnt_crit_id&&g.dd_sref_templ_instance_ident===h.dd_sref_templ_instance_ident&&g.parent_entity_id===h.parent_entity_id&&g.parent_entity_name===h.parent_entity_name){i=!0;break}if(!i)return!1}return!0},JSONStructureOrganizerBuilder.prototype.buildQuestionSet=function(a){var b=null,c=null,d=null,e=null,f=a.length,g=new StructureQuestionSet,h=null,i=null,j=0;g.setNamespace(this.m_namespace);for(var k=g.getLookup(),l=0;l<f;l++){b=a[l],h=new StructureQuestion,h.setId(++j+""),h.setNamespace(this.m_namespace),h.setQuestionDisplay(b.label),h.setParentEntityId(b.parent_entity_id),h.setParentEntityName(b.parent_entity_name),c=b.choices,e=c.length;for(var m=0;m<e;m++)d=c[m],i=new StructureAnswer,i.setAnswerDisplay(d.label),i.setTemplateId(d.dd_sref_chf_cmplnt_crit_id),i.setId(++j+""),i.setNamespace(this.m_namespace),k[i.getId()]=i,h.addChild(i);g.addChild(h)}return g},JSONStructureOrganizerBuilder.extendClassMethods=function(a,b,c){for(var d=c.length,e=0;e<d;e++)!function(d){a.prototype[c[d]]=function(a){return b.prototype[c[d]].apply(this,arguments)}}(e)},StructureNode.prototype.getActivityId=function(){return this.m_activityId},StructureNode.prototype.setActivityId=function(a){if("number"!=typeof a)throw new Error("Called setActivityId on StructureNode with invalid parameter for activityId");return this.m_activityId=a,this},StructureNode.prototype.getChildren=function(){return this.m_children||(this.m_children=[]),this.m_children},StructureNode.prototype.isDirty=function(){return this.m_dirty},StructureNode.prototype.setIsDirty=function(a){if("boolean"!=typeof a)throw new Error("Called setIsDirty on StructureNode with invalid dirty parameter.");return this.m_dirty=a,this},StructureNode.prototype.getDisplayPosition=function(){return this.m_displayPosition},StructureNode.prototype.setDisplayPosition=function(a){if("number"!=typeof a)throw new Error("Attempted to call StructureNode.prototype.setDisplayPosition with invalid parameter.");return this.m_displayPosition=a,this},StructureNode.prototype.getId=function(){return this.m_id},StructureNode.prototype.setId=function(a){if("string"!=typeof a)throw new Error("Called setId on StructureNode with invalid parameter for id");return this.m_id=a,this},StructureNode.prototype.getInitialState=function(){return this.m_initialState},StructureNode.prototype.setInitialState=function(a){if(!TermState.prototype.isPrototypeOf(a))throw new Error("Called setInitialState on StructureNode with invalid initialState parameter.");return this.m_initialState=a,this},StructureNode.prototype.getNamespace=function(){return this.m_namespace},StructureNode.prototype.setNamespace=function(a){if("string"!=typeof a)throw new Error("Called setNamespace on StructureNode with invalid namespace parameter.");return this.m_namespace=a,this},StructureNode.prototype.getNumberOfDocumentedChildren=function(){return this.m_numberDocumented},StructureNode.prototype.getOCID=function(){return this.m_ocid},StructureNode.prototype.setOCID=function(a){if("string"!=typeof a)throw new Error("Attempted to call StructureNode.prototype.setOCID with invalid parameter.");return this.m_ocid=a,this},StructureNode.prototype.getParent=function(){return this.m_parent},StructureNode.prototype.setParent=function(a){if(!StructureNode.prototype.isPrototypeOf(a))throw new Error("Called setParent on StructureNode with invalid parent parameter.");return this.m_parent=a,this},StructureNode.prototype.getPreviousState=function(){return this.m_previousState},StructureNode.prototype.setPreviousState=function(a){if(!TermState.prototype.isPrototypeOf(a)&&null!==a)throw new Error("Attempted to call StructureNode.prototype.setPreviousState with invalid parameter.");return this.m_previousState=a,this},StructureNode.prototype.getRootElement=function(){return this.m_rootElement},StructureNode.prototype.getShouldRender=function(){return this.m_shouldRender},StructureNode.prototype.setShouldRender=function(a){if("boolean"!=typeof a)throw new Error("Called setShouldRender on StructureNode with invalid shouldRender parameter.");return this.m_shouldRender=a,this},StructureNode.prototype.inNavigationStructureTree=function(){return this.m_inNavigateStructureTree},StructureNode.prototype.shouldSave=function(){return this.m_shouldSave},StructureNode.prototype.isDefaultDisplayed=function(){return this.m_isDefaultDisplayed},StructureNode.prototype.setIsDefaultDisplayed=function(a){if("boolean"!=typeof a)throw new Error("Called setIsDefaultDisplayed on StructureNode with invalid defaultDisplayed paramater");return this.m_isDefaultDisplayed=a,this},StructureNode.prototype.isCurrentlyDisplayed=function(){return!0},StructureNode.prototype.displayNode=function(){throw new Error("displayNode is abstract, to be implemented by children")},StructureNode.prototype.getState=function(){return this.m_state},StructureNode.prototype.setState=function(a){if(!TermState.prototype.isPrototypeOf(a))throw new Error("Attempted to call StructureNode.prototype.setState with invalid parameter.");return this.m_state=a,this},StructureNode.prototype.getTitle=function(){return this.m_title},StructureNode.prototype.setTitle=function(a){if("string"!=typeof a)throw new Error("Attempted to call StructureNode.prototype.setTitle with invalid parameter.");return this.m_title=a,this},StructureNode.prototype.getType=function(){return this.m_type},StructureNode.prototype.setType=function(a){if("string"!=typeof a)throw new Error("Attempted to call StructureNode.prototype.setType with invalid parameter.");return this.m_type=a,this},StructureNode.prototype.notifyDirty=function(a){this.getParent()&&this.getParent().notifyDirty(a)},StructureNode.prototype.resetDirty=function(){this.m_dirty=!1},StructureNode.prototype.convertToJSON=function(){return{}},StructureNode.prototype.getOrganizer=function(){return this.m_organizer},StructureNode.prototype.setOrganizer=function(a){if(!StructureOrganizer.prototype.isPrototypeOf(a))throw new Error("StructureOrganizer.prototype.setOrganizer expects a StructureOrganizer object.");this.m_organizer=a},StructureNode.prototype.getParentSectionNode=function(){for(var a=this,b=null;null!==a&&!StructureOrganizer.prototype.isPrototypeOf(a);)a=a.getParent();return b=a},StructureNode.prototype.getHighlightElement=function(){return this.getRootElement()},StructureNode.prototype.postProcessing=function(){},StructureNode.prototype.addChildrenJSON=function(a){var b=this.getChildren();this.addNodesToJSON(b,a)},StructureNode.prototype.addNodesToJSON=function(a,b){for(var c={},d=0;d<a.length;d++){var e=a[d],f=e.getState()?e.getState().getValue():null;if((null!==f||"subsections"===e.getType())&&e.shouldSave()){c[e.getType()]||(c[e.getType()]=[]);var g=e.convertToJSON();c[e.getType()].push(g)}}for(var h in c)b.push('"'+h+'": ['+c[h].join(",")+"]")},StructureNode.prototype.getAllDescendents=function(a){for(var b,c=this.getChildren(),d=c.length,e=0;e<d;e++)b=c[e],a.push(b),b.getAllDescendents(a);return a},StructureNode.prototype.addDescendentJSON=function(a){var b=this.getAllDescendents([]);this.addNodesToJSON(b,a)},StructureNode.prototype.escapePlaintextAsHtml=function(a){return a.replace(/\&/g,"&#38;").replace(/\"/g,"&#34;").replace(/\'/g,"&#39;").replace(/\</g,"&#60;").replace(/\>/g,"&#62;").replace(/\\/g,"&#92;").replace(/\^/g,"&#94;").replace(/\~/g,"&#126;").replace(/\t/g,"&#9;").replace(/\r/g,"&#10;").replace(/\n/g,"&#13;")},StructureNode.prototype.unescapePlaintextAsHtml=function(a){return a.replace(/\&\#34\;/g,'"').replace(/\&\#39\;/g,"'").replace(/\&\#60\;/g,"<").replace(/\&\#62\;/g,">").replace(/\&\#92\;/g,"\\").replace(/\&\#94\;/g,"^").replace(/\&\#126\;/g,"~").replace(/\&\#9\;/g,"\t").replace(/\&\#10\;/g,"\r").replace(/\&\#13\;/g,"\n").replace(/\&\#38\;/g,"&")},StructureNode.prototype.notifyStateChange=function(a){var b=a.getState(),c=a.getPreviousState();if(!c||b.getValue()!==c.getValue()){var d=this.m_numberDocumented;null===b.getValue()?this.m_numberDocumented=Math.max(0,this.m_numberDocumented-1):a.getPreviousState()&&null!==a.getPreviousState().getValue()||null===b.getValue()||(this.m_numberDocumented=Math.min(this.m_children.length,this.m_numberDocumented+1)),0===this.m_numberDocumented?this.updateState((new TermState).setValue(null).setKey("NULL")):this.m_numberDocumented>0&&0===d&&this.updateState((new TermState).setValue(!0).setKey("TRUE"))}},StructureNode.prototype.updateState=function(a){var b=this.getState();a!==b&&(this.setState(a),this.setPreviousState(b),this.getParent()&&this.getParent().notifyStateChange(this)),this.refresh()},StructureNode.prototype.refresh=function(){},StructureNode.prototype.addChild=function(a){a.getParent()!==this&&a.setParent(this),this.getChildren().push(a)},StructureNode.prototype.render=function(a){},StructureNode.prototype.clear=function(){var a,b=this.getChildren();for(a=0;a<b.length;a++)b[a].clear();this.clearSelf()},StructureNode.prototype.clearSelf=function(){this.setActivityId(0),this.m_previousState=null,this.m_state=null,this.m_numberDocumented=0},StructureHtml.prototype.getHtml=function(){return this.m_html},StructureHtml.prototype.append=function(a){return this.m_html+=a,this},StructureOrganizer.prototype=new StructureNode,StructureOrganizer.prototype.constructor=StructureNode,StructureOrganizer.prototype.setIsRendered=function(a){if("boolean"!=typeof a)throw new Error("StructureOrganizer.prototype.setIsRendered expects a boolean.");return this.m_rendered=a,this},StructureOrganizer.prototype.isRendered=function(){return this.m_rendered},StructureOrganizer.prototype.setTemplateRelations=function(a){return this.m_templateRelations=a,this},StructureOrganizer.prototype.getTemplateRelations=function(){return this.m_templateRelations},StructureOrganizer.prototype.setActiveSection=function(a){if(!StructureOrganizer.prototype.isPrototypeOf(a))throw new Error("StructureOrganizer.prototype.setActiveSection expects a jQuery element.");return this.m_activeSection=a,this},StructureOrganizer.prototype.getActiveSection=function(){return this.m_activeSection},StructureOrganizer.prototype.isMultiSection=function(){return this.m_isMultiSection},StructureOrganizer.prototype.setIsMultiSection=function(a){if("boolean"!=typeof a)throw new Error("StructureOrganizer.prototype.setIsMultiSection expects a boolean.");
return this.m_isMultiSection=a,this},StructureOrganizer.prototype.isPriorityEnabled=function(){return this.m_isPriorityEnabled},StructureOrganizer.prototype.setIsPriorityEnabled=function(a){if("boolean"!=typeof a)throw new Error("StructureOrganizer.prototype.setIsPriorityEnabled expects a boolean.");this.m_isPriorityEnabled=a},StructureOrganizer.prototype.setOnDirtyChangeCallback=function(a){if("function"!=typeof a)throw new Error("Attempted to call StructureOrganizer.prototype.setOnDirtyChangeCallback with invalid parameter.");return this.m_onDirtyChangeCallback=a,this},StructureOrganizer.prototype.notifyDirty=function(a){var b=this.getParent();b&&b.notifyDirty(a),b||(a.isDirty()?this.addNodeToDirtyList(a):this.removeNodeFromDirtyList(a),this.updateDirty())},StructureOrganizer.prototype.resetDirty=function(){StructureNode.prototype.resetDirty.call(this);var a=this.getDirtyNodeList();for(var b in a)a.hasOwnProperty(b)&&this.m_lookup[b].resetDirty();this.m_dirtyNodeList={}},StructureOrganizer.prototype.getDirtyNodeList=function(){return this.m_dirtyNodeList||(this.m_dirtyNodeList={}),this.m_dirtyNodeList},StructureOrganizer.prototype.removeNodeFromDirtyList=function(a){this.getDirtyNodeList()[a.getId()]=!1},StructureOrganizer.prototype.addNodeToDirtyList=function(a){this.getDirtyNodeList()[a.getId()]=!0},StructureOrganizer.prototype.getRootElement=function(){return this.m_rootElement&&this.m_rootElement.length||(this.m_isMultiSection?this.m_rootElement=$("#"+this.getNamespace()+"\\:parentOrganizer\\:ROOT\\:"+this.getId()):this.m_rootElement=$("#"+this.getNamespace()+"\\:organizer\\:ROOT\\:"+this.getId())),this.m_rootElement},StructureOrganizer.prototype.getResizeFunction=function(){return this.m_resizeFunction},StructureOrganizer.prototype.setResizeFunction=function(a){if("function"!=typeof a)throw new Error("Called setResizeFunction on StructureOrganizer with invalid parameter resizeFunction");return this.m_resizeFunction=a,this},StructureOrganizer.prototype.getNavigatorElement=function(){return this.m_navigatorElement||(this.m_navigatorElement=$("#"+this.getNamespace()+"\\:navigatorPanel\\:"+this.getId())),this.m_navigatorElement},StructureOrganizer.prototype.navigateToNode=function(a){for(var b="",c=JSON.parse(a),d=0;d<c.length;d++){var e=c[d];e.label?b=b+"label:"+e.label:e.ocid&&(b=b+", ocid:"+e.ocid)}var f=this.findNode(this,this.m_ocid,b);this.goToNode(f,!0,!0)},StructureOrganizer.prototype.goToNode=function(a,b,c){var d,e,f,g,h,i,j=null;return a?(j=a.getParentSectionNode(),j&&StructureOrganizer.prototype.isPrototypeOf(j)?(this.isMultiSection()&&this.getActiveSection()!==j&&$("#"+this.getNamespace()+"\\:tab\\:"+j.getId()).click(),a.isCurrentlyDisplayed()||a.displayNode(),h=j.getContentElement(),i=this.findRenderedRootHighlightElement(a),void(i&&i.length&&(b&&(i.addClass("highlight-navigation"),this.m_previousHighlightedNode=i),d=h.offset().top,e=i.offset().top,f=e+i.height(),g=h.height()||null,!c&&f-d>0&&f-d<=g||h.scrollTop(e-d+h.scrollTop()-(g/2-i.height()/2))))):void logger.logWarning("StructureOrganizer.prototype.navigateToNode: unable to find a section node that is parent to the node that was navigated to.")):void logger.logWarning("StructureOrganizer.prototype.navigateToNode: unable to find the specified node")},StructureOrganizer.prototype.findNode=function(a,b,c){if(c===b)return a;for(var d=0;d<a.getChildren().length;d++){var e,f=a.m_children[d];if(f.inNavigationStructureTree()){var g=b+"label:"+f.m_title,h=f.m_ocid?b+", ocid:"+f.m_ocid:b;e=this.findNode(f,"groupbys"===f.m_type||"subgroupbys"===f.m_type||"subsections"===f.m_type?g:h,c)}else e=this.findNode(f,b,c);if(e)return e}return null},StructureOrganizer.prototype.findRenderedRootHighlightElement=function(a){if(a.getShouldRender())return a.getHighlightElement();var b=this.findRenderedRootHighlightElement(a.getParent());return b?b:null},StructureOrganizer.prototype.clearHighlighter=function(){var a=this.m_previousHighlightedNode;a&&a.removeClass("highlight-navigation")},StructureOrganizer.prototype.resize=function(){this.m_resizeFunction&&this.m_resizeFunction({rootElement:this.getRootElement(),navigatorElement:this.getNavigatorElement(),contentElement:this.getContentElement()})},StructureOrganizer.prototype.getContentElement=function(){return this.m_contentElement||(this.m_contentElement=$("#"+this.getNamespace()+"\\:organizer\\:CONTENT\\:"+this.getId())),this.m_contentElement},StructureOrganizer.prototype.getNavigator=function(){return this.m_navigator},StructureOrganizer.prototype.setNavigator=function(a){if(!Navigator.prototype.isPrototypeOf(a))throw new Error("Attempted to call StructureOrganizer.prototype.setNavigator with invalid parameter.");return this.m_navigator=a,this},StructureOrganizer.prototype.checkIsDirty=function(){var a=this.getDirtyNodeList();for(var b in a)if(a.hasOwnProperty(b)&&a[b])return!0;return!1},StructureOrganizer.prototype.updateDirty=function(){var a=this.m_dirty;this.m_dirty=this.checkIsDirty(),a!==this.m_dirty&&this.m_onDirtyChangeCallback&&this.m_onDirtyChangeCallback(this.m_dirty),this.m_previousHighlightedNode&&this.clearHighlighter()},StructureOrganizer.prototype.getTemplateIds=function(){return this.m_templateIds},StructureOrganizer.prototype.setTemplateIds=function(a){if(!Array.prototype.isPrototypeOf(a))throw new Error("Attempted to call StructureOrganizer.prototype.setTemplateIds with invalid parameter");return this.m_templateIds=a,this},StructureOrganizer.prototype.getReferenceSectionId=function(){return this.m_referenceSectionId},StructureOrganizer.prototype.setReferenceSectionId=function(a){if("number"!=typeof a)throw new Error("Attempted to call StructureOrganizer.prototype.setReferenceSectionId with invalid parameter");return this.m_referenceSectionId=a,this},StructureOrganizer.prototype.parseIdForLookup=function(a){return a.split(":")[3]},StructureOrganizer.prototype.addTermToLookup=function(a){this.getLookup()[a.getId()]=a},StructureOrganizer.prototype.getLookup=function(){return this.m_lookup||(this.m_lookup={}),this.m_lookup},StructureOrganizer.prototype.render=function(a){var b=this.getChildren(),c=b.length,d=this.m_namespace,e=null,f="",g="",h=this.getId();if(this.m_isMultiSection){a.append("<div id='"+d+":parentOrganizer:ROOT:"+this.getId()+"' class='structure-organizer-parent structure-multi-section'>"),a.append("<div id='"+d+"StructureTabParent' class='structure-tab-parent'>"),a.append("<div id='"+d+"StructureTabBlock' class='structure-tab-block'>"),a.append("<div id='"+d+"StructureTabGroupWrapper' class='structure-tab-wrapper'>"),a.append("<ul id='"+d+"StructureTabGroup' class='structure-tab-group'>");for(var i=0;i<c;i++)e=b[i],f=e.getId(),a.append("<li class='structure-tab'><span id='"+d+":tab:"+f+"' data-lookup='"+f+"' class='structure-tab-display"+(0===i?" structure-tab-active":"")+"' title='"+e.getTitle().replace(":","")+"'>"+e.getTitle().replace(":","")+"</span></li>");a.append("</ul></div><li id='"+d+"StructureTabMenuButton' class='structure-tab structure-add-tab'><span>&nbsp;</span></li></div><div class='structure-tab-bottom'></div></div>"),a.append("<div id='"+d+"StructureTabContents' class='structure-tab-contents'>");for(var i=0;i<c;i++)i>0&&(g="style='display:none;'"),a.append("<div id='"+d+":tabContent:"+b[i].getId()+"' class='structure-tab-content' "+g+">"),0===i&&(b[i].render(a,!0),b[i].setIsRendered(!0)),a.append("</div>");a.append("</div>"),a.append("</div>")}else{a.append("<div id='"+d+":organizer:ROOT:"+h+"' class='structure-organizer' data-lookup='"+h+"'><div id='"+d+":navigatorPanel:"+h+"' class='structure-navigator-panel'><div class='structure-navigator-label'>"+i18n.discernabu.mpage_structured_documentation.NAVIGATION+"</div>"+this.getNavigator().render()+"</div><div id='"+d+":organizer:CONTENT:"+h+"' class='structure-body structure-section-body' data-lookup='"+h+"'>");for(var i=0;i<c;i++)b[i].render(a,!0);a.append("<div id='"+d+":structureHeightAdjust:"+h+"' class='structure-height-adjust'></div></div></div>")}return a.getHtml()},StructureOrganizer.prototype.renderHtml=function(){var a=new StructureHtml;return this.render(a),a.getHtml()},StructureOrganizer.prototype.finalize=function(){function a(){g=e.findGroupInView(),g&&e.updateActiveGroup(g)}var b=(new Date).getTime(),c=(new Date).getTime(),d=150,e=this,f=null,g=null;if(this.m_isMultiSection)for(var h=this.getChildren(),i=h.length,j=0;j<i;j++)h[j].isRendered()&&h[j].finalize();else $("#"+this.getNamespace()+"\\:organizer\\:CONTENT\\:"+this.getId()).on("scroll",function(){b=(new Date).getTime(),f&&clearTimeout(f),f=setTimeout(function(){c=b,a()},200),b-c>=d&&(c=b,a())}),this.getNavigator().finalize(),this.adjustContentHeight(),this.getChildren().length&&this.updateActiveGroup(this.getChildren()[0]),this.performNodePostProcessing()},StructureOrganizer.prototype.performNodePostProcessing=function(){var a=function(b){b&&b.postProcessing();for(var c=b.getChildren(),d=c.length,e=0;e<d;e++)a(c[e])};a(this)},StructureOrganizer.prototype.adjustContentHeight=function(){var a=this.getChildren();if(a.length){var b=this.getContentElement();if(b&&b.length){var c=b[0],d=c.offsetHeight,e=$("#"+this.getNamespace()+"\\:structureHeightAdjust\\:"+this.getId()),f=a[a.length-1],g=f.getRootElement().height(),h=12;e.height(Math.max(0,d-g-h))}}},StructureOrganizer.prototype.updateActiveGroup=function(a){this.m_navigator.updateActiveNavigation(this.getNamespace()+":structureNavigation:"+a.getId())},StructureOrganizer.prototype.findGroupInView=function(){function a(a,b,c){return c>=a&&c<=b}function b(a,b,c,d){return c<=a&&d>=b-12}function c(c){return d=g[c],e=d.getRootElement(),f=e.position().top,a(n.midpoint,n.bottom,f)?g[o-1]:a(n.top,n.midpoint,f)?d:b(n.top,n.bottom,f,f+e.height())?d:null}for(var d=null,e=null,f=null,g=this.getChildren(),h=g.length,i=this.getContentElement(),j=i[0],k=j.offsetHeight,l=i.position().top,m=(j.scrollHeight,j.scrollTop,null),n={top:l,midpoint:l+k/2,bottom:l+k},o=0;o<h;o++)if(m=c(o))return m;return null},StructureOrganizer.prototype.convertToJSON=function(){var a=[];a.push('"section_act": {');var b=[];b.push('"dd_section_id": '+this.getActivityId()+".0"),b.push('"dd_sref_section_id": '+this.getReferenceSectionId()+".0");for(var c=this.getTemplateRelations()||[],d=[],e=0;e<c.length;e++)d.push('{"dd_sref_chf_cmplnt_crit_id": '+c[e].dd_sref_chf_cmplnt_crit_id+'.0,"dd_sref_templ_instance_ident": "'+c[e].dd_sref_templ_instance_ident+'","parent_entity_id": '+c[e].parent_entity_id+'.0,"parent_entity_name": "'+c[e].parent_entity_name+'"}');return b.push('"template_rltns": ['+d.join(",")+"]"),this.addChildrenJSON(b),"subsections"===this.getType()?(b.push('"parent_section_id": '+this.getParent().getActivityId()+".0"),"{"+b.join(",")+"}"):(a.push(b.join(",")),a.push("}"),a.join(""))},StructureGroup.prototype=new StructureNode,StructureGroup.prototype.constructor=StructureNode,StructureGroup.prototype.getRootElement=function(){return this.m_rootElement||(this.m_rootElement=$("#"+this.getNamespace()+"\\:group\\:ROOT\\:"+this.getId())),this.m_rootElement},StructureGroup.prototype.convertToJSON=function(){var a=[];return a.push('"dd_groupby_id": '+this.getActivityId()+".0"),a.push('"label": "'+this.getTitle()+'"'),a.push('"truth_state_mean": "T"'),this.addChildrenJSON(a),"{"+a.join(",")+"}"},StructureGroup.prototype.notifyStateChange=function(a){StructureNode.prototype.notifyStateChange.call(this,a);var b=$("#"+this.getNamespace()+"\\:structureNavigation\\:"+this.getId());"groupbys"===this.getType()&&(this.m_numberDocumented&&b.addClass("navigation-documented")||b.removeClass("navigation-documented"))},StructureGroup.prototype.refresh=function(){this.getState()&&this.getState().getValue()?$("#"+this.getNamespace()+"\\:group\\:ROOT\\:"+this.getId()).addClass("documented"):$("#"+this.getNamespace()+"\\:group\\:ROOT\\:"+this.getId()).removeClass("documented")},StructureGroup.prototype.getDefaultRenderChildren=function(){for(var a=this.getChildren(),b=a.length,c=[],d=null,e=0;e<b;e++)d=a[e],d.isDefaultDisplayed()&&c.push(d);return c},StructureGroup.prototype.renderChildren=function(a,b){var c=this.getDefaultRenderChildren(),d=c.length;if(b&&d>1)for(var e=3,f=d/e>=1?e:d,g=Math.floor(d/f),h=d%f,i=0,j=100/f+"%",k=0;k<f;k++){a.append("<div class='structure-column' style='width: "+j+";'>");for(var l=h?g+1:g,m=0;m<l;m++){var n=c[m+i];n.render(a,!1)}i+=m,h=Math.max(0,h-1),a.append("</div>")}else for(var k=0;k<d;k++)c[k].render(a,b)},StructureGroup.prototype.render=function(a,b){a.append("<div id='"+this.getNamespace()+":group:ROOT:"+this.getId()+"' class='structure-group group expanded'><div class='structure-group-header'><div class='structure-group-title-wrapper'><span class='structure-group-title'>"+this.getTitle().replace(":","")+"</span></div></div><div class='structure-group-children'>"),this.renderChildren(a,b),a.append("</div></div>")},StructureGroup.prototype.isExpanded=function(){var a=this.getRootElement();return a.hasClass("expanded")},StructureGroup.prototype.toggleExpand=function(){var a=this.getRootElement(),b=a.hasClass("expanded")?{add:"collapsed",remove:"expanded"}:{add:"expanded",remove:"collapsed"};a.addClass(b.add).removeClass(b.remove),this.onToggleExpand()},StructureGroup.prototype.onToggleExpand=function(){},StructureItemGroup.prototype=new StructureGroup,StructureItemGroup.prototype.constructor=StructureGroup,StructureItemGroup.prototype.convertToJSON=function(){var a=[];return a.push('"dd_item_id": '+this.getActivityId()+".0"),a.push('"ocid": "'+this.getOCID()+'"'),a.push('"truth_state_mean": "T"'),this.addChildrenJSON(a),"{"+a.join(",")+"}"},StructureItemGroup.prototype.getRootElement=function(){return this.m_rootElement&&this.m_rootElement.length||(this.m_rootElement=$("#"+this.getNamespace()+"\\:group\\:ROOT\\:"+this.getId())),this.m_rootElement},StructureItemGroup.prototype.render=function(a,b){this.getShouldRender()&&a.append("<div id='"+this.getNamespace()+":group:ROOT:"+this.getId()+"' class='structure-group item expanded'><div class='structure-group-header item'><span class='structure-component-toggle'></span><span class='structure-group-title'>"+this.getTitle().replace(":","")+"</span></div><div class='structure-group-children'>"),this.renderChildren(a,b),this.getShouldRender()&&a.append("</div></div>")},StructureSubGroup.prototype=new StructureGroup,StructureSubGroup.prototype.constructor=StructureGroup,StructureSubGroup.prototype.convertToJSON=function(){var a=[];return a.push('"dd_sgroupby_id": '+this.getActivityId()+".0"),a.push('"label": "'+this.getTitle()+'"'),a.push('"truth_state_mean": "T"'),this.addChildrenJSON(a),"{"+a.join(",")+"}"},StructureSubGroup.prototype.getRootElement=function(){return this.m_rootElement||(this.m_rootElement=$("#"+this.getNamespace()+"\\:subgroup\\:ROOT\\:"+this.getId())),this.m_rootElement},StructureSubGroup.prototype.render=function(a,b){this.getShouldRender()&&a.append("<div id='"+this.getNamespace()+":subgroup:ROOT:"+this.getId()+"' class='structure-group sub-group expanded'><div class='structure-group-header'><span class='structure-group-title sub-group'>"+this.getTitle().replace(":","")+"</span></div><div class='structure-group-children'>"),this.renderChildren(a,b),this.getShouldRender()&&a.append("</div></div>")},StructureTermGroup.prototype=new StructureGroup,StructureTermGroup.prototype.constructor=StructureGroup,StructureTermGroup.prototype.getActiveTerm=function(){return this.m_activeTerm},StructureTermGroup.prototype.setActiveTerm=function(a){if(!StructureTerm.prototype.isPrototypeOf(a))throw new Error("Called setActiveTerm on StructureTermGroup with invalid activeTerm parameter.");return this.m_activeTerm=a,this},StructureTermGroup.prototype.getPreviousActiveTerm=function(){return this.m_previousActiveTerm},StructureTermGroup.prototype.setPreviousActiveTerm=function(a){if(!StructureTerm.prototype.isPrototypeOf(a))throw new Error("Called setPreviousActiveTerm on StructureTermGroup with invalid activeTerm parameter.");return this.m_previousActiveTerm=a,this},StructureTermGroup.prototype.convertToJSON=function(){var a=[];return a.push('"dd_attribute_id": '+this.getActivityId()+".0"),a.push('"ocid": "'+this.getOCID()+'"'),a.push('"truth_state_mean": "T"'),this.addDescendentJSON(a),"{"+a.join(",")+"}"},StructureTermGroup.prototype.isShowMore=function(){return this.m_isShowMore},StructureTermGroup.prototype.setIsShowMore=function(a){if("boolean"!=typeof a)throw new Error("Called setIsShowMore on StructureNode with invalid showMore paramater");this.m_isShowMore=a},StructureTermGroup.prototype.hasShownMore=function(){return this.m_hasShownMore},StructureTermGroup.prototype.setHasShownMore=function(a){if("boolean"!=typeof a)throw new Error("Called setHasShownMore on StructureNode with invalid hasShownMore paramater");this.m_hasShownMore=a},StructureTermGroup.prototype.getChildrenWithPriority=function(a){var b=this.getChildren(),c=[];return c=$.grep(b,function(b,c){return b.getPriority&&b.getPriority()===a})},StructureTermGroup.prototype.notifyStateChange=function(a){StructureNode.prototype.notifyStateChange.call(this,a),this.handleTermActivity(a)},StructureTermGroup.prototype.handleTermActivity=function(a){this.performNoneTermUpdates(a)},StructureTermGroup.prototype.performNoneTermUpdates=function(a){var b=this.getNoneTerm(),c=null,d=null,e=this,f=null;if(b){if(f=b.getState()&&b.getState().getValue(),a!==b&&a.getState()&&a.getState().getValue()&&f)b.deactivate();else if(f)if(c=this.getActiveFreeTextTerm(),c.length){var d=c[0].getState().getValue();d&&(this.setPreviousActiveTerm(this.m_activeTerm),this.launchRemoveFreeTextWarning(function(){e.deactivateTerms()}))}else this.deactivateTerms();this.m_activeTerm=a}},StructureTermGroup.prototype.getUnshownDocumentedCount=function(){for(var a=this.getChildrenWithPriority(2),b=a.length,c=0,d=0;d<b;d++){var e=a[d];e.getChildren().length?c+=e.getNumberOfDocumentedChildren():e.getState()&&e.getState().getValue()&&c++}return c},StructureTermGroup.prototype.updateUnshownDocumentedCount=function(){var a=this.getDocumentedCountContainer(),b=this.getUnshownDocumentedCount();b&&!this.isShowMore()?(a.html(b),a.addClass("shown")):(a.empty(),a.removeClass("shown"))},StructureTermGroup.prototype.getDocumentedCountContainer=function(){return this.m_documentedCountContainer&&this.m_documentedCountContainer.length||(this.m_documentedCountContainer=$("#documentedCountContainer"+this.getId())),this.m_documentedCountContainer},StructureTermGroup.prototype.getActiveFreeTextTerm=function(a){var b=this.filterTerms(function(a){return!(!FreeTextStructureTerm.prototype.isPrototypeOf(a)||!a.getState())&&null!==a.getState().getValue()});return b},StructureTermGroup.prototype.getNoneTerm=function(a){return this.m_noneTerm||(this.m_noneTerm=this.filterTerms(function(a){return NoneStructureTerm.prototype.isPrototypeOf(a)})[0]),this.m_noneTerm},StructureTermGroup.prototype.deactivateTerms=function(){for(var a=this.filterTerms(function(a){return!(NoneStructureTerm.prototype.isPrototypeOf(a)||!a.getState())&&null!==a.getState().getValue()}),b=0;b<a.length;b++){var c=a[b];c.deactivate()}},StructureTermGroup.prototype.filterTerms=function(a){if("function"!=typeof a)throw new Error("Called filterTerms on the StructureTermGroup with an invalid callback function");for(var b=[],c=this.getAllDescendents([]),d=0;d<c.length;d++)a(c[d])&&b.push(c[d]);return b},StructureTermGroup.prototype.launchRemoveFreeTextWarning=function(a){if("function"!=typeof a)throw new Error("Called launchRemoveFreeTextWarning on the StructureTermGroup with an invalid callback function");var b=this,c="removeFreeText"+this.getId(),d=null,e=null,f=MP_ModalDialog.retrieveModalDialogObject(c);f||(f=new ModalDialog(c),f.setShowCloseIcon(!1),f.setHeaderTitle(i18n.discernabu.mpage_structured_documentation.REMOVE_FREE_TEXT_HEADER),f.setLeftMarginPercentage(35).setRightMarginPercentage(35).setTopMarginPercentage(20).setIsBodySizeFixed(!1).setIsFooterAlwaysShown(!0),e=new ModalButton("removeModal"),e.setFocusInd(!0).setCloseOnClick(!0),e.setOnClickFunction(a),e.setText(i18n.discernabu.mpage_structured_documentation.REMOVE),f.addFooterButton(e),d=new ModalButton("cnlModal"),d.setText(i18n.discernabu.mpage_structured_documentation.CANCEL),d.setOnClickFunction(function(){b.cancelFreeTextBtnCallback()}),f.addFooterButton(d),f.setBodyDataFunction(function(a){a.setBodyHTML("<div class='structure-remove-free-text-warning'><span>"+i18n.discernabu.mpage_structured_documentation.REMOVE_FREE_TEXT_WARNING+"</span></div>")}),MP_ModalDialog.addModalDialogObject(f)),MP_ModalDialog.showModalDialog(c)},StructureTermGroup.prototype.cancelFreeTextBtnCallback=function(){var a="removeFreeText"+this.getId();this.getActiveTerm().jumpToState(0),this.setActiveTerm(this.getPreviousActiveTerm()),MP_ModalDialog.closeModalDialog(a),MP_ModalDialog.deleteModalDialogObject(a)},StructureTermGroup.prototype.render=function(a,b){this.getShouldRender()&&a.append("<div id='"+this.getNamespace()+":group:ROOT:"+this.getId()+"' class='structure-group item expanded'><div class='structure-group-header item'><span class='structure-group-title'>"+this.getTitle()+"</span></div><div class='structure-group-children'>"),this.renderChildren(a,b),this.getShouldRender()&&(a.append("</div>"),this.renderShowMore(a),a.append("</div>"))},StructureTermGroup.prototype.renderShowMore=function(a){var b=i18n.discernabu.mpage_structured_documentation,c=this.getOrganizer();if(c.isPriorityEnabled()){var d=b.SHOW_MORE;this.getChildrenWithPriority(2).length&&a.append("<div class='show-more-link-container'><a id='showMoreLink"+this.getId()+"' class='show-more-link'>"+d+"</a><div id='documentedCountContainer"+this.getId()+"' class='documented-count'></div></div>")}else this.setIsShowMore(!0)},StructureTermGroup.prototype.getUnprioritizedContentContainer=function(){return this.m_unprioritizedContent&&this.m_unprioritizedContent.length||(this.m_unprioritizedContent=$("#unprioritizedContent"+this.getId())),this.m_unprioritizedContent},StructureTermGroup.prototype.getShowMoreLinkContainer=function(){return this.m_showMoreLinkContainer&&this.m_showMoreLinkContainer.length||(this.m_showMoreLinkContainer=$("#showMoreLink"+this.getId())),this.m_showMoreLinkContainer},StructureTermGroup.prototype.showMore=function(){var a=i18n.discernabu.mpage_structured_documentation,b=$(this.getRootElement()),c=this.getUnprioritizedContentContainer(),d=this.getDefaultRenderChildren(),e=d.length,f=e?d[e-1]:null,g=null;if(f&&(g=$(f.getRootElement())),b.length){if(this.hasShownMore())c.show();else{var h=new StructureHtml;this.renderUnprioritizedSectionHtml(h),g&&g.length?g.after(h.getHtml()):b.find(".structure-group-children").prepend(h.getHtml()),this.setHasShownMore(!0)}this.getShowMoreLinkContainer().text(a.SHOW_LESS),this.setIsShowMore(!0)}},StructureTermGroup.prototype.showLess=function(){var a=i18n.discernabu.mpage_structured_documentation,b=this.getUnprioritizedContentContainer();b.hide(),this.getShowMoreLinkContainer().text(a.SHOW_MORE),this.setIsShowMore(!1);var c=this.getOrganizer();c.goToNode(this,!1)},StructureTermGroup.prototype.toggleShowMore=function(){this.isShowMore()?this.showLess():this.showMore(),this.updateUnshownDocumentedCount()},StructureTermGroup.prototype.renderUnprioritizedSectionHtml=function(a){var b=this.getChildrenWithPriority(2),c=b.length,d="";if(c!==this.getChildren().length&&(d="structured-has-shown-terms"),c){a.append("<div id='unprioritizedContent"+this.getId()+"' class='unprioritized-terms "+d+"'>");for(var e=0;e<c;e++)b[e].render(a,!1);a.append("</div>")}},SingleStructureTermGroup.prototype=new StructureTermGroup,SingleStructureTermGroup.prototype.constructor=StructureTermGroup,SingleStructureTermGroup.prototype.handleTermActivity=function(a){StructureTermGroup.prototype.handleTermActivity.call(this,a);var b=a.getState().getValue(),c=this,d=this.getActiveFreeTextTerm();b&&(a!==this.m_activeTerm&&this.m_activeTerm&&(d.length&&d[0]===this.m_activeTerm?(this.setPreviousActiveTerm(this.m_activeTerm),c.launchRemoveFreeTextWarning(function(){d[0].deactivate()})):this.m_activeTerm.deactivate()),this.m_activeTerm=a)},SingleStructureTermGroup.prototype.clearSelf=function(){StructureTermGroup.prototype.clearSelf.call(this),this.m_activeTerm=null},MultiStructureTermGroup.prototype=new StructureTermGroup,MultiStructureTermGroup.prototype.constructor=StructureTermGroup,YesNoStructureTermGroup.prototype=new StructureTermGroup,YesNoStructureTermGroup.prototype.constructor=StructureTermGroup,TableStructureTermGroup.prototype=new SingleStructureTermGroup,TableStructureTermGroup.prototype.constructor=TableStructureTermGroup;JSONStructureOrganizerBuilder.extendClassMethods(TableStructureTermGroup,CycleStructureTerm,["setCaption","getCaption","addState","getCurrentState","setCurrentState","getStates","cycleState","jumpToState","deactivate","refresh","getComment","setComment","setSavedComment","buildTextArea","displayComment","checkIsDirty","getRootElement","getSavedComment","resetDirty","setPriority","getPriority","setUIValue","getUIValue","displayNode","isDefaultDisplayed","isCurrentlyDisplayed"]);TableStructureTermGroup.prototype.checkIsDirty=function(){return!1},TableStructureTermGroup.prototype.convertToJSON=function(){},TableStructureTermGroup.prototype.render=function(a){var b="",c="",d=this.m_state?this.m_state.getCSSClass():"";this.getComment()&&(c="<div class='structure-term-comment-wrapper'>"+this.buildTextArea()+"</div>",b="comment "),a.append("<div id='"+this.getNamespace()+":term:ROOT:"+this.getId()+"' class='structure-term-item table-group-term "+b+d+"' title='"+this.getCaption()+"'><div class='structure-term-info-wrapper'><span class='structure-term-title'>"+this.getTitle()+"</span><span class='structure-comment'>&nbsp;</span></div><div class='structure-table-group-terms'>"),this.renderChildren(a,!1),a.append("</div>"+c+"</div>")},TableStructureTermGroup.prototype.handleTermActivity=function(a){SingleStructureTermGroup.prototype.handleTermActivity.call(this,a);var b=this.getActiveTerm(),c=b?b.getState():null;c?this.updateState(c):this.jumpToState(0),this.refresh()},TableStructureTermGroup.prototype.notifyStateChange=function(a){StructureTermGroup.prototype.notifyStateChange.call(this,a),this.getParent()&&this.getParent().notifyStateChange(a)},TableStructureTermGroup.prototype.updateState=function(a){var b=this.getState();a!==b&&(this.setState(a),this.setPreviousState(b)),this.refresh()},TableStructureTermGroup.prototype.clearSelf=function(){SingleStructureTermGroup.prototype.clearSelf.call(this),CycleStructureTerm.prototype.clearSelf.call(this)},ExpandStructureTermGroup.prototype=new StructureTermGroup,ExpandStructureTermGroup.prototype.constructor=ExpandStructureTermGroup,JSONStructureOrganizerBuilder.extendClassMethods(ExpandStructureTermGroup,CycleStructureTerm,["setCaption","getCaption","addState","getCurrentState","setCurrentState","getStates","cycleState","jumpToState","deactivate","refresh","checkIsDirty","getRootElement","resetDirty","setPriority","getPriority","displayNode","isDefaultDisplayed","isCurrentlyDisplayed","setUIValue","getUIValue","postProcessing"]),JSONStructureOrganizerBuilder.extendClassMethods(ExpandStructureTermGroup,TableStructureTermGroup,["convertToJSON","updateState","notifyStateChange","checkIsDirty"]),ExpandStructureTermGroup.prototype.render=function(a){a.append("<div class ='structure-group expand-group collapsed' id='"+this.getNamespace()+":term:ROOT:"+this.getId()+"'><div class ='structure-group-header'> <span class='structure-component-toggle'></span><span class='structure-group-title' title ='"+this.getCaption()+"'>"+this.getTitle()+"</span><div id='documentedExpandCountContainer"+this.getId()+"' class='documented-count'></div></div><div class='structure-group-children'>"),this.renderChildren(a,!1),this.getShouldRender()&&this.getDefaultRenderChildren()!==this.getChildren()&&this.renderShowMore(a),a.append("</div></div>")},ExpandStructureTermGroup.prototype.getDefaultRenderChildren=function(){var a=StructureGroup.prototype.getDefaultRenderChildren.call(this);return a.length||(a=this.getChildren(),this.setIsShowMore(!0)),a},ExpandStructureTermGroup.prototype.updateExpandDocumentedCount=function(){var a=this.getDocumentedExpandCountContainer(),b=this.getNumberOfDocumentedChildren();this.isExpanded()||!b?(a.empty(),a.removeClass("shown")):(a.html(b),a.addClass("shown"))},ExpandStructureTermGroup.prototype.getDocumentedExpandCountContainer=function(){return this.m_documentedExpandCountContainer&&this.m_documentedExpandCountContainer.length||(this.m_documentedExpandCountContainer=$("#documentedExpandCountContainer"+this.getId())),this.m_documentedExpandCountContainer},ExpandStructureTermGroup.prototype.onToggleExpand=function(){this.updateExpandDocumentedCount()},TermState.prototype.getValue=function(){return this.m_value},TermState.prototype.setValue=function(a){return this.m_value=a,this},TermState.prototype.getCSSClass=function(){return this.m_cssClass},TermState.prototype.setCSSClass=function(a){if("string"!=typeof a)throw new Error("Attempted to call TermState.prototype.setCSSClass with invalid parameter.");return this.m_cssClass=a,this},TermState.prototype.getKey=function(){return this.m_key},TermState.prototype.setKey=function(a){return this.m_key=a,this},TermState.prototype.getData=function(){return this.m_data},TermState.prototype.setData=function(a){return this.m_data=a,this},TermState.prototype.addData=function(a,b){return this.m_data[a]=b,this},TermState.prototype.getDataValue=function(a){return this.m_data[a]||(this.m_data[a]={}),this.m_data[a]},StructureTerm.prototype=new StructureNode,StructureTerm.prototype.constructor=StructureNode,StructureTerm.prototype.getComment=function(){return this.m_comment},StructureTerm.prototype.setComment=function(a){if("string"!=typeof a)throw new Error("Attempted to call StructureTerm.prototype.setComment with invalid parameter.");return this.m_comment=a,this},StructureTerm.prototype.getPriority=function(){return this.m_priority},StructureTerm.prototype.isDefaultDisplayed=function(){var a=2,b=this.getPriority(),c=this.getOrganizer();return!c||!c.isPriorityEnabled()||b!==a},StructureTerm.prototype.isCurrentlyDisplayed=function(){var a=this.getParent(),b=2,c=this.getPriority();return!(!(!StructureTermGroup.prototype.isPrototypeOf(a)||a.isCurrentlyDisplayed()&&a.isShowMore()||c!==b)||ExpandStructureTermGroup.prototype.isPrototypeOf(a)&&!a.isExpanded())},StructureTerm.prototype.displayNode=function(){var a=this.getParent();StructureTermGroup.prototype.isPrototypeOf(a)&&!a.isShowMore()&&a.toggleShowMore(),a.isCurrentlyDisplayed()||a.displayNode(),ExpandStructureTermGroup.prototype.isPrototypeOf(a)&&!a.isExpanded()&&a.toggleExpand()},StructureTerm.prototype.postProcessing=function(){var a=this;a.getState()&&a.getState().getValue()&&!a.isCurrentlyDisplayed()&&a.displayNode()},StructureTerm.prototype.setPriority=function(a){if("number"!=typeof a)throw new Error("Attempted to call StructureTerm.prototype.setPriority with invalid paramater.");this.m_priority=a},StructureTerm.prototype.setUIValue=function(a){this.m_uiValue=a},StructureTerm.prototype.getUIValue=function(){return this.m_uiValue},StructureTerm.prototype.getSavedComment=function(){return this.m_savedComment},StructureTerm.prototype.setSavedComment=function(a){if("string"!=typeof a)throw new Error("Attempted to call StructureTerm.prototype.setComment with invalid parameter.");return this.m_savedComment=a,this},StructureTerm.prototype.buildTextArea=function(){var a="<textarea id='comment"+this.getNamespace()+this.getId()+"' class='term-textarea textarea-fill' type='text' title='Add Comment' placeholder='Add Comment'>"+this.getComment()+"</textarea>";return a},StructureTerm.prototype.displayComment=function(a){var b=a?this.unescapePlaintextAsHtml(a):a+"";this.setComment(b),this.setSavedComment(b);var c=this.getRootElement(),d=c.children("div.structure-term-comment-wrapper");c.length>0&&d.length<1&&(d="<div class='structure-term-comment-wrapper'>"+this.buildTextArea()+"</div>",
c.append(d)),c.addClass("comment")},StructureTerm.prototype.getCaption=function(){return this.m_caption},StructureTerm.prototype.setCaption=function(a){if("string"!=typeof a)throw new Error("Attempted to call StructureTerm.prototype.setCaption with invalid parameter.");return this.m_caption=a,this},StructureTerm.prototype.convertToJSON=function(){var a=this.getComment(),b=[];return b.push('"dd_attr_menu_item_id": '+this.getActivityId()+".0"),b.push('"ocid": "'+this.getOCID()+'"'),b.push('"display_seq": '+this.getDisplayPosition()),b.push('"truth_state_mean": "'+(this.getState().getValue()?"T":"F")+'"'),b.push('"comment": "'+(a?this.escapePlaintextAsHtml(a):a)+'"'),b.push('"comment_format_mean": "XHTML"'),b.push('"value_text": ""'),b.push('"value_text_format_mean": "XHTML"'),b.push('"value_number": 0.0'),"{"+b.join(",")+"}"},StructureTerm.prototype.updateState=function(a){StructureNode.prototype.updateState.call(this,a),this.updateDirty()},StructureTerm.prototype.getRootElement=function(){return this.m_rootElement&&this.m_rootElement.length||(this.m_rootElement=$("#"+this.getNamespace()+"\\:term\\:ROOT\\:"+this.getId())),this.m_rootElement},StructureTerm.prototype.checkIsDirty=function(){return this.getState()!==this.getInitialState()},StructureTerm.prototype.updateDirty=function(){var a=this.m_dirty;this.m_dirty=this.checkIsDirty(),a!==this.m_dirty&&this.getParent().notifyDirty(this)},StructureTerm.prototype.resetDirty=function(){StructureNode.prototype.resetDirty.call(this),this.setInitialState(this.getState())},StructureTerm.prototype.render=function(a){a.append("<div>"+this.getTitle()+"</div>")},StructureTerm.prototype.deactivate=function(){},StructureTerm.prototype.refresh=function(){this.m_state!==this.m_previousState&&$("#"+this.getNamespace()+"\\:term\\:ROOT\\:"+this.getId()).removeClass(this.m_previousState?this.m_previousState.getCSSClass():"").addClass(this.m_state.getCSSClass())},LineStructureTerm.prototype=new StructureTerm,LineStructureTerm.prototype.constructor=StructureTerm,LineStructureTerm.prototype.render=function(a){a.append("<div id='"+this.getNamespace()+":term:ROOT:"+this.getId()+"' class='structure-term-item line-term'></div>")},CycleStructureTerm.prototype=new StructureTerm,CycleStructureTerm.prototype.constructor=StructureTerm,CycleStructureTerm.prototype.getCurrentState=function(){return this.m_currentState},CycleStructureTerm.prototype.setCurrentState=function(a){if("number"!=typeof a)throw new Error("Called setCurrentState on CycleStructureTerm with invalid currentState parameter.");if(a<0||a>=this.m_states.length)throw new Error("Called setCurrentState on CycleStructureTerm with an invalid state index.");return this.m_currentState=a,this},CycleStructureTerm.prototype.addState=function(a){if(!TermState.prototype.isPrototypeOf(a))throw new Error("Called addState on CycleStructureTerm with invalid state parameter.");return this.getStates().push(a),this},CycleStructureTerm.prototype.getStates=function(){return this.m_states||(this.m_states=[]),this.m_states},CycleStructureTerm.prototype.cycleState=function(){this.m_currentState=(this.m_currentState+1)%this.m_states.length,this.updateState(this.m_states[this.m_currentState])},CycleStructureTerm.prototype.jumpToState=function(a){this.m_currentState=a%this.m_states.length,this.updateState(this.m_states[this.m_currentState])},CycleStructureTerm.prototype.deactivate=function(){this.m_currentState=0,this.updateState(this.m_states[this.m_currentState])},CycleStructureTerm.prototype.render=function(a){var b="",c="",d=this.m_state?this.m_state.getCSSClass():"";this.getComment()&&(c="<div class='structure-term-comment-wrapper'>"+this.buildTextArea()+"</div>",b="comment "),a.append("<div id='"+this.getNamespace()+":term:ROOT:"+this.getId()+"' class='structure-term-item cycle-term "+b+d+"' title='"+this.getCaption()+"'><div class='structure-term-info-wrapper'><span class='structure-term-title'>"+this.getTitle()+"</span><span class='structure-comment'>&nbsp;</span></div><div class='structure-documented-icon-area'></div>"+c+"</div>")},CycleStructureTerm.prototype.clearSelf=function(){StructureTerm.prototype.clearSelf.call(this),this.deactivate()},YesNoStructureTerm.prototype=new CycleStructureTerm,YesNoStructureTerm.prototype.constructor=CycleStructureTerm,YesNoStructureTerm.prototype.render=function(a){var b="",c="",d=this.m_state?this.m_state.getCSSClass()+" "+this.getYesNoValue():"";this.getComment()&&(c="<div class='structure-term-comment-wrapper'>"+this.buildTextArea()+"</div>",b="comment "),a.append("<div id='"+this.getNamespace()+":term:ROOT:"+this.getId()+"' class='structure-term-item cycle-term yes-no "+b+d+"' title='"+this.getCaption()+"'><div class='structure-term-info-wrapper'><span class='structure-term-title'>"+this.getTitle()+"</span><span class='structure-comment'>&nbsp;</span></div><div id='"+this.getNamespace()+":term:YES:"+this.getId()+"' class='structure-yes-no-icon structure-yes'>Y</div><div id='"+this.getNamespace()+":term:NO:"+this.getId()+"' class='structure-yes-no-icon structure-no'>N</div>"+c+"</div>")},YesNoStructureTerm.prototype.getYesNoValue=function(){return this.m_state&&null!==this.m_state.getValue()?this.m_state.getValue()?"yes":"no":""},YesNoStructureTerm.prototype.refresh=function(){StructureTerm.prototype.refresh.call(this);var a=$("#"+this.getNamespace()+"\\:term\\:ROOT\\:"+this.getId());this.getState()&&this.getState().getValue()===!0?a.addClass("yes").removeClass("no"):this.getState()&&this.getState().getValue()===!1?a.addClass("no").removeClass("yes"):a.removeClass("yes").removeClass("no")},InputStructureTerm.prototype=new StructureTerm,InputStructureTerm.prototype.constructor=StructureTerm,InputStructureTerm.prototype.getDataType=function(){return this.m_dataType},InputStructureTerm.prototype.setDataType=function(a){if("string"!=typeof a)throw new Error("Called setDataType on InputStructureTerm with invalid dataType parameter.");return this.m_dataType=a,this},InputStructureTerm.prototype.getPreviousValue=function(){return this.m_previousValue},InputStructureTerm.prototype.resetDirty=function(){StructureTerm.prototype.resetDirty.call(this),this.m_previousValue=this.m_currentValue},InputStructureTerm.prototype.checkIsDirty=function(){var a=this.getState()===this.getActiveState(),b=this.getInitialState()===this.getInactiveState(),c=this.getCurrentValue(),d=this.getPreviousValue();return b&&a||!b&&a&&c!==d||!b&&!a},InputStructureTerm.prototype.convertToJSON=function(){var a=this.getCurrentValue(),b=this.getComment(),c=[];return c.push('"dd_attr_menu_item_id": '+this.getActivityId()+".0"),c.push('"ocid": "'+this.getOCID()+'"'),c.push('"display_seq": '+this.getDisplayPosition()),c.push('"truth_state_mean": "'+(this.getState().getValue()?"T":"F")+'"'),c.push('"comment": "'+(b?this.escapePlaintextAsHtml(b):b)+'"'),c.push('"comment_format_mean": "XHTML"'),c.push('"value_text": "'+(a?this.escapePlaintextAsHtml(a):a)+'"'),c.push('"value_text_format_mean": "XHTML"'),"NUMERIC"===this.m_dataType?(a=parseFloat(this.getCurrentValue()),a%1===0&&(a+=".0"),c.push('"value_number": '+a)):c.push('"value_number": 0.0'),"{"+c.join(",")+"}"},InputStructureTerm.prototype.getCurrentValue=function(){return this.m_currentValue},InputStructureTerm.prototype.update=function(){this.validate()?(this.m_isValid=!0,""!==this.m_currentValue?(this.getActiveState().addData("value",this.m_currentValue),this.updateState(this.m_activeState)):this.updateState(this.m_inactiveState)):(this.m_isValid=!1,this.updateState(this.m_inactiveState))},InputStructureTerm.prototype.refresh=function(){StructureTerm.prototype.refresh.call(this);var a=$("#"+this.getNamespace()+"\\:term\\:INPUT\\:"+this.getId());this.getCurrentValue()!==a.val()&&a.val(this.getCurrentValue()),this.m_isValid?$("#"+this.getNamespace()+"\\:term\\:ROOT\\:"+this.getId()).removeClass("invalid"):$("#"+this.getNamespace()+"\\:term\\:ROOT\\:"+this.getId()).addClass("invalid")},InputStructureTerm.prototype.setCurrentValue=function(a){if("string"!=typeof a)throw new Error("Called setCurrentValue on InputStructureTerm with invalid type: expected {String}");return this.m_currentValue=a,this},InputStructureTerm.prototype.deactivate=function(){this.setCurrentValue(""),this.updateState(this.m_inactiveState)},InputStructureTerm.prototype.clearSelf=function(){StructureTerm.prototype.clearSelf.call(this),this.deactivate()},InputStructureTerm.prototype.getValidators=function(){return this.m_validators||(this.m_validators=[]),this.m_validators},InputStructureTerm.prototype.addValidator=function(a){if(!InputValidator.prototype.isPrototypeOf(a))throw new Error("Called addValidator on InputStructureTerm with invalid type, expected InputValidator");return this.getValidators().push(a),this},InputStructureTerm.prototype.validate=function(){var a=this.getCurrentValue();if(""==a)return!0;for(var b=this.getValidators(),c=b.length,d=0;d<c;d++)if(!b[d].validate(a))return!1;return!0},InputStructureTerm.prototype.render=function(a){var b="",c="",d=this.getTitle(),e="45%",f=this.escapePlaintextAsHtml(this.m_currentValue),g="<input style='width: "+e+";' type='text' id='"+this.getNamespace()+":term:INPUT:"+this.getId()+"' value='"+f+"'>";if(d.indexOf("_")===-1&&(d+="_"),0===d.indexOf("_"))d=g+"<span class='structure-term-title' style='width: "+e+";'>"+d.replace(/_/g,"")+"</span>";else if(d.lastIndexOf("_")===d.length-1)d="<span class='structure-term-title' style='width: "+e+";'>"+d.replace(/_/g,"")+"</span>"+g;else{var h=d.split(/_+/g),i=0,j=0;for(j=0;j<h.length;j++)h[j]&&i++;for(e=90/(i+1)+"%",g="<input style='width: "+e+";' type='text' id='"+this.getNamespace()+":term:INPUT:"+this.getId()+"' value='"+f+"'>",j=0;j<h.length;j++)h[j]&&(h[j]="<span class='structure-term-title' style='width: "+e+";'>"+h[j]+"</span>");d=h.join(g)}var k=this.m_state?this.m_state.getCSSClass():"";this.getComment()&&(c="<div class='structure-term-comment-wrapper'>"+this.buildTextArea()+"</div>",b="comment "),a.append("<div id='"+this.getNamespace()+":term:ROOT:"+this.getId()+"' class='structure-term-item input-term "+b+k+"' title='"+this.getCaption()+"'><div class='structure-term-info-wrapper'>"+d+"<span class='structure-comment'>&nbsp;</span></div><div class='structure-documented-icon-area'></div>"+c+"</div>")},InputStructureTerm.prototype.getActiveState=function(){return this.m_activeState},InputStructureTerm.prototype.setActiveState=function(a){if(!TermState.prototype.isPrototypeOf(a))throw new Error("Attempted to call InputStructureTerm.prototype.setActiveState with invalid parameter");return this.m_activeState=a,this},InputStructureTerm.prototype.getInactiveState=function(){return this.m_inactiveState},InputStructureTerm.prototype.setInactiveState=function(a){if(!TermState.prototype.isPrototypeOf(a))throw new Error("Attempted to call InputStructureTerm.prototype.setInactiveState with invalid parameter.");return this.m_inactiveState=a,this},FreeTextStructureTerm.prototype=new InputStructureTerm,FreeTextStructureTerm.prototype.constructor=InputStructureTerm,FreeTextStructureTerm.prototype.render=function(a){var b=this.m_state?this.m_state.getCSSClass():"",c=this.escapePlaintextAsHtml(this.m_currentValue);a.append("<div id='"+this.getNamespace()+":term:ROOT:"+this.getId()+"' class='structure-term-item input-term freetext-term "+b+"' title='"+this.getCaption()+"'><div class='structure-term-info-wrapper'><input type='text' id='"+this.getNamespace()+":term:INPUT:"+this.getId()+"' value='"+c+"' placeholder='"+i18n.discernabu.mpage_structured_documentation.ADD_FREE_TEXT_TERM+"'></div></div>")},NoneStructureTerm.prototype=new CycleStructureTerm,NoneStructureTerm.prototype.constructor=CycleStructureTerm,TableStructureTerm.prototype=new CycleStructureTerm,TableStructureTerm.prototype.constructor=CycleStructureTerm,TableStructureTerm.prototype.render=function(a){var b=this.m_state?this.m_state.getCSSClass():"",c=100/this.getParent().getChildren().length+"%";a.append("<div id='"+this.getNamespace()+":term:ROOT:"+this.getId()+"' class='table-term "+b+"' title='"+this.getCaption()+"'  style='width: "+c+";'><div class='structure-documented-icon-area'>"+this.getUIValue()+"</div></div>")},TableStructureTerm.prototype.isDefaultDisplayed=function(){return!0},TableStructureTerm.prototype.getComment=function(){var a=this.getParent(),b=a.getComment();return a.getActiveTerm()===this?(this.setComment(b),b):(this.setComment(""),"")},TableStructureTerm.prototype.getSavedComment=function(){var a=this.getParent();return a.getSavedComment()},TableStructureTerm.prototype.displayComment=function(a){var b=a?this.unescapePlaintextAsHtml(a):a+"";this.setComment(b),this.setSavedComment(b);var c=this.getParent();c.displayComment(a)},TableStructureTerm.prototype.getHighlightElement=function(){var a=this.getParent();return a.getHighlightElement()},TableStructureTerm.prototype.isDefaultDisplayed=function(){return!0},TableStructureTerm.prototype.isCurrentlyDisplayed=function(){var a=this.getParent();return a.isCurrentlyDisplayed()},TableStructureTerm.prototype.displayNode=function(){var a=this.getParent();a.displayNode()},Navigator.prototype.getClickCallback=function(){return this.m_clickCallback},Navigator.prototype.setClickCallback=function(a){if("function"!=typeof a)throw new Error("Attempted to call setClickCallback with invalid parameter");return this.m_clickCallback=a,this},Navigator.prototype.applyCustomSkin=function(a){if("string"!=typeof a)throw new Error("Attempted to call applyCustomSkin with invalid parameter.");return this.m_skin=a,this},Navigator.prototype.getCustomSkin=function(){return this.m_skin},Navigator.prototype.getActiveNavigation=function(){return this.m_activeNavigation},Navigator.prototype.setActiveNavigation=function(a){if(!Navigation.prototype.isPrototypeOf(a))throw new Error("Attempted to call setActiveNavigation with invalid parameter.");return this.m_activeNavigation=a,this},Navigator.prototype.getId=function(){return this.m_id},Navigator.prototype.setId=function(a){if("string"!=typeof a)throw new Error("Attempted to call setId with invalid parameter.");return this.m_id=a,this},Navigator.prototype.getNavigations=function(){return this.m_navigations||(this.m_navigations=[]),this.m_navigations},Navigator.prototype.setNavigations=function(a){if(!Array.prototype.isPrototypeOf(a))throw new Error("Attempted to call setNavigations with invalid parameter.");return this.m_navigations=a,this},Navigator.prototype.addNavigation=function(a){if(!Navigation.prototype.isPrototypeOf(a))throw new Error("Attempted to call addNavigation with invalid parameter.");return this.getNavigations().push(a),this.getNavigationMap()[a.getId()]=a,this},Navigator.prototype.getNavigationMap=function(){return this.m_navigationMap||(this.m_navigationMap={}),this.m_navigationMap},Navigator.prototype.render=function(){var a="",b=this.getNavigations(),c=b.length;a+="<div id='"+this.getId()+"' class='"+this.getCustomSkin()+" structure-navigator'>";for(var d=0;d<c;d++)a+=b[d].render();return a+="</div>"},Navigator.prototype.finalize=function(){var a=this,b=this.getId().replace(/:/g,"\\:");$("#"+b).on("click",".navigator-button",function(){a.handleNavigationSelection(this.id)})},Navigator.prototype.updateActiveNavigation=function(a){var b=this.getNavigationMap()[a];b&&b!==this.getActiveNavigation()&&(this.getActiveNavigation()&&this.getActiveNavigation().deselect(),b.getElement().addClass("active"),this.setActiveNavigation(b))},Navigator.prototype.handleNavigationSelection=function(a){var b=this.getNavigationMap()[a];b&&b!==this.getActiveNavigation()&&(this.getActiveNavigation()&&this.getActiveNavigation().deselect(),this.setActiveNavigation(b),b.onSelect(),this.m_clickCallback&&this.m_clickCallback(b))},Navigation.prototype.getElement=function(){return this.m_element||(this.m_element=$("#"+this.getId().replace(/\:/g,"\\:"))),this.m_element},Navigation.prototype.getId=function(){return this.m_id},Navigation.prototype.setId=function(a){if("string"!=typeof a)throw new Error("Attempted to call Navigation.prototype.setId with invalid parameter.");return this.m_id=a,this},Navigation.prototype.getLabel=function(){return this.m_label},Navigation.prototype.setLabel=function(a){if("string"!=typeof a)throw new Error("Attempted to call Navigation.prototype.setLabel with invalid parameter.");return this.m_label=a,this},Navigation.prototype.onSelect=function(){this.getElement().addClass("active")},Navigation.prototype.deselect=function(){this.getElement().removeClass("active").blur()},Navigation.prototype.render=function(){return"<button id='"+this.getId()+"' class='navigator-button'>"+this.getLabel()+"</button>"},ScrollNavigation.prototype=new Navigation,ScrollNavigation.prototype.constructor=Navigation,ScrollNavigation.prototype.getAnchorId=function(){return this.m_anchorId},ScrollNavigation.prototype.setAnchorId=function(a){if("string"!=typeof a)throw new Error("Attempted to call ScrollNavigation.prototype.setAnchorId with invalid parameter.");return this.m_anchorId=a,this},ScrollNavigation.prototype.getAnchorElement=function(){return this.m_anchorElement||(this.m_anchorElement=$("#"+this.getAnchorId().replace(/:/g,"\\:"))),this.m_anchorElement},ScrollNavigation.prototype.getContainerId=function(){return this.m_containerId},ScrollNavigation.prototype.setContainerId=function(a){if("string"!=typeof a)throw new Error("Attempted to call ScrollNavigation.prototype.setContainerId with invalid parameter.");return this.m_containerId=a,this},ScrollNavigation.prototype.getContainerElement=function(){return this.m_containerElement||(this.m_containerElement=$("#"+this.getContainerId().replace(/:/g,"\\:"))),this.m_containerElement},ScrollNavigation.prototype.onSelect=function(){Navigation.prototype.onSelect.call(this);var a=this.getContainerElement(),b=this.getAnchorElement();a.scrollTop(b.offset().top-a.offset().top+a.scrollTop())},CallbackNavigation.prototype=new Navigation,CallbackNavigation.prototype.constructor=Navigation,CallbackNavigation.prototype.setOnSelect=function(a){if("function"!=typeof a)throw new Error("Attempted to call CallbackNavigation.prototype.setOnSelect with invalid parameter.");return this.m_onSelect=a,this},CallbackNavigation.prototype.onSelect=function(){Navigation.prototype.onSelect.call(this),this.m_onSelect&&this.m_onSelect()},StructureNavigation.prototype=new ScrollNavigation,StructureNavigation.prototype.constructor=ScrollNavigation,StructureNavigation.prototype.setNode=function(a){return this.m_node=a,this},StructureNavigation.prototype.render=function(){var a=this.m_node&&this.m_node.getNumberOfDocumentedChildren()>0?" navigation-documented":"";return"<div id='"+this.getId()+"' class='navigator-button structure-navigator-button"+a+"'><span>"+this.getLabel()+"</span><div class='navigation-documented-icon'></div></div>"},StructureQuestionSet.prototype=new StructureGroup,StructureQuestionSet.prototype.constructor=StructureGroup,StructureQuestionSet.prototype.getLookup=function(){return this.m_lookup||(this.m_lookup={}),this.m_lookup},StructureQuestionSet.prototype.getAnswers=function(){for(var a=[],b=this.getChildren(),c=b.length,d=null,e=null,f=null,g=null,h=0;h<c;h++){d=b[h],e=d.getChildren(),f=e.length;for(var i=0;i<f;i++)g=e[i],g.getState().getValue()&&a.push({parent_entity_id:d.getParentEntityId()+".0",parent_entity_name:d.getParentEntityName(),dd_sref_chf_cmplnt_crit_id:g.getTemplateId()+".0"})}return JSON.stringify(a)},StructureQuestionSet.prototype.setOnCompleteCallback=function(a){if("function"!=typeof a)throw new Error("StructureQuestionSet.prototype.setOnCompleteCallback expects a function");return this.m_onCompleteCallback=a,this},StructureQuestionSet.prototype.getRootElement=function(){return this.m_rootElement&&this.m_rootElement.length||(this.m_rootElement=$("#"+this.m_namespace+"StructureQuestionSet")),this.m_rootElement},StructureQuestionSet.prototype.notifyStateChange=function(a){StructureNode.prototype.notifyStateChange.call(this,a),this.m_numberDocumented===this.m_children.length?this.m_onCompleteCallback&&this.m_onCompleteCallback(!0):this.m_onCompleteCallback(!1)},StructureQuestionSet.prototype.render=function(){var a=new StructureHtml;return a.append("<div id='"+this.m_namespace+"StructureQuestionSet' class='structure-question-set' data-lookup='"+this.m_id+"'>"),this.renderChildren(a,!1),a.append("</div>"),a.getHtml()},StructureQuestion.prototype=new MultiStructureTermGroup,StructureQuestion.prototype.constructor=MultiStructureTermGroup,StructureQuestion.prototype.setParentEntityId=function(a){if("number"!=typeof a)throw new Error("StructureQuestion.prototype.setParentEntityId expects a number.");return this.m_parentEntityId=a,this},StructureQuestion.prototype.setParentEntityName=function(a){if("string"!=typeof a)throw new Error("StructureQuestion.prototype.setParentEntityName expects a string.");return this.m_parentEntityName=a,this},StructureQuestion.prototype.getParentEntityId=function(){return this.m_parentEntityId},StructureQuestion.prototype.getParentEntityName=function(){return this.m_parentEntityName},StructureQuestion.prototype.setQuestionDisplay=function(a){if("string"!=typeof a)throw new Error("StructureQuestion.prototype.setQuestionDisplay expects a string.");return this.m_questionDisplay=a,this},StructureQuestion.prototype.setDiagnosisGroup=function(a){if("number"!=typeof a)throw new Error("StructureQuestion.prototype.setDiagnosisGroup expects a number.");return this.m_diagnosisGroup=a,this},StructureQuestion.prototype.render=function(a,b){a.append("<div class='structure-question' data-lookup='"+this.m_id+"'>"),a.append("<div>"+this.m_questionDisplay+"</div>"),this.renderChildren(a,!1),a.append("</div>")},StructureAnswer.prototype=new CycleStructureTerm,StructureAnswer.prototype.constructor=CycleStructureTerm,StructureAnswer.prototype.setTemplateId=function(a){if("number"!=typeof a)throw new Error("StructureAnswer.prototype.setAnswerId expects a number.");return this.m_templateId=a,this},StructureAnswer.prototype.getTemplateId=function(){return this.m_templateId},StructureAnswer.prototype.getRootElement=function(){return this.m_rootElement&&this.m_rootElement.length||(this.m_rootElement=$("#"+this.m_namespace+"Answer"+this.m_id)),this.m_rootElement},StructureAnswer.prototype.refresh=function(){this.m_state!==this.m_previousState&&this.getRootElement().removeClass(this.m_previousState.getCSSClass()).addClass(this.m_state.getCSSClass())},StructureAnswer.prototype.setAnswerDisplay=function(a){if("string"!=typeof a)throw new Error("");return this.m_answerDisplay=a,this},StructureAnswer.prototype.render=function(a,b){a.append("<div id='"+this.m_namespace+"Answer"+this.m_id+"' class='structure-answer' data-lookup='"+this.m_id+"'><input class='structure-answer-box' type='checkbox' data-lookup='"+this.m_id+"'><span class='structure-answer-display' data-lookup='"+this.m_id+"'>"+this.m_answerDisplay+"</span></div>")},StructureTermController.prototype.attach=function(a){throw new Error("Attempted to call StructureTermController.prototype.attach, method must be implemented by sub-class")},InputStructureTermController.prototype=new StructureTermController,InputStructureTermController.prototype.constructor=StructureTermController,InputStructureTermController.prototype.attach=function(a){var b=a.getRootElement();b.on("keyup","div.input-term input",function(){var b=a.getLookup()[a.parseIdForLookup($(this).attr("id"))];b.setCurrentValue($(this).val()),b.update()}),b.on("click","div.input-term input",function(){var b=a.getLookup()[a.parseIdForLookup($(this).attr("id"))];$(this).val()&&b.update()})},CycleStructureTermController.prototype=new StructureTermController,CycleStructureTermController.prototype.constructor=StructureTermController,CycleStructureTermController.prototype.attach=function(a){var b=a.getRootElement();b.on("click","div.cycle-term >.structure-documented-icon-area, div.cycle-term >.structure-term-info-wrapper",function(b){if(!$(b.target).hasClass("structure-comment")){var c=a.getLookup()[a.parseIdForLookup($(this).closest(".structure-term-item").attr("id"))];c.cycleState();var d=$(this).closest(".structure-term-item");if(c.getComment()){var e=$(this).siblings("div.structure-term-comment-wrapper");d.addClass("comment"),e.length<1&&(e="<div class='structure-term-comment-wrapper'>"+c.buildTextArea()+"</div>",d.append(e))}else d.removeClass("comment")}}),b.on("click","span.structure-comment",function(b){var c=$(this).closest(".structure-term-info-wrapper"),d=$(c).siblings("div.structure-term-comment-wrapper"),e=$(this).closest(".structure-term-item");if(e.addClass("comment"),d.length<1){var f=a.getLookup()[a.parseIdForLookup($(this).closest(".structure-term-item").attr("id"))];d="<div class='structure-term-comment-wrapper'>"+f.buildTextArea()+"</div>",e.append(d)}$(e).find("textarea")[0].focus()}),b.on("focusout","div.structure-term-comment-wrapper",function(b){var c=a.getLookup()[a.parseIdForLookup($(this).closest(".structure-term-item").attr("id"))],d=$(this).find("textarea").val(),e=$(this).closest(".structure-term-item");""===d&&e.removeClass("comment"),c.setComment(d),c.checkIsDirty()||(c.getComment()!==c.getSavedComment()?(c.m_dirty=!0,c.notifyDirty(c)):(c.m_dirty=!1,c.notifyDirty(c)))})},YesNoStructureTermController.prototype=new StructureTermController,YesNoStructureTermController.prototype.constructor=StructureTermController,YesNoStructureTermController.prototype.attach=function(a){a.getRootElement().on("click","div.structure-yes, div.structure-no",function(b){var c=a.getLookup()[a.parseIdForLookup($(this).attr("id"))],d=c.getParent(),e=d.getChildren()[0];NoneStructureTerm.prototype.isPrototypeOf(e)&&e===c&&e.jumpToState(0);var f=$(this).hasClass("structure-yes")?1:2,g=c.getCurrentState();c.jumpToState(f===g?0:f);var h=$(this).closest(".structure-term-item");if(c.getComment()){var i=$(this).siblings("div.structure-term-comment-wrapper");h.addClass("comment"),i.length<1&&(i="<div class='structure-term-comment-wrapper'>"+c.buildTextArea()+"</div>",h.append(i))}else h.removeClass("comment")})},StructureGroupController.prototype=new StructureTermController,StructureGroupController.prototype.constructor=StructureTermController,StructureGroupController.prototype.attach=function(a){a.getRootElement().on("click",".structure-component-toggle, .structure-component-toggle + .structure-group-title",function(b){var c=$(this).parents(".structure-group").first(),d=a.getLookup()[a.parseIdForLookup($(c).attr("id"))];d.toggleExpand()})},TableTermController.prototype=new StructureTermController,TableTermController.prototype.constructor=StructureTermController,TableTermController.prototype.attach=function(a){var b=a.getRootElement();b.on("click","div.table-term >.structure-documented-icon-area",function(b){var c=a.getLookup()[a.parseIdForLookup($(this).closest(".table-term").attr("id"))];c.cycleState()})},StructureTabController.prototype=new StructureTermController,StructureTabController.prototype.constructor=StructureTermController,StructureTabController.prototype.getStructureTabGroup=function(){return this.m_$structureTabGroup&&this.m_$structureTabGroup.length||(this.m_$structureTabGroup=$("#"+this.m_organizer.getNamespace()+"StructureTabGroup")),this.m_$structureTabGroup},StructureTabController.prototype.getStructureTabParent=function(){return this.m_$structureTabParent&&this.m_$structureTabParent.length||(this.m_$structureTabParent=$("#"+this.m_organizer.getNamespace()+"StructureTabParent")),this.m_$structureTabParent},StructureTabController.prototype.getStructureTabWrapper=function(){return this.m_$structureTabWrapper&&this.m_$structureTabWrapper.length||(this.m_$structureTabWrapper=$("#"+this.m_organizer.getNamespace()+"StructureTabGroupWrapper")),this.m_$structureTabWrapper},StructureTabController.prototype.getStructureTabMenuButton=function(){return this.m_$structureTabMenuButton&&this.m_$structureTabMenuButton.length||(this.m_$structureTabMenuButton=$("#"+this.m_organizer.getNamespace()+"StructureTabMenuButton")),this.m_$structureTabMenuButton},StructureTabController.prototype.resize=function(){var a=this.getStructureTabParent(),b=this.getStructureTabWrapper(),c=b[0],d=this.getStructureTabMenuButton(),e=8;c.style.width=a[0].offsetWidth-d[0].offsetWidth-e+"px"},StructureTabController.prototype.disableActiveTab=function(a,b){b.removeClass("structure-tab-active");var c=a.getLookup()[b.attr("data-lookup")];c&&(this.m_scrollMap[c.getId()]=c.getContentElement().scrollTop(),c.getRootElement().closest(".structure-tab-content").hide())};StructureTabController.prototype.restoreScrollPosition=function(a){var b=this.m_scrollMap[a.getId()];"undefined"!=typeof b&&a.getContentElement().scrollTop(b)};StructureTabController.prototype.attach=function(a){this.m_organizer=a;var b=a.getNamespace(),c=null,d=$("#"+b+"StructureTabGroup"),e=d.find(".structure-tab-display"),f=this.getStructureTabWrapper(),g=null,h=this,i=null,j=null,k=0,l=a.getRootElement().closest(".structured-documentation-view"),m=8;this.resize();var n=function(a){return function(){var b=e.eq(a);b.click();var c=b.closest(".structure-tab").position().left+f.scrollLeft();f.scrollLeft(c-m)}};a.getRootElement().on("click",".structure-tab-group .structure-tab .structure-tab-display",function(c){var e=a.getLookup()[$(this).attr("data-lookup")];if(e&&e!==a.getActiveSection()){if(l.css("overflow-y","hidden"),!e.isRendered()){var f=$("#"+b+"\\:tabContent\\:"+e.getId());f.html(e.renderHtml()),e.finalize(),e.setIsRendered(!0),e.getParent().resize()}e.getRootElement().closest(".structure-tab-content").show(),h.disableActiveTab(a,d.find(".structure-tab-active")),$(this).addClass("structure-tab-active"),e.adjustContentHeight(),a.setActiveSection(e),h.restoreScrollPosition(e),k=$(this).closest(".structure-tab").index(),i&&j&&(j[k].setIsSelected(!0),g&&g.setIsSelected(!1),g=j[k]),l.css("overflow-y","auto")}}),a.getRootElement().on("click",".structure-add-tab",function(d){i=MP_MenuManager.getMenuObject(b+"structureAddTab"),i&&MP_MenuManager.deleteMenuObject(b+"structureAddTab"),i=new Menu(b+"structureAddTab"),i.setTypeClass("menu-page-menu structure-tab-menu"),i.setIsRootMenu(!0),i.setAnchorElementId(b+"StructureTabMenuButton"),i.setAnchorConnectionCorner(["bottom","right"]),i.setContentConnectionCorner(["top","right"]),i.setLabel("");for(var e=a.getChildren(),f=e.length,h=null,l=0;l<f;l++)h=e[l],c=new MenuSelection(b+"structureSectionTab"+h.getId()),c.setLabel(h.getTitle()),c.setCloseOnClick(!0),c.setClickFunction(n(l)),l===k&&(c.setIsSelected(!0),g=c),i.addMenuItem(c);j=i.getMenuItemArray(),MP_MenuManager.addMenuObject(i),MP_MenuManager.showMenu(b+"structureAddTab")})},StructureTermGroupController.prototype.attach=function(a){var b=a.getRootElement();b.on("click","a.show-more-link",function(){var b=$(this).closest(".structure-group"),c=a.getLookup()[a.parseIdForLookup(b.attr("id"))];c.toggleShowMore()})},StructureManager.prototype.setNamespace=function(a){if("string"!=typeof a)throw new Error("StructureManager.prototype.setNamespace expects a string.");return this.m_namespace=a,this},StructureManager.prototype.setOnDirtyChangeCallback=function(a){if("function"!=typeof a)throw new Error("StructureManager.prototype.setOnDirtyChangeCallback expects a function.");return this.m_onDirtyChangeCallback=a,this},StructureManager.prototype.setOpenExistingFunction=function(a){if("function"!=typeof a)throw new Error("StructureManager.prototype.setOpenExistingFunction expects a function.");return this.m_openExistingFunction=a,this},StructureManager.prototype.setQueryTemplateFunction=function(a){if("function"!=typeof a)throw new Error("StructureManager.prototype.setQueryTemplateFunction expects a function.");return this.m_queryTemplateFunction=a,this},StructureManager.prototype.setOpenExistingCheckFunction=function(a){if("function"!=typeof a)throw new Error("StructureManager.prototype.setOpenExistingCheckFunction expects a function.");return this.m_openExistingCheckFunction=a,this},StructureManager.prototype.setOrganizerResizeFunction=function(a){
if("function"!=typeof a)throw new Error("StructureManager.prototype.setResizeFunction expects a function");return this.m_resizeFunction=a,this},StructureManager.prototype.resize=function(){var a=this;setTimeout(function(){a.m_organizer&&a.m_organizer.resize(),a.m_tabController&&a.m_tabController.resize()},100)},StructureManager.prototype.onAddTemplateClick=function(){this.m_$addTemplateButton.prop("disabled",!0),this.m_answers=this.m_questionSet.getAnswers(),this.completeRefresh()},StructureManager.prototype.shouldOpenExisting=function(){if(!this.m_openExistingCheckFunction)throw new Error("StructureManager.prototype.shouldOpenExisting function expects you to have set an open existing check function.");return this.m_openExistingCheckFunction()},StructureManager.prototype.completeRefresh=function(){this.resetReplyData(),this.shouldOpenExisting()?this.openExisting():this.queryTemplate()},StructureManager.prototype.render=function(){var a=this,b=this.m_namespace,c=$("<div id='"+b+"StructureView' class='structured-documentation-view content-body'></div>");this.m_$structureManagerContainer=c;var d=$("<div id='"+b+"QuestionContainer' class='structure-question-container'></div>").hide();this.m_$questionContainer=d;var e=$("<button id='"+b+"AddTemplateButton' class='structure-add-template-btn' disabled>Add Template(s)</button>");e.click(function(){a.onAddTemplateClick()}),this.m_$addTemplateButton=e,d.append(e),d.append($("<div class='structure-question-info-icon'></div>"));var f=$("<div id='"+b+"QuestionContents' class='structure-question-contents'></div>");d.append(f),this.m_$questionContents=f,c.append(d);var g=$("<div id='"+b+"StructureContainer'></div>").hide();this.m_$structureContainer=g;var h=$("<div id='"+b+"StructureOrganizerContents'></div>");this.m_$structureOrganizerContents=h,g.append(h),c.append(g);var i=$("<div id='"+b+"StructureMessageContainer'></div>").hide();return this.m_$messageContainer=i,c.append(i),"S"!==this.m_status?(this.showStructureErrorMessage(i18n.discernabu.documentation_base.STRUCTURED_DOC_UNAVAILABLE),c):(this.hasQuestions()?this.showQuestions():this.hasStructuredContent()?this.showStructure():this.showStructureErrorMessage(i18n.discernabu.documentation_base.STRUCTURED_TEMPLATES_NOT_FOUND),c)},StructureManager.prototype.renderInto=function(a){a.append(this.render()),this.attachQuestionDelegates(),this.mergeActivity(),this.finalizeStructure()},StructureManager.prototype.attachQuestionDelegates=function(){var a=this;this.m_$questionContainer.on("change",".structure-answer-box",function(b){var c=$(this).attr("data-lookup"),d=a.m_questionSet.getLookup()[c];return d?void d.cycleState():void logger.logWarning("StructureDocumentationView.prototype.finalizeQuestions: could not find answer node with id = "+c)}),this.m_$questionContainer.on("click",".structure-answer-display",function(b){var c=$(this).attr("data-lookup"),d=a.m_questionSet.getLookup()[c];return d?(d.cycleState(),void $(this).siblings(".structure-answer-box").prop("checked",!!d.getState().getValue())):void logger.logWarning("StructureDocumentationView.prototype.finalizeQuestions: could not find answer node with id = "+c)})},StructureManager.prototype.refresh=function(){return"S"!==this.m_status?(this.m_$structureContainer.hide(),this.m_$questionContainer.hide(),void this.showStructureErrorMessage(i18n.discernabu.documentation_base.STRUCTURED_DOC_UNAVAILABLE)):void(this.hasQuestions()?(this.m_$structureContainer.hide(),this.m_$messageContainer.hide(),this.showQuestions()):this.hasStructuredContent()?(this.m_$questionContainer.hide(),this.m_$messageContainer.hide(),this.showStructure(),this.mergeActivity(),this.finalizeStructure()):(this.m_$structureContainer.hide(),this.m_$questionContainer.hide(),this.showStructureErrorMessage(i18n.discernabu.documentation_base.STRUCTURED_TEMPLATES_NOT_FOUND)))},StructureManager.prototype.navigateToNode=function(a){return a?this.m_organizer?void this.m_organizer.navigateToNode(a):void logger.logWarning("StructureManager.prototype.navigateToNode: attempted to navigate to node without a structure organizer object."):void logger.logWarning("StructureManager.prototype.navigateToNode expects navigation data.")},StructureManager.prototype.finalizeStructure=function(){var a=this.m_organizer;if(a&&(a.setResizeFunction(this.m_resizeFunction),a.setOnDirtyChangeCallback(this.m_onDirtyChangeCallback),a.finalize(),(new CycleStructureTermController).attach(a),(new InputStructureTermController).attach(a),(new StructureGroupController).attach(a),(new YesNoStructureTermController).attach(a),(new TableTermController).attach(a),(new StructureTermGroupController).attach(a),a.isMultiSection())){var b=new StructureTabController;b.attach(a),this.m_tabController=b}},StructureManager.prototype.hasStructuredContent=function(){return null!==this.m_referenceData&&this.m_referenceData.length>0},StructureManager.prototype.hasQuestions=function(){return null!==this.m_questionData},StructureManager.prototype.generateQuestionSet=function(){var a=this,b=this.m_questionData;return this.m_questionSet=(new JSONStructureOrganizerBuilder).setNamespace(this.m_namespace).buildQuestionSet(b),this.m_questionSet.setOnCompleteCallback(function(b){a.m_$addTemplateButton.prop("disabled",!b)}),this.m_questionSet},StructureManager.prototype.finalize=function(){this.finalizeStructure(),this.attachQuestionDelegates()},StructureManager.prototype.showQuestions=function(){var a=this.m_$questionContainer;a.show();var b=this.generateQuestionSet();this.m_$questionContents.html(b.render()),this.m_$addTemplateButton.prop("disabled",!0)},StructureManager.prototype.showStructure=function(){this.m_$structureContainer.show();var a=this.m_$structureOrganizerContents,b=new JSONStructureOrganizerBuilder;b.setNamespace(this.m_namespace),b.setStructureJSON(this.m_referenceData[0]);var c=b.buildStructureTree();this.m_organizer=c,a.html(c.renderHtml())},StructureManager.prototype.showStructureErrorMessage=function(a){this.m_$messageContainer.html(a),this.m_$messageContainer.show()},StructureManager.prototype.setReplyData=function(a){this.setStatus(a.status||"F"),this.setReferenceData(a.section_ref||null),this.setActivityData(a.section_act||null),a.user_options&&a.user_options.length?this.setQuestionData(a.user_options):this.setQuestionData(null)},StructureManager.prototype.resetDirty=function(){this.m_organizer&&this.m_organizer.resetDirty()},StructureManager.prototype.resetReplyData=function(){this.m_replyData=null,this.m_referenceData=null,this.m_activityData=null,this.m_questionData=null,this.m_status="F"},StructureManager.prototype.setStatus=function(a){if("string"!=typeof a)throw new Error("StructureManager.prototype.setStatus expects a string (S/F/Z)");return this.m_status=a,this},StructureManager.prototype.setReferenceData=function(a){return this.m_referenceData=a,this},StructureManager.prototype.setActivityData=function(a){return this.m_activityData=a,this},StructureManager.prototype.setQuestionData=function(a){return this.m_questionData=a,this},StructureManager.prototype.mergeActivity=function(){if(this.m_organizer&&this.m_activityData){var a=new JSONStructureOrganizerBuilder;a.update(this.m_organizer,this.m_activityData),this.resetDirty()}},StructureManager.prototype.queryTemplate=function(){if(!this.m_queryTemplateFunction)return void logger.logError("StructureManager.prototype.queryTemplate: No query template function provided.");var a=this,b={USER_OPTION_RESPONSES:this.m_answers};this.m_queryTemplateFunction(b,function(b){a.m_answers=null,a.setReplyData(b),a.refresh()})},StructureManager.prototype.openExisting=function(){if(!this.m_openExistingFunction)return void logger.logError("StructureManager.prototype.openExisting: No open existing function provided.");var a=this,b={USER_OPTION_RESPONSES:this.m_answers};this.m_openExistingFunction(b,function(b){a.m_answers=null,a.setReplyData(b),a.refresh()})},InputValidator.prototype.validate=function(a){return!0},InputValidator.prototype.getMessage=function(){return""},DataTypeValidator.ALPHA_TYPE="ALPHA",DataTypeValidator.ALPHA_REGEX=/^[a-zA-Z0-9 `~!@#$%^&*()_+-=,.<>?;:''"{}|\\\/\[\]]*$/,DataTypeValidator.NUMERIC_TYPE="NUMERIC",DataTypeValidator.NUMERIC_REGEX=/^[-]?[0-9]*[.]?[0-9]*$/,DataTypeValidator.prototype=new InputValidator,DataTypeValidator.prototype.constructor=InputValidator,DataTypeValidator.prototype.getDataType=function(){return this.m_dataType},DataTypeValidator.prototype.setDataType=function(a){switch(this.m_dataType=a,a){case DataTypeValidator.NUMERIC_TYPE:this.m_dataRegex=DataTypeValidator.NUMERIC_REGEX;break;case DataTypeValidator.ALPHA_TYPE:default:this.m_dataType=DataTypeValidator.ALPHA_TYPE,this.m_dataRegex=DataTypeValidator.ALPHA_REGEX}return this},DataTypeValidator.prototype.getMessage=function(){var a="";switch(this.m_dataType){case DataTypeValidator.NUMERIC_TYPE:a="Number (+- 0-9)";break;case DataTypeValidator.ALPHA_TYPE:default:a="Alphabetical and Numeric"}return"<span class='term-info-item'>This field accepts only {0} characters</span>".replace("{0}",a)},DataTypeValidator.prototype.validate=function(a){return this.m_dataRegex.test(a)},DataTypeValidator.prototype.getDataRegex=function(){return this.m_dataRegex},DataTypeValidator.prototype.setDataRegex=function(a){if(!RegExp.prototype.isPrototypeOf(a))throw new Error("Cannot set regex with non regex type");return this.m_dataRegex=a,this},DataRangeValidator.prototype=new InputValidator,DataRangeValidator.prototype.constructor=InputValidator,DataRangeValidator.prototype.getMessage=function(){return"<span class='term-info-item'>Number must be between {0} and {1}</span>".replace("{0}",this.m_minValue).replace("{1}",this.m_maxValue)},DataRangeValidator.prototype.validate=function(a){try{var b=parseFloat(a);if(isNaN(b))throw new Error("Input is not a number type, cannot validate");return b<=this.m_maxValue&&b>=this.m_minValue}catch(a){return!1}},DataRangeValidator.prototype.setMinValue=function(a){if("number"!=typeof a)throw new Error("Cannot setMinValue with non number type");if(a>this.m_maxValue)throw new Error("Cannot set a minValue greater than the max value");return this.m_minValue=a,this},DataRangeValidator.prototype.setMaxValue=function(a){if("number"!=typeof a)throw new Error("Cannot setMaxValue with non number type");if(a<this.m_minValue)throw new Error("Cannot set a maxValue less than the min value");return this.m_maxValue=a,this};var MP_ModalDialog={};MP_ModalDialog.modalDialogObjects={},MP_ModalDialog.whiteSpacePixels=26,MP_ModalDialog.addModalDialogObject=function(a){var b="";return a instanceof ModalDialog?(b=a.getId())?this.modalDialogObjects[b]?(logger.logError("MP_ModalDialog.addModalDialogObject: modal dialog id "+b+" is already in use"),!1):(this.modalDialogObjects[b]=a,!0):(logger.logError("MP_ModalDialog.addModalDialogObject: no/invalid ModalDialog id given"),!1):(logger.logError("MP_ModalDialog.addModalDialogObject only accepts objects of type ModalDialog"),!1)},MP_ModalDialog.addModalDialogOptionToViewpoint=function(a,b){var c=null;return c=this.modalDialogObjects[a],!!c&&("undefined"!=typeof MP_Viewpoint&&"undefined"!=typeof MP_Viewpoint.addModalDialogUtility?(MP_Viewpoint.addModalDialogUtility(c,b),!0):void 0)},MP_ModalDialog.closeModalDialog=function(a){var b=null;return!!(b=this.modalDialogObjects[a])&&($("#vwpModalDialog"+b.getId()).remove(),$("#vwpModalBackground"+b.getId()).remove(),b.setIsActive(!1),$("body").css("overflow","auto"),!0)},MP_ModalDialog.deleteModalDialogObject=function(a){return!!this.modalDialogObjects[a]&&(delete this.modalDialogObjects[a],!0)},MP_ModalDialog.retrieveModalDialogObject=function(a){return this.modalDialogObjects[a]?this.modalDialogObjects[a]:null},MP_ModalDialog.resizeAllModalDialogs=function(){var a=null,b="";for(b in MP_ModalDialog.modalDialogObjects)MP_ModalDialog.modalDialogObjects.hasOwnProperty(b)&&(a=MP_ModalDialog.modalDialogObjects[b],a.isActive()&&MP_ModalDialog.resizeModalDialog(a.getId()))},MP_ModalDialog.resizeModalDialog=function(a){var b=0,c=0,d=0,e=0,f=0,g=0,h="",i="",j=null;return(j=this.modalDialogObjects[a])?j.isActive()?(b=$(window).height(),c=$(document.body).width(),d=Math.floor(b*(j.getTopMarginPercentage()/100)),e=Math.floor(c*(j.getLeftMarginPercentage()/100)),f=Math.floor(b*(j.getBottomMarginPercentage()/100)),g=Math.floor(c*(j.getRightMarginPercentage()/100)),h=c-e-g,i=b-d-f,$("#vwpModalDialog"+j.getId()).css({top:d,left:e,width:h+"px"}),j.isBodySizeFixed()?($("#vwpModalDialog"+j.getId()).css("height",i+"px"),$("#"+j.getBodyElementId()).height(i-$("#"+j.getHeaderElementId()).height()-$("#"+j.getFooterElementId()).height()-this.whiteSpacePixels)):($("#vwpModalDialog"+j.getId()).css("max-height",i+"px"),$("#"+j.getBodyElementId()).css("max-height",i-$("#"+j.getHeaderElementId()).height()-$("#"+j.getFooterElementId()).height()-this.whiteSpacePixels+"px")),void $("#vwpModalBackground"+j.getId()).css({height:"100%",width:"100%"})):void logger.logError("MP_ModalDialog.resizeModalDialog: this modal dialog is not active it cannot be resized"):void logger.logError("MP_ModalDialog.resizeModalDialog: No modal dialog with the id "+a+" exists")},MP_ModalDialog.showModalDialog=function(a){function b(a,b){var c=a.getOnClickFunction(),d=a.closeOnClick();return c||(c=function(){}),function(){c(),d&&MP_ModalDialog.closeModalDialog(b)}}var c=null,d=null,e=0,f=null,g=null,h=0,i=0,j="",k=null,l=[],m=0,n=null,o=null,p=0,q=null,r=null,s="",t="",u=0,v=0,w=0,x=null,y="";if(r=this.modalDialogObjects[a],!r)return void logger.logError("MP_ModalDialog.showModalDialog: No modal dialog with the id "+a+" exists");if(!r.isActive()){if(o=$("<div id='"+r.getHeaderElementId()+"' class='dyn-modal-hdr-container'><span class='dyn-modal-hdr-title'>"+(r.getHeaderTitle()||"&nbsp;")+"</span></div>"),r.showCloseIcon()&&o.append($("<span class='dyn-modal-hdr-close'></span>").click(function(){var a=null,b=!0;a=r.getHeaderCloseFunction(),a&&(b=a()),r.verifyCloseFunctionResponse()?b&&MP_ModalDialog.closeModalDialog(r.getId()):MP_ModalDialog.closeModalDialog(r.getId())})),c=$("<div id='"+r.getBodyElementId()+"' class='dyn-modal-body-container'></div>"),l=r.getFooterButtons(),m=l.length,x=r.getFooterCheckbox(),y=r.getFooterText(),m||x.enabled||""!==y){if(k=$("<div id='"+r.getFooterElementId()+"' class='dyn-modal-footer-container'></div>"),x.enabled){var z=$("<label class='dyn-modal-checkbox-container' id='"+x.elementId+"'></label>"),A=$("<input type='checkbox' class='dyn-modal-checkbox'"+(x.isChecked?" checked":"")+">");A.click(x.onClick),z.append(A),z.append("<span class='dyn-modal-checkbox-label'>"+x.label+"</span>"),k.append(z)}if(m){for(n=$("<div id='"+r.getFooterElementId()+"btnCont' class='dyn-modal-button-container'></div>"),w=0;w<m;w++)f=l[w],n.append($("<button id='"+f.getId()+"' class='dyn-modal-button'"+(f.isDithered()?" disabled":"")+">"+f.getText()+"</button>").click(b(f,r.getId()))),f.getSeparatorInd()&&n.append("<span class='dyn-modal-button-separator'></span>"),j||(j=f.getFocusInd()?f.getId():"");k.append(n)}""!==y&&k.append("<span id='"+r.getFooterTextElementId()+"' class='dyn-modal-footer-text'>"+y+"</span>")}else r.isFooterAlwaysShown()&&(k=$("<div id='"+r.getFooterElementId()+"' class='dyn-modal-footer-container'></div>"));h=$(window).height(),i=$(document.body).width(),v=Math.floor(h*(r.getTopMarginPercentage()/100)),p=Math.floor(i*(r.getLeftMarginPercentage()/100)),e=Math.floor(h*(r.getBottomMarginPercentage()/100)),u=Math.floor(i*(r.getRightMarginPercentage()/100)),t=i-p-u,s=h-v-e,g=$("<div id='vwpModalDialog"+r.getId()+"' class='dyn-modal-dialog'></div>").css({top:v,left:p,width:t+"px"}),g.append(o).append(c).append(k),q=$("<div id='vwpModalBackground"+r.getId()+"' class='"+(r.hasGrayBackground()?"dyn-modal-div":"dyn-modal-div-clear")+"'></div>").height($(document).height()),r.hasGrayBackground()||q.click(function(){var a=$("#vwpModalDialog"+r.getId());a.fadeOut(100),a.fadeIn(100)}),$(document.body).append(q).append(g),j&&$("#"+j).focus(),$("body").css("overflow","hidden"),r.isBodySizeFixed()?($(g).css("height",s+"px"),$(c).height(s-$(o).height()-$(k).height()-this.whiteSpacePixels)):($(g).css("max-height",s+"px"),$(c).css("max-height",s-$(o).height()-$(k).height()-this.whiteSpacePixels+"px")),r.setIsActive(!0),d=r.getBodyDataFunction(),d&&d(r),$(window).resize(this.resizeAllModalDialogs)}},MP_ModalDialog.updateModalDialogObject=function(a){var b="";return a&&a instanceof ModalDialog?(b=a.getId(),void(this.modalDialogObjects[b]=a)):void logger.logError("MP_ModalDialog.updateModalDialogObject only accepts objects of type ModalDialog")},ModalButton.prototype.closeOnClick=function(){return this.m_closeOnClick},ModalButton.prototype.isDithered=function(){return this.m_dithered},ModalButton.prototype.getId=function(){return this.m_buttonId},ModalButton.prototype.getCloseOnClick=function(){return this.m_closeOnClick},ModalButton.prototype.getFocusInd=function(){return this.m_focusInd},ModalButton.prototype.getText=function(){return this.m_buttonText},ModalButton.prototype.getOnClickFunction=function(){return this.m_onClickFunction},ModalButton.prototype.getSeparatorInd=function(){return this.m_separatorInd},ModalButton.prototype.setId=function(a){return a&&"string"==typeof a&&(this.m_buttonId=a),this},ModalButton.prototype.setCloseOnClick=function(a){return"boolean"==typeof a&&(this.m_closeOnClick=a),this},ModalButton.prototype.setFocusInd=function(a){return"boolean"==typeof a&&(this.m_focusInd=a),this},ModalButton.prototype.setText=function(a){return a&&"string"==typeof a&&(this.m_buttonText=a),this},ModalButton.prototype.setIsDithered=function(a){return"boolean"==typeof a&&(this.m_dithered=a),this},ModalButton.prototype.setOnClickFunction=function(a){return"function"==typeof a&&(this.m_onClickFunction=a),this},ModalButton.prototype.setSeparatorInd=function(a){return"boolean"==typeof a&&(this.m_separatorInd=a),this},ModalDialog.prototype.addFooterButton=function(a){return a instanceof ModalButton?a.getId()?(this.m_footer.buttons.push(a),this):(logger.logError("ModalDialog.addFooterButton: All ModalButton objects must have an id assigned"),this):(logger.logError("ModalDialog.addFooterButton: Cannot add footer button which isnt a ModalButton object.\nModalButtons can be created using the ModalDialog.createModalButton function."),this)},ModalDialog.prototype.hasGrayBackground=function(){return this.m_hasGrayBackground},ModalDialog.prototype.isActive=function(){return this.m_isModalActive},ModalDialog.prototype.isBodySizeFixed=function(){return this.m_body.isBodySizeFixed},ModalDialog.prototype.isFooterAlwaysShown=function(){return this.m_footer.isAlwaysShown},ModalDialog.prototype.isFixedToIcon=function(){return this.m_isFixedToIcon},ModalDialog.prototype.isIconActive=function(){return this.m_icon.isActive},ModalDialog.prototype.showCloseIcon=function(){return this.m_showCloseIcon},ModalDialog.prototype.verifyCloseFunctionResponse=function(){return this.m_header.verifyCloseFunctionResponse},ModalDialog.prototype.getBodyDataFunction=function(){return this.m_body.dataFunction},ModalDialog.prototype.getBodyElementId=function(){return this.m_body.elementId},ModalDialog.prototype.getBottomMarginPercentage=function(){return this.m_margins.bottom},ModalDialog.prototype.getFooterButton=function(a){var b=0,c=null,d=this.getFooterButtons(),e=d.length;for(b=e;b--;)if(c=d[b],c.getId()===a)return d[b];return null},ModalDialog.prototype.getFooterButtons=function(){return this.m_footer.buttons},ModalDialog.prototype.getFooterElementId=function(){return this.m_footer.elementId},ModalDialog.prototype.getFooterCheckbox=function(){return this.m_footer.checkbox},ModalDialog.prototype.getIsFooterCheckboxEnabled=function(){return this.m_footer.checkbox.enabled},ModalDialog.prototype.getFooterCheckboxIsChecked=function(){return this.m_footer.checkbox.isChecked},ModalDialog.prototype.getFooterCheckboxLabel=function(){return this.m_footer.checkbox.label},ModalDialog.prototype.getFooterCheckboxElementId=function(){return this.m_footer.checkbox.elementId},ModalDialog.prototype.getHasGrayBackground=function(){return this.m_hasGrayBackground},ModalDialog.prototype.getHeaderCloseFunction=function(){return this.m_header.closeFunction},ModalDialog.prototype.getHeaderElementId=function(){return this.m_header.elementId},ModalDialog.prototype.getHeaderTitle=function(){return this.m_header.title},ModalDialog.prototype.getIconClass=function(){return this.m_icon.cssClass},ModalDialog.prototype.getIconElementId=function(){return this.m_icon.elementId},ModalDialog.prototype.getIconHoverText=function(){return this.m_icon.hoverText},ModalDialog.prototype.getIconText=function(){return this.m_icon.text},ModalDialog.prototype.getId=function(){return this.m_modalId},ModalDialog.prototype.getIsActive=function(){return this.m_isModalActive},ModalDialog.prototype.getIsBodySizeFixed=function(){return this.m_body.isBodySizeFixed},ModalDialog.prototype.getIsFixedToIcon=function(){return this.m_isFixedToIcon},ModalDialog.prototype.getIsFooterAlwaysShown=function(){return this.m_footer.isAlwaysShown},ModalDialog.prototype.getIsIconActive=function(){return this.m_icon.isActive},ModalDialog.prototype.getLeftMarginPercentage=function(){return this.m_margins.left},ModalDialog.prototype.getRightMarginPercentage=function(){return this.m_margins.right},ModalDialog.prototype.getShowCloseIcon=function(){return this.m_showCloseIcon},ModalDialog.prototype.getTopMarginPercentage=function(){return this.m_margins.top},ModalDialog.prototype.getFooterText=function(){return this.m_footer.footerText.text},ModalDialog.prototype.getFooterTextElementId=function(){return this.m_footer.footerText.elementId},ModalDialog.prototype.setBodyDataFunction=function(a){return"function"!=typeof a&&null!==a?(logger.logError("ModalDialog.setBodyDataFunction: dataFunc param must be a function or null"),this):(this.m_body.dataFunction=a,this)},ModalDialog.prototype.setBodyElementId=function(a){return a&&"string"==typeof a&&(this.isActive()&&$("#"+this.getBodyElementId()).attr("id",a),this.m_body.elementId=a),this},ModalDialog.prototype.setBodyHTML=function(a){return a&&"string"==typeof a&&this.isActive()&&$("#"+this.getBodyElementId()).html(a),this},ModalDialog.prototype.setBottomMarginPercentage=function(a){return"number"==typeof a&&(this.m_margins.bottom=a<=0?1:a,this.isActive()&&MP_ModalDialog.resizeModalDialog(this.getId())),this},ModalDialog.prototype.setFooterButtonCloseOnClick=function(a,b){var c=null,d=null,e=null,f=this;return"boolean"!=typeof b?(logger.logError("ModalDialog.setFooterButtonCloseOnClick: closeOnClick param must be of type boolean"),this):(c=this.getFooterButton(a),c?(c.setCloseOnClick(b),this.isActive()&&(d=$("#"+a),d.click(function(){e=c.getOnClickFunction(),e&&"function"==typeof e&&e(),b&&MP_ModalDialog.closeModalDialog(f.getId())}))):logger.logError("ModalDialog.setFooterButtonCloseOnClick: No button with the id of "+a+" exists for this ModalDialog"),this)},ModalDialog.prototype.setFooterButtonDither=function(a,b){var c=null,d=null;return"boolean"!=typeof b?(logger.logError("ModalDialog.setFooterButtonDither: Dithered param must be of type boolean"),this):(c=this.getFooterButton(a),c?(c.setIsDithered(b),this.isActive()&&(d=$("#"+a),b?d.attr("disabled",!0):d.attr("disabled",!1))):logger.logError("ModalDialog.setFooterButtonDither: No button with the id of "+a+" exists for this ModalDialog"),this)},ModalDialog.prototype.setFooterButtonOnClickFunction=function(a,b){var c=null,d=this;return"function"!=typeof b&&null!==b?(logger.logError("ModalDialog.setFooterButtonOnClickFunction: clickFunc param must be a function or null"),this):(c=this.getFooterButton(a),c?(c.setOnClickFunction(b),this.isActive()&&$("#"+a).unbind("click").click(function(){b&&b(),c.closeOnClick()&&MP_ModalDialog.closeModalDialog(d.getId())})):logger.logError("ModalDialog.setFooterButtonOnClickFunction: No button with the id of "+a+" exists for this ModalDialog"),this)},ModalDialog.prototype.setFooterButtonText=function(a,b){var c=null;return"string"!=typeof b?(logger.logError("ModalDialog.setFooterButtonText: buttonText param must be a string"),this):b?(c=this.getFooterButton(a),c?(c.setText(b),this.isActive()&&$("#"+a).html(b)):logger.logError("ModalDialog.setFooterButtonText: No button with the id of "+a+" exists for this ModalDialog"),this):(logger.logError("ModalDialog.setFooterButtonText: buttonText param must not be empty or null"),this)},ModalDialog.prototype.setFooterElementId=function(a){return a&&"string"==typeof a&&(this.isActive()&&$("#"+this.getFooterElementId()).attr("id",a),this.m_footer.elementId=a),this},ModalDialog.prototype.setFooterCheckboxLabel=function(a){return"string"==typeof a&&""!==a&&(this.m_footer.checkbox.label=a),this},ModalDialog.prototype.setFooterCheckboxEnabled=function(a){return"boolean"==typeof a&&(this.m_footer.checkbox.enabled=a),this},ModalDialog.prototype.setFooterCheckboxIsChecked=function(a){return"boolean"==typeof a&&(this.m_footer.checkbox.isChecked=a),this},ModalDialog.prototype.setFooterCheckboxClickFunction=function(a){return a&&"function"==typeof a&&(this.setFooterCheckboxEnabled(!0),this.m_footer.checkbox.onClick=a),this},ModalDialog.prototype.setVerifyCloseFunctionResponse=function(a){return"boolean"==typeof a&&(this.m_header.verifyCloseFunctionResponse=a),this},ModalDialog.prototype.activeIconClickEventHandler=function(){return MP_ModalDialog.showModalDialog(this.getId()),this},ModalDialog.prototype.setIsIconActive=function(a){var b=this;if("boolean"==typeof a){this.m_icon.isActive=a;var c=$("#"+this.getIconElementId());c&&(c.unbind("click"),a&&c.click(function(){b.activeIconClickEventHandler()}))}return this},ModalDialog.prototype.setHasGrayBackground=function(a){return"boolean"==typeof a&&(this.m_hasGrayBackground=a),this},ModalDialog.prototype.setHeaderCloseFunction=function(a){var b=this;return"function"!=typeof a&&null!==a?(logger.logError("ModalDialog.setHeaderCloseFunction: closeFunc param must be a function or null"),this):(this.m_header.closeFunction=a,this.isActive()&&$(".dyn-modal-hdr-close").click(function(){var c=!0;a&&(c=a()),b.verifyCloseFunctionResponse()?c&&MP_ModalDialog.closeModalDialog(b.getId()):MP_ModalDialog.closeModalDialog(b.getId())}),this)},ModalDialog.prototype.setHeaderElementId=function(a){return a&&"string"==typeof a&&(this.isActive()&&$("#"+this.getHeaderElementId()).attr("id",a),this.m_header.elementId=a),this},ModalDialog.prototype.setHeaderTitle=function(a){return a&&"string"==typeof a&&(this.isActive()&&$("#"+this.getHeaderElementId()+" .dyn-modal-hdr-title").html(a),this.m_header.title=a),this},ModalDialog.prototype.setIconClass=function(a){return a&&"string"==typeof a&&($("#"+this.getIconElementId()).removeClass(this.m_icon.cssClass).addClass(a),this.m_icon.cssClass=a),this},ModalDialog.prototype.setIconElementId=function(a){return a&&"string"==typeof a&&($("#"+this.getIconElementId()).attr("id",a),this.m_icon.elementId=a),this},ModalDialog.prototype.setIconHoverText=function(a){return null!==a&&"string"==typeof a&&(this.m_icon.hoverText=a,$("#"+this.getIconElementId()).attr("title",a)),this},ModalDialog.prototype.setIconText=function(a){return null!==a&&"string"==typeof a&&(this.m_icon.text=a,$("#"+this.getIconElementId()).html(a)),this},ModalDialog.prototype.setId=function(a){return a&&"string"==typeof a&&(this.m_modalId=a),this},ModalDialog.prototype.setIsActive=function(a){return"boolean"==typeof a&&(this.m_isModalActive=a),this},ModalDialog.prototype.setIsBodySizeFixed=function(a){return"boolean"==typeof a&&(this.m_body.isBodySizeFixed=a),this},ModalDialog.prototype.setIsFixedToIcon=function(a){return"boolean"==typeof a&&(this.m_isFixedToIcon=a),this},ModalDialog.prototype.setIsFooterAlwaysShown=function(a){return"boolean"==typeof a&&(this.m_footer.isAlwaysShown=a),this},ModalDialog.prototype.setLeftMarginPercentage=function(a){return"number"==typeof a&&(this.m_margins.left=a<=0?1:a,this.isActive()&&MP_ModalDialog.resizeModalDialog(this.getId())),this},ModalDialog.prototype.setRightMarginPercentage=function(a){return"number"==typeof a&&(this.m_margins.right=a<=0?1:a,this.isActive()&&MP_ModalDialog.resizeModalDialog(this.getId())),this},ModalDialog.prototype.setShowCloseIcon=function(a){return"boolean"==typeof a&&(this.m_showCloseIcon=a),this},ModalDialog.prototype.setTopMarginPercentage=function(a){return"number"==typeof a&&(this.m_margins.top=a<=0?1:a,this.isActive()&&MP_ModalDialog.resizeModalDialog(this.getId())),this},ModalDialog.prototype.setFooterText=function(a){return"string"==typeof a&&""!==a&&(this.m_footer.footerText.text=a,this.isActive()&&$("#"+this.getFooterTextElementId()).html(a)),this},MessageModal.prototype=new ModalDialog,MessageModal.prototype.setLine1=function(a){this.m_line1=a},MessageModal.prototype.getLine1=function(){return this.m_line1||""},MessageModal.prototype.setLine2=function(a){this.m_line2=a},MessageModal.prototype.getLine2=function(){return this.m_line2||""},MessageModal.prototype.setCustomClass=function(a){this.m_customClass=a},MessageModal.prototype.getCustomClass=function(){return this.m_customClass||""},MessageModal.prototype.getModalTextHTML=function(){return"<div class='default-container "+this.getCustomClass()+"'><span class='message-info-text'>"+this.getLine1()+"</span>"+this.getLine2()+"</div>"},MessageModal.prototype.setMessage=function(a,b){var c="";this.m_line1=a||"",this.m_line2=b||"",this.setLeftMarginPercentage(35).setRightMarginPercentage(35).setTopMarginPercentage(20).setIsBodySizeFixed(!1).setIsFooterAlwaysShown(!0),c=this.getModalTextHTML(),this.isActive()?this.setBodyHTML(c):this.setBodyDataFunction(function(a){a.setBodyHTML(c)})},ErrorModal.prototype=new MessageModal,ErrorModal.prototype.getModalTextHTML=function(){return"<div class='error-container "+this.getCustomClass()+"'><span class='error-text message-info-text'>"+this.getLine1()+"</span>"+this.getLine2()+"</div>"},WarningModal.prototype=new MessageModal,WarningModal.prototype.getModalTextHTML=function(){return"<div class='warning-container "+this.getCustomClass()+"'><span class='message-info-text'>"+this.getLine1()+"</span>"+this.getLine2()+"</div>"},InfoModal.prototype=new MessageModal,InfoModal.prototype.getModalTextHTML=function(){return"<div class='information-container "+this.getCustomClass()+"'><span class='message-info-text'>"+this.getLine1()+"</span>"+this.getLine2()+"</div>"},BusyModal.prototype=new MessageModal,BusyModal.prototype.getModalTextHTML=function(){return"<div class='busy-container "+this.getCustomClass()+"'><span class='message-info-text'>"+this.getLine1()+"</span>"+this.getLine2()+"</div>"},MPageOO={inherits:function(a,b){var c=function(){};c.prototype=b.prototype,a.prototype=new c;for(var d=Object.keys(b),e=d.length;e--;){var f=d[e];a[f]=b[f]}},attribute:function(a,b){a.prototype["set"+b]=function(a){this["m_"+b]=a},a.prototype["get"+b]=function(){return this["m_"+b]}},each:function(a,b){return a.isArray?MPageOO.eachOverArray(a,b):MPageOO.eachOverObject(a,b)},eachOverArray:function(a,b){for(var c=0;c<a.length;c++)b(a[c],c,a);return a},eachOverObject:function(a,b){for(var c=Object.keys(a),d=0;d<c.length;d++){var e=c[d];b(a[e],e,a)}return a},map:function(a,b){return a.isArray?MPageOO.mapOverArray(a,b):MPageOO.mapOverObject(a,b)},mapOverArray:function(a,b){for(var c=[],d=0;d<a.length;d++)c.push(b(a[d],d,a));return c},mapOverObject:function(a,b){for(var c=[],d=Object.keys(a),e=0;e<d.length;e++){var f=d[e];c.push(b(a[f],f,a))}return c},mapObject:function(a,b){for(var c={},d=Object.keys(a),e=0;e<d.length;e++){var f=d[e],g=b(f,a[f],a);c[g[0]]=g[1]}return c},reduce:function(a,b,c){var d=0;for("undefined"==typeof c&&(d=1,c=a[0]);d<a.length;d++)c=b(c,a[d]);return c},pairs:function(a){return MPageOO.map(a,function(a,b){return[b,a]})},values:function(a){return MPageOO.map(a,function(a){return a})},mergeObjects:function(a,b){return MPageOO.map(a,function(c,d){return"undefined"!=typeof b[d]?b[d]:a[d]})},shallowClone:function(a){var b=function(){};
b.prototype=a;var c=new b;return MPageOO.each(a,function(a,b){c[b]=a}),c},objectFromList:function(a,b){return MPageOO.reduce(a,function(a,c){var d=b(c);return a[d[0]]=d[1],a},{})},filter:function(a,b){return MPageOO.reduce(a,function(a,c){return b(c)&&a.push(c),a},[])}},TemplateEngine={},function(a,b){a.getHtmlTags=function(){var b=["html","span","head","body","pre","h1","h2","h3","h4","h5","h6","b","i","em","strong","font","a","p","br","dl","dt","dd","ol","ul","li","div","img","hr","table","th","tr","td","tbody","thead","form","option","input","textarea","button"],c={};return c=a.getTags(b)},a.getTags=function(c){var d={};return b.each(c,function(b,c){d[c]=a.tag(c)}),d},a.tag=function(b){return function(){var c=[].slice.call(arguments);c.unshift(b);var d=new a.Tag(b);return a.Tag.apply(d,c),d}},a.button=function(b){return b.type="button",new a.Tag("input",b,null)},a.textbox=function(b){return b.type="text",new a.Tag("input",b,null)},a.Tag=function(c,d){if(this.name=c,this.parent=null,this.element=null,this.content="",this.attributes={},1!=arguments.length){var e=arguments[1],f=1;if(!(e instanceof Object)||e instanceof a.Tag||e instanceof String||e instanceof Array||(this.attributes=e,f=2),2!=arguments.length||2!=f){for(var g=[],h=f;h<arguments.length;h++)arguments[h]instanceof Array?b.merge(g,arguments[h]):g.push(arguments[h]);this.content=g}}},a.Tag.prototype.render=function(){return this.makeElement(),this.makeContent(),this.element},a.Tag.prototype.makeElement=function(){var a=b("<"+this.name+"></"+this.name+">");return b.each(this.attributes,function(b,c){c||(c=""),a.attr(b,c)}),this.element=a,a},a.Tag.traverse=function(c,d){if(c)return c instanceof a.Tag?(c.parent=d,void d.element.append(c.render())):c instanceof Array?void b.each(c,function(b,c){a.Tag.traverse(c,d)}):void d.element.append(c)},a.Tag.prototype.makeContent=function(){a.Tag.traverse(this.content,this)},a.Template=function(a){this.m_function=a,this.m_factory=null},a.Template.prototype.render=function(b){var c=new a.ScopeManager;this.m_factory&&this.m_factory.before(c);var d=this.m_function(b);d instanceof a.Tag||alert("The template function does not return a Tag instance.");var e=d.render();return c.clean(),this.m_factory&&this.m_factory.after(c),e},a.TemplateFactory=function(c){var d=this;b.each(c,function(b,c){"before"!=b&&"after"!=b?(d[b]=new a.Template(c),d[b].m_factory=d):d[b]=c})},a.TemplateFactory.prototype.before=function(){},a.TemplateFactory.prototype.after=function(){},a.ScopeManager=function(){this.m_originalScope={}},a.ScopeManager.prototype.use=function(a){var c=this;b.each(a,function(a,b){void 0!==window[a]&&(c.m_originalScope[a]=window[a]),window[a]=b})},a.ScopeManager.prototype.clean=function(){b.each(this.m_originalScope,function(a,b){window[a]=b})}}(TemplateEngine,jQuery),Template.prototype.setId=function(a){this.id=a},Template.prototype.getId=function(){return this.id},Template.prototype.setTemplateFunction=function(a){this.templateFunction=a},Template.prototype.getTemplateFunction=function(){return this.templateFunction},Template.prototype.render=function(a){a=a||{};try{return this.templateFunction(a)}catch(a){throw new Error("There was an error rendering the template: "+a.message)}},TemplateBuilder.buildTemplate=function(a){if("string"!=typeof a)throw new Error("Called buildTemplate on TemplateBuilder with non string type for template parameter");a=a.replace(/"/g,'\\"');var b=new Template,c=new Function("data",'var params=[];params.push("'+a.split("${").join('");params.push(data.').split("}").join(');params.push("')+'");return params.join("");');return b.setTemplateFunction(c),b},TemplateBuilder.buildAndCacheTemplate=function(a,b){var c=TemplateBuilder.buildTemplate(b);return TemplateCache.cacheTemplate(a,c),c},TemplateCache.templates={},TemplateCache.loadStandardTemplates=function(){for(var a in StandardTemplates){var b=StandardTemplates[a];b&&"string"==typeof b&&TemplateCache.cacheTemplate(a,TemplateBuilder.buildTemplate(b))}},TemplateCache.cacheTemplate=function(a,b){if("string"!=typeof a)throw new Error("Called cacheTemplate on TemplateCache with non string type for id parameter");if(!Template.prototype.isPrototypeOf(b))throw new Error("Called cacheTemplate on TemplateCache with non Template type for template parameter");if(TemplateCache.hasTemplate(a))throw new Error("Called cacheTemplate on TemplateCache. Template with id: "+a+" already exists. Please use a different identifier.");TemplateCache.templates[a]=b},TemplateCache.getTemplate=function(a){if(!TemplateCache.hasTemplate(a))throw new Error("Template with id: "+a+" does not exist");return TemplateCache.templates[a]},TemplateCache.hasTemplate=function(a){return"undefined"!=typeof TemplateCache.templates[a]&&null!==TemplateCache.templates[a]};var MPageControls=MPageControls||{};MPageObjectOriented={},MPageObjectOriented.inherits=function(a,b){$.each(b.prototype,function(b,c){a.prototype[b]=c}),$.each(b,function(b,c){a[b]=c})},MPageObjectOriented.createAttribute=function(a,b){a.prototype["set"+b]=function(a){this["m_"+b]=a},a.prototype["get"+b]=function(){return this["m_"+b]}},MPageControls.getId=function(a){if(a instanceof String||"string"==typeof a)return a;if(null===a)return"";var b=void 0;if(a instanceof jQuery&&(b=a.attr("id")),a&&a.getAttribute&&(b=a.getAttribute("id")),!b)throw new Error("You have tried to pass an object to MPageControls.getId that does not have a valid ID attribute.");return b},MPageControls.getDefaultTemplates=function(){return new TemplateEngine.TemplateFactory(MPageControls.defaultTemplates())},MPageControls.fromId=function(a){var b=$("#"+a);return 0===b.length?null:b},MPageControls.setMaxHeight=function(a){this.m_maxHeight=a},MPageControls.getMaxHeight=function(){return this.m_maxHeight},function(){var a=MPageControls,b=MPageObjectOriented.createAttribute;a.Control=function(b){this.setControlId(a.Control.idCounter),a.Control.idCounter++,b?(this.setElement(b),this.init()):this.setElement(a.Control.ID_PREFIX+this.getControlId())},a.Control.idCounter=0,a.Control.ID_PREFIX="mpage_controls_control_",b(a.Control,"ControlId"),b(a.Control,"Parent"),a.Control.prototype.init=function(){},a.Control.prototype.setElement=function(a){this.m_element=MPageControls.getId(a)},a.Control.prototype.getElement=function(){return MPageControls.fromId(this.m_element)},a.Control.prototype.setContents=function(a){this.m_contents=MPageControls.getId(a)},a.Control.prototype.getContents=function(){return MPageControls.fromId(this.m_contents)},a.Control.prototype.getElementId=function(){return this.m_element},a.Control.prototype.renderTemplate=function(a,b){b||(b={}),b.controlId||(b.controlId=this.getControlId());var c=a(b);this.getElement().html(c)},a.Control.prototype.fire=function(a,b){var c=this.getParent();c&&c[a]&&(void 0!=b||null!=b?c[a].apply(c,b):c[a].apply(c,[]))},a.Control.prototype.bind=function(a,b,c){b.bind(a+".control"+this.getControlId(),c)},a.Control.prototype.destroyEvents=function(){this.getElement()&&this.getElement().unbind(".control"+this.getControlId())},a.Control.prototype.focus=function(){this.getElement().focus()},a.Control.prototype.trigger=function(a,b){if(this[a])return b||(b=[]),this[a].apply(this,b)}}(),MPageControls.defaultTemplates=function(){var a=TemplateEngine,b=a.tag("div"),c=a.tag("input"),d=a.tag("span");return{list:function(a){return b({class:"list",tabindex:"0",id:a.listId},a.items)},listItem:function(a){return b({class:"list-item",id:a._elementId},a.content)},ddListItem:function(a){return b({class:"list-item",id:a._elementId},a[a.displayKey])},autoSuggest:function(a){return b({class:"auto-suggest input"},b({id:a.closebtnId,class:"close-btn"},"&nbsp;"),b({class:"auto-suggest-input-wrapper"},c({type:"text",class:"search-box",id:a.textboxId})))},autoSuggestList:function(a){return b({class:"auto-suggest suggestions",style:"position: relative",tabindex:"0",id:a.listId},a.items)},emptyList:function(){return b({class:"auto-suggest suggestions res-none",style:"position: relative",tabindex:"0"},i18n.NO_RESULTS_FOUND)},cclSearch:function(a){return b({class:"auto-suggest"},b({class:"auto-suggest-search-box"},c({type:"text",id:a.textboxId})),b({class:"clear-search",id:a.closebtnId},d({class:"clear-button",style:"display: inline-block"})))},personnelSearchItem:function(a){return b({id:a._elementId},a.NAME_FULL_FORMATTED)},providerSuggestList:function(a){var c={class:"auto-suggest suggestions",style:"position: relative;",tabindex:"0",id:a.listId},d=MPageControls.getMaxHeight();return d&&(c.style="position: relative; max-height: "+d+"px;"),b(c,a.items,b({id:"newProviderAssignment"},i18n.ASSIGN_NEW_PROVIDER))},orderSearch:function(a){return b({class:"auto-suggest"},b({class:"order-search-box"},c({type:"text",class:"search-box noe2-search",id:a.textboxId})),b({class:"clear-search",id:a.closebtnId},d({class:"clear-button",style:"display: inline-block"})))},orderSearchItem:function(a){return b({id:a._elementId},d({class:a.iconClass},"&nbsp;"),a.content,d({class:"order-sentence"},a.SENTENCE))},documentedSearchItem:function(a){return b({id:a._elementId},d({class:a.iconClass},"&nbsp;"),a.content)},nomenSearchItem:function(a){return b({id:a._elementId},a.m_Data.SOURCESTRING)},messageBar:function(a){return b({class:a.msgDivClass},d("&nbsp;"),a.message,d({class:"close-btn hidden",id:a.closeBtnId},"&nbsp;"))},venueTemplate:function(a){return b({id:a._elementId},b({class:"venue-item"},a.VENUE_DISPLAY))}}},function(a){var b=MPageControls,c=MPageObjectOriented.inherits,d=MPageObjectOriented.createAttribute;b.AlertMessage=function(a,c,d){this.setTemplate(c),this.setCssClass(d),this.setIsClosable(!1),b.Control.call(this,a)},c(b.AlertMessage,b.Control),b.AlertMessage.MessageTypes={WARNING:"msg-warning",INFORMATION:"msg-info",ERROR:"msg-error"},d(b.AlertMessage,"Template"),d(b.AlertMessage,"CssClass"),d(b.AlertMessage,"IsClosable");var e=b.AlertMessage.prototype;e.getCloseBtnId=function(){return"control_"+this.getControlId()+"_closebtn"},e.render=function(b){var c={msgDivClass:this.getCssClass(),message:b,closeBtnId:this.getCloseBtnId()},d=this;this.getElement().html(this.getTemplate().render(c)),this.getIsClosable()&&(a("#"+this.getCloseBtnId()).removeClass("hidden"),a("#"+this.getCloseBtnId()).click(function(){d.close()}))},e.close=function(){a(this.getElement()).hide()}}(jQuery),function(a){var b=MPageControls,c=MPageObjectOriented.inherits,d=MPageObjectOriented.createAttribute;b.AutoSuggest=function(a){this.setCaptionClass("caption"),this.setTemplate(MPageControls.getDefaultTemplates().autoSuggest),this.setCaption(""),this.setAutoHideCloseButton(!0),this.setDelay(50),this.setDetailDialog(null),this.setHighlightEnabled(!0),this.setSynchSuggestionsWidth(!0),this.setBackgroundClass("search-box-image"),this.mBlurEnabled=!0,this.setOnChange(function(){}),this.setOnClose(function(){}),this.setOnEnter(function(){}),this.setOnDelay(function(){}),this.setRequestItemValueCallback(function(a){return a.content}),b.Control.call(this,a)},c(b.AutoSuggest,b.Control),d(b.AutoSuggest,"List"),d(b.AutoSuggest,"CaptionClass"),d(b.AutoSuggest,"DetailDialog"),d(b.AutoSuggest,"Delay"),d(b.AutoSuggest,"Template"),d(b.AutoSuggest,"Caption"),d(b.AutoSuggest,"OnChange"),d(b.AutoSuggest,"OnClose"),d(b.AutoSuggest,"OnDelay"),d(b.AutoSuggest,"OnEnter"),d(b.AutoSuggest,"Timer"),d(b.AutoSuggest,"RequestItemValueCallback"),d(b.AutoSuggest,"HighlightEnabled"),d(b.AutoSuggest,"SynchSuggestionsWidth"),d(b.AutoSuggest,"AutoHideCloseButton"),d(b.AutoSuggest,"Items"),d(b.AutoSuggest,"BackgroundClass");var e=b.AutoSuggest.prototype;e.init=function(){var b=this,c=null;this.getElement().empty(),this.getElement().append(this.getTemplate().render({textboxId:this.getTextboxId(),closebtnId:this.getClosebtnId()})),c=this.getTextbox(),this.activateCaption(),this.createDialog(),this.setListTemplate(MPageControls.getDefaultTemplates().autoSuggestList),c.click(function(){b.deactivateCaption()}),c.blur(function(){0===b.getValue().length&&b.activateCaption(),setTimeout(function(){var c=a("#control_"+b.getControlId()+"_content .suggestions");c.is(":focus")||b.close()},300)}),c.keyup(function(a){b.processTextboxKeyDown(a)}),a("#"+this.getClosebtnId()).click(function(){b.close(),b.getTextbox()[0].value="",b.getOnClose()(),b.activateCaption()}),this.getAutoHideCloseButton()&&this.hideCloseButton()},e.processTextboxKeyDown=function(b){var c=this,d=this.getDetailDialog();if(c.getTimer()&&clearTimeout(c.getTimer()),this.getTextbox().hasClass(this.getCaptionClass())&&this.getTextbox().removeClass(this.getCaptionClass()),0===this.getValue().length)return this.hideCloseButton(),void(d&&d.getVisible()&&this.close());if(a("#"+this.getClosebtnId()).css("display","inline-block"),13==b.keyCode)return d&&d.getVisible()&&this.getList().getSelectedIndex()>=0?(this.getList().getOnEnter()(),void this.close()):(this.close(),void this.getOnEnter()());c.getList()&&c.getList().processKeyEvent(b);var e=[38,40];if(a.inArray(b.keyCode,e)!=-1)return void this.moveCaretToEnd();this.getOnChange()();var f=setTimeout(function(){c.getOnDelay()(),c.getValue()&&0===c.getValue().length&&c.close()},c.getDelay());c.setTimer(f)},e.activateCaption=function(){0!==this.getCaption().length&&(this.getTextbox().addClass(this.getCaptionClass()),this.getTextbox()[0].value=this.getCaption(),this.getAutoHideCloseButton()&&this.hideCloseButton())},e.moveCaretToEnd=function(){var a=this.getTextbox().get(0),b=this.getValue().length;if(a.setSelectionRange)return void a.setSelectionRange(b,b);if(a.createTextRange){var c=a.createTextRange();c.moveEnd("character",b),c.moveStart("character",b),c.select()}},e.hideCloseButton=function(){a("#"+this.getClosebtnId()).css("display","none")},e.showCloseButton=function(){a("#"+this.getClosebtnId()).css("display","inline-block")},e.deactivateCaption=function(){this.getTextbox().hasClass(this.getCaptionClass())&&(this.getTextbox().removeClass(this.getCaptionClass()),this.getTextbox()[0].value="")},e.getTextbox=function(){return this.getElement().find("#"+this.getTextboxId())},e.getTextboxId=function(){return"control_"+this.getControlId()+"_textbox"},e.getClosebtnId=function(){return"control_"+this.getControlId()+"_closebtn"},e.close=function(){this.getDetailDialog()&&this.getDetailDialog().hide(),this.mBlurEnabled=!0},e.setSuggestions=function(c){if(this.setItems(c),0===c.length||0===this.getValue().length||this.getTextbox().hasClass(this.getCaptionClass()))return void this.close();if(this.getSynchSuggestionsWidth()&&a("#control_"+this.getControlId()+"_content").css("min-width",this.getElement().width()+"px"),this.getList().renderItems(c),this.getDetailDialog().show(),this.getDetailDialog().updatePosition(),this.getHighlightEnabled()){var d=new b.TextHighlighter(this.getList().getElement());d.highlight(this.getValue())}var e=this,f="#control_"+e.getControlId()+"_content .suggestions";a(f).attr("tabindex",0),a(f).on("blur",function(){setTimeout(function(){e.getElement()&&!e.getTextbox().is(":focus")&&e.close()},300)})},e.createDialog=function(){var c=this,d=a("<div></div>");d.appendTo(this.getElement().offsetParent()),d.attr("id","control_"+this.getControlId()+"_content");var e=new b.DetailDialog(this.getElement(),d);e.setElementCorner(["bottom","left"]),e.setAlwaysOnTop(!0);var f=new b.List(d);f.setOnSelect(function(a){c.setValue(c.getRequestItemValueCallback()(a)),c.getOnEnter()(),c.close()}),this.setList(f),this.setDetailDialog(e)},e.getValue=function(){return this.getElement()&&this.getTextbox().length?this.getTextbox()[0].value:null},e.setValue=function(a){this.getTextbox()[0].value=a,this.showCloseButton()},e.destroy=function(){this.getList()&&this.getList().destroy(),this.getDetailDialog()&&this.getDetailDialog().destroy()},e.setListItemTemplate=function(a){this.getList().setItemTemplate(a)},e.setListTemplate=function(a){this.getList().setListTemplate(a)},e.activateBackground=function(){this.getTextbox().addClass(this.getBackgroundClass())}}(jQuery),function(a){var b=MPageControls,c=MPageObjectOriented,d=c.inherits,e=c.createAttribute;b.DetailDialog=function(a,c){var d=function(a){a.slideUp(150)},e=function(a){a.slideDown(150)};this.setAlwaysOnTop(!1),this.setElementCorner(["bottom","left"]),this.setContentsCorner(["top","left"]),this.setBeforeShow(function(){}),this.setAutoFlipVertical(!0),this.setAutoFlipHorizontal(!0),this.setContents(c),this.setShowEffect(e),this.setHideEffect(d),this.setVisible(!1),this.setOnShow(function(){}),this.setOnHide(function(){}),b.Control.call(this,a)},d(b.DetailDialog,b.Control),e(b.DetailDialog,"ShowEffect"),e(b.DetailDialog,"HideEffect"),e(b.DetailDialog,"Visible"),e(b.DetailDialog,"OnShow"),e(b.DetailDialog,"OnHide"),e(b.DetailDialog,"Created"),e(b.DetailDialog,"ElementCorner"),e(b.DetailDialog,"ContentsCorner"),e(b.DetailDialog,"ElementFlippedCorner"),e(b.DetailDialog,"ContentsFlippedCorner"),e(b.DetailDialog,"BeforeShow"),e(b.DetailDialog,"AutoFlipVertical"),e(b.DetailDialog,"AutoFlipHorizontal"),e(b.DetailDialog,"AlwaysOnTop");var f=b.DetailDialog.prototype;f.init=function(){},f.setFlipReference=function(a){this.m_flipReference=MPageControls.getId(a)},f.getFlipReference=function(){return MPageControls.fromId(this.m_flipReference)},f.toggle=function(){this.getVisible()?this.hide():this.show()},f.updatePosition=function(b,c){var d=this.getElement(),e=this.getContents(),f=0,g=0,h=d.offset();switch(b||(b=this.getElementCorner()),c||(c=this.getContentsCorner()),b[0]){case"top":g=h.top;break;case"bottom":g=h.top+d.outerHeight()}switch(b[1]){case"left":f=h.left;break;case"right":f=h.left+d.outerWidth()}"bottom"==c[0]&&(g-=e.outerHeight()),"right"==c[1]&&(f-=e.outerWidth());var i=e.offsetParent();i.length&&"HTML"===i.prop("tagName")&&(i=a(document.body));var j=f-i.offset().left,k=0;k="windowTop"==c[0]?i.offset().top:g-i.offset().top,this.getAlwaysOnTop()&&this.getContents().css("z-index","100"),this.getContents().css("position","absolute"),this.getContents().css({left:j,top:k}).show()},f.show=function(){if(!this.getVisible()){this.beforeShow(),this.getContents().css("display","block"),this.updatePosition(this.getElementCorner(),this.getContentsCorner()),this.setElementFlippedCorner(this.getElementCorner()),this.setContentsFlippedCorner(this.getContentsCorner()),this.autoFlipVertical(),this.autoFlipHorizontal(),this.autoSizeStatic(),this.m_OnShow(this),this.setVisible(!0)}},f.autoFlipUp=function(){this.autoFlipVertical()},f.autoFlipVertical=function(){var b="";if(this.getAutoFlipVertical()){var c=a(window).scrollTop()+a(window).height(),d=this.getContents();this.getFlipReference()&&(c=this.getFlipReference().offset().top+parseInt(this.getFlipReference().outerHeight(),10));var e=parseInt(d.outerHeight(),10),f=d.offset().top,g=f+e;g>=c&&(b=this.getElementFlippedCorner()[1]==this.getContentsFlippedCorner()[1]?"top":"bottom",f<=e?(e>=c&&(d.outerHeight(c-10),d.outerWidth(d.outerWidth()+17),d.css("overflow-y","auto")),this.setElementFlippedCorner([b,this.getElementFlippedCorner()[1]]),this.setContentsFlippedCorner(["windowTop",this.getContentsFlippedCorner()[1]]),this.updatePosition(this.getElementFlippedCorner(),this.getContentsFlippedCorner())):(this.setElementFlippedCorner([b,this.getElementFlippedCorner()[1]]),this.setContentsFlippedCorner(["bottom",this.getContentsFlippedCorner()[1]]),this.updatePosition(this.getElementFlippedCorner(),this.getContentsFlippedCorner())))}},f.autoFlipHorizontal=function(){if(this.getAutoFlipHorizontal()){var b=a(window).width(),c=0,d=this.getFlipReference();d&&(c=d.offset().left,b=c+parseInt(d.outerWidth(),10));var e=this.getContents().offset().left,f=e+parseInt(this.getContents().outerWidth(),10);e<c?this.updatePosition([this.getElementFlippedCorner()[0],"right"],[this.getContentsFlippedCorner()[0],"left"]):f>b&&this.updatePosition([this.getElementFlippedCorner()[0],"left"],[this.getContentsFlippedCorner()[0],"right"])}},f.autoSizeStatic=function(){if(!this.getAutoFlipVertical()){var a=this.getContents(),b=a[0].getBoundingClientRect(),c=window.innerHeight;b.bottom>c&&a.css({overflow:"auto",height:c-b.top+"px"})}},f.hide=function(){this.getVisible()&&(this.getContents().css("display","none"),this.setVisible(!1),this.m_OnHide(this))},f.beforeShow=function(){this.getBeforeShow()(this)},f.destroy=function(){this.getContents()&&this.getContents().remove(),this.setVisible(!1),this.setCreated(!1)}}(jQuery),function(a){var b=MPageControls,c=MPageObjectOriented.inherits,d=MPageObjectOriented.createAttribute;b.DropDown=function(a,c,d){a&&this.setSelector(new b.Selector(a,"selected","unselected")),c&&this.setContents(c),this.setOnShow(function(){}),this.setOnHide(function(){}),this.setOnSelect(function(){}),this.setDisabledCssClass("disabled"),this.m_value=d,b.Control.call(this,a)},c(b.DropDown,b.Control),d(b.DropDown,"DetailDialog"),d(b.DropDown,"Selector"),d(b.DropDown,"OnShow"),d(b.DropDown,"OnHide"),d(b.DropDown,"OnSelect"),d(b.DropDown,"Enabled"),d(b.DropDown,"DisabledCssClass");var e=b.DropDown.prototype;e.init=function(){this.setDetailDialog(new b.DetailDialog(this.getElement(),this.getContents())),this.getSelector()||this.setSelector(new b.Selector(this.getElement(),"selected","unselected"));var a=this;this.getSelector().setOnSelect(function(){a.getDetailDialog().show()}),this.getSelector().setOnUnselect(function(){a.getDetailDialog().hide()}),this.getDetailDialog().setOnShow(function(){a.getDetailDialog().getContents().css("z-index","7000"),a.onShow()}),this.getDetailDialog().setOnHide(function(){a.m_OnHide(a)}),this.setValue(this.getValue())},e.setValue=function(a){this.m_value=a,this.getElement()&&this.getElement().html(a)},e.onShow=function(){this.m_OnShow(this)},e.getValue=function(){return this.getDetailDialog()?this.m_value:""},e.show=function(){this.getDetailDialog()&&this.getDetailDialog().show()},e.hide=function(){this.getDetailDialog()&&(this.getDetailDialog().hide(),this.getSelector().unselect())},e.destroy=function(){this.getDetailDialog()&&this.getElement()&&(this.getDetailDialog().destroy(),this.getElement().remove())},e.disable=function(){this.m_Enabled=!1,this.hide(),this.getSelector().setEnabled(!1),this.getSelector().getElement().addClass(this.getDisabledCssClass())},e.enable=function(){this.m_Enabled=!0,this.getSelector().setEnabled(!0),this.getSelector().getElement().removeClass(this.getDisabledCssClass())},e.setEnabled=function(a){a?this.enable():this.disable()}}(jQuery),function(a){var b=MPageControls,c=MPageObjectOriented.createAttribute,d=MPageObjectOriented.inherits;b.DropDownNested=function(a,c){this.setSelector(new b.Selector(a,"selected","unselected")),this.setOnShow(function(){}),this.setOnHide(function(){}),this.setOnSelect(function(){}),this.setTree(c),b.Control.call(this,a)},d(b.DropDownNested,b.Control);var e=b.DropDownNested.prototype;c(b.DropDownNested,"DetailDialog"),c(b.DropDownNested,"Selector"),c(b.DropDownNested,"Tree"),c(b.DropDownNested,"RootNode"),c(b.DropDownNested,"OnShow"),c(b.DropDownNested,"OnHide"),c(b.DropDownNested,"OnSelect"),c(b.DropDownNested,"SelectedNode"),b.DropDownNested.Node=function(c,d,e){this.children=[],this.parent=d,this.dropDown=e;var f=this;a.each(c,function(c,d){"children"==c?a.each(d,function(){f.children.push(new b.DropDownNested.Node(this,f,e))}):f[c]=d})},b.DropDownNested.Node.prototype.makeElement=function(b){var c=a("<li></li>").html(this.name),d=this;a(c).click(function(){d.dropDown.select(d)}),b.append(c);var e="";return this.children.length>0&&(e=a("<ul></ul>"),a.each(this.children,function(){this.makeElement(e)})),b.append(e),c},e.init=function(){this.setRootNode(new b.DropDownNested.Node(this.getTree(),null,this));var c="controlContents"+this.getControlId(),d=a("<ul></ul>");this.getRootNode().makeElement(d);var e=a("<div></div>");e.attr("id",c),e.append(d.children("ul")),e.appendTo(a("body")),this.setDetailDialog(new b.DetailDialog(this.getElement(),e));var f=this;this.getSelector().setOnSelect(function(){f.getDetailDialog().show()}),this.getSelector().setOnUnselect(function(){f.getDetailDialog().hide()}),this.getDetailDialog().setOnShow(function(){f.getDetailDialog().getContents().css("z-index","7000"),f.m_OnShow(f)}),this.getDetailDialog().setOnHide(function(){f.m_OnHide(f)})},e.select=function(a){this.getElement().html(a.name),this.setSelectedNode(a),this.getSelector().unselect(),this.m_OnSelect(a)},e.show=function(){this.getDetailDialog().show()},e.hide=function(){this.getDetailDialog().hide()},e.destroy=function(){this.getDetailDialog().destroy(),this.getElement().remove()}}(jQuery),function(a){var b=MPageControls,c=MPageControls.DropDown,d=MPageObjectOriented.inherits,e=MPageObjectOriented.createAttribute;MPageControls.Tree;b.DropDownTree=function(a){this.setTreeCreated(!1),this.setOnSelect(function(){}),this.setOnCreate(function(){}),c.call(this,a,null)},d(b.DropDownTree,c),e(b.DropDownTree,"Tree"),e(b.DropDownTree,"TreeCreated"),e(b.DropDownTree,"OnLazyRead"),e(b.DropDownTree,"OnCreate"),e(b.DropDownTree,"OnSelect");var f=b.DropDownTree.prototype;f.init=function(){var b=a("<div></div>");b.appendTo(this.getElement().offsetParent()),b.attr("id","content"+this.getControlId()),this.setContents(b),c.prototype.init.call(this);var d=this;this.getDetailDialog().setBeforeShow(function(){d.beforeShow()})},f.setTreeElement=function(a){this.mTreeElement=MPageControls.getId(a)},f.getTreeElement=function(){return MPageControls.fromId(this.mTreeElement)},f.create=function(){var b=this,c=a("<div class='dynatree'></div>").appendTo(this.getContents()),d="treeElement"+this.getControlId();c.attr("id",d),this.setTreeElement(c),this.setTree(new MPageControls.Tree(this.getTreeElement())),this.getTree().setOnSelect(function(a){b.onSelect(a)}),this.getOnCreate()(),this.setTreeCreated(!0)},f.onSelect=function(a){this.setValue(a.data.title),this.getSelector().unselect()},f.getSelectedNode=function(){return null===this.getTree()||void 0===this.getTree()?null:this.getTree().getSelectedNode()},f.beforeShow=function(){this.getTreeCreated()||(this.create(),this.getOnLazyRead()&&this.getTree().setOnLazyRead(this.getOnLazyRead()))}}(jQuery),function(a){var b=MPageControls,c=(MPageObjectOriented.inherits,MPageObjectOriented.createAttribute);b.Group=function(){this.setControls([]),this.setCurrent(null)},c(b.Group,"Controls"),c(b.Group,"Current");var d=b.Group.prototype;d.add=function(a){this.getControls().push(a)},d.selectSingle=function(a){this.unselectAllExcept(a),a.select()},d.unselectAllExcept=function(a){for(var b=this.getControls(),c=b.length;c--;)b[c].unselect&&b[c]!=a&&b[c].unselect();this.setCurrent(a)},d.each=function(a){for(var b=this.getControls(),c=b.length;c--;)a(b[c])}}(jQuery),function(a){var b=MPageControls,c=MPageObjectOriented.inherits,d=MPageObjectOriented.createAttribute;b.List=function(a){var c=this;b.Control.call(this,a),this.setSelectedIndex(-1),this.setSelectedOption(0),this.setListTemplate(MPageControls.getDefaultTemplates().list),this.setItemTemplate(MPageControls.getDefaultTemplates().listItem),this.setHighlightClass("current"),this.setSelectedOptionClass("selected-option"),this.setOnSelect(function(){}),this.setOnMoveUp(function(){}),this.setOnMoveDown(function(){}),this.setOnKeyDown(function(){}),this.setOnDblClick(function(){}),this.setOnEnter(function(){c.select(c.getSelectedIndex())})},c(b.List,b.Control),d(b.List,"SelectedIndex"),d(b.List,"ListTemplate"),d(b.List,"ItemTemplate"),d(b.List,"Items"),d(b.List,"OnSelect"),d(b.List,"OnMoveUp"),d(b.List,"OnMoveDown"),d(b.List,"OnEnter"),d(b.List,"OnKeyDown"),d(b.List,"OnDblClick"),d(b.List,"HighlightClass"),d(b.List,"DisplayKey"),d(b.List,"SelectedOption"),d(b.List,"SelectedOptionClass");var e=b.List.prototype;e.init=function(){},e.makeItem=function(a){return a.content||(a.content=a[this.getDisplayKey()]),a},e.moveUp=function(){this.getSelectedIndex()<=0?this.setSelectedIndex(0):this.setSelectedIndex(this.getSelectedIndex()-1);var b=a(this.getElement()).children(),c=this.getSelectedIndex(),d=b.children().eq(c),e=d.position().top;e<0&&b.scrollTop(b.scrollTop()+e),this.highlight(c),this.getOnMoveUp()(this.getSelectedItem())},e.moveDown=function(){this.getSelectedIndex()>=this.getItems().length-1?this.setSelectedIndex(this.getItems().length-1):this.setSelectedIndex(this.getSelectedIndex()+1);var b=a(this.getElement()).children(),c=this.getSelectedIndex(),d=b.children().eq(c),e=d.position().top+d.outerHeight(!0)-b.height();e>0&&b.scrollTop(b.scrollTop()+e),this.highlight(c),this.getOnMoveDown()(this.getSelectedItem())},e.highlight=function(a){this.getElement().find("."+this.getHighlightClass()).removeClass(this.getHighlightClass()),this.getElement().find("#"+this.getIdByIndex(a)).addClass(this.getHighlightClass())},e.highlightSelectedOption=function(a){var b=this.getSelectedOption();a<0&&0===b&&(this.getElement().find("#"+this.getIdByIndex(b)).addClass(this.getSelectedOptionClass()),this.getElement().find("#"+this.getIdByIndex(a)).removeClass(this.getSelectedOptionClass())),(a>0||b>0)&&(this.getElement().find(".selected-item").removeClass(this.getSelectedOptionClass()),this.getElement().find("#"+this.getIdByIndex(b)).addClass(this.getSelectedOptionClass()))},e.getSelectedItem=function(){if(this.getSelectedIndex()<=-1)return null;var a=this.getItems();return a[this.getSelectedIndex()]},e.setSelectedItem=function(a){var b=this.getItemIndex(a);this.setSelectedIndex(b),this.highlight(b)},e.getItemIndex=function(a){for(var b=this.getItems(),c=b.length;c--;)if(b[c]==a)return c;return-1},e.renderItems=function(b){var c=this;this.setItems(b),this.setSelectedIndex(-1);var d=[];a.each(b,function(a,b){b=c.makeItem(b),b._elementId=c.getIdByIndex(a);var e=c.getItemTemplate().render(b);d.push(e),e.click(function(){!function(a){c.select(a)}(a)}),e.dblclick(function(){!function(a){c.doubleClick(a)}(a)})});var e=this.getListTemplate().render({items:d,listId:this.getListId()});this.getElement().empty(),this.getElement().append(e),e.keydown(function(a){c.processKeyEvent(a)})},e.processKeyEvent=function(a){switch(this.getOnKeyDown()(a),a.keyCode){case 40:a.preventDefault(),this.moveDown();break;case 38:a.preventDefault(),this.moveUp();break;case 13:this.getOnEnter()()}},e.select=function(a){"undefined"!=typeof a&&null!==a||(a=this.getSelectedIndex()),this.setSelectedIndex(a),this.highlight(a),this.getOnSelect()(this.getSelectedItem()),this.setSelectedOption(a)},e.doubleClick=function(a){this.getOnDblClick()(this.getSelectedItem())},e.getIdByIndex=function(a){return"controls_"+this.getControlId()+"_"+a},e.getListId=function(){return"controls_"+this.getControlId()+"_list"},e.focus=function(){a("#"+this.getListId()).focus()},e.destroy=function(){this.getElement().remove()}}(jQuery),function(a){var b=MPageControls,c=MPageObjectOriented,d=c.inherits,e=c.createAttribute;b.Modeless=function(a,c){this.setOnForceHide(function(){}),b.DetailDialog.call(this,a,c)},b.Modeless.hide=function(){b.Modeless.visibleInstance&&b.Modeless.visibleInstance.getVisible()&&(b.Modeless.visibleInstance.hide(),b.Modeless.visibleInstance.getOnForceHide()())},b.Modeless.visibleInstance=null,d(b.Modeless,b.DetailDialog),e(b.Modeless,"OnForceHide");var f=b.Modeless.prototype;f.show=function(){b.Modeless.hide(),b.DetailDialog.prototype.show.call(this),b.Modeless.visibleInstance=this}}(jQuery),function(a){var b=MPageControls,c=MPageObjectOriented.inherits,d=MPageObjectOriented.createAttribute;b.Selector=function(a,c,d){this.setIsSelected(!1),this.setEnabled(!0),this.setSelectedClass(c),this.setUnselectedClass(d),this.setUnselectOnClickEnabled(!0),this.setOnSelect(function(){}),this.setOnUnselect(function(){}),this.setDisabledClass("dithered"),b.Control.call(this,a)},d(b.Selector,"SelectedClass"),d(b.Selector,"UnselectedClass"),d(b.Selector,"IsSelected"),d(b.Selector,"OnSelect"),d(b.Selector,"OnUnselect"),d(b.Selector,"Enabled"),d(b.Selector,"DisabledClass"),d(b.Selector,"UnselectOnClickEnabled"),c(b.Selector,b.Control);var e=b.Selector.prototype;e.init=function(){var a=this;this.getElement().addClass(this.getUnselectedClass()),this.bind("click",this.getElement(),function(){
a.getIsSelected()&&!a.getUnselectOnClickEnabled()||a.getEnabled()&&a.toggle()}),this.getIsSelected()?this.performSelection():this.performUnselection()},e.toggle=function(){this.getIsSelected()?this.unselect():this.select()},e.select=function(){this.getIsSelected()||(this.performSelection(),this.m_OnSelect(this))},e.performSelection=function(){void 0!==this.getUnselectedClass()&&this.getElement().removeClass(this.getUnselectedClass()),this.getElement().addClass(this.getSelectedClass()),this.setIsSelected(!0)},e.unselect=function(){this.getIsSelected()&&(this.performUnselection(),this.m_OnUnselect(this))},e.performUnselection=function(){this.getElement()&&(void 0!==this.getSelectedClass()&&this.getElement().removeClass(this.getSelectedClass()),this.getElement().addClass(this.getUnselectedClass()),this.setIsSelected(!1))},e.destroy=function(){this.destroyEvents()},e.setEnabled=function(a){this.m_Enabled=a,this.getElement()&&(a?this.getElement().removeClass(this.getDisabledClass()):this.getElement().addClass(this.getDisabledClass()))}}(jQuery),function(a){var b=MPageControls,c=MPageObjectOriented.inherits,d=MPageObjectOriented.createAttribute;b.Tab=function(){this.setButtonTemplate(null),this.setButtonSelectedClass("selected"),this.setContentUnselectedClass("hidden"),this.setOnSelect(function(){}),this.setOnUnselect(function(){}),this.setOnRender(function(){}),this.setEnabled(!0),b.Control.call(this,null)},c(b.Tab,b.Control),d(b.Tab,"Title"),d(b.Tab,"Button"),d(b.Tab,"Content"),d(b.Tab,"ButtonTemplate"),d(b.Tab,"ButtonSelectedClass"),d(b.Tab,"ContentUnselectedClass"),d(b.Tab,"OnSelect"),d(b.Tab,"OnUnselect"),d(b.Tab,"Enabled"),d(b.Tab,"OnRender"),d(b.Tab,"TabGroup");var e=b.Tab.prototype;e.getButtonId=function(){return"control_"+this.getControlId()+"_button"},e.getContentId=function(){return"control_"+this.getControlId()+"_content"},e.setEnabled=function(a){this.m_Enabled=a,this.getButton()&&this.getButton().setEnabled(a)},e.renderButton=function(c){var d=TemplateBuilder.buildTemplate(this.getButtonTemplate()),e=this,f=d.render({tab:this,tabButtonId:this.getButtonId()});a("#"+c).append(f);var g=a("#"+this.getButtonId());if(!g.length)return void this.setButton(void 0);var h=new b.Selector(g);h.setSelectedClass(this.getButtonSelectedClass()),h.setUnselectOnClickEnabled(!1),h.setOnSelect(function(){e.select()}),h.performUnselection(),this.setButton(h)},e.renderContent=function(c){var d=a("<div id='"+this.getContentId()+"'></div>");a("#"+c).append(d),this.setElement(d);var e=new b.Selector(d);e.setUnselectedClass(this.getContentUnselectedClass()),e.setEnabled(!1),e.performUnselection(),this.setContent(e)},e.render=function(a,b){this.renderButton(a),this.renderContent(b),this.getOnRender()()},e.select=function(){var a=this.getButton();void 0!==a&&a.performSelection(),this.getTabGroup()&&this.getTabGroup().unselectAllExcept(this),this.getContent().performSelection(),this.getOnSelect()()},e.unselect=function(){var a=this.getButton();void 0!==a&&a.unselect(),this.getContent().unselect(),this.getOnUnselect()()}}(jQuery),function(a){var b=MPageControls,c=MPageObjectOriented.inherits,d=MPageObjectOriented.createAttribute;b.TabGroup=function(){b.Group.call(this),this.setFirstTabCSSClass("first"),this.setLastTabCSSClass("last")},c(b.TabGroup,b.Group),d(b.TabGroup,"ButtonsContainerId"),d(b.TabGroup,"ContentsContainerId"),d(b.TabGroup,"DefaultButtonTemplate"),d(b.TabGroup,"FirstTabCSSClass"),d(b.TabGroup,"LastTabCSSClass");var e=b.TabGroup.prototype;e.render=function(){for(var a=this.getControls(),b=null,c=null,d=0;d<a.length;d++){var e=a[d];if(null===e.getButtonTemplate()&&e.setButtonTemplate(this.getDefaultButtonTemplate()),e.render(this.getButtonsContainerId(),this.getContentsContainerId()),void 0!==e.getButton()){var f=e.getButton().getElement();null===b&&(b=f),c=f,e.setTabGroup(this)}}var g=this.getFirstTabCSSClass(),h=this.getLastTabCSSClass();null!==b&&null!==g&&b.addClass(g),null!==c&&null!==h&&c.addClass(h)},e.eachControl=function(a){for(var b=this.getControls(),c=b.length;c--;)a(b[c])},e.disableAll=function(){this.eachControl(function(a){a.setEnabled&&a.setEnabled(!1)})},e.enableAll=function(){this.eachControl(function(a){a.setEnabled&&a.setEnabled(!0)})},e.addTab=function(a){this.getControls().push(a)}}(jQuery),function(a){var b=MPageControls,c=MPageObjectOriented.inherits,d=MPageObjectOriented.createAttribute;b.TextHighlighter=function(a){this.setClass("highlight"),this.setTag("span"),b.Control.call(this,a)},c(b.TextHighlighter,b.Control),d(b.TextHighlighter,"Tag"),d(b.TextHighlighter,"Class"),d(b.TextHighlighter,"OnHighlightWord"),b.TextHighlighter.prototype.highlight=function(b){var c,d,e=new RegExp("(?![^&;]+;)(?!<[^<>]*)("+b.replace(/([\^\$\(\)\[\]\{\}\*\.\+\?\|\\])/gi,"\\$1").split(/[, ]/).join("|")+")(?![^<>]*>)(?![^&;]+;)","gi"),f="<"+this.getTag()+" class='"+this.getClass()+"'>",g="</"+this.getTag()+">",h=this.getElement().find("*").contents().filter(function(){return 3===this.nodeType});a.each(h,function(b,h){c=a(h),d=c.text().replace(e,f+"$1"+g),c.replaceWith(d)})}}(jQuery),function(a){var b=MPageControls,c=MPageObjectOriented.createAttribute,d=MPageObjectOriented.inherits;b.Tree=function(a){this.setDynatreeOptions({}),this.setOnSelect(function(){}),b.Control.call(this,a)},d(b.Tree,b.Control),c(b.Tree,"DynatreeOptions"),c(b.Tree,"OnSelect"),c(b.Tree,"SelectedNode");var e=b.Tree.prototype;e.init=function(){var a=this,b=this.getDynatreeOptions();b.onLazyRead=function(b){a.lazyRead(b)},b.onActivate=function(b){a.onSelect(b)},b.OnPostInit=this.treeInit,b.autoFocus=!1,b.initAjax={},this.getElement().dynatree(b)},e.setOnLazyRead=function(a){this.m_OnLazyRead=a,this.lazyRead(this.getElement().dynatree("getRoot"))},e.getOnLazyRead=function(){return this.m_OnLazyRead},e.lazyRead=function(a){this.m_OnLazyRead(a)},e.onSelect=function(a){this.getOnSelect()(a),this.setSelectedNode(a)}}(jQuery),function(){var a=MPageControls,b=MPageObjectOriented.inherits,c=MPageObjectOriented.createAttribute,d=MPageControls.List;a.DropDownList=function(b){this.setList(new d),this.setHighlightClass("current"),this.setIsMouseOverContents(!1),a.DropDown.call(this,b)},c(a.DropDownList,"List"),c(a.DropDownList,"DisplayKey"),c(a.DropDownList,"HighlightClass"),c(a.DropDownList,"IsMouseOverContents"),b(a.DropDownList,a.DropDown);var e=a.DropDownList.prototype;e.init=function(){var b=this,c=$("<div tabindex='0' id='control_"+this.getControlId()+"_selector' class='selector'></div>"),d=$("<div style='display: none' id='control_"+this.getControlId()+"_contents' class ='contents' ></div>"),e=this.getList();e.setElement(d),e.setListTemplate(MPageControls.getDefaultTemplates().list),e.setItemTemplate(MPageControls.getDefaultTemplates().ddListItem),e.setHighlightClass(this.getHighlightClass()),e.setOnSelect(function(){b.selectItem()}),e.bind("mouseover",d,function(){b.setIsMouseOverContents(!0)}),e.bind("mouseout",d,function(){b.setIsMouseOverContents(!1)}),e.bind("blur",c,function(){b.getIsMouseOverContents()||b.hide()}),this.getElement().append(c),this.getElement().append(d),this.setContents(d),this.setElement(c),this.getSelector()&&(this.getSelector().destroyEvents(),this.getSelector().setElement(c),this.getSelector().init()),this.getList().makeItem=function(a){return a.displayKey=b.getDisplayKey(),a},a.DropDown.prototype.init.call(this),this.getDetailDialog().setVisible(!1)},e.onShow=function(){var b=this.getList().getSelectedIndex();a.DropDown.prototype.onShow.call(this),this.getList().setSelectedIndex(b),this.getList().highlight(b)},e.selectItem=function(){this.hide(),this.setValue(this.getList().getSelectedItem()[this.getDisplayKey()]),this.getOnSelect()(this.getList().getSelectedItem())},e.getSelectedItem=function(){return this.getList().getSelectedItem()},e.setSelectedItem=function(a){this.setValue(a[this.getDisplayKey()]),this.getList().setSelectedItem(a)},e.renderItems=function(a){return this.getList().renderItems(a)},e.setItemTemplate=function(a){this.getList().setItemTemplate(a)},e.setItems=function(a){this.getList().setItems(a)},e.selectByIndex=function(a){this.getList().select(a)}}(),function(a){var b=MPageObjectOriented.inherits,c=MPageObjectOriented.createAttribute,d=MPageControls;MPageControls.CclSearch=function(a){this.setRequestCount(0),this.setSynchSuggestionsWidth(!0),this.setInBrowserDir("../../mpages/reports/"),d.AutoSuggest.call(this,a)},b(d.CclSearch,d.AutoSuggest),c(d.CclSearch,"ProgramName"),c(d.CclSearch,"RequestCount"),c(d.CclSearch,"InBrowserDir");var e=d.CclSearch.prototype;e.init=function(){MPageControls.AutoSuggest.prototype.init.call(this);var a=this;this.setTemplate(MPageControls.getDefaultTemplates().cclSearch),this.setOnDelay(function(){a.callProgram()}),this.setRequestItemValueCallback(function(a){return a.content})},e.callProgram=function(){var a=(this.getValue(),this);this.setRequestCount(this.getRequestCount()+1);var b=this.getRequestCount();(new ScriptRequest).setRawDataIndicator(!0).setProgramName(this.getProgramName()).setArtifactInfo({artifactId:"mpages-controls",functionName:"callProgram"}).setParameterArray(this.buildParameters().split(",")).setResponseHandler(function(c){MP_Util.LogScriptCallInfo(null,this,"script_search.js","callProgram"),a.handleSuccess(b,c.getResponse())}).performRequest()},e.handleSuccess=function(a,b){if(a==this.getRequestCount()&&b){var c=JSON.parse(b);if("F"===c.RECORD_DATA.STATUS_DATA.STATUS)return MP_Util.LogScriptCallError(null,b,"program_search.js","handleSuccess"),void MP_Util.LogError(this.getProgramName()+" failed: "+b);if(c){var d=this.makeContext(c);this.setSuggestions(d)}}},e.buildParameters=function(){throw"buildParameters() is abstract."},e.makeContext=function(a){return a}}(jQuery),function(a){var b=MPageObjectOriented.inherits,c=MPageObjectOriented.createAttribute,d=MPageControls;MPageControls.OrderSearch=function(a){this.setRequestCount(0),this.setSynchSuggestionsWidth(!0),d.AutoSuggest.call(this,a)},b(d.OrderSearch,d.AutoSuggest),c(d.OrderSearch,"Criterion"),c(d.OrderSearch,"SuggestionLimit"),c(d.OrderSearch,"EncounterTypeCd"),c(d.OrderSearch,"FacilityId"),c(d.OrderSearch,"SearchIndicators"),c(d.OrderSearch,"VenueType"),c(d.OrderSearch,"RequestCount"),c(d.OrderSearch,"BirthDate"),c(d.OrderSearch,"BirthDateTimeZone"),c(d.OrderSearch,"ClinicalWeight"),c(d.OrderSearch,"ClinicalWeightUnit"),c(d.OrderSearch,"PMAInDays");var e=MPageControls.OrderSearch.prototype;e.init=function(){MPageControls.AutoSuggest.prototype.init.call(this);var a=this;this.setListItemTemplate(MPageControls.getDefaultTemplates().orderSearchItem),this.setTemplate(MPageControls.getDefaultTemplates().orderSearch),this.setOnDelay(function(){var b=a.m_SearchIndicators;a.m_SearchIndicators&=-1025,a.searchOrders(),a.m_SearchIndicators=b}),this.setRequestItemValueCallback(function(a){return a.content})},e.searchOrders=function(a){var b=this.getValue(),c=this;this.setRequestCount(this.getRequestCount()+1);var d=this.getRequestCount(),e=CERN_BrowserDevInd?new XMLHttpRequest:new XMLCclRequest;if(e.onreadystatechange=function(){4==e.readyState&&200==e.status&&(MP_Util.LogScriptCallInfo(null,this,"order_search.js","handleSearchOrderSuccess"),c.handleSearchOrdersSuccess(d,e.responseText,a))},null===this.getSearchIndicators())throw"OrderSearch: no search indicators specified";var f=this.getBirthDate()?this.getBirthDate():"",g=this.getBirthDateTimeZone()?this.getBirthDateTimeZone():0,h=this.getClinicalWeight()?this.getClinicalWeight():0,i=this.getClinicalWeightUnit()?this.getClinicalWeightUnit():0,j=this.getPMAInDays()?this.getPMAInDays():0,k=this.getSuggestionLimit();this.getSuggestionLimit()<=0&&(k=50);var l="^MINE^,^"+b+"^,"+k+","+this.getEncounterTypeCd()+".0,"+this.getFacilityId()+".0,"+this.getCriterion().provider_id+".0,"+this.getCriterion().ppr_cd+".0,"+this.getVenueType()+","+this.getSearchIndicators()+",1,"+this.getCriterion().person_id+".0,^"+f+"^,"+g+","+h+","+i+","+j;if(CERN_BrowserDevInd){var m="mp_search_orders?parameters="+l;e.open("GET",m),e.send(null)}else e.open("GET","mp_search_orders"),e.send(l)},e.handleSearchOrdersSuccess=function(a,b,c){if(a==this.getRequestCount()&&b){var d="";if(d=JSON.parse(b)){if("F"===d.RESULTS.STATUS_DATA.STATUS)return MP_Util.LogScriptCallError(null,b,"order_search.js","handleSearchOrderSuccess"),void MP_Util.LogError("mp_search_orders failed: "+b);if(d.RESULTS.BIRTH_DATE&&this.setBirthDate(d.RESULTS.BIRTH_DATE),d.RESULTS.BIRTH_DATE_TZ&&this.setBirthDateTimeZone(d.RESULTS.BIRTH_DATE_TZ),d.RESULTS.WEIGHT_VALUE&&this.setClinicalWeight(d.RESULTS.WEIGHT_VALUE),d.RESULTS.WEIGHT_CODE&&this.setClinicalWeightUnit(d.RESULTS.WEIGHT_CODE),d.RESULTS.PMA_VALUE&&this.setPMAInDays(d.RESULTS.PMA_VALUE),c)c(b);else{var e=d.RESULTS.ORDERS.concat(d.RESULTS.PLANS);this.renderJson(e)}}}},e.renderJson=function(b){a.each(b,function(a,b){b.SYNONYM?b.content=b.SYNONYM:b.PW_CAT_SYN_NAME&&(b.content=b.PW_CAT_SYN_NAME),6==b.ORDERABLE_TYPE_FLAG?b.iconClass="careset-icon":0===b.ORDERABLE_TYPE_FLAG?b.iconClass="":b.PATH_CAT_ID&&(b.iconClass="powerplan-icon",b.PATH_CAT_SYN_ID=0)}),this.setSuggestions(b)}}(jQuery),function(a){var b=MPageControls,c=MPageObjectOriented.inherits,d=MPageObjectOriented.createAttribute;b.OrderVenueGroup=function(a,c,d,e){b.DropDownList.call(this,a),this.setValue(c),this.setVenueList(d),this.getList().setSelectedOption(e),this.getList().setItemTemplate(MPageControls.getDefaultTemplates().venueTemplate)},d(b.OrderVenueGroup,"VenueList"),c(b.OrderVenueGroup,b.DropDownList);var e=b.OrderVenueGroup.prototype;e.init=function(){var a=this;this.setOnShow(function(){a.getList().setDisplayKey("VENUE_DISPLAY"),a.getList().renderItems(a.getVenueList()),a.getList().highlightSelectedOption(a.getList().getSelectedIndex())}),b.DropDownList.prototype.init.call(this)}}(jQuery),function(a){var b=MPageObjectOriented.inherits,c=MPageObjectOriented.createAttribute,d=MPageControls;MPageControls.PersonnelSearch=function(a){d.CclSearch.call(this,a),this.orgSecurityInd=0,this.organizationInd=0,this.specialtyInd=0,this.physicianInd=0,this.setProgramName("MP_GET_PRSNL_JSON"),this.setSuggestionLimit(10),this.setListItemTemplate(MPageControls.getDefaultTemplates().personnelSearchItem)},b(d.PersonnelSearch,MPageControls.CclSearch),c(d.PersonnelSearch,"UserId"),c(d.PersonnelSearch,"SuggestionLimit");var e=d.PersonnelSearch.prototype;e.setOrgSecurityInd=function(a){this.orgSecurityInd=a},e.getOrgSecurityInd=function(){return this.orgSecurityInd},e.setOrganizationInd=function(a){this.organizationInd=a},e.getOrganizationInd=function(){return this.organizationInd},e.setSpecialtyInd=function(a){this.specialtyInd=a},e.getSpecialtyInd=function(){return this.specialtyInd},e.setPhysicianInd=function(a){this.physicianInd=a},e.getPhysicianInd=function(){return this.physicianInd},e.buildParameters=function(){var a="",b="",c=(this.getValue()||"").split(",");return c.length>1?(a=c[0],b=c[1]):(a=c[0],b=""),"^MINE^,"+this.getUserId()+".00,^"+a+"^,^"+b+"^,"+this.getSuggestionLimit()+","+this.getOrgSecurityInd()+","+this.getOrganizationInd()+","+this.getSpecialtyInd()+","+this.getPhysicianInd()},e.makeContext=function(a){return a.RECORD_DATA.PRSNL},e.setTemplateMaxHeight=function(a){d.setMaxHeight(a)}}(jQuery);var MenuManager=function(){this.menuCollection={},this.menuStack=[],this.offsetParent=null};MenuManager.prototype.addMenuObject=function(a){var b="";return Menu.prototype.isPrototypeOf(a)?(b=a.getId())?this.menuCollection[b]?(logger.logError("MenuManager.addMenuObject: menu id"+b+" is already in use"),!1):(this.menuCollection[b]=a,!0):(logger.logError("MenuManager.addMenuObject: no/invalid menu id given"),!1):(logger.logError("MenuManager.addMenuObject only accepts objects of type Menu or any object that uses Menu.prototype"),!1)},MenuManager.prototype.closeMenuStack=function(a){var b="",c=null;try{return(c=this.menuStack.pop())?!a&&c.isMouseOverMenu()?(this.menuStack.push(c),!0):($("#"+c.getContentElementId()).remove(),c.setContentElementId(""),b=c.getAnchorActiveClass(),b&&$("#"+c.getAnchorElementId()).removeClass(b),c.setIsActive(!1),c.setIsVisible(!1),c.setIsMouseOverMenu(!1),c.clearHoverTimeout(),this.closeMenuStack(a)):(this.offsetParent=null,!0)}catch(a){return logger.logJSError(a,null,"MenuManager","closeMenu"),!1}},MenuManager.prototype.deleteMenuObject=function(a){return delete this.menuCollection[a]},MenuManager.prototype.getMenuObject=function(a){return this.menuCollection[a]||null},MenuManager.prototype.showMenu=function(a){var b="",c=null,d=null,e="",f=null,g=null,h=null,i=null;return(i=this.getMenuObject(a))?($("#menuContent"+a).remove(),i.isRootMenu()&&this.closeMenuStack(!0),e=i.isRootMenu()?"menu-container-root":"menu-container-submenu",g=$("<div></div>").attr("id","menuContent"+a).addClass(e+" "+i.getTypeClass()),i.isPersistent()&&i.isRootMenu()||g.hover(function(){i.setIsMouseOverMenu(!0),i.clearHoverTimeout()},function(){i.setIsMouseOverMenu(!1),i.startHoverTimeout()}),i.setContentElementId("menuContent"+a),h=i.generateMenuContent(),$(h).each(function(a,b){$(g).append(b)}),b=i.getAnchorActiveClass(),b&&$("#"+i.getAnchorElementId()).addClass(b),c=$("#"+i.getAnchorElementId()),i.getContentParentId()&&(d=$("#"+i.getContentParentId())),d&&d.length?$(d).append(g):$(document.body).append(g),$(g).width($(g).outerWidth()),f=new MPageControls.DetailDialog(c,g),f.setAutoFlipHorizontal(i.autoFlipHorizontal()),f.setAutoFlipVertical(i.autoFlipVertical()),f.setElementCorner(i.getAnchorConnectionCorner()),f.setContentsCorner(i.getContentConnectionCorner()),f.show(),i.setIsActive(!0),i.setIsVisible(!0),i.isRootMenu()&&!i.isPersistent()&&i.startHoverTimeout(3e3),void this.menuStack.push(i)):(logger.logError("Menu "+a+" does not exist"),!1)},MenuManager.prototype.refreshMenuDisplay=function(a){var b=null,c=0;return(b=this.getMenuObject(a))?(c=this.menuStack.length-1,void(c>=0&&b===this.menuStack[c]&&this.showMenu(a))):(logger.logError("Menu "+a+" does not exist"),!1)},MenuManager.prototype.updateMenuObject=function(a){return Menu.prototype.isPrototypeOf(a)?(this.menuCollection[a.getId()]=a,!0):(logger.logError("MenuManager.updateMenuObject only accepts objects of type Menu"),!1)};var MP_MenuManager=new MenuManager;MenuItem.prototype.closeOnClick=function(){return this.m_closeOnClick},MenuItem.prototype.isActive=function(){return this.m_activeInd},MenuItem.prototype.isDisabled=function(){return this.m_disabledInd},MenuItem.prototype.getClickFunction=function(){return this.m_clickFunc},MenuItem.prototype.getDefaultClickFunction=function(){return this.m_defaultClickFunction},MenuItem.prototype.getElementId=function(){return this.m_elementId},MenuItem.prototype.getId=function(){return this.m_menuItemId},MenuItem.prototype.getLabel=function(){return this.m_label},MenuItem.prototype.getTypeClass=function(){return this.m_menuItemTypeClass},MenuItem.prototype.setClickFunction=function(a){return"function"==typeof a&&(this.m_clickFunc=a),this},MenuItem.prototype.setCloseOnClick=function(a){return"boolean"==typeof a&&(this.m_closeOnClick=a),this},MenuItem.prototype.setDefaultClickFunction=function(a){return"function"==typeof a&&(this.m_defaultClickFunction=a),this},MenuItem.prototype.setElementId=function(a){return"string"==typeof a&&(this.m_elementId=a),this},MenuItem.prototype.setId=function(a){return a&&"string"==typeof a&&(this.m_menuItemId=a),this},MenuItem.prototype.setIsActive=function(a){return"boolean"==typeof a&&(this.m_activeInd=a),this},MenuItem.prototype.setIsDisabled=function(a){return"boolean"==typeof a&&(this.m_disabledInd=a),this},MenuItem.prototype.setLabel=function(a){var b="";return a&&"string"==typeof a&&(this.m_label=a,this.isActive()&&(b=this.getElementId().replace(/menuSel[0-9]+-/,""),MP_MenuManager.refreshMenuDisplay(b))),this},MenuItem.prototype.setTypeClass=function(a){return"string"==typeof a&&(this.m_menuItemTypeClass=a),this},MenuItem.prototype.generateSelectionContent=function(){return[$("<span>&nbsp;</span>").addClass("menu-selection-ind"),$("<span></span>").addClass("menu-selection").html(this.getLabel())]},Menu.prototype=new MenuItem,Menu.prototype.constructor=MenuItem,Menu.prototype.autoFlipHorizontal=function(){return this.m_autoFlipHorizontal},Menu.prototype.autoFlipVertical=function(){return this.m_autoFlipVertical},Menu.prototype.containsMenuItem=function(a){var b=0,c=this.m_menuItemArr;if(!c)return!1;for(b=c.length;b--;)if(c[b].getId()===a)return!0;return!1},Menu.prototype.isRootMenu=function(){return this.m_rootMenuInd},Menu.prototype.isMouseOverMenu=function(){return this.m_mouseOverContent},Menu.prototype.isMouseOverAnchor=function(){return this.m_mouseOverAnchor},Menu.prototype.isPersistent=function(){return this.m_isPersistent},Menu.prototype.isVisible=function(){return this.m_visibleInd},Menu.prototype.getAnchorActiveClass=function(){return this.m_anchorActiveClass},Menu.prototype.getAnchorConnectionCorner=function(){return this.anchorCorner?this.anchorCorner:["bottom","right"]},Menu.prototype.getAnchorElementId=function(){return this.m_anchorElementId},Menu.prototype.getCloseFunction=function(){return this.m_onCloseFunction},Menu.prototype.getContentConnectionCorner=function(){return this.contentCorner?this.contentCorner:["top","right"]},Menu.prototype.getContentElementId=function(){return this.m_contentElementId},Menu.prototype.getContentParentId=function(){return this.m_contentParentId},Menu.prototype.getMenuItemArray=function(){return this.m_menuItemArr},Menu.prototype.setAnchorConnectionCorner=function(a){return"object"==typeof a&&a.length&&(this.anchorCorner=a),this},Menu.prototype.setAnchorActiveClass=function(a){return"string"==typeof a&&(this.m_anchorActiveClass=a),this},Menu.prototype.setAnchorElementId=function(a){return"string"==typeof a&&(this.m_anchorElementId=a),this},Menu.prototype.setAutoFlipHorizontal=function(a){return"boolean"==typeof a&&(this.m_autoFlipHorizontal=a),this},Menu.prototype.setAutoFlipVertical=function(a){return"boolean"==typeof a&&(this.m_autoFlipVertical=a),this},Menu.prototype.setCloseFunction=function(a){return"function"==typeof a&&(this.m_onCloseFunction=a),this},Menu.prototype.setContentConnectionCorner=function(a){return"object"==typeof a&&a.length&&(this.contentCorner=a),this},Menu.prototype.setContentElementId=function(a){return"string"==typeof a&&(this.m_contentElementId=a),this},Menu.prototype.setContentParentId=function(a){return"string"==typeof a&&(this.m_contentParentId=a),this},Menu.prototype.setElementId=function(a){return"string"==typeof a&&(this.m_elementId=a,this.m_anchorElementId=a),this},Menu.prototype.setIsActive=function(a){var b=null,c=0;if("boolean"==typeof a&&(this.m_activeInd=a),b=this.getMenuItemArray(),b&&b.length)for(c=b.length;c--;)b[c].setIsActive(a);return this},Menu.prototype.setIsRootMenu=function(a){return"boolean"==typeof a&&(this.m_rootMenuInd=a),this},Menu.prototype.setIsMouseOverMenu=function(a){return"boolean"==typeof a&&(this.m_mouseOverContent=a),this},Menu.prototype.setIsMouseOverAnchor=function(a){return"boolean"==typeof a&&(this.m_mouseOverAnchor=a),this},Menu.prototype.setIsPersistent=function(a){return"boolean"==typeof a&&(this.m_isPersistent=a),this},Menu.prototype.setIsVisible=function(a){return"boolean"==typeof a&&(this.m_visibleInd=a),this},Menu.prototype.addMenuItem=function(a){return MenuItem.prototype.isPrototypeOf(a)&&(this.m_menuItemArr||(this.m_menuItemArr=[]),this.m_menuItemArr.push(a),Menu.prototype.isPrototypeOf(a)&&(a.setContentParentId(this.m_contentParentId),MP_MenuManager.updateMenuObject(a))),this},Menu.prototype.startHoverTimeout=function(a){var b=this;a=a||250,this.clearHoverTimeout(),this.m_hoverTimout=window.setTimeout(function(){var a=b.getCloseFunction();a&&a.call(b),MP_MenuManager.closeMenuStack(!1)},a)},Menu.prototype.clearHoverTimeout=function(){window.clearTimeout(this.m_hoverTimout)},Menu.prototype.insertMenuItem=function(a,b){return this.m_menuItemArr||(this.m_menuItemArr=[]),"number"!=typeof b?this:(MenuItem.prototype.isPrototypeOf(a)&&b<=this.m_menuItemArr.length&&b>=0&&(this.m_menuItemArr.splice(b,0,a),Menu.prototype.isPrototypeOf(a)&&MP_MenuManager.updateMenuObject(a)),this)},Menu.prototype.removeMenuItem=function(a){var b=0,c=this.m_menuItemArr;if(!c)return!1;if(MenuItem.prototype.isPrototypeOf(a)&&!this.isActive())for(b=c.length;b--;)if(c[b]===a)return c.splice(b,1),Menu.prototype.isPrototypeOf(a)&&MP_MenuManager.deleteMenuObject(a),!0;return!1},Menu.prototype.generateMenuContent=function(){function a(a){return function(b){var c=null;a.isDisabled()||(a.closeOnClick()?MP_MenuManager.closeMenuStack(!0):MP_MenuManager.closeMenuStack(!1),c=a.getDefaultClickFunction(),c.call(a,b),c=a.getClickFunction(),c&&c.call(a,b))}}function b(a){return function(){Menu.prototype.isPrototypeOf(a)&&(a.setIsMouseOverAnchor(!0),a.isVisible()?a.clearHoverTimeout():window.setTimeout(function(){a.isMouseOverAnchor()&&MP_MenuManager.showMenu(a.getId())},251))}}function c(a){return function(){Menu.prototype.isPrototypeOf(a)&&(a.setIsMouseOverAnchor(!1),a.isVisible()&&a.startHoverTimeout())}}var d="",e=null,f=[],g=this.getMenuItemArray(),h=g?g.length:0,i=null,j="",k=null,l=0;for(l=0;l<h;l++)i=g[l],j="menuSel"+l+"-"+this.getId(),i.setElementId(j),d=i.isDisabled()?"menu-item-disabled":"",e=$("<div></div>").addClass("menu-item "+d+" "+i.getTypeClass()).attr("id",j),$(e).hover(b(i),c(i)),k=i.generateSelectionContent(),$(k).each(function(a,b){$(e).append(b)}),$(e).click(a(i)),f.push(e);return f},Menu.prototype.generateSelectionContent=function(){return[$("<span>&nbsp;</span>").addClass("menu-selection-ind"),$("<span></span>").addClass("menu-selection").html(this.getLabel()),$("<span>&nbsp;</span>").addClass("menu-submenu-ind")]},DynamicMenu.prototype=new Menu,DynamicMenu.prototype.constructor=Menu,DynamicMenu.prototype.getContentCreationFunction=function(){return this.m_contentCreationFunc},DynamicMenu.prototype.setContentCreationFunction=function(a){return"function"==typeof a&&(this.m_contentCreationFunc=a),this},DynamicMenu.prototype.generateMenuContent=function(){var a=this.getContentCreationFunction();return a?a.call(this):null},AdvancedFilterMenu.prototype=new DynamicMenu,AdvancedFilterMenu.prototype.constructor=DynamicMenu,AdvancedFilterMenu.prototype.setAdvancedFilterCreationFunction=function(a){a&&"function"==typeof a&&(this.settings.advancedFilterCreationFunction=a)},AdvancedFilterMenu.prototype.setCancelButtonLabel=function(a){a&&"string"==typeof a&&(this.setIsCancelButtonEnabled(!0),this.settings.cancel.label=a)},AdvancedFilterMenu.prototype.setCancelFunction=function(a){a&&"function"==typeof a&&(this.setIsCancelButtonEnabled(!0),this.settings.cancel.onclick=a)},AdvancedFilterMenu.prototype.setCheckboxClickFunction=function(a){a&&"function"==typeof a&&(this.setIsCheckboxEnabled(!0),this.settings.checkbox.onclick=a)},AdvancedFilterMenu.prototype.setCheckboxLabel=function(a){"string"==typeof a&&(this.settings.checkbox.label=a)},AdvancedFilterMenu.prototype.setActionLinkFunction=function(a){a&&"function"==typeof a&&(this.setIsActionLinkEnabled(!0),this.settings.actionLink.onclick=a)},AdvancedFilterMenu.prototype.setActionLinkLabel=function(a){"string"==typeof a&&(this.settings.actionLink.label=a)},AdvancedFilterMenu.prototype.setIsCancelButtonEnabled=function(a){"boolean"==typeof a&&(this.settings.cancel.enabled=a)},AdvancedFilterMenu.prototype.setIsCheckboxChecked=function(a){"boolean"==typeof a&&(this.settings.checkbox.isChecked=a)},AdvancedFilterMenu.prototype.setIsCheckboxEnabled=function(a){"boolean"==typeof a&&(this.settings.checkbox.enabled=a)},AdvancedFilterMenu.prototype.setIsActionLinkEnabled=function(a){"boolean"==typeof a&&(this.settings.actionLink.enabled=a)},AdvancedFilterMenu.prototype.setIsSaveButtonEnabled=function(a){"boolean"==typeof a&&(this.settings.save.enabled=a)},AdvancedFilterMenu.prototype.setSaveButtonLabel=function(a){a&&"string"==typeof a&&(this.setIsSaveButtonEnabled(!0),this.settings.save.label=a)},AdvancedFilterMenu.prototype.setSaveFunction=function(a){a&&"function"==typeof a&&(this.setIsSaveButtonEnabled(!0),this.settings.save.onclick=a)},AdvancedFilterMenu.prototype.setWidth=function(a){a&&"number"==typeof a&&(this.settings.dimensions.width=a)},ContextMenu.prototype=new Menu,ContextMenu.prototype.constructor=Menu,ContextMenu.prototype.getXOffset=function(){return this.m_xOffset},ContextMenu.prototype.getYOffset=function(){return this.m_yOffset},ContextMenu.prototype.setXOffset=function(a){return"number"==typeof a&&(this.m_xOffset=a),this},ContextMenu.prototype.setYOffset=function(a){return"number"==typeof a&&(this.m_yOffset=a),this},ContextMenu.prototype.setAnchorElement=function(){$(document.body).append($("<div id='"+this.getId()+"Anchor' class='context-menu'></div>").css({top:this.getYOffset(),left:this.getXOffset()}))},ContextMenu.prototype.removeAnchorElement=function(){$("#"+this.getId()+"Anchor").remove()},MenuSelection.prototype=new MenuItem,MenuSelection.prototype.constructor=MenuItem,MenuSelection.prototype.isSelected=function(){return this.m_selectedInd},MenuSelection.prototype.getSelectedClass=function(){return this.m_selectedClass},MenuSelection.prototype.setIsSelected=function(a){var b="",c=null;return"boolean"==typeof a&&(this.m_selectedInd=a,this.isActive()&&(b=this.getSelectedClass(),c=$("#"+this.getElementId()+" :first-child"),a?$(c).addClass(b):$(c).removeClass(b))),this},MenuSelection.prototype.setSelectedClass=function(a){return"string"==typeof a&&(this.m_selectedClass=a),this},MenuSelection.prototype.toggleSelection=function(){this.setIsSelected(!this.isSelected())},MenuSelection.prototype.generateSelectionContent=function(){var a=this.getSelectedClass();return this.isSelected()||(a=""),[$("<span>&nbsp;</span>").addClass("menu-selection-ind "+a),$("<span></span>").addClass("menu-selection").html(this.getLabel())]},MenuSeparator.prototype=new MenuItem,MenuSeparator.prototype.constructor=MenuItem,MenuSeparator.prototype.generateSelectionContent=function(){return["&nbsp;"]},MenuSeparator.prototype=new MenuItem,MenuSeparator.prototype.constructor=MenuItem,MenuSeparator.prototype.generateSelectionContent=function(){return["&nbsp;"]},ThemeSelector.prototype=new DynamicMenu,ThemeSelector.prototype.constructor=DynamicMenu,ThemeSelector.prototype.themeSelectorClickHandler=function(a){var b=a.target.getAttribute("data-color"),c=_g(a.target.getAttribute("style-id"));if(c){var d="brown|cernerblue|darkgreen|grey|green|lightblue|lightgrey|lowlight|navy|orange|pink|purple|yellow";if(d.indexOf(b)>=0){var e=/brown|cernerblue|darkgreen|grey|green|lightblue|lightgrey|lowlight|navy|orange|pink|purple|yellow/;c.className=c.className.replace(e,"")}Util.Style.acss(c,b);var f=Number(a.target.getAttribute("component-id")),g=MP_Util.GetCompObjById(f);g.setCompColor(b),setTimeout(function(){MP_Core.AppUserPreferenceManager.SaveCompPreferences(f,b,null,!1)},0)}},UtilitiesMenu.prototype=new DynamicMenu,UtilitiesMenu.prototype.constructor=DynamicMenu,UtilitiesMenu.prototype.setIsRootMenu=function(a){if("boolean"==typeof a){if(!a)throw new Error("UtilitiesMenu can only be used as root menus");this.m_rootMenuInd=a}},UtilitiesMenu.prototype.setIsPersistent=function(a){if("boolean"==typeof a){if(!a)throw new Error("UtilitiesMenu can only be used as a persistent menu");this.m_isPersistent=a}},UtilitiesMenu.prototype.setUtilitiesContentCreationFunction=function(a){a&&"function"==typeof a&&(this.settings.utilitiesContentCreationFunction=a)},UtilitiesMenu.prototype.setWidth=function(a){a&&"number"==typeof a&&(this.settings.dimensions.width=a)},UtilitiesMenu.prototype.setMaxHeight=function(a){a&&"number"==typeof a&&(this.settings.dimensions.maxHeight=a)};