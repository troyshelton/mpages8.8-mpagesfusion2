//! moment.js
//! version : 2.17.1
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
function MPageComponent(){this.m_alwaysHideHeader=!1,this.m_AutoSuggestAddTimerName="",this.m_AutoSuggestScript="",this.m_brlookbackUnits=0,this.m_brlookbackUnitTypeFlag=0,this.m_column=0,this.m_componentPreferences=null,this.m_compDisp=!0,this.m_compLoad=!1,this.m_compLoadTimerName="",this.m_compMenuId="",this.m_componentId=0,this.m_componentFilterMean="",this.m_compRenderTimerName="",this.m_componentTable=null,this.m_flowsheetTable=null,this.criterion=null,this.m_dateFormat=2,this.m_displayFilters=null,this.m_editMode=!1,this.m_filterMappingsObj={},this.m_footerText="",this.m_gapCheckBannerDismiss=null,this.m_grouper_arr=null,this.m_grouperFilterCatalogCodes=null,this.m_grouperFilterCatLabel="",this.m_grouperFilterCriteria=null,this.m_grouperFilterEventSets=null,this.m_grouperFilterLabel="",this.m_groups=null,this.m_hasActionsMenu=!1,this.m_hasCompFilters=!1,this.m_hasLookBackDropDown=!1,this.m_includeLineNumber=!1,this.m_isAlwaysExpanded=!1,this.m_isCustomizeView=!1,this.m_isExpanded=!1,this.m_isPlusAdd=!1,this.m_isPlusAddCustom=!1,this.m_isRefreshEnabled=!0,this.m_isScrollEnabled=!1,this.m_iViewItemsArr=null,this.m_iViewMenuItems=null,this.m_label="",this.m_link="",this.m_lookbackDays=0,this.m_lookBackMenuItems=null,this.m_lookbackUnits=0,this.m_resultRangeDirection=0,this.m_lookbackUnitTypeFlag=0,this.m_menuItems=null,this.m_menuOptionNames=[],this.m_menuOptions=[],this.m_newLink=!1,this.m_pageGroupSeq=0,this.m_renderStrategy=null,this.m_reportId=0,this.m_reportMean="",this.m_resourceRequired=!1,this.m_rootComponentNode=null,this.m_sectionContentNode=null,this.m_sequence=0,this.m_scope=0,this.m_ScopeHTML="",this.m_scrollNumber=0,this.m_selectedDataGroup=null,this.m_selectedTimeFrame=null,this.m_styles=null,this.m_subLabel="",this.m_toggleStatus=1,this.m_activeHeaderToggleIndex=0,this.m_headerToggleObjects=null,this.m_aggregateTimer=null,this.m_hiLookupKey="",this.m_aliasType="",this.m_aliasPoolCd=0,this.m_externalDataInd=!1,this.m_hiTestUri="",this.m_patEnteredDataInd=!1,this.m_medHistory=!1,this.m_medRecAdmit=!1,this.m_medRecTransfer=!1,this.m_medRecCrossEncTx=!1,this.m_medRecDischarge=!1,this.m_requiredCriteria=null,this.m_isRequired=!1,this.m_overrideInd=null,this.m_isSatisfied=!1,this.m_disclaimerText="",this.m_isContextualViewCompatible=!1,this.m_isAddedToContextualView=!1,this.m_contextualViewControl=null,this.m_contextualViewControlInPlaceholderView=null,this.m_placeholderView=null,this.m_rootPlaceholderComponentNode=null,this.m_canHaveContextualViewControl=!1,this.m_sequenceInContextualView=0,this.m_resultCount=0,this.m_onComponentDisclaimerClose=function(){},this.m_onSubLabelChange=function(){},this.m_onFinalizeComponent=function(){},this.m_onContextualViewToggle=function(){},this.m_onUpdateHeader=function(){}}function DummyComponentStyle(){this.initByNamespace("dummy-component")}function DummyComponent(a){this.setCriterion(a),this.setStyles(new DummyComponentStyle)}function CPMMPageComponent(){this.m_menuIds=null,this.m_intentionCd=0,this.m_intentionMean="",this.m_conceptCd=0,this.m_conceptMean="",this.m_conceptDisp="",this.m_nodeId=0,this.m_cpComponentId=0,this.m_customContentLocation="",this.m_customOptionsObject=null,this.m_triggeringNomenclature=0,this.m_isHidden=!1,this.m_conceptGroupCd=0,this.m_conceptGroupConfig=[],this.m_conceptGroupMeanings=[],this.m_componentConfig=[],this.m_pathwayActions=[],this.m_pathwayInstanceId=0}function MPageCPNodeController(){this.m_id="",this.m_containerId="",this.m_nodeConfiguration=null,this.m_conceptConfiguration=null,this.m_componentList=null,this.m_view=null,this.m_conceptMean="",this.m_conceptCd=0,this.m_pathwayTypeMean="",this.m_pathwayTypeCd=0,this.m_pathwayId=0,this.m_pathwayInstance=null,this.m_customContentLocation="",this.m_isHidden=!1}function CPMController(){this.m_triggeringNomenclature=0,this.m_customOptionsObject=null,this.m_cpmTabMenuId=null}function CPMRenderStrategy(){}function CPNodeView(){this.m_id=0,this.m_customCSS="",this.m_renderStrategy=null,this.m_containerId=""}function CPMView(){}function FusionRenderStrategy(){}function hmo(a,b,c){function d(){try{if(!b.hmo)return;if(!$(c.getSectionContentNode()).find($(b._ps)).length)return void $(b).remove();setTimeout(d,1e3)}catch(a){return}}function e(){if(b.hmo===!0){if(d(),c&&c.isEditMode())return void clearTimeout(b.timer);f.display="block",j+b.offsetWidth>h[1]+i[1]&&(j=j-40-b.offsetWidth,j<0&&(j=0)),k+b.offsetHeight>h[0]+i[0]&&(k-40-b.offsetHeight<i[0]?j>0&&(k=10+i[0]):k=k-40-b.offsetHeight),document.body.appendChild(b),f.left=j+"px",f.top=k+"px",b.show=!0}}a=a||window.event;var f=b.style,g=getPosition(a),h=gvs(),i=gso(),j=g.x+20,k=g.y+20;b._ps=b.previousSibling,b.hmo=!0,b.timer=setTimeout(e,500)}function hmm(a,b,c){if(b.show){if(c&&c.isEditMode())return void clearTimeout(b.timer);var d=b.style,e=getPosition(a),f=gvs(),g=gso(),h=e.x+20,i=e.y+20;h+b.offsetWidth>f[1]+g[1]&&(h=h-40-b.offsetWidth,h<0&&(h=0)),i+b.offsetHeight>f[0]+g[0]&&(i-40-b.offsetHeight<g[0]?h>0&&(i=10+g[0]):i=i-40-b.offsetHeight),a=a||window.event,d.top=i+"px",d.left=h+"px"}}function hmt(a,b,c){return c&&c.isEditMode()?void clearTimeout(b.timer):(b.hmo=!1,b._ps||(b._ps=b.previousSibling),clearTimeout(b.timer),a=a||window.event,b.style.display="",Util.ia(b,b._ps),void(b.show=!1))}function hs(a,b,c){var d=a.style.backgroundColor,e=a.style.borderColor;b&&"DIV"==b.tagName&&(a.onmouseenter=function(d){c&&c.isEditMode()||(a.onmouseover=null,a.onmouseout=null,hmo(d,b,c))},a.onmouseover=function(d){c&&(c.isEditMode()||Util.Style.ccss(this,"row-selected"))||(a.style.backgroundColor="#FFFFCC",a.style.borderColor="#CCCCCC",hmo(d,b,c))},a.onmousemove=function(d){c&&(c.isEditMode()||Util.Style.ccss(this,"row-selected"))||(a.style.backgroundColor="#FFFFCC",a.style.borderColor="#CCCCCC",hmm(d,b,c))},a.onmouseout=function(f){a.style.backgroundColor=d,a.style.borderColor=e,hmt(f,b,c)},a.onmouseleave=function(f){a.style.backgroundColor=d,a.style.borderColor=e,a.onmouseover=null,a.onmouseout=null,hmt(f,b,c)},a.onmouseup=function(f){if(c){if(!c.isEditMode())return;a.style.backgroundColor=d,a.style.borderColor=e,hmt(f,b,c)}},Util.Style.acss(b,"hover"))}function _g(a){return document.getElementById(a)}function _gbt(a,b){return b=b||document,b.getElementsByTagName(a)}function insertAfter(a,b){Util.ia(a,b)}function getPosition(a){a=a||window.event;var b={x:0,y:0};if(a.pageX||a.pageY)b.x=a.pageX,b.y=a.pageY;else{var c=document.documentElement,d=document.body;b.x=a.clientX+(c.scrollLeft||d.scrollLeft)-(c.clientLeft||0),b.y=a.clientY+(c.scrollTop||d.scrollTop)-(c.clientTop||0)}return b}function gvs(){var a=window,b=document,c=b.body,d=b.documentElement;return"undefined"!=typeof a.innerWidth?[a.innerHeight,a.innerWidth]:"undefined"!=typeof d&&"undefined"!=typeof d.clientWidth&&0!==d.clientWidth?[d.clientHeight,d.clientWidth]:[c.clientHeight,c.clientWidth]}function gso(){var a=document,b=a.body,c=window,d=a.documentElement,e=d.scrollTop,f=b.scrollTop,g=d.scrollLeft,h=b.scrollLeft;return"number"==typeof c.pageYOffset?[c.pageYOffset,c.pageXOffset]:"number"==typeof e?f>e||h>g?[f,h]:[e,g]:[f,h]}function MPageComponentInteractive(){this.m_DocPrivObj=null,this.m_DocPrivMask=0,MPageComponentInteractive.method("setPrivObj",function(a){this.m_DocPrivObj=a}),MPageComponentInteractive.method("getDocPrivObj",function(){return this.m_DocPrivObj}),MPageComponentInteractive.method("setIsCompViewable",function(a){this.m_isCompViewable=a}),MPageComponentInteractive.method("setIsCompAddable",function(a){this.m_isCompAddable=a}),MPageComponentInteractive.method("setIsCompModifiable",function(a){this.m_isCompModifiable=a}),MPageComponentInteractive.method("setIsCompUnchartable",function(a){this.m_isCompUnchartable=a}),MPageComponentInteractive.method("setIsCompSignable",function(a){this.m_isCompSignable=a}),MPageComponentInteractive.method("getCompPrivMask",function(){var a=parseInt("1",2),b=parseInt("10",2),c=parseInt("100",2),d=parseInt("1000",2),e=parseInt("10000",2),f=0;return f=(this.m_isCompViewable?a:0)|(this.m_isCompAddable?b:0)|(this.m_isCompModifiable?c:0)|(this.m_isCompUnchartable?d:0)|(this.m_isCompSignable?e:0)}),MPageComponentInteractive.method("getPrivFromArray",function(a,b){for(var c=b.length;c--;)if(a==b[c].EVENT_CD)return!0;return!1}),MPageComponentInteractive.method("isResultEventCodeSignable",function(a){return!!this.getPrivFromArray(a,this.m_DocPrivObj.getResponse().EVENT_PRIVILEGES.VIEW_RESULTS.GRANTED.EVENT_CODES)}),MPageComponentInteractive.method("isResultEventCodeAddable",function(a){return!!this.getPrivFromArray(a,this.m_DocPrivObj.getResponse().EVENT_PRIVILEGES.ADD_DOCUMENTATION.GRANTED.EVENT_CODES)}),MPageComponentInteractive.method("isResultEventCodeModifiable",function(a){return!!this.getPrivFromArray(a,this.m_DocPrivObj.getResponse().EVENT_PRIVILEGES.MODIFY_DOCUMENTATION.GRANTED.EVENT_CODES)}),MPageComponentInteractive.method("isResultEventCodeUnchartable",function(a){return!!this.getPrivFromArray(a,this.m_DocPrivObj.getResponse().EVENT_PRIVILEGES.UNCHART_DOCUMENTATION.GRANTED.EVENT_CODES)}),MPageComponentInteractive.method("isResultEventCodeSignable",function(a){return!!this.getPrivFromArray(a,this.m_DocPrivObj.getResponse().EVENT_PRIVILEGES.SIGN_DOCUMENTATION.GRANTED.EVENT_CODES)}),MPageComponentInteractive.method("getEventCdPrivs",function(a,b){var c=this,d=this.getCriterion(),e=MP_Util.CreateParamArray(b,1),f=this.getCompPrivMask(),g=["^MINE^",d.provider_id+".0",e,"0.0",f,d.ppr_cd+".0"],h=new MP_Core.ScriptRequest(this,"ENG:MPG.MPCINTERACTIVE - Get Doc prefs");h.setArtifactInfo({artifactId:"mpage-component-defs",functionName:"getEventCdPrivs"}),h.setParameters(g),h.setName("getCompPrivs"),h.setProgramName("MP_GET_PRIVS_BY_CODE_JSON"),h.setAsync(!1),MP_Core.XMLCCLRequestCallBack(a,h,function(a){c.processEventCdReply(a)})}),MPageComponentInteractive.method("processEventCdReply",function(a){this.m_DocPrivObj=a})}function MPageGrouper(){this.m_groups=null,MPageGrouper.method("setGroups",function(a){this.m_groups=a}),MPageGrouper.method("getGroups",function(){return this.m_groups}),MPageGrouper.method("addGroup",function(a){null===this.m_groups&&(this.m_groups=[]),this.m_groups.push(a)})}function MPageGroup(){this.m_groupName="",this.m_groupSeq=0,this.m_groupId=0,MPageGroup.method("setGroupId",function(a){this.m_groupId=a}),MPageGroup.method("getGroupId",function(){return this.m_groupId}),MPageGroup.method("setGroupName",function(a){this.m_groupName=a}),MPageGroup.method("getGroupName",function(){return this.m_groupName}),MPageGroup.method("setSequence",function(a){this.m_groupSeq=a}),MPageGroup.method("getSequence",function(){return this.m_groupSeq})}function MPageEventSetGroup(){this.m_eventSets=null,this.m_isSequenced=!1,MPageEventSetGroup.method("isSequenced",function(){return this.m_isSequenced}),MPageEventSetGroup.method("setSequenced",function(a){this.m_isSequenced=a}),MPageEventSetGroup.method("getEventSets",function(){return this.m_eventSets}),MPageEventSetGroup.method("setEventSets",function(a){this.m_eventSets=a}),MPageEventSetGroup.method("addEventSet",function(a){null===this.m_eventSets&&(this.m_eventSets=[]),this.m_eventSets.push(a)})}function MPageCatalogCodeGroup(){this.m_catalogCodes=null,this.m_isSequenced=!1,MPageCatalogCodeGroup.method("isSequenced",function(){return this.m_isSequenced}),MPageCatalogCodeGroup.method("setSequenced",function(a){this.m_isSequenced=a}),MPageCatalogCodeGroup.method("getCatalogCodes",function(){return this.m_catalogCodes}),MPageCatalogCodeGroup.method("setCatalogCodes",function(a){this.m_catalogCodes=a}),MPageCatalogCodeGroup.method("addCatalogCode",function(a){null===this.m_catalogCodes&&(this.m_catalogCodes=[]),this.m_catalogCodes.push(a)})}function MPageEventCodeGroup(){this.m_eventCodes=null,this.m_isSequenced=!1,MPageEventCodeGroup.method("isSequenced",function(){return this.m_isSequenced}),MPageEventCodeGroup.method("setSequenced",function(a){this.m_isSequenced=a}),MPageEventCodeGroup.method("getEventCodes",function(){return this.m_eventCodes}),MPageEventCodeGroup.method("setEventCodes",function(a){this.m_eventCodes=a}),MPageEventCodeGroup.method("addEventCode",function(a){null===this.m_eventCodes&&(this.m_eventCodes=[]),this.m_eventCodes.push(a)})}function MPageCodeValueGroup(){this.m_codes=null,MPageCodeValueGroup.method("getCodes",function(){return this.m_codes}),MPageCodeValueGroup.method("setCodes",function(a){this.m_codes=a}),MPageCodeValueGroup.method("addCode",function(a){null===this.m_codes&&(this.m_codes=[]),this.m_codes.push(a)})}function MPageSequenceGroup(){this.m_items=null,this.m_mapItems=null,this.m_isMultiType=!1,MPageSequenceGroup.method("getItems",function(){return this.m_items}),MPageSequenceGroup.method("setItems",function(a){this.m_items=a}),MPageSequenceGroup.method("addItem",function(a){null===this.m_items&&(this.m_items=[]),this.m_items.push(a)}),MPageSequenceGroup.method("setMultiValue",function(a){this.m_isMultiType=a}),MPageSequenceGroup.method("isMultiValue",function(){return this.m_isMultiType}),MPageSequenceGroup.method("getMapItems",function(){return this.m_mapItems}),MPageSequenceGroup.method("setMapItems",function(a){this.m_mapItems=a})}function MPageGroupValue(){this.m_description="",this.m_id=0,this.m_meaning="",this.m_name="",this.m_qualifierFlag=0,this.m_sequence=0,this.m_valSequence=0,this.m_valTypeFlag=0,this.m_parentId=0}function ComponentStyle(){this.m_nameSpace="",this.m_id="",this.m_className="section",this.m_contentId="",this.m_contentClass="sec-content",this.m_headerClass="sec-hd",this.m_headToggle="sec-hd-tgl",this.m_secTitle="sec-title",this.m_aLink="",this.m_secTotal="sec-total",this.m_info="",this.m_subSecHeaderClass="sub-sec-hd",this.m_subSecTitleClass="sub-sec-title",this.m_subSecContentClass="sub-sec-content",this.m_contentBodyClass="content-body",this.m_searchBoxDiv="search-box-div",this.m_subTitleDisp="sub-title-disp",this.m_componentId=0,this.m_color="",this.m_componentType=null,ComponentStyle.method("initByNamespace",function(a){this.m_nameSpace=a,this.m_id=a,this.m_className+=" "+a+"-sec",this.m_contentId=a+"Content",this.m_aLink=a+"Link",this.m_info=a+"-info"}),ComponentStyle.method("getNameSpace",function(){return this.m_nameSpace}),ComponentStyle.method("getId",function(){return this.m_id+this.m_componentId}),ComponentStyle.method("getClassName",function(){return this.m_className}),ComponentStyle.method("getColor",function(){return this.m_color}),ComponentStyle.method("getContentId",function(){return this.m_contentId+this.m_componentId}),ComponentStyle.method("getContentBodyClass",function(){return this.m_contentBodyClass}),ComponentStyle.method("getContentClass",function(){return this.m_contentClass}),ComponentStyle.method("getHeaderClass",function(){return this.m_headerClass}),ComponentStyle.method("getHeaderToggle",function(){return this.m_headToggle}),ComponentStyle.method("getTitle",function(){return this.m_secTitle}),ComponentStyle.method("getLink",function(){return this.m_aLink}),ComponentStyle.method("getTotal",function(){return this.m_secTotal}),ComponentStyle.method("getInfo",function(){return this.m_info}),ComponentStyle.method("getSearchBoxDiv",function(){return this.m_searchBoxDiv}),ComponentStyle.method("getSubSecContentClass",function(){return this.m_subSecContentClass}),ComponentStyle.method("getSubSecContentClass",function(){return this.m_subSecContentClass}),ComponentStyle.method("getSubSecHeaderClass",function(){return this.m_subSecHeaderClass}),ComponentStyle.method("getSubSecTitleClass",function(){return this.m_subSecTitleClass}),ComponentStyle.method("getSubTitleDisp",function(){return this.m_subTitleDisp}),ComponentStyle.method("getComponentType",function(){return this.m_componentType}),ComponentStyle.method("setComponentId",function(a){this.m_componentId=a}),ComponentStyle.method("setNameSpace",function(a){this.m_nameSpace=a}),ComponentStyle.method("setId",function(a){this.m_id=a}),ComponentStyle.method("setClassName",function(a){this.m_className=a}),ComponentStyle.method("setColor",function(a){this.m_color=a,this.setClassName(this.getClassName()+" "+a)}),ComponentStyle.method("setContextId",function(a){this.m_contentId=a}),ComponentStyle.method("setContentBodyClass",function(a){this.m_contentBodyClass=a}),ComponentStyle.method("setContentClass",function(a){this.m_contentClass=a}),ComponentStyle.method("setContextClass",function(a){this.m_contentClass=a}),ComponentStyle.method("setHeaderClass",function(a){this.m_headerClass=a}),ComponentStyle.method("setHeaderToggle",function(a){this.m_headToggle=a}),ComponentStyle.method("setSearchBoxDiv",function(a){this.m_searchBoxDiv=a}),ComponentStyle.method("setSubSecContentClass",function(a){this.m_subSecContentClass=a}),ComponentStyle.method("setSubSecHeaderClass",function(a){this.m_subSecHeaderClass=a}),ComponentStyle.method("setSubSecTitleClass",function(a){this.m_subSecTitleClass=a}),ComponentStyle.method("setSubTitleDisp",function(a){this.m_subTitleDisp=a}),ComponentStyle.method("setTitle",function(a){this.m_secTitle=a}),ComponentStyle.method("setLink",function(a){this.m_aLink=a}),ComponentStyle.method("setTotal",function(a){this.m_secTotal=a}),ComponentStyle.method("setInfo",function(a){this.m_info=a}),ComponentStyle.method("setComponentType",function(a){this.m_componentType=a})}function SortMPageComponentRows(a,b){return a.getSequence()<b.getSequence()?-1:a.getSequence()>b.getSequence()?1:0}function SortMPageComponentCols(a,b){return a.getColumn()<b.getColumn()?-1:a.getColumn()>b.getColumn()?1:SortMPageComponentRows(a,b)}function SortMPageComponents(a,b){return a.getPageGroupSequence()<b.getPageGroupSequence()?-1:a.getPageGroupSequence()>b.getPageGroupSequence()?1:SortMPageComponentCols(a,b)}function populateRemoteLogInfoObject(a,b,c){return{errorLevel:"Page Level Error",errorInfo:a,contextInfo:b,stackTrace:c}}/*
 * Copyright (c) 2007 	Josh Davis ( http://joshdavis.wordpress.com )
 *
 * Licensed under the MIT License ( http://www.opensource.org/licenses/mit-license.php ) as follows:
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 *
 */
function EventListener(){this.events=[],this.builtinEvts=[]}function SharedConditionResource(a){SharedResource.call(this,a),this.m_condPrivsRetrieved=!1,this.m_nkpNomenclatures=[],this.m_cernerNKPNomenclature=0,this.m_hasChronicProbs=!1,this.m_condPrivObj={canViewNKP:!1,canUpdtNKP:!1,canModifyChronic:!1,canModifyThisVisit:!1,canAddChronicFreeText:!1,nkpNomenclatures:[],cernerNKPNomenclature:0,hasChronicProbs:!1},this.m_metaObj={},this.m_eventSource=null,this.m_isSpecificitiesRetrieved=!1}function BaseSharedResource(a){var b=a,c=!1,d=!1,e=null,f=null,g=null,h={};this.getOptions=function(){return h||{}},this.setOptions=function(a){h=a},this.getName=function(){return b},this.setName=function(a){b=a},this.isResourceAvailable=function(){return c},this.setIsAvailable=function(a){c=!!a},this.isBeingRetrieved=function(){return d},this.setIsBeingRetrieved=function(a){d=!!a},this.getResourceData=function(){return e},this.setResourceData=function(a){e=a},this.getEventListenerFlag=function(){return f},this.setEventListenerFlag=function(a){f=a},this.getEventListenerObject=function(){return g},this.setEventListenerObject=function(a){g=a}}function SharedResource(a){BaseSharedResource.call(this,a);var b=null,c=[];this.getCclProgram=function(){return b},this.setCclProgram=function(a){b=a},this.getCclParams=function(){return c},this.setCclParams=function(a){c=a}}function RestfulSharedResource(a){BaseSharedResource.call(this,a)}function LocalSharedResource(a){BaseSharedResource.call(this,a)}function createViewObject(a,b){try{if(!a||"string"!=typeof a)return logger.logError("categoryMean parameter must be a string and not null"),null;switch(a){case"MP_ICU_DASHBOARD":return new ICUDashboardMPage;case"MP_COMMON_ORDERS_V4":var c=new DummyMPage;return c.setCategoryMean(a),c;case"MP_REACH_V5":return new ReachSummaryMPage;case"MP_CALC_SUMMARY":return new CalculatorsSummaryMPage(a)}var d=MP_Util.getObjectDefinitionMapping(a);!d&&/^VB_.*/.test(a)?(d=MP_Util.getObjectDefinitionMapping(b),d||(d=ViewBuilderMPage)):d||(d=MPageView);var e=new d;return e.setCategoryMean(a),e}catch(b){return"not_defined"===b.type?logger.logError("No object type defined for "+a+": "+b.message):logger.logJSError(b,null,"mpage-driver.js","createViewObject"),null}}function renderComponentContainer(a,b,c){try{populateMPageLocale();var d=new ComponentContainer;return d.setCategoryMean(a),d.setOptionsBitmask(b||0),c?d.setViewSettings(c):parseMPageSettingsJSON(),d.initializeView(),d.loadViewSettings(),d.initializeComponents(),d.renderView(),d.postProcessing(),d}catch(a){throw logger.logJSError(a,null,"mpage-driver.js","renderComponentContainer"),a}}function renderSingleComponent(a){populateMPageLocale();var b=parseComponentSettingsJSON(a),c=createPageCriterion(""),d=MP_Util.getObjectDefinitionMapping(b.F_MN),e=new d(c),f=e.getStyles().getNameSpace(),g=document.getElementById("mainContainer"),h="WF"===b.F_MN.substring(0,2).toUpperCase()?CERN_COMPONENT_TYPE_WORKFLOW:CERN_COMPONENT_TYPE_SUMMARY;e.getStyles().setComponentType(h),e.initializeComponent(c),MP_Core.AppUserPreferenceManager.Initialize(c,CERN_driver_mean),MP_Core.AppUserPreferenceManager.GetPreferences(CERN_driver_mean).then(function(){e.loadComponentSettings(b),h===CERN_COMPONENT_TYPE_WORKFLOW?(e.setAlwaysExpanded(!0),e.setRenderStrategy(new WorkflowRenderStrategy),g.className="wf"):(e.setRenderStrategy(new SummaryRenderStrategy),g.className="");var a=$("<div></div>").addClass("vwp-views").attr("id","vwpBody").height($(window).height());a.append(e.getRenderStrategy().createComponentShell()),$(g).append(a),$(window).resize(function(){CERN_Browser.validateWindowResize()&&(a.height($(window).height()),e.resizeComponent())}),e.setRootComponentNode(document.getElementById(f+e.getComponentId())),e.setSectionContentNode(document.getElementById(f+"Content"+e.getComponentId())),e.retrieveComponentData();var c=e.getMenu();c&&c.getMenuItemArray()&&c.getMenuItemArray().length||(document.getElementById("mainCompMenu"+f+e.getComponentId()).style.display="none")})}function createPageCriterion(a){var b=CERN_Platform.getCriterion(),c=MP_Util.GetCriterion(b,CERN_static_content);return c.category_mean=a,c}function OpenDischargeProcess(a,b,c){var d=CERN_Platform.getDiscernObject("DISCHARGEPROCESS");d&&(d.person_id=b,d.encounter_id=a,d.user_id=c,d.LaunchDischargeDialog())}function parseComponentSettingsJSON(a){try{if("undefined"!=typeof a){var b=JSON.parse(a).CS;if("undefined"!=typeof b)return b;throw new Error(i18n.discernabu.mpageDriver.INCORRECT_JSON_STRING)}throw new Error(i18n.discernabu.mpageDriver.NO_JSON_STRING)}catch(a){throw logger.logJSError(a,null,"mpage-driver.js","parseComponentSettingsJSON"),a}}function parseMPageSettingsJSON(){try{if("undefined"==typeof m_mpageSettingsJSON)throw new Error(i18n.discernabu.mpageDriver.INCORRECT_DRIVER);m_bedrockMpage=JSON.parse(m_mpageSettingsJSON).MP_SETTINGS,m_mpageSettingsJSON=null}catch(a){throw logger.logJSError(a,null,"mpage-driver.js","parseMPageSettingsJSON"),a}}function populateMPageLocale(){try{var a=JSON.parse(m_dateformatJSON);MPAGE_LOCALE=new mp_formatter.Locale(a.datetimeformats.formatters);var b=a.datetimeformats.weekmonthnames,c=[],d=[],e=[],f=[];$.each(b.weekabbrev.split(","),function(){c.push($.trim(this))}),$.each(b.weekfull.split(","),function(){d.push($.trim(this))}),dateFormat.i18n.dayNames=c.concat(d),$.each(b.monthabbrev.split(","),function(){e.push($.trim(this))}),$.each(b.monthfull.split(","),function(){f.push($.trim(this))}),dateFormat.i18n.monthNames=e.concat(f),dateFormat.masks=a.datetimeformats.dateformats;var g=CERN_Platform.getCriterion().CRITERION.LOCALE_ID.toUpperCase();$.datepicker.setDefaults($.datepicker.regional[g])}catch(a){throw logger.logJSError(a,null,"mpage-driver.js","populateMPageLocale"),a}}function captureExecutionDetails(){var a=CERN_Platform.getCriterion().CRITERION,b=new CapabilityTimer("CAP:MPG Framework Execution Detail","MPageFramework"),c={orientation:CERN_Browser.getOrientation(),screenResolution:CERN_Browser.getScreenResolution(),availableResolution:CERN_Browser.getAvailableResolution(),viewportResolution:CERN_Browser.getViewportResolution(),colorDepth:CERN_Browser.getColorDepth()},d={userAgent:CERN_Browser.getUserAgent()},e={releaseIdentifier:a.RELEASE_IDENTIFIER,releaseVersion:a.RELEASE_VERSION};b.addMetaData("screenDetails",JSON.stringify(c)),b.addMetaData("browserDetails",JSON.stringify(d)),b.addMetaData("frameworkDetails",JSON.stringify(e)),b.capture()}function initializeViewContentLoader(){if(window.m_view_content_urls){var a=JSON.parse(m_view_content_urls).VIEW_CONTENT_URLS,b={},c=function(b){var c=a.CATEGORY.find(function(a){return a.CAT_MEAN.toUpperCase()===b.toUpperCase()});return c?c.GROUP:[]},d=function(a){return new Promise(function(b,c){logger.logDebug("Downloading: "+a);var d=document.createElement("link");d.setAttribute("rel","stylesheet"),d.setAttribute("type","text/css"),d.setAttribute("href",a),d.onload=function(){b()},d.onerror=function(){logger.logError("Failed to download the following CSS file: '"+a+"'."),c()},document.getElementsByTagName("head")[0].appendChild(d)})},e=function(a){return new Promise(function(b,c){logger.logDebug("Downloading: "+a),$.ajax({type:"GET",url:a,success:function(){b()},error:function(b,d,e){var f="Failed to download the following JS file: '"+a+"'. ";d&&(f+="Status: "+d+". "),e&&(f+="Error: "+e+". "),logger.logError(f),c()},dataType:"script",cache:!0})})};window.MP_ContentLoader={loadViewContent:function(a){a=a.toUpperCase();var f=c(a),g=new RTMSTimer("ENG:MPG.LOAD_VIEW_RESOURCES",a);return g.start(),b[a]=promiseMapSeries(f,function(a){return Promise.all([d(a.CSS_URL),e(a.JS_URL)])}).then(function(){g.stop()}),b[a]},waitForContentLoaded:function(a){var c=b[a.toUpperCase()];return c?c:(logger.logWarning("no content loaded for view '"+a+"'."),Promise.resolve())},logDynamicTabFrameworkDetails:function(b,c){if("string"!=typeof b)return void logger.logError("defaultCategoryMean parameter must be a string and not null for function 'logDynamicTabFrameworkDetails'");if(a&&a.CATEGORY)try{b=b.toUpperCase();var d=new CapabilityTimer("CAP:MPG.DYNAMIC_TAB_FRAMEWORK_DETAILS","MPAGEFRAMEWORK"),e={VIEW_CNT:c,TOTAL_TOKEN_CNT:0,INITIAL_TOKEN_CNT:0,UNASSOCIATED_TOKEN_CNT:0},f=function(a,b){var c=b.JS_URL.match(/"t":(\[.*?\])/);return c&&c[1]?a+JSON.parse(c[1]).length:a};a.CATEGORY.forEach(function(a){var c=a.CAT_MEAN.toUpperCase(),d=a.GROUP.reduce(f,0);e.TOTAL_TOKEN_CNT+=d,c===b?e.INITIAL_TOKEN_CNT+=d:"__UNSPECIFIED_CATEGORY"===c&&(e.INITIAL_TOKEN_CNT+=d,e.UNASSOCIATED_TOKEN_CNT+=d)}),d.addMetaData("dynamicTabFrameworkDetails",JSON.stringify(e)),d.capture()}catch(a){logger.logJSError(a,null,"view-content-driver.js","logDynamicTabFrameworkDetails")}}}}else window.MP_ContentLoader={loadViewContent:function(){},logDynamicTabFrameworkDetails:function(){},waitForContentLoaded:function(){return Promise.resolve()}}}function TaggedImage(){TaggedResult.call(this),this.setEMRType("IMAGES"),this.m_blobHandle="",this.m_formatCd="",this.m_storageCd="MMF"}function TaggedText(){TaggedResult.call(this),this.setEMRType("TAGTEXT"),this.m_tagText="",this.m_tagTextBlob="",this.m_formatCd="XHTML"}function TaggingDao(){}function getApplicationName(){try{return window.CERN_Platform.getCriterion().CRITERION.EXECUTABLE.replace(/\.[^\/.]+$/,"")}catch(a){return""}}function OrionTaggingDao(){var a={applicationName:getApplicationName(),auth:window.MillenniumOAuthUtil.authenticate,baseUrl:window.WORKFLOW_BASE_URL};this.tagging=new window.OrionWebTagging(a)}function TextControl(){this.m_currentValue="",this.m_delegateId="",this.m_disabled=!1,this.m_extensions=null,this.m_id="",this.m_label="",this.m_labelPosition=TextControl.label_position.TOP,this.m_placeholderText="",this.m_requiredInd=!1,this.m_strictWhitespace=!1,this.m_valid=!0,this.m_validator=null,this.m_$extensionElement=null,this.m_$inputElement=null,this.m_$inputGroupElement=null,this.m_$stageElement=null,this.m_$validationElement=null,this.m_width=null,this.m_predefinedWidth=TextControl.width.MEDIUM,this.m_labelWidth=null,this.m_onChangeCallback=null,this.m_onValidChangeCallback=null}function TextAreaControl(){this.m_height=null,this.m_isResizeable=!1,this.m_rows=1}function AutosizeTextAreaControl(){return this.m_maxHeight=Number.MAX_VALUE,this.m_minHeight=24,this}function TextControlExtension(){this.m_ownerControl=null}function CharacterLimitExtension(){return this.m_autoTruncate=!1,this.m_characterLimit=Number.MAX_VALUE,this.m_$charRemaining=null,this}function InputValidator(){}function NumericValidator(){return this}function NumericRangeValidator(){return this.m_inclusive=!1,this.m_minValue=-Number.MAX_VALUE,this.m_maxValue=Number.MAX_VALUE,this}function RenderStrategy(){this.component=null,this.componentId=null,this.componentNamespace=null,this.componentStyle=null,this.i18nCore=i18n.discernabu}function ResultRangeSelectionUtility(){}function ResultRangeSelection(){this.type=null,this.units=null,this.display="",this.scope=null,this.direction=0}function SummaryRenderStrategy(){}function WorkflowRenderStrategy(){}function ComponentTable(){this.activeRows=null,this.bodyTag="div",this.columns=null,this.columnMap=null,this.columnTag="dd",this.cssTemplate="list-as-table",this.currentlySortedBy=null,this.currentlySortedColumn=null,this.customClass="",this.extensions=null,this.groupedBy="",this.groupMap=null,this.groupSequence=null,this.groupTemplate=null,this.headerEnabled=!0,this.namespace="",this.noResultsString=i18n.NO_RESULTS_FOUND,this.rows=null,this.rowMap=null,this.rowTag="dl",this.sequence=null,this.showGroupCount=!1,this.sortable=!1,this.zebraStripe=!0,this.rowHash={name:"",value:""}}function ColumnSortFactory(){}function ComponentTableDataRetriever(){}function FlowsheetTable(){this.nameSpace="",this.labelColumnTable=new ComponentTable,this.labelColumnTable.setRowTag("tr"),this.labelColumnTable.setColumnTag("td"),this.labelColumnTable.setBodyTag("table"),this.setLabelTableCustomClass("fs-label-table"),this.resultsTable=new ComponentTable,this.resultsTable.setRowTag("tr"),this.resultsTable.setColumnTag("td"),this.resultsTable.setBodyTag("table"),this.setResultTableCustomClass("fs-results-table"),this.setCSSTemplate("flowsheet-table"),this.labelColumnTableBodyElement=null,this.labelColumnTableElement=null,this.resultsTableBodyElement=null,this.resultsTableElement=null,this.headerTableElement=null,this.outerScrollDiv=null,this.innerScrollContent=null,this.m_scrollController=null,this.m_disclaimer=null,this.sidePanelWidth=0}function MPageTooltip(){return this.anchor=null,this.content=null,this.flipfit=!0,this.height=0,this.offsetX=20,this.offsetY=20,this.showDelay=500,this.tolerance=5,this.stillHovered=!1,this.width=0,this.x=0,this.y=0,this}function TableCellClickCallbackExtension(){return this.callback=function(a,b){},this}function TableColumn(){this.columnDisplay="&nbsp;",this.columnId="",this.customClass="",this.primarySortField="",this.secondarySortFields=[],this.isSortable=!1,this.sortDirection=TableColumn.SORT.NONE,this.template=TemplateBuilder.buildTemplate("<span>[Template Not Specified]</span>"),this.width=null,this.defaultSort=TableColumn.SORT.ASCENDING}function TableExtension(){return this}function TableGroup(){this.canCollapse=!0,this.display="",this.expanded=!0,this.groupId="",this.key="",this.rows=[],this.rowMap={},this.showCount=!1,this.groupValue="",this.hideHeader=!1}function TableGroupToggleCallbackExtension(){return this.callback=function(a,b){},this}function HoverExtension(){return this.hoverClass="mpage-tooltip-hover",this.onHover=function(){},this.onLeave=function(){},this.target="",this.tooltip=(new MPageTooltip).setShowDelay(0),this}function TableRowHoverExtension(){return this.setTarget("dl.result-info"),this.hoverRenderer=null,this}function TableCellHoverExtension(){return this.setTarget("dd.table-cell"),this.templateMap={},this}function HoverRenderFactory(){}function HoverRenderer(){}function StringTemplateRenderer(){this.template=null}function FunctionRenderer(){this.renderFunction=function(a){return""}}function TableRow(){return this.rowId="",this.tableCells=[],this.resultData=null,this.rowAttributeHash={attrName:"",attrValue:""},this}function Template(){this.id="",this.templateFunction=null}function TemplateBuilder(){}function TemplateCache(){}function AutoSuggestControl(a,b,c,d,e){this.cur=0,this.layer=null,this.component=a,this.queryHandler=b,this.selectionHandler=c,this.suggestionDisplayHandler=d,e?this.textbox=_g(a.getStyles().getNameSpace()+e+a.getComponentId()):this.textbox=_g(a.getStyles().getNameSpace()+"ContentCtrl"+a.getComponentId()),this.objArray="",this.init()}function ModalButton(a){this.m_buttonId=a,this.m_buttonText="",this.m_dithered=!1,this.m_onClickFunction=null,this.m_closeOnClick=!0,this.m_focusInd=!1,this.m_separatorInd=!1}function ModalDialog(a){this.m_modalId=a,this.m_isModalActive=!1,this.m_isFixedToIcon=!1,this.m_hasGrayBackground=!0,this.m_showCloseIcon=!0,this.m_margins={top:5,right:5,bottom:5,left:5},this.m_icon={elementId:a+"icon",cssClass:"",text:"",hoverText:"",isActive:!0},this.m_header={elementId:a+"header",title:"",closeFunction:null,verifyCloseFunctionResponse:!1},this.m_body={elementId:a+"body",dataFunction:null,isBodySizeFixed:!0},this.m_footer={isAlwaysShown:!1,elementId:a+"footer",buttons:[],checkbox:{enabled:!1,elementId:a+"FooterChkBox",isChecked:!1,onClick:function(){return!1},label:""},footerText:{text:"",elementId:a+"FooterText"}}}function MessageModal(a){this.m_line1="",this.m_line2="",this.m_customClass="",ModalDialog.apply(this,[a])}function ErrorModal(a){MessageModal.apply(this,[a])}function WarningModal(a){MessageModal.apply(this,[a])}function InfoModal(a){MessageModal.apply(this,[a])}function BusyModal(a){MessageModal.apply(this,[a])}function MenuItem(a){this.m_activeInd=!1,this.m_clickFunc=function(){},this.m_closeOnClick=!0,this.m_defaultClickFunction=function(){},this.m_disabledInd=!1,this.m_elementId="",this.m_label="",this.m_menuItemId=a,this.m_menuItemTypeClass=""}function Menu(a){this.setId(a),this.setCloseOnClick(!1),this.setDefaultClickFunction(function(a){MP_MenuManager.showMenu(this.getId())}),this.m_autoFlipVertical=!0,this.m_autoFlipHorizontal=!0,this.m_anchorActiveClass="",this.m_anchorElementId="",this.anchorCorner=null,this.contentCorner=null,this.m_contentElementId="",this.m_contentParentId="",this.m_isPersistent=!1,this.m_hoverTimout=null,this.m_menuItemArr=null,this.m_onCloseFunction=null,this.m_rootMenuInd=!1,this.m_mouseOverContent=!1,this.m_mouseOverAnchor=!1,this.m_visibleInd=!1}function DynamicMenu(a){this.setId(a),this.setCloseOnClick(!1),this.m_contentCreationFunc=function(){}}function AdvancedFilterMenu(a){this.setId(a),this.setTypeClass("adv-filter-menu-override"),this.setAutoFlipVertical(!1),this.settings={cancel:{enabled:!1,onclick:function(){return!1},label:i18n.CANCEL},checkbox:{enabled:!1,isChecked:!1,onclick:function(){return!1},label:""},actionLink:{enabled:!1,onclick:function(){return!1},label:""},advancedFilterCreationFunction:function(){return null},dimensions:{width:600},save:{enabled:!1,onclick:function(){return!1},label:i18n.SAVE}},this.setContentCreationFunction(function(){var a=this.settings.checkbox,b=this.settings.actionLink,c=this.settings.save,d=this.settings.cancel,e=$("<div class='adv-filter-menu'></div>").width(this.settings.dimensions.width),f=$("<div class='adv-filter-menu-inner-container'></div>").appendTo(e);if($("<div class='adv-filter-menu-label'>"+this.getLabel()+"</div>").appendTo(f),$("<div class='adv-filter-menu-custom-content'></div>").html(this.settings.advancedFilterCreationFunction()).appendTo(f),!(a.enabled||c.enabled||d.enabled||b.enabled))return e;var g=$("<div class='adv-filter-menu-control-container'></div>").appendTo(e),h=$("<span class='adv-filter-menu-button-container'></span>"),i=0;if(a.enabled&&a.label){var j=$("<span class='adv-filter-menu-checkbox-container'></span>"),k=$("<input type='checkbox'>");k[0].checked=a.isChecked,k.click(a.onclick).appendTo(j),$("<span class='adv-filter-menu-checkbox-label'>"+a.label+"</span>").appendTo(j),j.appendTo(g)}else if(b.enabled&&b.label){var l=$("<span class='adv-filter-menu-action-container'></span>");$("<span class='adv-filter-menu-action-label'>"+b.label+"</span>").click(b.onclick).appendTo(l),l.appendTo(g)}return d.enabled&&($("<button type='button' class='adv-filter-menu-button'>").html(d.label).click(d.onclick).appendTo(h),i=6,h.appendTo(g)),c.enabled&&($("<button type='button' class='adv-filter-menu-button'>").html(c.label).css("margin-right",i).click(c.onclick).appendTo(h),h.appendTo(g)),e})}function ContextMenu(a){this.setId(a),this.m_xOffset=0,this.m_yOffset=0}function MenuSelection(a){this.setId(a),this.setDefaultClickFunction(function(a){this.closeOnClick()||this.isDisabled()||this.toggleSelection()}),this.m_selectedInd=!1,this.m_selectedClass="menu-item-selected"}function MenuSeparator(a){this.setId(a),this.setTypeClass("menu-separator")}function MenuSeparator(a){this.setId(a),this.setTypeClass("menu-separator")}function ThemeSelector(a,b,c,d){this.m_componentId=b,this.m_styleId=d+b,this.setId(a),this.setLabel(i18n.discernabu.COLOR_THEME),this.setAnchorElementId(c),this.setAnchorConnectionCorner(["top","left"]),this.setContentConnectionCorner(["top","right"]),this.setContentCreationFunction(function(){for(var a,b,c,d,e,f,g="",h=i18n.discernabu,i=[{title:h.COLOR_STANDARD,name:"lightgrey",capsName:"LightGrey"},{title:h.COLOR_BROWN,name:"brown",capsName:"Brown"},{title:h.COLOR_CERNER_BLUE,name:"cernerblue",capsName:"CernerBlue"},{title:h.COLOR_DARK_GREEN,name:"darkgreen",capsName:"DarkGreen"},{title:h.COLOR_GREEN,name:"green",capsName:"Green"},{title:h.COLOR_GREY,name:"grey",capsName:"Grey"},{title:h.COLOR_LIGHT_BLUE,name:"lightblue",capsName:"LightBlue"},{title:h.COLOR_NAVY,name:"navy",capsName:"Navy"},{title:h.COLOR_ORANGE,name:"orange",capsName:"Orange"},{title:h.COLOR_PINK,name:"pink",capsName:"Pink"},{title:h.COLOR_PURPLE,name:"purple",capsName:"Purple"},{title:h.COLOR_YELLOW,name:"yellow",capsName:"Yellow"}],j=0;j<i.length;j++)a=' title="'+i[j].title+'"',b=' id="optConfigMnu'+i[j].capsName+'"',c=' class="opts-menu-config-item opt-config-mnu-'+i[j].name+'"',d=' data-color="'+i[j].name+'"',e=' component-id="'+this.m_componentId+'"',f=' style-id="'+this.m_styleId+'"',g+="<div"+a+c+d+e+f+b+"></div>";return g='<div class="opts-menu-config-content-custom" id="optMenuConfig'+this.m_componentId+'">'+g+"</div>",[$("<span>&nbsp;</span>").html(g).click(this.themeSelectorClickHandler)]})}function UtilitiesMenu(a){this.setId(a),this.setTypeClass("utilities-menu-override"),this.setAnchorActiveClass("vwp-util-active"),this.setIsPersistent(!0),this.setIsRootMenu(!0),this.settings={utilitiesContentCreationFunction:function(){return null},dimensions:{width:300,maxHeight:""}},this.setContentCreationFunction(function(){var a=$("<div class='utilities-menu'></div>").width(this.settings.dimensions.width),b=$("<div class='utilities-menu-inner-container'></div>").appendTo(a);return $("<div class='utilities-menu-label'>"+this.getLabel()+"</div>").appendTo(b),$("<div class='utilities-menu-custom-content'></div>").css("max-height",this.settings.dimensions.maxHeight||"").html(this.settings.utilitiesContentCreationFunction()).appendTo(b),a})}function StructureOrganizerBuilder(){this.m_structureOrganizer=null,this.m_nodeCount=0,this.m_namespace=""}function JSONStructureOrganizerBuilder(){this.m_structureJSON=null}function StructureNode(){this.m_activityId=0,this.m_children=null,this.m_dirty=!1,this.m_displayPosition=0,this.m_id="",this.m_initialState=null,this.m_namespace="",this.m_numberDocumented=0,this.m_ocid="",this.m_parent=null,this.m_previousState=null,this.m_rootElement=null,this.m_shouldRender=!0,this.m_isDefaultDisplayed=!0,this.m_state=null,this.m_title="",this.m_type="",this.m_inNavigateStructureTree=!0,this.m_shouldSave=!0}function StructureHtml(){this.m_html=""}function StructureOrganizer(){this.m_lookup=null,this.m_navigator=null,this.m_referenceSectionId=null,this.m_type="SECTION",this.m_templateIds={},this.m_templateRelations=null,this.m_rootElement=null,this.m_contentElement=null,this.m_navigatorElement=null,this.m_resizeFunction=null,this.m_dirtyNodeList=null,this.m_onDirtyChangeCallback=null,this.m_previousHighlightedNode=null,this.m_rendered=!1,this.m_isPriorityEnabled=!0,this.m_isMultiSection=!1,this.m_activeSection=null}function StructureGroup(){}function StructureItemGroup(){}function StructureSubGroup(){}function StructureTermGroup(){return this.m_activeTerm=null,this.m_previousActiveTerm=null,this.m_isShowMore=!1,this}function SingleStructureTermGroup(){}function MultiStructureTermGroup(){}function YesNoStructureTermGroup(){}function TableStructureTermGroup(){this.m_comment="",this.m_inNavigateStructureTree=!1,this.m_shouldSave=!1,SingleStructureTermGroup.call(this),CycleStructureTerm.call(this)}function ExpandStructureTermGroup(){this.m_inNavigateStructureTree=!1,this.m_shouldSave=!1,StructureTermGroup.call(this),CycleStructureTerm.call(this)}function TermState(){return this.m_value=null,this.m_cssClass="",this.m_key="",this.m_data={},this}function StructureTerm(){return this.m_caption="",this.m_comment="",this.m_savedComment="",this}function LineStructureTerm(){return this.m_type="LINE",this}function CycleStructureTerm(){return this.m_currentState=0,this.m_states=null,this}function YesNoStructureTerm(){return this}function InputStructureTerm(){return this.m_dataType="",this.m_currentValue="",this.m_previousValue="",this.m_validators=null,this.m_activeState=null,this.m_inactiveState=null,this.m_isValid=!0,this}function FreeTextStructureTerm(){return this}function NoneStructureTerm(){return this}function TableStructureTerm(){return this}function Navigator(){return this.m_activeNavigation=null,this.m_clickCallback=null,this.m_id="",this.m_navigationMap=null,this.m_navigations=null,this.m_skin="",this}function Navigation(){return this.m_id="",this.m_label="",this.m_element=null,this}function ScrollNavigation(){return this.m_anchorId="",this.m_anchorElement=null,this.m_containerId="",this.m_containerElement=null,this}function CallbackNavigation(){return this.m_onSelect=null,this}function StructureNavigation(){this.m_node=null}function StructureQuestionSet(){this.m_onCompleteCallback=null,this.m_lookup=null}function StructureQuestion(){this.m_questionDisplay="",this.m_diagnosisGroup=0,this.m_parentEntityId=0,this.m_parentEntityName=""}function StructureAnswer(){return this.m_answerDisplay="",this.m_templateId=0,this.addState((new TermState).setValue(null).setCSSClass("")),this.addState((new TermState).setValue(!0).setCSSClass("structure-answer-yes")),this.setInitialState(this.m_states[0]),this.m_state=this.m_states[0],this}function StructureTermController(){}function InputStructureTermController(){}function CycleStructureTermController(){}function YesNoStructureTermController(){}function StructureGroupController(){}function TableTermController(){}function StructureTabController(){this.m_scrollMap={},this.m_organizer=null,this.m_$structureTabGroup=null,this.m_$structureTabParent=null,this.m_$structureTabWrapper=null,this.m_$structureTabMenuButton=null}function StructureTermGroupController(){}function StructureManager(){this.m_replyData=null,this.m_referenceData=null,this.m_activityData=null,this.m_questionData=null,this.m_status="",this.m_organizer=null,this.m_resizeFunction=null,this.m_tabController=null,this.m_questionSet=null,this.m_openExistingCheckFunction=null,this.m_answers=null,this.m_openExistingFunction=null,this.m_queryTemplateFunction=null,this.m_onDirtyChangeCallback=null,this.m_$structureManagerContainer=null,this.m_$structureContainer=null,this.m_$structureOrganizerContents=null,this.m_$questionContainer=null,this.m_$questionContents=null,this.m_$messageContainer=null,this.m_$addTemplateButton=null,this.m_namespace=""}function InputValidator(){}function DataTypeValidator(){return this.m_dataType=DataTypeValidator.ALPHA_TYPE,this.m_dataRegex=DataTypeValidator.ALPHA_REGEX,this}function DataRangeValidator(){return this.m_minValue=Number.NEGATIVE_INFINITY,this.m_maxValue=Number.POSITIVE_INFINITY,this}function PriorAuthMPageView(a){this.priorAuthStaticContentLocation=a}function WorkflowView(){this.m_activeSubsection=null,this.m_navigatorSubsections=null,this.m_offsetPositionObj=null,this.m_$parentWorkflowContainer=null,this.m_$workflowContainer=null,this.m_$navContainer=null,this.m_$viewContainer=null,this.m_lastActiveSubsectionWithView=null,this.m_isWebEnabled=!0,this.m_xrPrintTemplates=null}function checkFeatureToggleStatus(a){return a&&a.feature_toggle?MP_FEATURE_TOGGLE.getToggleStatus(a.feature_toggle).then(function(a){return a.isEnabled}):Promise.resolve(!1)}function NavigatorSubsection(){this.m_criterion=null,this.m_filterMappingsObj={},this.m_isSubsectionActive=!1,this.m_isSubsectionRendered=!1,this.m_subsectionSettings=null,this.m_subsectionId=0,this.m_workflowViewId="",this.m_bodyElementId="",this.m_hasBodyElement=!1,this.m_hasHeaderElement=!1,this.m_headerElementId="",this.m_headerElementText="",this.m_subsectionElementId="",this.m_subsectionName="",this.m_subsectionIcon="",this.m_alwaysExpanded=!1,this.m_hasAssociatedView=!1,this.m_mpageViewElementId="",this.m_associatedView=null,this.m_associatedViewElementId=""}function DocumentBaseComponent(){this.m_resultStatusCodes=null,this.m_resultStatusMeanings=null,this.m_includeHover=!0,this.m_pcnFavorites=!0,this.setIncludeLineNumber(!0),DocumentBaseComponent.method("InsertData",function(){this.getGrouperFilterEventSets()?CERN_DOCUMENT_BASE_O1.RefreshDocumentsTable(this,this.getGrouperFilterLabel(),this.getGrouperFilterEventSets()):CERN_DOCUMENT_BASE_O1.GetDocumentsTable(this)}),DocumentBaseComponent.method("setResultStatusCodes",function(a){this.m_resultStatusCodes=a}),DocumentBaseComponent.method("addResultStatusCode",function(a){this.m_resultStatusCodes||(this.m_resultStatusCodes=[]),this.m_resultStatusCodes.push(a)}),DocumentBaseComponent.method("getResultStatusCodes",function(){if(this.m_resultStatusCodes)return this.m_resultStatusCodes;if(this.m_resultStatusMeanings){var a=MP_Util.GetCodeSet(8,!1);if(this.m_resultStatusMeanings&&this.m_resultStatusMeanings.length>0)for(var b=this.m_resultStatusMeanings.length;b--;){var c=MP_Util.GetCodeByMeaning(a,this.m_resultStatusMeanings[b]);c&&this.addResultStatusCode(c.codeValue)}}return this.m_resultStatusCodes}),DocumentBaseComponent.method("addResultStatusMeaning",function(a){this.m_resultStatusMeanings||(this.m_resultStatusMeanings=[]),this.m_resultStatusMeanings.push(a)}),DocumentBaseComponent.method("setResultStatusMeanings",function(a){this.m_resultStatusMeanings=a}),DocumentBaseComponent.method("isHoverEnabled",function(){return this.m_includeHover}),DocumentBaseComponent.method("setHoverEnabled",function(a){this.m_includeHover=a}),DocumentBaseComponent.method("isPcnFavEnabled",function(){return this.m_pcnFavorites}),DocumentBaseComponent.method("setPcnFavEnabled",function(a){this.m_pcnFavorites=a}),DocumentBaseComponent.method("FilterRefresh",function(a,b){CERN_DOCUMENT_BASE_O1.RefreshDocumentsTable(this,a,b)}),DocumentBaseComponent.method("HandleSuccess",function(a){CERN_DOCUMENT_BASE_O1.RenderComponent(this,a)})}function MeasurementBaseComponent(a){function b(a){var b=a.getGroups();if(b&&b.length>0){for(var c=new MP_Core.XMLCCLRequestThreadManager(a.HandleSuccess,a,!0),d=a.getCriterion(),e="MP_RETRIEVE_N_RESULTS_JSON",f=0,g=b.length;f<g;f++){var h=b[f],i="0.0",j="0.0",k="^^",l="^^",m=a.includeEventSetInfo()?1:0,n=a.includeComments()?1:0,o=[],p=null,q=null,r=2===a.getScope()?d.encntr_id+".0":"0.0";if(h instanceof MPageEventSetGroup)i=MP_Util.CreateParamArray(h.getEventSets(),1);else if(h instanceof MPageEventCodeGroup)j=MP_Util.CreateParamArray(h.getEventCodes(),1);else if(h instanceof MPageSequenceGroup){var s=h.getMapItems();i=MP_Util.CreateParamArray(MP_Util.GetValueFromArray("CODE_VALUE",s),1)}else{if(!(h instanceof MPageGrouper))continue;for(var t=h.getGroups(),u=[],v=0,w=t.length;v<w;v++)t[v]instanceof MPageEventCodeGroup&&(u=u.concat(t[v].getEventCodes()));j=MP_Util.CreateParamArray(u,1)}o.push("^MINE^",d.person_id+".0",r,d.provider_id+".0",d.ppr_cd+".0",a.getResultCount(),"^^",i,j,a.getLookbackUnits(),a.getLookbackUnitTypeFlag(),m,k,l,n),p=new MP_Core.ScriptRequest(a,"ENG:MPG.MEASBASE.O1 - load "+h.getGroupName()),p.setArtifactInfo({artifactId:"measurement-base-o1",functionName:"getMeasurementData"}),p.setProgramName(e),p.setParameters(o),p.setAsync(!0),q=new MP_Core.XMLCCLRequestThread(h.getGroupName(),a,p),c.addThread(q)}c.begin()}else MP_Core.CreateSimpleError(a,i18n.discernabu.measurement_base_o1.ERROR_MISSING_ES_EC)}this.m_resultCount=0,this.m_isEventSetInfo=!1,this.m_isComment=!1,MeasurementBaseComponent.method("setResultCount",function(a){this.m_resultCount=a}),MeasurementBaseComponent.method("getResultCount",function(){return this.m_resultCount}),MeasurementBaseComponent.method("setIncludeEventSetInfo",function(a){this.m_isEventSetInfo=a}),MeasurementBaseComponent.method("includeEventSetInfo",function(){return this.m_isEventSetInfo}),MeasurementBaseComponent.method("setIncludeComments",function(a){this.m_isComment=a}),MeasurementBaseComponent.method("includeComments",function(){return this.m_isComment}),MeasurementBaseComponent.method("InsertData",function(){var a=MP_Util.CreateTimer(this.getComponentLoadTimerName(),this.getCriterion().category_mean);try{b(this)}catch(b){a&&(a.Abort(),a=null)}finally{a&&a.Stop()}})}function PregnancyInfo(){var a=0,b=0,c=0,d=0,e=0,f=0,g=null,h=0,i=0,j=0,k=0,l=0;this.getDelGesAge=function(){return a},this.getDeliveryDate=function(){return b},this.getEddId=function(){return d},this.getEstDeliveryDate=function(){return c},this.getGesAge=function(){return e},this.getLookBack=function(){return f},this.getOnsetDate=function(){return g},this.getPregnancyId=function(){return h},this.getReopenPregInd=function(){return i},this.getRtLookBack=function(){return j},this.isPatientDelivered=function(){
return k},this.getCalculatedEga=function(){return l},this.setDelGesAge=function(b){a=b},this.setDeliveryDate=function(a){b=a},this.setEddId=function(a){d=a},this.setEstDeliveryDate=function(a){c=a},this.setGesAge=function(a){e=a},this.setLookBack=function(a){f=a},this.setOnsetDate=function(a){g=a},this.setPregnancyId=function(a){h=a},this.setReopenPregInd=function(a){i=a},this.setRtLookBack=function(a){j=a},this.setIsPatientDelivered=function(a){k=a>0},this.setCalculatedEga=function(){l=0===this.getGesAge()?this.getDelGesAge():this.getGesAge()}}function PregnancyBaseUtilComponentStyle(){this.initByNamespace("pregbase")}!function(a,b){"object"==typeof exports&&"undefined"!=typeof module?module.exports=b():"function"==typeof define&&define.amd?define(b):a.moment=b()}(this,function(){"use strict";function a(){return od.apply(null,arguments)}function b(a){od=a}function c(a){return a instanceof Array||"[object Array]"===Object.prototype.toString.call(a)}function d(a){return null!=a&&"[object Object]"===Object.prototype.toString.call(a)}function e(a){var b;for(b in a)return!1;return!0}function f(a){return"number"==typeof a||"[object Number]"===Object.prototype.toString.call(a)}function g(a){return a instanceof Date||"[object Date]"===Object.prototype.toString.call(a)}function h(a,b){var c,d=[];for(c=0;c<a.length;++c)d.push(b(a[c],c));return d}function i(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function j(a,b){for(var c in b)i(b,c)&&(a[c]=b[c]);return i(b,"toString")&&(a.toString=b.toString),i(b,"valueOf")&&(a.valueOf=b.valueOf),a}function k(a,b,c,d){return rb(a,b,c,d,!0).utc()}function l(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null}}function m(a){return null==a._pf&&(a._pf=l()),a._pf}function n(a){if(null==a._isValid){var b=m(a),c=qd.call(b.parsedDateParts,function(a){return null!=a}),d=!isNaN(a._d.getTime())&&b.overflow<0&&!b.empty&&!b.invalidMonth&&!b.invalidWeekday&&!b.nullInput&&!b.invalidFormat&&!b.userInvalidated&&(!b.meridiem||b.meridiem&&c);if(a._strict&&(d=d&&0===b.charsLeftOver&&0===b.unusedTokens.length&&void 0===b.bigHour),null!=Object.isFrozen&&Object.isFrozen(a))return d;a._isValid=d}return a._isValid}function o(a){var b=k(NaN);return null!=a?j(m(b),a):m(b).userInvalidated=!0,b}function p(a){return void 0===a}function q(a,b){var c,d,e;if(p(b._isAMomentObject)||(a._isAMomentObject=b._isAMomentObject),p(b._i)||(a._i=b._i),p(b._f)||(a._f=b._f),p(b._l)||(a._l=b._l),p(b._strict)||(a._strict=b._strict),p(b._tzm)||(a._tzm=b._tzm),p(b._isUTC)||(a._isUTC=b._isUTC),p(b._offset)||(a._offset=b._offset),p(b._pf)||(a._pf=m(b)),p(b._locale)||(a._locale=b._locale),rd.length>0)for(c in rd)d=rd[c],e=b[d],p(e)||(a[d]=e);return a}function r(b){q(this,b),this._d=new Date(null!=b._d?b._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),sd===!1&&(sd=!0,a.updateOffset(this),sd=!1)}function s(a){return a instanceof r||null!=a&&null!=a._isAMomentObject}function t(a){return a<0?Math.ceil(a)||0:Math.floor(a)}function u(a){var b=+a,c=0;return 0!==b&&isFinite(b)&&(c=t(b)),c}function v(a,b,c){var d,e=Math.min(a.length,b.length),f=Math.abs(a.length-b.length),g=0;for(d=0;d<e;d++)(c&&a[d]!==b[d]||!c&&u(a[d])!==u(b[d]))&&g++;return g+f}function w(b){a.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+b)}function x(b,c){var d=!0;return j(function(){if(null!=a.deprecationHandler&&a.deprecationHandler(null,b),d){for(var e,f=[],g=0;g<arguments.length;g++){if(e="","object"==typeof arguments[g]){e+="\n["+g+"] ";for(var h in arguments[0])e+=h+": "+arguments[0][h]+", ";e=e.slice(0,-2)}else e=arguments[g];f.push(e)}w(b+"\nArguments: "+Array.prototype.slice.call(f).join("")+"\n"+(new Error).stack),d=!1}return c.apply(this,arguments)},c)}function y(b,c){null!=a.deprecationHandler&&a.deprecationHandler(b,c),td[b]||(w(c),td[b]=!0)}function z(a){return a instanceof Function||"[object Function]"===Object.prototype.toString.call(a)}function A(a){var b,c;for(c in a)b=a[c],z(b)?this[c]=b:this["_"+c]=b;this._config=a,this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}function B(a,b){var c,e=j({},a);for(c in b)i(b,c)&&(d(a[c])&&d(b[c])?(e[c]={},j(e[c],a[c]),j(e[c],b[c])):null!=b[c]?e[c]=b[c]:delete e[c]);for(c in a)i(a,c)&&!i(b,c)&&d(a[c])&&(e[c]=j({},e[c]));return e}function C(a){null!=a&&this.set(a)}function D(a,b,c){var d=this._calendar[a]||this._calendar.sameElse;return z(d)?d.call(b,c):d}function E(a){var b=this._longDateFormat[a],c=this._longDateFormat[a.toUpperCase()];return b||!c?b:(this._longDateFormat[a]=c.replace(/MMMM|MM|DD|dddd/g,function(a){return a.slice(1)}),this._longDateFormat[a])}function F(){return this._invalidDate}function G(a){return this._ordinal.replace("%d",a)}function H(a,b,c,d){var e=this._relativeTime[c];return z(e)?e(a,b,c,d):e.replace(/%d/i,a)}function I(a,b){var c=this._relativeTime[a>0?"future":"past"];return z(c)?c(b):c.replace(/%s/i,b)}function J(a,b){var c=a.toLowerCase();Dd[c]=Dd[c+"s"]=Dd[b]=a}function K(a){return"string"==typeof a?Dd[a]||Dd[a.toLowerCase()]:void 0}function L(a){var b,c,d={};for(c in a)i(a,c)&&(b=K(c),b&&(d[b]=a[c]));return d}function M(a,b){Ed[a]=b}function N(a){var b=[];for(var c in a)b.push({unit:c,priority:Ed[c]});return b.sort(function(a,b){return a.priority-b.priority}),b}function O(b,c){return function(d){return null!=d?(Q(this,b,d),a.updateOffset(this,c),this):P(this,b)}}function P(a,b){return a.isValid()?a._d["get"+(a._isUTC?"UTC":"")+b]():NaN}function Q(a,b,c){a.isValid()&&a._d["set"+(a._isUTC?"UTC":"")+b](c)}function R(a){return a=K(a),z(this[a])?this[a]():this}function S(a,b){if("object"==typeof a){a=L(a);for(var c=N(a),d=0;d<c.length;d++)this[c[d].unit](a[c[d].unit])}else if(a=K(a),z(this[a]))return this[a](b);return this}function T(a,b,c){var d=""+Math.abs(a),e=b-d.length,f=a>=0;return(f?c?"+":"":"-")+Math.pow(10,Math.max(0,e)).toString().substr(1)+d}function U(a,b,c,d){var e=d;"string"==typeof d&&(e=function(){return this[d]()}),a&&(Id[a]=e),b&&(Id[b[0]]=function(){return T(e.apply(this,arguments),b[1],b[2])}),c&&(Id[c]=function(){return this.localeData().ordinal(e.apply(this,arguments),a)})}function V(a){return a.match(/\[[\s\S]/)?a.replace(/^\[|\]$/g,""):a.replace(/\\/g,"")}function W(a){var b,c,d=a.match(Fd);for(b=0,c=d.length;b<c;b++)Id[d[b]]?d[b]=Id[d[b]]:d[b]=V(d[b]);return function(b){var e,f="";for(e=0;e<c;e++)f+=d[e]instanceof Function?d[e].call(b,a):d[e];return f}}function X(a,b){return a.isValid()?(b=Y(b,a.localeData()),Hd[b]=Hd[b]||W(b),Hd[b](a)):a.localeData().invalidDate()}function Y(a,b){function c(a){return b.longDateFormat(a)||a}var d=5;for(Gd.lastIndex=0;d>=0&&Gd.test(a);)a=a.replace(Gd,c),Gd.lastIndex=0,d-=1;return a}function Z(a,b,c){$d[a]=z(b)?b:function(a,d){return a&&c?c:b}}function $(a,b){return i($d,a)?$d[a](b._strict,b._locale):new RegExp(_(a))}function _(a){return aa(a.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(a,b,c,d,e){return b||c||d||e}))}function aa(a){return a.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function ba(a,b){var c,d=b;for("string"==typeof a&&(a=[a]),f(b)&&(d=function(a,c){c[b]=u(a)}),c=0;c<a.length;c++)_d[a[c]]=d}function ca(a,b){ba(a,function(a,c,d,e){d._w=d._w||{},b(a,d._w,d,e)})}function da(a,b,c){null!=b&&i(_d,a)&&_d[a](b,c._a,c,a)}function ea(a,b){return new Date(Date.UTC(a,b+1,0)).getUTCDate()}function fa(a,b){return a?c(this._months)?this._months[a.month()]:this._months[(this._months.isFormat||ke).test(b)?"format":"standalone"][a.month()]:this._months}function ga(a,b){return a?c(this._monthsShort)?this._monthsShort[a.month()]:this._monthsShort[ke.test(b)?"format":"standalone"][a.month()]:this._monthsShort}function ha(a,b,c){var d,e,f,g=a.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],d=0;d<12;++d)f=k([2e3,d]),this._shortMonthsParse[d]=this.monthsShort(f,"").toLocaleLowerCase(),this._longMonthsParse[d]=this.months(f,"").toLocaleLowerCase();return c?"MMM"===b?(e=je.call(this._shortMonthsParse,g),e!==-1?e:null):(e=je.call(this._longMonthsParse,g),e!==-1?e:null):"MMM"===b?(e=je.call(this._shortMonthsParse,g),e!==-1?e:(e=je.call(this._longMonthsParse,g),e!==-1?e:null)):(e=je.call(this._longMonthsParse,g),e!==-1?e:(e=je.call(this._shortMonthsParse,g),e!==-1?e:null))}function ia(a,b,c){var d,e,f;if(this._monthsParseExact)return ha.call(this,a,b,c);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),d=0;d<12;d++){if(e=k([2e3,d]),c&&!this._longMonthsParse[d]&&(this._longMonthsParse[d]=new RegExp("^"+this.months(e,"").replace(".","")+"$","i"),this._shortMonthsParse[d]=new RegExp("^"+this.monthsShort(e,"").replace(".","")+"$","i")),c||this._monthsParse[d]||(f="^"+this.months(e,"")+"|^"+this.monthsShort(e,""),this._monthsParse[d]=new RegExp(f.replace(".",""),"i")),c&&"MMMM"===b&&this._longMonthsParse[d].test(a))return d;if(c&&"MMM"===b&&this._shortMonthsParse[d].test(a))return d;if(!c&&this._monthsParse[d].test(a))return d}}function ja(a,b){var c;if(!a.isValid())return a;if("string"==typeof b)if(/^\d+$/.test(b))b=u(b);else if(b=a.localeData().monthsParse(b),!f(b))return a;return c=Math.min(a.date(),ea(a.year(),b)),a._d["set"+(a._isUTC?"UTC":"")+"Month"](b,c),a}function ka(b){return null!=b?(ja(this,b),a.updateOffset(this,!0),this):P(this,"Month")}function la(){return ea(this.year(),this.month())}function ma(a){return this._monthsParseExact?(i(this,"_monthsRegex")||oa.call(this),a?this._monthsShortStrictRegex:this._monthsShortRegex):(i(this,"_monthsShortRegex")||(this._monthsShortRegex=ne),this._monthsShortStrictRegex&&a?this._monthsShortStrictRegex:this._monthsShortRegex)}function na(a){return this._monthsParseExact?(i(this,"_monthsRegex")||oa.call(this),a?this._monthsStrictRegex:this._monthsRegex):(i(this,"_monthsRegex")||(this._monthsRegex=oe),this._monthsStrictRegex&&a?this._monthsStrictRegex:this._monthsRegex)}function oa(){function a(a,b){return b.length-a.length}var b,c,d=[],e=[],f=[];for(b=0;b<12;b++)c=k([2e3,b]),d.push(this.monthsShort(c,"")),e.push(this.months(c,"")),f.push(this.months(c,"")),f.push(this.monthsShort(c,""));for(d.sort(a),e.sort(a),f.sort(a),b=0;b<12;b++)d[b]=aa(d[b]),e[b]=aa(e[b]);for(b=0;b<24;b++)f[b]=aa(f[b]);this._monthsRegex=new RegExp("^("+f.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+e.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+d.join("|")+")","i")}function pa(a){return qa(a)?366:365}function qa(a){return a%4===0&&a%100!==0||a%400===0}function ra(){return qa(this.year())}function sa(a,b,c,d,e,f,g){var h=new Date(a,b,c,d,e,f,g);return a<100&&a>=0&&isFinite(h.getFullYear())&&h.setFullYear(a),h}function ta(a){var b=new Date(Date.UTC.apply(null,arguments));return a<100&&a>=0&&isFinite(b.getUTCFullYear())&&b.setUTCFullYear(a),b}function ua(a,b,c){var d=7+b-c,e=(7+ta(a,0,d).getUTCDay()-b)%7;return-e+d-1}function va(a,b,c,d,e){var f,g,h=(7+c-d)%7,i=ua(a,d,e),j=1+7*(b-1)+h+i;return j<=0?(f=a-1,g=pa(f)+j):j>pa(a)?(f=a+1,g=j-pa(a)):(f=a,g=j),{year:f,dayOfYear:g}}function wa(a,b,c){var d,e,f=ua(a.year(),b,c),g=Math.floor((a.dayOfYear()-f-1)/7)+1;return g<1?(e=a.year()-1,d=g+xa(e,b,c)):g>xa(a.year(),b,c)?(d=g-xa(a.year(),b,c),e=a.year()+1):(e=a.year(),d=g),{week:d,year:e}}function xa(a,b,c){var d=ua(a,b,c),e=ua(a+1,b,c);return(pa(a)-d+e)/7}function ya(a){return wa(a,this._week.dow,this._week.doy).week}function za(){return this._week.dow}function Aa(){return this._week.doy}function Ba(a){var b=this.localeData().week(this);return null==a?b:this.add(7*(a-b),"d")}function Ca(a){var b=wa(this,1,4).week;return null==a?b:this.add(7*(a-b),"d")}function Da(a,b){return"string"!=typeof a?a:isNaN(a)?(a=b.weekdaysParse(a),"number"==typeof a?a:null):parseInt(a,10)}function Ea(a,b){return"string"==typeof a?b.weekdaysParse(a)%7||7:isNaN(a)?null:a}function Fa(a,b){return a?c(this._weekdays)?this._weekdays[a.day()]:this._weekdays[this._weekdays.isFormat.test(b)?"format":"standalone"][a.day()]:this._weekdays}function Ga(a){return a?this._weekdaysShort[a.day()]:this._weekdaysShort}function Ha(a){return a?this._weekdaysMin[a.day()]:this._weekdaysMin}function Ia(a,b,c){var d,e,f,g=a.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],d=0;d<7;++d)f=k([2e3,1]).day(d),this._minWeekdaysParse[d]=this.weekdaysMin(f,"").toLocaleLowerCase(),this._shortWeekdaysParse[d]=this.weekdaysShort(f,"").toLocaleLowerCase(),this._weekdaysParse[d]=this.weekdays(f,"").toLocaleLowerCase();return c?"dddd"===b?(e=je.call(this._weekdaysParse,g),e!==-1?e:null):"ddd"===b?(e=je.call(this._shortWeekdaysParse,g),e!==-1?e:null):(e=je.call(this._minWeekdaysParse,g),e!==-1?e:null):"dddd"===b?(e=je.call(this._weekdaysParse,g),e!==-1?e:(e=je.call(this._shortWeekdaysParse,g),e!==-1?e:(e=je.call(this._minWeekdaysParse,g),e!==-1?e:null))):"ddd"===b?(e=je.call(this._shortWeekdaysParse,g),e!==-1?e:(e=je.call(this._weekdaysParse,g),e!==-1?e:(e=je.call(this._minWeekdaysParse,g),e!==-1?e:null))):(e=je.call(this._minWeekdaysParse,g),e!==-1?e:(e=je.call(this._weekdaysParse,g),e!==-1?e:(e=je.call(this._shortWeekdaysParse,g),e!==-1?e:null)))}function Ja(a,b,c){var d,e,f;if(this._weekdaysParseExact)return Ia.call(this,a,b,c);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),d=0;d<7;d++){if(e=k([2e3,1]).day(d),c&&!this._fullWeekdaysParse[d]&&(this._fullWeekdaysParse[d]=new RegExp("^"+this.weekdays(e,"").replace(".",".?")+"$","i"),this._shortWeekdaysParse[d]=new RegExp("^"+this.weekdaysShort(e,"").replace(".",".?")+"$","i"),this._minWeekdaysParse[d]=new RegExp("^"+this.weekdaysMin(e,"").replace(".",".?")+"$","i")),this._weekdaysParse[d]||(f="^"+this.weekdays(e,"")+"|^"+this.weekdaysShort(e,"")+"|^"+this.weekdaysMin(e,""),this._weekdaysParse[d]=new RegExp(f.replace(".",""),"i")),c&&"dddd"===b&&this._fullWeekdaysParse[d].test(a))return d;if(c&&"ddd"===b&&this._shortWeekdaysParse[d].test(a))return d;if(c&&"dd"===b&&this._minWeekdaysParse[d].test(a))return d;if(!c&&this._weekdaysParse[d].test(a))return d}}function Ka(a){if(!this.isValid())return null!=a?this:NaN;var b=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=a?(a=Da(a,this.localeData()),this.add(a-b,"d")):b}function La(a){if(!this.isValid())return null!=a?this:NaN;var b=(this.day()+7-this.localeData()._week.dow)%7;return null==a?b:this.add(a-b,"d")}function Ma(a){if(!this.isValid())return null!=a?this:NaN;if(null!=a){var b=Ea(a,this.localeData());return this.day(this.day()%7?b:b-7)}return this.day()||7}function Na(a){return this._weekdaysParseExact?(i(this,"_weekdaysRegex")||Qa.call(this),a?this._weekdaysStrictRegex:this._weekdaysRegex):(i(this,"_weekdaysRegex")||(this._weekdaysRegex=ue),this._weekdaysStrictRegex&&a?this._weekdaysStrictRegex:this._weekdaysRegex)}function Oa(a){return this._weekdaysParseExact?(i(this,"_weekdaysRegex")||Qa.call(this),a?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(i(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=ve),this._weekdaysShortStrictRegex&&a?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function Pa(a){return this._weekdaysParseExact?(i(this,"_weekdaysRegex")||Qa.call(this),a?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(i(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=we),this._weekdaysMinStrictRegex&&a?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Qa(){function a(a,b){return b.length-a.length}var b,c,d,e,f,g=[],h=[],i=[],j=[];for(b=0;b<7;b++)c=k([2e3,1]).day(b),d=this.weekdaysMin(c,""),e=this.weekdaysShort(c,""),f=this.weekdays(c,""),g.push(d),h.push(e),i.push(f),j.push(d),j.push(e),j.push(f);for(g.sort(a),h.sort(a),i.sort(a),j.sort(a),b=0;b<7;b++)h[b]=aa(h[b]),i[b]=aa(i[b]),j[b]=aa(j[b]);this._weekdaysRegex=new RegExp("^("+j.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+h.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+g.join("|")+")","i")}function Ra(){return this.hours()%12||12}function Sa(){return this.hours()||24}function Ta(a,b){U(a,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),b)})}function Ua(a,b){return b._meridiemParse}function Va(a){return"p"===(a+"").toLowerCase().charAt(0)}function Wa(a,b,c){return a>11?c?"pm":"PM":c?"am":"AM"}function Xa(a){return a?a.toLowerCase().replace("_","-"):a}function Ya(a){for(var b,c,d,e,f=0;f<a.length;){for(e=Xa(a[f]).split("-"),b=e.length,c=Xa(a[f+1]),c=c?c.split("-"):null;b>0;){if(d=Za(e.slice(0,b).join("-")))return d;if(c&&c.length>=b&&v(e,c,!0)>=b-1)break;b--}f++}return null}function Za(a){var b=null;if(!Be[a]&&"undefined"!=typeof module&&module&&module.exports)try{b=xe._abbr,require("./locale/"+a),$a(b)}catch(a){}return Be[a]}function $a(a,b){var c;return a&&(c=p(b)?bb(a):_a(a,b),c&&(xe=c)),xe._abbr}function _a(a,b){if(null!==b){var c=Ae;if(b.abbr=a,null!=Be[a])y("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),c=Be[a]._config;else if(null!=b.parentLocale){if(null==Be[b.parentLocale])return Ce[b.parentLocale]||(Ce[b.parentLocale]=[]),Ce[b.parentLocale].push({name:a,config:b}),null;c=Be[b.parentLocale]._config}return Be[a]=new C(B(c,b)),Ce[a]&&Ce[a].forEach(function(a){_a(a.name,a.config)}),$a(a),Be[a]}return delete Be[a],null}function ab(a,b){if(null!=b){var c,d=Ae;null!=Be[a]&&(d=Be[a]._config),b=B(d,b),c=new C(b),c.parentLocale=Be[a],Be[a]=c,$a(a)}else null!=Be[a]&&(null!=Be[a].parentLocale?Be[a]=Be[a].parentLocale:null!=Be[a]&&delete Be[a]);return Be[a]}function bb(a){var b;if(a&&a._locale&&a._locale._abbr&&(a=a._locale._abbr),!a)return xe;if(!c(a)){if(b=Za(a))return b;a=[a]}return Ya(a)}function cb(){return wd(Be)}function db(a){var b,c=a._a;return c&&m(a).overflow===-2&&(b=c[be]<0||c[be]>11?be:c[ce]<1||c[ce]>ea(c[ae],c[be])?ce:c[de]<0||c[de]>24||24===c[de]&&(0!==c[ee]||0!==c[fe]||0!==c[ge])?de:c[ee]<0||c[ee]>59?ee:c[fe]<0||c[fe]>59?fe:c[ge]<0||c[ge]>999?ge:-1,m(a)._overflowDayOfYear&&(b<ae||b>ce)&&(b=ce),m(a)._overflowWeeks&&b===-1&&(b=he),m(a)._overflowWeekday&&b===-1&&(b=ie),m(a).overflow=b),a}function eb(a){var b,c,d,e,f,g,h=a._i,i=De.exec(h)||Ee.exec(h);if(i){for(m(a).iso=!0,b=0,c=Ge.length;b<c;b++)if(Ge[b][1].exec(i[1])){e=Ge[b][0],d=Ge[b][2]!==!1;break}if(null==e)return void(a._isValid=!1);if(i[3]){for(b=0,c=He.length;b<c;b++)if(He[b][1].exec(i[3])){f=(i[2]||" ")+He[b][0];break}if(null==f)return void(a._isValid=!1)}if(!d&&null!=f)return void(a._isValid=!1);if(i[4]){if(!Fe.exec(i[4]))return void(a._isValid=!1);g="Z"}a._f=e+(f||"")+(g||""),kb(a)}else a._isValid=!1}function fb(b){var c=Ie.exec(b._i);return null!==c?void(b._d=new Date(+c[1])):(eb(b),void(b._isValid===!1&&(delete b._isValid,a.createFromInputFallback(b))))}function gb(a,b,c){return null!=a?a:null!=b?b:c}function hb(b){var c=new Date(a.now());return b._useUTC?[c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()]:[c.getFullYear(),c.getMonth(),c.getDate()]}function ib(a){var b,c,d,e,f=[];if(!a._d){for(d=hb(a),a._w&&null==a._a[ce]&&null==a._a[be]&&jb(a),a._dayOfYear&&(e=gb(a._a[ae],d[ae]),a._dayOfYear>pa(e)&&(m(a)._overflowDayOfYear=!0),c=ta(e,0,a._dayOfYear),a._a[be]=c.getUTCMonth(),a._a[ce]=c.getUTCDate()),b=0;b<3&&null==a._a[b];++b)a._a[b]=f[b]=d[b];for(;b<7;b++)a._a[b]=f[b]=null==a._a[b]?2===b?1:0:a._a[b];24===a._a[de]&&0===a._a[ee]&&0===a._a[fe]&&0===a._a[ge]&&(a._nextDay=!0,a._a[de]=0),a._d=(a._useUTC?ta:sa).apply(null,f),null!=a._tzm&&a._d.setUTCMinutes(a._d.getUTCMinutes()-a._tzm),a._nextDay&&(a._a[de]=24)}}function jb(a){var b,c,d,e,f,g,h,i;if(b=a._w,null!=b.GG||null!=b.W||null!=b.E)f=1,g=4,c=gb(b.GG,a._a[ae],wa(sb(),1,4).year),d=gb(b.W,1),e=gb(b.E,1),(e<1||e>7)&&(i=!0);else{f=a._locale._week.dow,g=a._locale._week.doy;var j=wa(sb(),f,g);c=gb(b.gg,a._a[ae],j.year),d=gb(b.w,j.week),null!=b.d?(e=b.d,(e<0||e>6)&&(i=!0)):null!=b.e?(e=b.e+f,(b.e<0||b.e>6)&&(i=!0)):e=f}d<1||d>xa(c,f,g)?m(a)._overflowWeeks=!0:null!=i?m(a)._overflowWeekday=!0:(h=va(c,d,e,f,g),a._a[ae]=h.year,a._dayOfYear=h.dayOfYear)}function kb(b){if(b._f===a.ISO_8601)return void eb(b);b._a=[],m(b).empty=!0;var c,d,e,f,g,h=""+b._i,i=h.length,j=0;for(e=Y(b._f,b._locale).match(Fd)||[],c=0;c<e.length;c++)f=e[c],d=(h.match($(f,b))||[])[0],d&&(g=h.substr(0,h.indexOf(d)),g.length>0&&m(b).unusedInput.push(g),h=h.slice(h.indexOf(d)+d.length),j+=d.length),Id[f]?(d?m(b).empty=!1:m(b).unusedTokens.push(f),da(f,d,b)):b._strict&&!d&&m(b).unusedTokens.push(f);m(b).charsLeftOver=i-j,h.length>0&&m(b).unusedInput.push(h),b._a[de]<=12&&m(b).bigHour===!0&&b._a[de]>0&&(m(b).bigHour=void 0),m(b).parsedDateParts=b._a.slice(0),m(b).meridiem=b._meridiem,b._a[de]=lb(b._locale,b._a[de],b._meridiem),ib(b),db(b)}function lb(a,b,c){var d;return null==c?b:null!=a.meridiemHour?a.meridiemHour(b,c):null!=a.isPM?(d=a.isPM(c),d&&b<12&&(b+=12),d||12!==b||(b=0),b):b}function mb(a){var b,c,d,e,f;if(0===a._f.length)return m(a).invalidFormat=!0,void(a._d=new Date(NaN));for(e=0;e<a._f.length;e++)f=0,b=q({},a),null!=a._useUTC&&(b._useUTC=a._useUTC),b._f=a._f[e],kb(b),n(b)&&(f+=m(b).charsLeftOver,f+=10*m(b).unusedTokens.length,m(b).score=f,(null==d||f<d)&&(d=f,c=b));j(a,c||b)}function nb(a){if(!a._d){var b=L(a._i);a._a=h([b.year,b.month,b.day||b.date,b.hour,b.minute,b.second,b.millisecond],function(a){return a&&parseInt(a,10)}),ib(a)}}function ob(a){var b=new r(db(pb(a)));return b._nextDay&&(b.add(1,"d"),b._nextDay=void 0),b}function pb(a){var b=a._i,d=a._f;return a._locale=a._locale||bb(a._l),null===b||void 0===d&&""===b?o({nullInput:!0}):("string"==typeof b&&(a._i=b=a._locale.preparse(b)),s(b)?new r(db(b)):(g(b)?a._d=b:c(d)?mb(a):d?kb(a):qb(a),n(a)||(a._d=null),a))}function qb(b){var d=b._i;void 0===d?b._d=new Date(a.now()):g(d)?b._d=new Date(d.valueOf()):"string"==typeof d?fb(b):c(d)?(b._a=h(d.slice(0),function(a){return parseInt(a,10)}),ib(b)):"object"==typeof d?nb(b):f(d)?b._d=new Date(d):a.createFromInputFallback(b)}function rb(a,b,f,g,h){var i={};return f!==!0&&f!==!1||(g=f,f=void 0),(d(a)&&e(a)||c(a)&&0===a.length)&&(a=void 0),i._isAMomentObject=!0,i._useUTC=i._isUTC=h,i._l=f,i._i=a,i._f=b,i._strict=g,ob(i)}function sb(a,b,c,d){return rb(a,b,c,d,!1)}function tb(a,b){var d,e;if(1===b.length&&c(b[0])&&(b=b[0]),!b.length)return sb();for(d=b[0],e=1;e<b.length;++e)b[e].isValid()&&!b[e][a](d)||(d=b[e]);return d}function ub(){var a=[].slice.call(arguments,0);return tb("isBefore",a)}function vb(){var a=[].slice.call(arguments,0);return tb("isAfter",a)}function wb(a){var b=L(a),c=b.year||0,d=b.quarter||0,e=b.month||0,f=b.week||0,g=b.day||0,h=b.hour||0,i=b.minute||0,j=b.second||0,k=b.millisecond||0;this._milliseconds=+k+1e3*j+6e4*i+1e3*h*60*60,this._days=+g+7*f,this._months=+e+3*d+12*c,this._data={},this._locale=bb(),this._bubble()}function xb(a){return a instanceof wb}function yb(a){return a<0?Math.round(-1*a)*-1:Math.round(a)}function zb(a,b){U(a,0,0,function(){var a=this.utcOffset(),c="+";return a<0&&(a=-a,c="-"),c+T(~~(a/60),2)+b+T(~~a%60,2)})}function Ab(a,b){var c=(b||"").match(a);if(null===c)return null;var d=c[c.length-1]||[],e=(d+"").match(Me)||["-",0,0],f=+(60*e[1])+u(e[2]);return 0===f?0:"+"===e[0]?f:-f}function Bb(b,c){var d,e;return c._isUTC?(d=c.clone(),e=(s(b)||g(b)?b.valueOf():sb(b).valueOf())-d.valueOf(),d._d.setTime(d._d.valueOf()+e),a.updateOffset(d,!1),d):sb(b).local()}function Cb(a){return 15*-Math.round(a._d.getTimezoneOffset()/15)}function Db(b,c){var d,e=this._offset||0;if(!this.isValid())return null!=b?this:NaN;if(null!=b){if("string"==typeof b){if(b=Ab(Xd,b),null===b)return this}else Math.abs(b)<16&&(b*=60);return!this._isUTC&&c&&(d=Cb(this)),this._offset=b,this._isUTC=!0,null!=d&&this.add(d,"m"),e!==b&&(!c||this._changeInProgress?Tb(this,Ob(b-e,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,a.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?e:Cb(this)}function Eb(a,b){return null!=a?("string"!=typeof a&&(a=-a),this.utcOffset(a,b),this):-this.utcOffset()}function Fb(a){return this.utcOffset(0,a)}function Gb(a){return this._isUTC&&(this.utcOffset(0,a),this._isUTC=!1,a&&this.subtract(Cb(this),"m")),this}function Hb(){if(null!=this._tzm)this.utcOffset(this._tzm);else if("string"==typeof this._i){var a=Ab(Wd,this._i);null!=a?this.utcOffset(a):this.utcOffset(0,!0)}return this}function Ib(a){return!!this.isValid()&&(a=a?sb(a).utcOffset():0,(this.utcOffset()-a)%60===0)}function Jb(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Kb(){if(!p(this._isDSTShifted))return this._isDSTShifted;var a={};if(q(a,this),a=pb(a),a._a){var b=a._isUTC?k(a._a):sb(a._a);this._isDSTShifted=this.isValid()&&v(a._a,b.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}function Lb(){return!!this.isValid()&&!this._isUTC}function Mb(){return!!this.isValid()&&this._isUTC}function Nb(){return!!this.isValid()&&this._isUTC&&0===this._offset}function Ob(a,b){var c,d,e,g=a,h=null;return xb(a)?g={ms:a._milliseconds,d:a._days,M:a._months}:f(a)?(g={},b?g[b]=a:g.milliseconds=a):(h=Ne.exec(a))?(c="-"===h[1]?-1:1,g={y:0,d:u(h[ce])*c,h:u(h[de])*c,m:u(h[ee])*c,s:u(h[fe])*c,ms:u(yb(1e3*h[ge]))*c}):(h=Oe.exec(a))?(c="-"===h[1]?-1:1,g={y:Pb(h[2],c),M:Pb(h[3],c),w:Pb(h[4],c),d:Pb(h[5],c),h:Pb(h[6],c),m:Pb(h[7],c),s:Pb(h[8],c)}):null==g?g={}:"object"==typeof g&&("from"in g||"to"in g)&&(e=Rb(sb(g.from),sb(g.to)),g={},g.ms=e.milliseconds,g.M=e.months),d=new wb(g),xb(a)&&i(a,"_locale")&&(d._locale=a._locale),d}function Pb(a,b){var c=a&&parseFloat(a.replace(",","."));return(isNaN(c)?0:c)*b}function Qb(a,b){var c={milliseconds:0,months:0};return c.months=b.month()-a.month()+12*(b.year()-a.year()),a.clone().add(c.months,"M").isAfter(b)&&--c.months,c.milliseconds=+b-+a.clone().add(c.months,"M"),c}function Rb(a,b){var c;return a.isValid()&&b.isValid()?(b=Bb(b,a),a.isBefore(b)?c=Qb(a,b):(c=Qb(b,a),c.milliseconds=-c.milliseconds,c.months=-c.months),c):{milliseconds:0,months:0}}function Sb(a,b){return function(c,d){var e,f;return null===d||isNaN(+d)||(y(b,"moment()."+b+"(period, number) is deprecated. Please use moment()."+b+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),f=c,c=d,d=f),c="string"==typeof c?+c:c,e=Ob(c,d),Tb(this,e,a),this}}function Tb(b,c,d,e){var f=c._milliseconds,g=yb(c._days),h=yb(c._months);b.isValid()&&(e=null==e||e,f&&b._d.setTime(b._d.valueOf()+f*d),g&&Q(b,"Date",P(b,"Date")+g*d),h&&ja(b,P(b,"Month")+h*d),e&&a.updateOffset(b,g||h))}function Ub(a,b){var c=a.diff(b,"days",!0);return c<-6?"sameElse":c<-1?"lastWeek":c<0?"lastDay":c<1?"sameDay":c<2?"nextDay":c<7?"nextWeek":"sameElse"}function Vb(b,c){var d=b||sb(),e=Bb(d,this).startOf("day"),f=a.calendarFormat(this,e)||"sameElse",g=c&&(z(c[f])?c[f].call(this,d):c[f]);return this.format(g||this.localeData().calendar(f,this,sb(d)))}function Wb(){return new r(this)}function Xb(a,b){var c=s(a)?a:sb(a);return!(!this.isValid()||!c.isValid())&&(b=K(p(b)?"millisecond":b),"millisecond"===b?this.valueOf()>c.valueOf():c.valueOf()<this.clone().startOf(b).valueOf())}function Yb(a,b){var c=s(a)?a:sb(a);return!(!this.isValid()||!c.isValid())&&(b=K(p(b)?"millisecond":b),"millisecond"===b?this.valueOf()<c.valueOf():this.clone().endOf(b).valueOf()<c.valueOf())}function Zb(a,b,c,d){return d=d||"()",("("===d[0]?this.isAfter(a,c):!this.isBefore(a,c))&&(")"===d[1]?this.isBefore(b,c):!this.isAfter(b,c))}function $b(a,b){var c,d=s(a)?a:sb(a);return!(!this.isValid()||!d.isValid())&&(b=K(b||"millisecond"),"millisecond"===b?this.valueOf()===d.valueOf():(c=d.valueOf(),this.clone().startOf(b).valueOf()<=c&&c<=this.clone().endOf(b).valueOf()))}function _b(a,b){return this.isSame(a,b)||this.isAfter(a,b)}function ac(a,b){return this.isSame(a,b)||this.isBefore(a,b)}function bc(a,b,c){var d,e,f,g;return this.isValid()?(d=Bb(a,this),d.isValid()?(e=6e4*(d.utcOffset()-this.utcOffset()),b=K(b),"year"===b||"month"===b||"quarter"===b?(g=cc(this,d),"quarter"===b?g/=3:"year"===b&&(g/=12)):(f=this-d,g="second"===b?f/1e3:"minute"===b?f/6e4:"hour"===b?f/36e5:"day"===b?(f-e)/864e5:"week"===b?(f-e)/6048e5:f),c?g:t(g)):NaN):NaN}function cc(a,b){var c,d,e=12*(b.year()-a.year())+(b.month()-a.month()),f=a.clone().add(e,"months");return b-f<0?(c=a.clone().add(e-1,"months"),d=(b-f)/(f-c)):(c=a.clone().add(e+1,"months"),d=(b-f)/(c-f)),-(e+d)||0}function dc(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function ec(){var a=this.clone().utc();return 0<a.year()&&a.year()<=9999?z(Date.prototype.toISOString)?this.toDate().toISOString():X(a,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):X(a,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function fc(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var a="moment",b="";this.isLocal()||(a=0===this.utcOffset()?"moment.utc":"moment.parseZone",b="Z");var c="["+a+'("]',d=0<this.year()&&this.year()<=9999?"YYYY":"YYYYYY",e="-MM-DD[T]HH:mm:ss.SSS",f=b+'[")]';return this.format(c+d+e+f)}function gc(b){b||(b=this.isUtc()?a.defaultFormatUtc:a.defaultFormat);var c=X(this,b);return this.localeData().postformat(c)}function hc(a,b){return this.isValid()&&(s(a)&&a.isValid()||sb(a).isValid())?Ob({to:this,from:a}).locale(this.locale()).humanize(!b):this.localeData().invalidDate()}function ic(a){return this.from(sb(),a)}function jc(a,b){return this.isValid()&&(s(a)&&a.isValid()||sb(a).isValid())?Ob({from:this,to:a}).locale(this.locale()).humanize(!b):this.localeData().invalidDate()}function kc(a){return this.to(sb(),a)}function lc(a){var b;return void 0===a?this._locale._abbr:(b=bb(a),null!=b&&(this._locale=b),this)}function mc(){return this._locale}function nc(a){switch(a=K(a)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":case"date":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===a&&this.weekday(0),"isoWeek"===a&&this.isoWeekday(1),"quarter"===a&&this.month(3*Math.floor(this.month()/3)),this}function oc(a){return a=K(a),void 0===a||"millisecond"===a?this:("date"===a&&(a="day"),this.startOf(a).add(1,"isoWeek"===a?"week":a).subtract(1,"ms"))}function pc(){return this._d.valueOf()-6e4*(this._offset||0)}function qc(){return Math.floor(this.valueOf()/1e3)}function rc(){return new Date(this.valueOf())}function sc(){var a=this;return[a.year(),a.month(),a.date(),a.hour(),a.minute(),a.second(),a.millisecond()]}function tc(){var a=this;return{years:a.year(),months:a.month(),date:a.date(),hours:a.hours(),minutes:a.minutes(),seconds:a.seconds(),milliseconds:a.milliseconds()}}function uc(){return this.isValid()?this.toISOString():null}function vc(){return n(this)}function wc(){return j({},m(this))}function xc(){return m(this).overflow}function yc(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function zc(a,b){U(0,[a,a.length],0,b)}function Ac(a){return Ec.call(this,a,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function Bc(a){return Ec.call(this,a,this.isoWeek(),this.isoWeekday(),1,4)}function Cc(){return xa(this.year(),1,4)}function Dc(){var a=this.localeData()._week;return xa(this.year(),a.dow,a.doy)}function Ec(a,b,c,d,e){var f;return null==a?wa(this,d,e).year:(f=xa(a,d,e),b>f&&(b=f),Fc.call(this,a,b,c,d,e))}function Fc(a,b,c,d,e){var f=va(a,b,c,d,e),g=ta(f.year,0,f.dayOfYear);return this.year(g.getUTCFullYear()),this.month(g.getUTCMonth()),this.date(g.getUTCDate()),this}function Gc(a){return null==a?Math.ceil((this.month()+1)/3):this.month(3*(a-1)+this.month()%3);
}function Hc(a){var b=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==a?b:this.add(a-b,"d")}function Ic(a,b){b[ge]=u(1e3*("0."+a))}function Jc(){return this._isUTC?"UTC":""}function Kc(){return this._isUTC?"Coordinated Universal Time":""}function Lc(a){return sb(1e3*a)}function Mc(){return sb.apply(null,arguments).parseZone()}function Nc(a){return a}function Oc(a,b,c,d){var e=bb(),f=k().set(d,b);return e[c](f,a)}function Pc(a,b,c){if(f(a)&&(b=a,a=void 0),a=a||"",null!=b)return Oc(a,b,c,"month");var d,e=[];for(d=0;d<12;d++)e[d]=Oc(a,d,c,"month");return e}function Qc(a,b,c,d){"boolean"==typeof a?(f(b)&&(c=b,b=void 0),b=b||""):(b=a,c=b,a=!1,f(b)&&(c=b,b=void 0),b=b||"");var e=bb(),g=a?e._week.dow:0;if(null!=c)return Oc(b,(c+g)%7,d,"day");var h,i=[];for(h=0;h<7;h++)i[h]=Oc(b,(h+g)%7,d,"day");return i}function Rc(a,b){return Pc(a,b,"months")}function Sc(a,b){return Pc(a,b,"monthsShort")}function Tc(a,b,c){return Qc(a,b,c,"weekdays")}function Uc(a,b,c){return Qc(a,b,c,"weekdaysShort")}function Vc(a,b,c){return Qc(a,b,c,"weekdaysMin")}function Wc(){var a=this._data;return this._milliseconds=Ze(this._milliseconds),this._days=Ze(this._days),this._months=Ze(this._months),a.milliseconds=Ze(a.milliseconds),a.seconds=Ze(a.seconds),a.minutes=Ze(a.minutes),a.hours=Ze(a.hours),a.months=Ze(a.months),a.years=Ze(a.years),this}function Xc(a,b,c,d){var e=Ob(b,c);return a._milliseconds+=d*e._milliseconds,a._days+=d*e._days,a._months+=d*e._months,a._bubble()}function Yc(a,b){return Xc(this,a,b,1)}function Zc(a,b){return Xc(this,a,b,-1)}function $c(a){return a<0?Math.floor(a):Math.ceil(a)}function _c(){var a,b,c,d,e,f=this._milliseconds,g=this._days,h=this._months,i=this._data;return f>=0&&g>=0&&h>=0||f<=0&&g<=0&&h<=0||(f+=864e5*$c(bd(h)+g),g=0,h=0),i.milliseconds=f%1e3,a=t(f/1e3),i.seconds=a%60,b=t(a/60),i.minutes=b%60,c=t(b/60),i.hours=c%24,g+=t(c/24),e=t(ad(g)),h+=e,g-=$c(bd(e)),d=t(h/12),h%=12,i.days=g,i.months=h,i.years=d,this}function ad(a){return 4800*a/146097}function bd(a){return 146097*a/4800}function cd(a){var b,c,d=this._milliseconds;if(a=K(a),"month"===a||"year"===a)return b=this._days+d/864e5,c=this._months+ad(b),"month"===a?c:c/12;switch(b=this._days+Math.round(bd(this._months)),a){case"week":return b/7+d/6048e5;case"day":return b+d/864e5;case"hour":return 24*b+d/36e5;case"minute":return 1440*b+d/6e4;case"second":return 86400*b+d/1e3;case"millisecond":return Math.floor(864e5*b)+d;default:throw new Error("Unknown unit "+a)}}function dd(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*u(this._months/12)}function ed(a){return function(){return this.as(a)}}function fd(a){return a=K(a),this[a+"s"]()}function gd(a){return function(){return this._data[a]}}function hd(){return t(this.days()/7)}function id(a,b,c,d,e){return e.relativeTime(b||1,!!c,a,d)}function jd(a,b,c){var d=Ob(a).abs(),e=of(d.as("s")),f=of(d.as("m")),g=of(d.as("h")),h=of(d.as("d")),i=of(d.as("M")),j=of(d.as("y")),k=e<pf.s&&["s",e]||f<=1&&["m"]||f<pf.m&&["mm",f]||g<=1&&["h"]||g<pf.h&&["hh",g]||h<=1&&["d"]||h<pf.d&&["dd",h]||i<=1&&["M"]||i<pf.M&&["MM",i]||j<=1&&["y"]||["yy",j];return k[2]=b,k[3]=+a>0,k[4]=c,id.apply(null,k)}function kd(a){return void 0===a?of:"function"==typeof a&&(of=a,!0)}function ld(a,b){return void 0!==pf[a]&&(void 0===b?pf[a]:(pf[a]=b,!0))}function md(a){var b=this.localeData(),c=jd(this,!a,b);return a&&(c=b.pastFuture(+this,c)),b.postformat(c)}function nd(){var a,b,c,d=qf(this._milliseconds)/1e3,e=qf(this._days),f=qf(this._months);a=t(d/60),b=t(a/60),d%=60,a%=60,c=t(f/12),f%=12;var g=c,h=f,i=e,j=b,k=a,l=d,m=this.asSeconds();return m?(m<0?"-":"")+"P"+(g?g+"Y":"")+(h?h+"M":"")+(i?i+"D":"")+(j||k||l?"T":"")+(j?j+"H":"")+(k?k+"M":"")+(l?l+"S":""):"P0D"}var od,pd;pd=Array.prototype.some?Array.prototype.some:function(a){for(var b=Object(this),c=b.length>>>0,d=0;d<c;d++)if(d in b&&a.call(this,b[d],d,b))return!0;return!1};var qd=pd,rd=a.momentProperties=[],sd=!1,td={};a.suppressDeprecationWarnings=!1,a.deprecationHandler=null;var ud;ud=Object.keys?Object.keys:function(a){var b,c=[];for(b in a)i(a,b)&&c.push(b);return c};var vd,wd=ud,xd={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},yd={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},zd="Invalid date",Ad="%d",Bd=/\d{1,2}/,Cd={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},Dd={},Ed={},Fd=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Gd=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Hd={},Id={},Jd=/\d/,Kd=/\d\d/,Ld=/\d{3}/,Md=/\d{4}/,Nd=/[+-]?\d{6}/,Od=/\d\d?/,Pd=/\d\d\d\d?/,Qd=/\d\d\d\d\d\d?/,Rd=/\d{1,3}/,Sd=/\d{1,4}/,Td=/[+-]?\d{1,6}/,Ud=/\d+/,Vd=/[+-]?\d+/,Wd=/Z|[+-]\d\d:?\d\d/gi,Xd=/Z|[+-]\d\d(?::?\d\d)?/gi,Yd=/[+-]?\d+(\.\d{1,3})?/,Zd=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,$d={},_d={},ae=0,be=1,ce=2,de=3,ee=4,fe=5,ge=6,he=7,ie=8;vd=Array.prototype.indexOf?Array.prototype.indexOf:function(a){var b;for(b=0;b<this.length;++b)if(this[b]===a)return b;return-1};var je=vd;U("M",["MM",2],"Mo",function(){return this.month()+1}),U("MMM",0,0,function(a){return this.localeData().monthsShort(this,a)}),U("MMMM",0,0,function(a){return this.localeData().months(this,a)}),J("month","M"),M("month",8),Z("M",Od),Z("MM",Od,Kd),Z("MMM",function(a,b){return b.monthsShortRegex(a)}),Z("MMMM",function(a,b){return b.monthsRegex(a)}),ba(["M","MM"],function(a,b){b[be]=u(a)-1}),ba(["MMM","MMMM"],function(a,b,c,d){var e=c._locale.monthsParse(a,d,c._strict);null!=e?b[be]=e:m(c).invalidMonth=a});var ke=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,le="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),me="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),ne=Zd,oe=Zd;U("Y",0,0,function(){var a=this.year();return a<=9999?""+a:"+"+a}),U(0,["YY",2],0,function(){return this.year()%100}),U(0,["YYYY",4],0,"year"),U(0,["YYYYY",5],0,"year"),U(0,["YYYYYY",6,!0],0,"year"),J("year","y"),M("year",1),Z("Y",Vd),Z("YY",Od,Kd),Z("YYYY",Sd,Md),Z("YYYYY",Td,Nd),Z("YYYYYY",Td,Nd),ba(["YYYYY","YYYYYY"],ae),ba("YYYY",function(b,c){c[ae]=2===b.length?a.parseTwoDigitYear(b):u(b)}),ba("YY",function(b,c){c[ae]=a.parseTwoDigitYear(b)}),ba("Y",function(a,b){b[ae]=parseInt(a,10)}),a.parseTwoDigitYear=function(a){return u(a)+(u(a)>68?1900:2e3)};var pe=O("FullYear",!0);U("w",["ww",2],"wo","week"),U("W",["WW",2],"Wo","isoWeek"),J("week","w"),J("isoWeek","W"),M("week",5),M("isoWeek",5),Z("w",Od),Z("ww",Od,Kd),Z("W",Od),Z("WW",Od,Kd),ca(["w","ww","W","WW"],function(a,b,c,d){b[d.substr(0,1)]=u(a)});var qe={dow:0,doy:6};U("d",0,"do","day"),U("dd",0,0,function(a){return this.localeData().weekdaysMin(this,a)}),U("ddd",0,0,function(a){return this.localeData().weekdaysShort(this,a)}),U("dddd",0,0,function(a){return this.localeData().weekdays(this,a)}),U("e",0,0,"weekday"),U("E",0,0,"isoWeekday"),J("day","d"),J("weekday","e"),J("isoWeekday","E"),M("day",11),M("weekday",11),M("isoWeekday",11),Z("d",Od),Z("e",Od),Z("E",Od),Z("dd",function(a,b){return b.weekdaysMinRegex(a)}),Z("ddd",function(a,b){return b.weekdaysShortRegex(a)}),Z("dddd",function(a,b){return b.weekdaysRegex(a)}),ca(["dd","ddd","dddd"],function(a,b,c,d){var e=c._locale.weekdaysParse(a,d,c._strict);null!=e?b.d=e:m(c).invalidWeekday=a}),ca(["d","e","E"],function(a,b,c,d){b[d]=u(a)});var re="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),se="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),te="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),ue=Zd,ve=Zd,we=Zd;U("H",["HH",2],0,"hour"),U("h",["hh",2],0,Ra),U("k",["kk",2],0,Sa),U("hmm",0,0,function(){return""+Ra.apply(this)+T(this.minutes(),2)}),U("hmmss",0,0,function(){return""+Ra.apply(this)+T(this.minutes(),2)+T(this.seconds(),2)}),U("Hmm",0,0,function(){return""+this.hours()+T(this.minutes(),2)}),U("Hmmss",0,0,function(){return""+this.hours()+T(this.minutes(),2)+T(this.seconds(),2)}),Ta("a",!0),Ta("A",!1),J("hour","h"),M("hour",13),Z("a",Ua),Z("A",Ua),Z("H",Od),Z("h",Od),Z("HH",Od,Kd),Z("hh",Od,Kd),Z("hmm",Pd),Z("hmmss",Qd),Z("Hmm",Pd),Z("Hmmss",Qd),ba(["H","HH"],de),ba(["a","A"],function(a,b,c){c._isPm=c._locale.isPM(a),c._meridiem=a}),ba(["h","hh"],function(a,b,c){b[de]=u(a),m(c).bigHour=!0}),ba("hmm",function(a,b,c){var d=a.length-2;b[de]=u(a.substr(0,d)),b[ee]=u(a.substr(d)),m(c).bigHour=!0}),ba("hmmss",function(a,b,c){var d=a.length-4,e=a.length-2;b[de]=u(a.substr(0,d)),b[ee]=u(a.substr(d,2)),b[fe]=u(a.substr(e)),m(c).bigHour=!0}),ba("Hmm",function(a,b,c){var d=a.length-2;b[de]=u(a.substr(0,d)),b[ee]=u(a.substr(d))}),ba("Hmmss",function(a,b,c){var d=a.length-4,e=a.length-2;b[de]=u(a.substr(0,d)),b[ee]=u(a.substr(d,2)),b[fe]=u(a.substr(e))});var xe,ye=/[ap]\.?m?\.?/i,ze=O("Hours",!0),Ae={calendar:xd,longDateFormat:yd,invalidDate:zd,ordinal:Ad,ordinalParse:Bd,relativeTime:Cd,months:le,monthsShort:me,week:qe,weekdays:re,weekdaysMin:te,weekdaysShort:se,meridiemParse:ye},Be={},Ce={},De=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Ee=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Fe=/Z|[+-]\d\d(?::?\d\d)?/,Ge=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],He=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Ie=/^\/?Date\((\-?\d+)/i;a.createFromInputFallback=x("value provided is not in a recognized ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(a){a._d=new Date(a._i+(a._useUTC?" UTC":""))}),a.ISO_8601=function(){};var Je=x("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var a=sb.apply(null,arguments);return this.isValid()&&a.isValid()?a<this?this:a:o()}),Ke=x("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var a=sb.apply(null,arguments);return this.isValid()&&a.isValid()?a>this?this:a:o()}),Le=function(){return Date.now?Date.now():+new Date};zb("Z",":"),zb("ZZ",""),Z("Z",Xd),Z("ZZ",Xd),ba(["Z","ZZ"],function(a,b,c){c._useUTC=!0,c._tzm=Ab(Xd,a)});var Me=/([\+\-]|\d\d)/gi;a.updateOffset=function(){};var Ne=/^(\-)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,Oe=/^(-)?P(?:(-?[0-9,.]*)Y)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)W)?(?:(-?[0-9,.]*)D)?(?:T(?:(-?[0-9,.]*)H)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)S)?)?$/;Ob.fn=wb.prototype;var Pe=Sb(1,"add"),Qe=Sb(-1,"subtract");a.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",a.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var Re=x("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(a){return void 0===a?this.localeData():this.locale(a)});U(0,["gg",2],0,function(){return this.weekYear()%100}),U(0,["GG",2],0,function(){return this.isoWeekYear()%100}),zc("gggg","weekYear"),zc("ggggg","weekYear"),zc("GGGG","isoWeekYear"),zc("GGGGG","isoWeekYear"),J("weekYear","gg"),J("isoWeekYear","GG"),M("weekYear",1),M("isoWeekYear",1),Z("G",Vd),Z("g",Vd),Z("GG",Od,Kd),Z("gg",Od,Kd),Z("GGGG",Sd,Md),Z("gggg",Sd,Md),Z("GGGGG",Td,Nd),Z("ggggg",Td,Nd),ca(["gggg","ggggg","GGGG","GGGGG"],function(a,b,c,d){b[d.substr(0,2)]=u(a)}),ca(["gg","GG"],function(b,c,d,e){c[e]=a.parseTwoDigitYear(b)}),U("Q",0,"Qo","quarter"),J("quarter","Q"),M("quarter",7),Z("Q",Jd),ba("Q",function(a,b){b[be]=3*(u(a)-1)}),U("D",["DD",2],"Do","date"),J("date","D"),M("date",9),Z("D",Od),Z("DD",Od,Kd),Z("Do",function(a,b){return a?b._ordinalParse:b._ordinalParseLenient}),ba(["D","DD"],ce),ba("Do",function(a,b){b[ce]=u(a.match(Od)[0],10)});var Se=O("Date",!0);U("DDD",["DDDD",3],"DDDo","dayOfYear"),J("dayOfYear","DDD"),M("dayOfYear",4),Z("DDD",Rd),Z("DDDD",Ld),ba(["DDD","DDDD"],function(a,b,c){c._dayOfYear=u(a)}),U("m",["mm",2],0,"minute"),J("minute","m"),M("minute",14),Z("m",Od),Z("mm",Od,Kd),ba(["m","mm"],ee);var Te=O("Minutes",!1);U("s",["ss",2],0,"second"),J("second","s"),M("second",15),Z("s",Od),Z("ss",Od,Kd),ba(["s","ss"],fe);var Ue=O("Seconds",!1);U("S",0,0,function(){return~~(this.millisecond()/100)}),U(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),U(0,["SSS",3],0,"millisecond"),U(0,["SSSS",4],0,function(){return 10*this.millisecond()}),U(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),U(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),U(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),U(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),U(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),J("millisecond","ms"),M("millisecond",16),Z("S",Rd,Jd),Z("SS",Rd,Kd),Z("SSS",Rd,Ld);var Ve;for(Ve="SSSS";Ve.length<=9;Ve+="S")Z(Ve,Ud);for(Ve="S";Ve.length<=9;Ve+="S")ba(Ve,Ic);var We=O("Milliseconds",!1);U("z",0,0,"zoneAbbr"),U("zz",0,0,"zoneName");var Xe=r.prototype;Xe.add=Pe,Xe.calendar=Vb,Xe.clone=Wb,Xe.diff=bc,Xe.endOf=oc,Xe.format=gc,Xe.from=hc,Xe.fromNow=ic,Xe.to=jc,Xe.toNow=kc,Xe.get=R,Xe.invalidAt=xc,Xe.isAfter=Xb,Xe.isBefore=Yb,Xe.isBetween=Zb,Xe.isSame=$b,Xe.isSameOrAfter=_b,Xe.isSameOrBefore=ac,Xe.isValid=vc,Xe.lang=Re,Xe.locale=lc,Xe.localeData=mc,Xe.max=Ke,Xe.min=Je,Xe.parsingFlags=wc,Xe.set=S,Xe.startOf=nc,Xe.subtract=Qe,Xe.toArray=sc,Xe.toObject=tc,Xe.toDate=rc,Xe.toISOString=ec,Xe.inspect=fc,Xe.toJSON=uc,Xe.toString=dc,Xe.unix=qc,Xe.valueOf=pc,Xe.creationData=yc,Xe.year=pe,Xe.isLeapYear=ra,Xe.weekYear=Ac,Xe.isoWeekYear=Bc,Xe.quarter=Xe.quarters=Gc,Xe.month=ka,Xe.daysInMonth=la,Xe.week=Xe.weeks=Ba,Xe.isoWeek=Xe.isoWeeks=Ca,Xe.weeksInYear=Dc,Xe.isoWeeksInYear=Cc,Xe.date=Se,Xe.day=Xe.days=Ka,Xe.weekday=La,Xe.isoWeekday=Ma,Xe.dayOfYear=Hc,Xe.hour=Xe.hours=ze,Xe.minute=Xe.minutes=Te,Xe.second=Xe.seconds=Ue,Xe.millisecond=Xe.milliseconds=We,Xe.utcOffset=Db,Xe.utc=Fb,Xe.local=Gb,Xe.parseZone=Hb,Xe.hasAlignedHourOffset=Ib,Xe.isDST=Jb,Xe.isLocal=Lb,Xe.isUtcOffset=Mb,Xe.isUtc=Nb,Xe.isUTC=Nb,Xe.zoneAbbr=Jc,Xe.zoneName=Kc,Xe.dates=x("dates accessor is deprecated. Use date instead.",Se),Xe.months=x("months accessor is deprecated. Use month instead",ka),Xe.years=x("years accessor is deprecated. Use year instead",pe),Xe.zone=x("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",Eb),Xe.isDSTShifted=x("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",Kb);var Ye=C.prototype;Ye.calendar=D,Ye.longDateFormat=E,Ye.invalidDate=F,Ye.ordinal=G,Ye.preparse=Nc,Ye.postformat=Nc,Ye.relativeTime=H,Ye.pastFuture=I,Ye.set=A,Ye.months=fa,Ye.monthsShort=ga,Ye.monthsParse=ia,Ye.monthsRegex=na,Ye.monthsShortRegex=ma,Ye.week=ya,Ye.firstDayOfYear=Aa,Ye.firstDayOfWeek=za,Ye.weekdays=Fa,Ye.weekdaysMin=Ha,Ye.weekdaysShort=Ga,Ye.weekdaysParse=Ja,Ye.weekdaysRegex=Na,Ye.weekdaysShortRegex=Oa,Ye.weekdaysMinRegex=Pa,Ye.isPM=Va,Ye.meridiem=Wa,$a("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(a){var b=a%10,c=1===u(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+c}}),a.lang=x("moment.lang is deprecated. Use moment.locale instead.",$a),a.langData=x("moment.langData is deprecated. Use moment.localeData instead.",bb);var Ze=Math.abs,$e=ed("ms"),_e=ed("s"),af=ed("m"),bf=ed("h"),cf=ed("d"),df=ed("w"),ef=ed("M"),ff=ed("y"),gf=gd("milliseconds"),hf=gd("seconds"),jf=gd("minutes"),kf=gd("hours"),lf=gd("days"),mf=gd("months"),nf=gd("years"),of=Math.round,pf={s:45,m:45,h:22,d:26,M:11},qf=Math.abs,rf=wb.prototype;return rf.abs=Wc,rf.add=Yc,rf.subtract=Zc,rf.as=cd,rf.asMilliseconds=$e,rf.asSeconds=_e,rf.asMinutes=af,rf.asHours=bf,rf.asDays=cf,rf.asWeeks=df,rf.asMonths=ef,rf.asYears=ff,rf.valueOf=dd,rf._bubble=_c,rf.get=fd,rf.milliseconds=gf,rf.seconds=hf,rf.minutes=jf,rf.hours=kf,rf.days=lf,rf.weeks=hd,rf.months=mf,rf.years=nf,rf.humanize=md,rf.toISOString=nd,rf.toString=nd,rf.toJSON=nd,rf.locale=lc,rf.localeData=mc,rf.toIsoString=x("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",nd),rf.lang=Re,U("X",0,0,"unix"),U("x",0,0,"valueOf"),Z("x",Vd),Z("X",Yd),ba("X",function(a,b,c){c._d=new Date(1e3*parseFloat(a,10))}),ba("x",function(a,b,c){c._d=new Date(u(a))}),a.version="2.17.1",b(sb),a.fn=Xe,a.min=ub,a.max=vb,a.now=Le,a.utc=k,a.unix=Lc,a.months=Rc,a.isDate=g,a.locale=$a,a.invalid=o,a.duration=Ob,a.isMoment=s,a.weekdays=Tc,a.parseZone=Mc,a.localeData=bb,a.isDuration=xb,a.monthsShort=Sc,a.weekdaysMin=Vc,a.defineLocale=_a,a.updateLocale=ab,a.locales=cb,a.weekdaysShort=Uc,a.normalizeUnits=K,a.relativeTimeRounding=kd,a.relativeTimeThreshold=ld,a.calendarFormat=Ub,a.prototype=Xe,a}),//! moment-timezone.js
//! version : 0.5.32
//! Copyright (c) JS Foundation and other contributors
//! license : MIT
//! github.com/moment/moment-timezone
!function(a,b){"use strict";"object"==typeof module&&module.exports?module.exports=b(require("moment")):"function"==typeof define&&define.amd?define(["moment"],b):b(a.moment)}(this,function(a){"use strict";function b(a){return 96<a?a-87:64<a?a-29:a-48}function c(a){var c=0,d=a.split("."),e=d[0],f=d[1]||"",g=1,h=0,i=1;for(45===a.charCodeAt(0)&&(i=-(c=1));c<e.length;c++)h=60*h+b(e.charCodeAt(c));for(c=0;c<f.length;c++)g/=60,h+=b(f.charCodeAt(c))*g;return h*i}function d(a){for(var b=0;b<a.length;b++)a[b]=c(a[b])}function e(a,b){for(var c=[],d=0;d<b.length;d++)c[d]=a[b[d]];return c}function f(a){var b=a.split("|"),c=b[2].split(" "),f=b[3].split(""),g=b[4].split(" ");return d(c),d(f),d(g),function(a,b){for(var c=0;c<b;c++)a[c]=Math.round((a[c-1]||0)+6e4*a[c]);a[b-1]=1/0}(g,f.length),{name:b[0],abbrs:e(b[1].split(" "),f),offsets:e(c,f),untils:g,population:0|b[5]}}function g(a){a&&this._set(f(a))}function h(a,b){this.name=a,this.zones=b}function i(a){var b=a.toTimeString(),c=b.match(/\([a-z ]+\)/i);"GMT"===(c=c&&c[0]?(c=c[0].match(/[A-Z]/g))?c.join(""):void 0:(c=b.match(/[A-Z]{3,5}/g))?c[0]:void 0)&&(c=void 0),this.at=+a,this.abbr=c,this.offset=a.getTimezoneOffset()}function j(a){this.zone=a,this.offsetScore=0,this.abbrScore=0}function k(){for(var a,b,c=(new Date).getFullYear()-2,d=new i(new Date(c,0,1)),e=[d],f=1;f<48;f++)(b=new i(new Date(c,f,1))).offset!==d.offset&&(a=function(a,b){for(var c,d;d=6e4*((b.at-a.at)/12e4|0);)(c=new i(new Date(a.at+d))).offset===a.offset?a=c:b=c;return a}(d,b),e.push(a),e.push(new i(new Date(a.at+6e4)))),d=b;for(f=0;f<4;f++)e.push(new i(new Date(c+f,0,1))),e.push(new i(new Date(c+f,6,1)));return e}function l(a,b){return a.offsetScore!==b.offsetScore?a.offsetScore-b.offsetScore:a.abbrScore!==b.abbrScore?a.abbrScore-b.abbrScore:a.zone.population!==b.zone.population?b.zone.population-a.zone.population:b.zone.name.localeCompare(a.zone.name)}function m(){try{var a=Intl.DateTimeFormat().resolvedOptions().timeZone;if(a&&3<a.length){var b=C[n(a)];if(b)return b;u("Moment Timezone found "+a+" from the Intl api, but did not have that data loaded.")}}catch(a){}for(var c,d,e=k(),f=e.length,g=function(a){for(var b,c,d=a.length,e={},f=[],g=0;g<d;g++)for(b in c=D[a[g].offset]||{})c.hasOwnProperty(b)&&(e[b]=!0);for(g in e)e.hasOwnProperty(g)&&f.push(C[g]);return f}(e),h=[],i=0;i<g.length;i++){for(c=new j(p(g[i])),d=0;d<f;d++)c.scoreOffsetAt(e[d]);h.push(c)}return h.sort(l),0<h.length?h[0].zone.name:void 0}function n(a){return(a||"").toLowerCase().replace(/\//g,"_")}function o(a){var b,c,e,f;for("string"==typeof a&&(a=[a]),b=0;b<a.length;b++)f=n(c=(e=a[b].split("|"))[0]),z[f]=a[b],C[f]=c,function(a,b){var c,e;for(d(b),c=0;c<b.length;c++)e=b[c],D[e]=D[e]||{},D[e][a]=!0}(f,e[2].split(" "))}function p(a,b){a=n(a);var c,d=z[a];return d instanceof g?d:"string"==typeof d?(d=new g(d),z[a]=d):A[a]&&b!==p&&(c=p(A[a],p))?((d=z[a]=new g)._set(c),d.name=C[a],d):null}function q(a){var b,c,d,e;for("string"==typeof a&&(a=[a]),b=0;b<a.length;b++)d=n((c=a[b].split("|"))[0]),e=n(c[1]),A[d]=e,C[d]=c[0],A[e]=d,C[e]=c[1]}function r(a){o(a.zones),q(a.links),function(a){var b,c,d,e;if(a&&a.length)for(b=0;b<a.length;b++)c=(e=a[b].split("|"))[0].toUpperCase(),d=e[1].split(" "),B[c]=new h(c,d)}(a.countries),v.dataVersion=a.version}function s(a){return s.didShowError||(s.didShowError=!0,u("moment.tz.zoneExists('"+a+"') has been deprecated in favor of !moment.tz.zone('"+a+"')")),!!p(a)}function t(a){var b="X"===a._f||"x"===a._f;return!(!a._a||void 0!==a._tzm||b)}function u(a){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(a)}function v(b){var c=Array.prototype.slice.call(arguments,0,-1),d=arguments[arguments.length-1],e=p(d),f=a.utc.apply(null,c);return e&&!a.isMoment(b)&&t(f)&&f.add(e.parse(f),"minutes"),f.tz(d),f}function w(a){return function(){return this._z?this._z.abbr(this):a.call(this)}}function x(a){return function(){return this._z=null,a.apply(this,arguments)}}void 0===a.version&&a.default&&(a=a.default);var y,z={},A={},B={},C={},D={};a&&"string"==typeof a.version||u("Moment Timezone requires Moment.js. See https://momentjs.com/timezone/docs/#/use-it/browser/");var E=a.version.split("."),F=+E[0],G=+E[1];(F<2||2==F&&G<6)&&u("Moment Timezone requires Moment.js >= 2.6.0. You are using Moment.js "+a.version+". See momentjs.com"),g.prototype={_set:function(a){this.name=a.name,this.abbrs=a.abbrs,this.untils=a.untils,this.offsets=a.offsets,this.population=a.population},_index:function(a){for(var b=+a,c=this.untils,d=0;d<c.length;d++)if(b<c[d])return d},countries:function(){var a=this.name;return Object.keys(B).filter(function(b){return-1!==B[b].zones.indexOf(a)})},parse:function(a){for(var b,c,d,e=+a,f=this.offsets,g=this.untils,h=g.length-1,i=0;i<h;i++)if(b=f[i],c=f[i+1],d=f[i?i-1:i],b<c&&v.moveAmbiguousForward?b=c:d<b&&v.moveInvalidForward&&(b=d),e<g[i]-6e4*b)return f[i];return f[h]},abbr:function(a){return this.abbrs[this._index(a)]},offset:function(a){return u("zone.offset has been deprecated in favor of zone.utcOffset"),this.offsets[this._index(a)]},utcOffset:function(a){return this.offsets[this._index(a)]}},j.prototype.scoreOffsetAt=function(a){this.offsetScore+=Math.abs(this.zone.utcOffset(a.at)-a.offset),this.zone.abbr(a.at).replace(/[^A-Z]/g,"")!==a.abbr&&this.abbrScore++},v.version="0.5.32",v.dataVersion="",v._zones=z,v._links=A,v._names=C,v._countries=B,v.add=o,v.link=q,v.load=r,v.zone=p,v.zoneExists=s,v.guess=function(a){return y&&!a||(y=m()),y},v.names=function(){var a,b=[];for(a in C)C.hasOwnProperty(a)&&(z[a]||z[A[a]])&&C[a]&&b.push(C[a]);return b.sort()},v.Zone=g,v.unpack=f,v.unpackBase60=c,v.needsOffset=t,v.moveInvalidForward=!0,v.moveAmbiguousForward=!1,v.countries=function(){return Object.keys(B)},v.zonesForCountry=function(a,b){var c;if(c=(c=a).toUpperCase(),!(a=B[c]||null))return null;var d=a.zones.sort();return b?d.map(function(a){return{name:a,offset:p(a).utcOffset(new Date)}}):d};var H=a.fn;a.tz=v,a.defaultZone=null,a.updateOffset=function(b,c){var d,e,f=a.defaultZone;void 0===b._z&&(f&&t(b)&&!b._isUTC&&(b._d=a.utc(b._a)._d,b.utc().add(f.parse(b),"minutes")),b._z=f),b._z&&(e=b._z.utcOffset(b),Math.abs(e)<16&&(e/=60),void 0!==b.utcOffset?(d=b._z,b.utcOffset(-e,c),b._z=d):b.zone(e,c))},H.tz=function(b,c){if(b){if("string"!=typeof b)throw new Error("Time zone name must be a string, got "+b+" ["+typeof b+"]");return this._z=p(b),this._z?a.updateOffset(this,c):u("Moment Timezone has no data for "+b+". See http://momentjs.com/timezone/docs/#/data-loading/."),this}if(this._z)return this._z.name},H.zoneName=w(H.zoneName),H.zoneAbbr=w(H.zoneAbbr),H.utc=x(H.utc),a.tz.setDefault=function(b){return(F<2||2==F&&G<9)&&u("Moment Timezone setDefault() requires Moment.js >= 2.9.0. You are using Moment.js "+a.version+"."),a.defaultZone=b?p(b):null,a};var I=a.momentProperties;return"[object Array]"===Object.prototype.toString.call(I)?(I.push("_z"),I.push("_a")):I&&(I._z=null),r({version:"2020a",zones:["Africa/Abidjan|GMT|0|0||48e5","Africa/Nairobi|EAT|-30|0||47e5","Africa/Algiers|CET|-10|0||26e5","Africa/Lagos|WAT|-10|0||17e6","Africa/Maputo|CAT|-20|0||26e5","Africa/Cairo|EET|-20|0||15e6","Africa/Casablanca|+00 +01|0 -10|010101010101010101010101010101|1O9e0 uM0 e00 Dc0 11A0 s00 e00 IM0 WM0 mo0 gM0 LA0 WM0 jA0 e00 28M0 e00 2600 gM0 2600 e00 2600 gM0 2600 e00 28M0 e00 2600 gM0|32e5","Europe/Paris|CET CEST|-10 -20|01010101010101010101010|1O9d0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00|11e6","Africa/Johannesburg|SAST|-20|0||84e5","Africa/Khartoum|EAT CAT|-30 -20|01|1Usl0|51e5","Africa/Sao_Tome|GMT WAT|0 -10|010|1UQN0 2q00|","Africa/Windhoek|CAT WAT|-20 -10|0101010|1Oc00 11B0 1nX0 11B0 1nX0 11B0|32e4","America/Adak|HST HDT|a0 90|01010101010101010101010|1O100 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|326","America/Anchorage|AKST AKDT|90 80|01010101010101010101010|1O0X0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|30e4","America/Santo_Domingo|AST|40|0||29e5","America/Fortaleza|-03|30|0||34e5","America/Asuncion|-03 -04|30 40|01010101010101010101010|1O6r0 1ip0 19X0 1fB0 19X0 1fB0 19X0 1ip0 17b0 1ip0 17b0 1ip0 19X0 1fB0 19X0 1fB0 19X0 1fB0 19X0 1ip0 17b0 1ip0|28e5","America/Panama|EST|50|0||15e5","America/Mexico_City|CST CDT|60 50|01010101010101010101010|1Oc80 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0|20e6","America/Managua|CST|60|0||22e5","America/La_Paz|-04|40|0||19e5","America/Lima|-05|50|0||11e6","America/Denver|MST MDT|70 60|01010101010101010101010|1O0V0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|26e5","America/Campo_Grande|-03 -04|30 40|0101010101|1NTf0 1zd0 On0 1zd0 On0 1zd0 On0 1HB0 FX0|77e4","America/Cancun|CST EST|60 50|01|1NKU0|63e4","America/Caracas|-0430 -04|4u 40|01|1QMT0|29e5","America/Chicago|CST CDT|60 50|01010101010101010101010|1O0U0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|92e5","America/Chihuahua|MST MDT|70 60|01010101010101010101010|1Oc90 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0|81e4","America/Phoenix|MST|70|0||42e5","America/Whitehorse|PST PDT MST|80 70 70|010101010102|1O0W0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0|23e3","America/New_York|EST EDT|50 40|01010101010101010101010|1O0T0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|21e6","America/Los_Angeles|PST PDT|80 70|01010101010101010101010|1O0W0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|15e6","America/Fort_Nelson|PST MST|80 70|01|1O0W0|39e2","America/Halifax|AST ADT|40 30|01010101010101010101010|1O0S0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|39e4","America/Godthab|-03 -02|30 20|01010101010101010101010|1O9d0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00|17e3","America/Grand_Turk|EST EDT AST|50 40 40|0121010101010101010|1O0T0 1zb0 5Ip0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|37e2","America/Havana|CST CDT|50 40|01010101010101010101010|1O0R0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0|21e5","America/Metlakatla|PST AKST AKDT|80 90 80|01212120121212121212121|1PAa0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 uM0 jB0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|14e2","America/Miquelon|-03 -02|30 20|01010101010101010101010|1O0R0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|61e2","America/Montevideo|-02 -03|20 30|01|1O0Q0|17e5","America/Noronha|-02|20|0||30e2","America/Port-au-Prince|EST EDT|50 40|010101010101010101010|1O0T0 1zb0 3iN0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|23e5","Antarctica/Palmer|-03 -04|30 40|010|1QSr0 Ap0|40","America/Santiago|-03 -04|30 40|010101010101010101010|1QSr0 Ap0 1Nb0 Ap0 1Nb0 Ap0 1zb0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 11B0 1nX0 11B0|62e5","America/Sao_Paulo|-02 -03|20 30|0101010101|1NTe0 1zd0 On0 1zd0 On0 1zd0 On0 1HB0 FX0|20e6","Atlantic/Azores|-01 +00|10 0|01010101010101010101010|1O9d0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00|25e4","America/St_Johns|NST NDT|3u 2u|01010101010101010101010|1O0Ru 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|11e4","Antarctica/Casey|+08 +11|-80 -b0|010|1RWg0 3m10|10","Asia/Bangkok|+07|-70|0||15e6","Asia/Vladivostok|+10|-a0|0||60e4","Pacific/Bougainville|+11|-b0|0||18e4","Asia/Tashkent|+05|-50|0||23e5","Pacific/Auckland|NZDT NZST|-d0 -c0|01010101010101010101010|1ObO0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1io0 1a00 1fA0 1a00|14e5","Asia/Baghdad|+03|-30|0||66e5","Antarctica/Troll|+00 +02|0 -20|01010101010101010101010|1O9d0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00|40","Asia/Dhaka|+06|-60|0||16e6","Asia/Amman|EET EEST|-20 -30|01010101010101010101010|1O8m0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0|25e5","Asia/Kamchatka|+12|-c0|0||18e4","Asia/Baku|+04 +05|-40 -50|010|1O9c0 1o00|27e5","Asia/Barnaul|+06 +07|-60 -70|01|1QyI0|","Asia/Beirut|EET EEST|-20 -30|01010101010101010101010|1O9a0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0|22e5","Asia/Kuala_Lumpur|+08|-80|0||71e5","Asia/Kolkata|IST|-5u|0||15e6","Asia/Chita|+08 +09|-80 -90|01|1QyG0|33e4","Asia/Ulaanbaatar|+08 +09|-80 -90|01010|1O8G0 1cJ0 1cP0 1cJ0|12e5","Asia/Shanghai|CST|-80|0||23e6","Asia/Colombo|+0530|-5u|0||22e5","Asia/Damascus|EET EEST|-20 -30|01010101010101010101010|1O8m0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1qL0|26e5","Asia/Yakutsk|+09|-90|0||28e4","Asia/Dubai|+04|-40|0||39e5","Asia/Famagusta|EET EEST +03|-20 -30 -30|0101201010101010101010|1O9d0 1o00 11A0 15U0 2Ks0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00|","Asia/Gaza|EET EEST|-20 -30|01010101010101010101010|1O8K0 1nz0 1220 1qL0 WN0 1qL0 WN0 1qL0 11c0 1oo0 11c0 1rc0 Wo0 1rc0 Wo0 1rc0 11c0 1oo0 11c0 1oo0 11c0 1oo0|18e5","Asia/Hong_Kong|HKT|-80|0||73e5","Asia/Hovd|+07 +08|-70 -80|01010|1O8H0 1cJ0 1cP0 1cJ0|81e3","Europe/Istanbul|EET EEST +03|-20 -30 -30|01012|1O9d0 1tA0 U00 15w0|13e6","Asia/Jakarta|WIB|-70|0||31e6","Asia/Jayapura|WIT|-90|0||26e4","Asia/Jerusalem|IST IDT|-20 -30|01010101010101010101010|1O8o0 1oL0 10N0 1rz0 W10 1rz0 W10 1rz0 10N0 1oL0 10N0 1oL0 10N0 1rz0 W10 1rz0 W10 1rz0 10N0 1oL0 10N0 1oL0|81e4","Asia/Kabul|+0430|-4u|0||46e5","Asia/Karachi|PKT|-50|0||24e6","Asia/Kathmandu|+0545|-5J|0||12e5","Asia/Magadan|+10 +11|-a0 -b0|01|1QJQ0|95e3","Asia/Makassar|WITA|-80|0||15e5","Asia/Manila|PST|-80|0||24e6","Europe/Athens|EET EEST|-20 -30|01010101010101010101010|1O9d0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00|35e5","Asia/Novosibirsk|+06 +07|-60 -70|01|1Rmk0|15e5","Asia/Pyongyang|KST KST|-90 -8u|010|1P4D0 6BA0|29e5","Asia/Qyzylorda|+06 +05|-60 -50|01|1Xei0|73e4","Asia/Rangoon|+0630|-6u|0||48e5","Asia/Sakhalin|+10 +11|-a0 -b0|01|1QyE0|58e4","Asia/Seoul|KST|-90|0||23e6","Asia/Tehran|+0330 +0430|-3u -4u|01010101010101010101010|1O6ku 1dz0 1cp0 1dz0 1cN0 1dz0 1cp0 1dz0 1cp0 1dz0 1cp0 1dz0 1cN0 1dz0 1cp0 1dz0 1cp0 1dz0 1cp0 1dz0 1cN0 1dz0|14e6","Asia/Tokyo|JST|-90|0||38e6","Asia/Tomsk|+06 +07|-60 -70|01|1QXU0|10e5","Europe/Lisbon|WET WEST|0 -10|01010101010101010101010|1O9d0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00|27e5","Atlantic/Cape_Verde|-01|10|0||50e4","Australia/Sydney|AEDT AEST|-b0 -a0|01010101010101010101010|1ObQ0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0|40e5","Australia/Adelaide|ACDT ACST|-au -9u|01010101010101010101010|1ObQu 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0|11e5","Australia/Brisbane|AEST|-a0|0||20e5","Australia/Darwin|ACST|-9u|0||12e4","Australia/Eucla|+0845|-8J|0||368","Australia/Lord_Howe|+11 +1030|-b0 -au|01010101010101010101010|1ObP0 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1fAu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1fzu 1cMu 1cLu 1cMu|347","Australia/Perth|AWST|-80|0||18e5","Pacific/Easter|-05 -06|50 60|010101010101010101010|1QSr0 Ap0 1Nb0 Ap0 1Nb0 Ap0 1zb0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 11B0 1nX0 11B0|30e2","Europe/Dublin|GMT IST|0 -10|01010101010101010101010|1O9d0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00|12e5","Etc/GMT-1|+01|-10|0||","Pacific/Fakaofo|+13|-d0|0||483","Pacific/Kiritimati|+14|-e0|0||51e2","Etc/GMT-2|+02|-20|0||","Pacific/Tahiti|-10|a0|0||18e4","Pacific/Niue|-11|b0|0||12e2","Etc/GMT+12|-12|c0|0||","Pacific/Galapagos|-06|60|0||25e3","Etc/GMT+7|-07|70|0||","Pacific/Pitcairn|-08|80|0||56","Pacific/Gambier|-09|90|0||125","Etc/UTC|UTC|0|0||","Europe/Ulyanovsk|+03 +04|-30 -40|01|1QyL0|13e5","Europe/London|GMT BST|0 -10|01010101010101010101010|1O9d0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00|10e6","Europe/Chisinau|EET EEST|-20 -30|01010101010101010101010|1O9c0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00|67e4","Europe/Moscow|MSK|-30|0||16e6","Europe/Saratov|+03 +04|-30 -40|01|1Sfz0|","Europe/Volgograd|+03 +04|-30 -40|01|1WQL0|10e5","Pacific/Honolulu|HST|a0|0||37e4","MET|MET MEST|-10 -20|01010101010101010101010|1O9d0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00|","Pacific/Chatham|+1345 +1245|-dJ -cJ|01010101010101010101010|1ObO0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1io0 1a00 1fA0 1a00|600","Pacific/Apia|+14 +13|-e0 -d0|01010101010101010101010|1ObO0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1io0 1a00 1fA0 1a00|37e3","Pacific/Fiji|+13 +12|-d0 -c0|01010101010101010101010|1NF20 1SM0 uM0 1VA0 s00 1VA0 s00 1VA0 s00 20o0 pc0 20o0 s00 20o0 pc0 20o0 pc0 20o0 pc0 20o0 pc0 20o0|88e4","Pacific/Guam|ChST|-a0|0||17e4","Pacific/Marquesas|-0930|9u|0||86e2","Pacific/Pago_Pago|SST|b0|0||37e2","Pacific/Norfolk|+1130 +11 +12|-bu -b0 -c0|012121212121212|1PoCu 9Jcu 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0|25e4","Pacific/Tongatapu|+13 +14|-d0 -e0|010|1S4d0 s00|75e3"],links:["Africa/Abidjan|Africa/Accra","Africa/Abidjan|Africa/Bamako","Africa/Abidjan|Africa/Banjul","Africa/Abidjan|Africa/Bissau","Africa/Abidjan|Africa/Conakry","Africa/Abidjan|Africa/Dakar","Africa/Abidjan|Africa/Freetown","Africa/Abidjan|Africa/Lome","Africa/Abidjan|Africa/Monrovia","Africa/Abidjan|Africa/Nouakchott","Africa/Abidjan|Africa/Ouagadougou","Africa/Abidjan|Africa/Timbuktu","Africa/Abidjan|America/Danmarkshavn","Africa/Abidjan|Atlantic/Reykjavik","Africa/Abidjan|Atlantic/St_Helena","Africa/Abidjan|Etc/GMT","Africa/Abidjan|Etc/GMT+0","Africa/Abidjan|Etc/GMT-0","Africa/Abidjan|Etc/GMT0","Africa/Abidjan|Etc/Greenwich","Africa/Abidjan|GMT","Africa/Abidjan|GMT+0","Africa/Abidjan|GMT-0","Africa/Abidjan|GMT0","Africa/Abidjan|Greenwich","Africa/Abidjan|Iceland","Africa/Algiers|Africa/Tunis","Africa/Cairo|Africa/Tripoli","Africa/Cairo|Egypt","Africa/Cairo|Europe/Kaliningrad","Africa/Cairo|Libya","Africa/Casablanca|Africa/El_Aaiun","Africa/Johannesburg|Africa/Maseru","Africa/Johannesburg|Africa/Mbabane","Africa/Lagos|Africa/Bangui","Africa/Lagos|Africa/Brazzaville","Africa/Lagos|Africa/Douala","Africa/Lagos|Africa/Kinshasa","Africa/Lagos|Africa/Libreville","Africa/Lagos|Africa/Luanda","Africa/Lagos|Africa/Malabo","Africa/Lagos|Africa/Ndjamena","Africa/Lagos|Africa/Niamey","Africa/Lagos|Africa/Porto-Novo","Africa/Maputo|Africa/Blantyre","Africa/Maputo|Africa/Bujumbura","Africa/Maputo|Africa/Gaborone","Africa/Maputo|Africa/Harare","Africa/Maputo|Africa/Kigali","Africa/Maputo|Africa/Lubumbashi","Africa/Maputo|Africa/Lusaka","Africa/Nairobi|Africa/Addis_Ababa","Africa/Nairobi|Africa/Asmara","Africa/Nairobi|Africa/Asmera","Africa/Nairobi|Africa/Dar_es_Salaam","Africa/Nairobi|Africa/Djibouti","Africa/Nairobi|Africa/Juba","Africa/Nairobi|Africa/Kampala","Africa/Nairobi|Africa/Mogadishu","Africa/Nairobi|Indian/Antananarivo","Africa/Nairobi|Indian/Comoro","Africa/Nairobi|Indian/Mayotte","America/Adak|America/Atka","America/Adak|US/Aleutian","America/Anchorage|America/Juneau","America/Anchorage|America/Nome","America/Anchorage|America/Sitka","America/Anchorage|America/Yakutat","America/Anchorage|US/Alaska","America/Campo_Grande|America/Cuiaba","America/Chicago|America/Indiana/Knox","America/Chicago|America/Indiana/Tell_City","America/Chicago|America/Knox_IN","America/Chicago|America/Matamoros","America/Chicago|America/Menominee","America/Chicago|America/North_Dakota/Beulah","America/Chicago|America/North_Dakota/Center","America/Chicago|America/North_Dakota/New_Salem","America/Chicago|America/Rainy_River","America/Chicago|America/Rankin_Inlet","America/Chicago|America/Resolute","America/Chicago|America/Winnipeg","America/Chicago|CST6CDT","America/Chicago|Canada/Central","America/Chicago|US/Central","America/Chicago|US/Indiana-Starke","America/Chihuahua|America/Mazatlan","America/Chihuahua|Mexico/BajaSur","America/Denver|America/Boise","America/Denver|America/Cambridge_Bay","America/Denver|America/Edmonton","America/Denver|America/Inuvik","America/Denver|America/Ojinaga","America/Denver|America/Shiprock","America/Denver|America/Yellowknife","America/Denver|Canada/Mountain","America/Denver|MST7MDT","America/Denver|Navajo","America/Denver|US/Mountain","America/Fortaleza|America/Araguaina","America/Fortaleza|America/Argentina/Buenos_Aires","America/Fortaleza|America/Argentina/Catamarca","America/Fortaleza|America/Argentina/ComodRivadavia","America/Fortaleza|America/Argentina/Cordoba","America/Fortaleza|America/Argentina/Jujuy","America/Fortaleza|America/Argentina/La_Rioja","America/Fortaleza|America/Argentina/Mendoza","America/Fortaleza|America/Argentina/Rio_Gallegos","America/Fortaleza|America/Argentina/Salta","America/Fortaleza|America/Argentina/San_Juan","America/Fortaleza|America/Argentina/San_Luis","America/Fortaleza|America/Argentina/Tucuman","America/Fortaleza|America/Argentina/Ushuaia","America/Fortaleza|America/Bahia","America/Fortaleza|America/Belem","America/Fortaleza|America/Buenos_Aires","America/Fortaleza|America/Catamarca","America/Fortaleza|America/Cayenne","America/Fortaleza|America/Cordoba","America/Fortaleza|America/Jujuy","America/Fortaleza|America/Maceio","America/Fortaleza|America/Mendoza","America/Fortaleza|America/Paramaribo","America/Fortaleza|America/Recife","America/Fortaleza|America/Rosario","America/Fortaleza|America/Santarem","America/Fortaleza|Antarctica/Rothera","America/Fortaleza|Atlantic/Stanley","America/Fortaleza|Etc/GMT+3","America/Godthab|America/Nuuk","America/Halifax|America/Glace_Bay","America/Halifax|America/Goose_Bay","America/Halifax|America/Moncton","America/Halifax|America/Thule","America/Halifax|Atlantic/Bermuda","America/Halifax|Canada/Atlantic","America/Havana|Cuba","America/La_Paz|America/Boa_Vista","America/La_Paz|America/Guyana","America/La_Paz|America/Manaus","America/La_Paz|America/Porto_Velho","America/La_Paz|Brazil/West","America/La_Paz|Etc/GMT+4","America/Lima|America/Bogota","America/Lima|America/Eirunepe","America/Lima|America/Guayaquil","America/Lima|America/Porto_Acre","America/Lima|America/Rio_Branco","America/Lima|Brazil/Acre","America/Lima|Etc/GMT+5","America/Los_Angeles|America/Ensenada","America/Los_Angeles|America/Santa_Isabel","America/Los_Angeles|America/Tijuana","America/Los_Angeles|America/Vancouver","America/Los_Angeles|Canada/Pacific","America/Los_Angeles|Mexico/BajaNorte","America/Los_Angeles|PST8PDT","America/Los_Angeles|US/Pacific","America/Los_Angeles|US/Pacific-New","America/Managua|America/Belize","America/Managua|America/Costa_Rica","America/Managua|America/El_Salvador","America/Managua|America/Guatemala","America/Managua|America/Regina","America/Managua|America/Swift_Current","America/Managua|America/Tegucigalpa","America/Managua|Canada/Saskatchewan","America/Mexico_City|America/Bahia_Banderas","America/Mexico_City|America/Merida","America/Mexico_City|America/Monterrey","America/Mexico_City|Mexico/General","America/New_York|America/Detroit","America/New_York|America/Fort_Wayne","America/New_York|America/Indiana/Indianapolis","America/New_York|America/Indiana/Marengo","America/New_York|America/Indiana/Petersburg","America/New_York|America/Indiana/Vevay","America/New_York|America/Indiana/Vincennes","America/New_York|America/Indiana/Winamac","America/New_York|America/Indianapolis","America/New_York|America/Iqaluit","America/New_York|America/Kentucky/Louisville","America/New_York|America/Kentucky/Monticello","America/New_York|America/Louisville","America/New_York|America/Montreal","America/New_York|America/Nassau","America/New_York|America/Nipigon","America/New_York|America/Pangnirtung","America/New_York|America/Thunder_Bay","America/New_York|America/Toronto","America/New_York|Canada/Eastern","America/New_York|EST5EDT","America/New_York|US/East-Indiana","America/New_York|US/Eastern","America/New_York|US/Michigan","America/Noronha|Atlantic/South_Georgia","America/Noronha|Brazil/DeNoronha","America/Noronha|Etc/GMT+2","America/Panama|America/Atikokan","America/Panama|America/Cayman","America/Panama|America/Coral_Harbour","America/Panama|America/Jamaica","America/Panama|EST","America/Panama|Jamaica","America/Phoenix|America/Creston","America/Phoenix|America/Dawson_Creek","America/Phoenix|America/Hermosillo","America/Phoenix|MST","America/Phoenix|US/Arizona","America/Santiago|Chile/Continental","America/Santo_Domingo|America/Anguilla","America/Santo_Domingo|America/Antigua","America/Santo_Domingo|America/Aruba","America/Santo_Domingo|America/Barbados","America/Santo_Domingo|America/Blanc-Sablon","America/Santo_Domingo|America/Curacao","America/Santo_Domingo|America/Dominica","America/Santo_Domingo|America/Grenada","America/Santo_Domingo|America/Guadeloupe","America/Santo_Domingo|America/Kralendijk","America/Santo_Domingo|America/Lower_Princes","America/Santo_Domingo|America/Marigot","America/Santo_Domingo|America/Martinique","America/Santo_Domingo|America/Montserrat","America/Santo_Domingo|America/Port_of_Spain","America/Santo_Domingo|America/Puerto_Rico","America/Santo_Domingo|America/St_Barthelemy","America/Santo_Domingo|America/St_Kitts","America/Santo_Domingo|America/St_Lucia","America/Santo_Domingo|America/St_Thomas","America/Santo_Domingo|America/St_Vincent","America/Santo_Domingo|America/Tortola","America/Santo_Domingo|America/Virgin","America/Sao_Paulo|Brazil/East","America/St_Johns|Canada/Newfoundland","America/Whitehorse|America/Dawson","America/Whitehorse|Canada/Yukon","Antarctica/Palmer|America/Punta_Arenas","Asia/Baghdad|Antarctica/Syowa","Asia/Baghdad|Asia/Aden","Asia/Baghdad|Asia/Bahrain","Asia/Baghdad|Asia/Kuwait","Asia/Baghdad|Asia/Qatar","Asia/Baghdad|Asia/Riyadh","Asia/Baghdad|Etc/GMT-3","Asia/Baghdad|Europe/Kirov","Asia/Baghdad|Europe/Minsk","Asia/Bangkok|Antarctica/Davis","Asia/Bangkok|Asia/Ho_Chi_Minh","Asia/Bangkok|Asia/Krasnoyarsk","Asia/Bangkok|Asia/Novokuznetsk","Asia/Bangkok|Asia/Phnom_Penh","Asia/Bangkok|Asia/Saigon","Asia/Bangkok|Asia/Vientiane","Asia/Bangkok|Etc/GMT-7","Asia/Bangkok|Indian/Christmas","Asia/Dhaka|Antarctica/Vostok","Asia/Dhaka|Asia/Almaty","Asia/Dhaka|Asia/Bishkek","Asia/Dhaka|Asia/Dacca","Asia/Dhaka|Asia/Kashgar","Asia/Dhaka|Asia/Omsk","Asia/Dhaka|Asia/Qostanay","Asia/Dhaka|Asia/Thimbu","Asia/Dhaka|Asia/Thimphu","Asia/Dhaka|Asia/Urumqi","Asia/Dhaka|Etc/GMT-6","Asia/Dhaka|Indian/Chagos","Asia/Dubai|Asia/Muscat","Asia/Dubai|Asia/Tbilisi","Asia/Dubai|Asia/Yerevan","Asia/Dubai|Etc/GMT-4","Asia/Dubai|Europe/Samara","Asia/Dubai|Indian/Mahe","Asia/Dubai|Indian/Mauritius","Asia/Dubai|Indian/Reunion","Asia/Gaza|Asia/Hebron","Asia/Hong_Kong|Hongkong","Asia/Jakarta|Asia/Pontianak","Asia/Jerusalem|Asia/Tel_Aviv","Asia/Jerusalem|Israel","Asia/Kamchatka|Asia/Anadyr","Asia/Kamchatka|Etc/GMT-12","Asia/Kamchatka|Kwajalein","Asia/Kamchatka|Pacific/Funafuti","Asia/Kamchatka|Pacific/Kwajalein","Asia/Kamchatka|Pacific/Majuro","Asia/Kamchatka|Pacific/Nauru","Asia/Kamchatka|Pacific/Tarawa","Asia/Kamchatka|Pacific/Wake","Asia/Kamchatka|Pacific/Wallis","Asia/Kathmandu|Asia/Katmandu","Asia/Kolkata|Asia/Calcutta","Asia/Kuala_Lumpur|Asia/Brunei","Asia/Kuala_Lumpur|Asia/Irkutsk","Asia/Kuala_Lumpur|Asia/Kuching","Asia/Kuala_Lumpur|Asia/Singapore","Asia/Kuala_Lumpur|Etc/GMT-8","Asia/Kuala_Lumpur|Singapore","Asia/Makassar|Asia/Ujung_Pandang","Asia/Rangoon|Asia/Yangon","Asia/Rangoon|Indian/Cocos","Asia/Seoul|ROK","Asia/Shanghai|Asia/Chongqing","Asia/Shanghai|Asia/Chungking","Asia/Shanghai|Asia/Harbin","Asia/Shanghai|Asia/Macao","Asia/Shanghai|Asia/Macau","Asia/Shanghai|Asia/Taipei","Asia/Shanghai|PRC","Asia/Shanghai|ROC","Asia/Tashkent|Antarctica/Mawson","Asia/Tashkent|Asia/Aqtau","Asia/Tashkent|Asia/Aqtobe","Asia/Tashkent|Asia/Ashgabat","Asia/Tashkent|Asia/Ashkhabad","Asia/Tashkent|Asia/Atyrau","Asia/Tashkent|Asia/Dushanbe","Asia/Tashkent|Asia/Oral","Asia/Tashkent|Asia/Samarkand","Asia/Tashkent|Asia/Yekaterinburg","Asia/Tashkent|Etc/GMT-5","Asia/Tashkent|Indian/Kerguelen","Asia/Tashkent|Indian/Maldives","Asia/Tehran|Iran","Asia/Tokyo|Japan","Asia/Ulaanbaatar|Asia/Choibalsan","Asia/Ulaanbaatar|Asia/Ulan_Bator","Asia/Vladivostok|Antarctica/DumontDUrville","Asia/Vladivostok|Asia/Ust-Nera","Asia/Vladivostok|Etc/GMT-10","Asia/Vladivostok|Pacific/Chuuk","Asia/Vladivostok|Pacific/Port_Moresby","Asia/Vladivostok|Pacific/Truk","Asia/Vladivostok|Pacific/Yap","Asia/Yakutsk|Asia/Dili","Asia/Yakutsk|Asia/Khandyga","Asia/Yakutsk|Etc/GMT-9","Asia/Yakutsk|Pacific/Palau","Atlantic/Azores|America/Scoresbysund","Atlantic/Cape_Verde|Etc/GMT+1","Australia/Adelaide|Australia/Broken_Hill","Australia/Adelaide|Australia/South","Australia/Adelaide|Australia/Yancowinna","Australia/Brisbane|Australia/Lindeman","Australia/Brisbane|Australia/Queensland","Australia/Darwin|Australia/North","Australia/Lord_Howe|Australia/LHI","Australia/Perth|Australia/West","Australia/Sydney|Australia/ACT","Australia/Sydney|Australia/Canberra","Australia/Sydney|Australia/Currie","Australia/Sydney|Australia/Hobart","Australia/Sydney|Australia/Melbourne","Australia/Sydney|Australia/NSW","Australia/Sydney|Australia/Tasmania","Australia/Sydney|Australia/Victoria","Etc/UTC|Etc/UCT","Etc/UTC|Etc/Universal","Etc/UTC|Etc/Zulu","Etc/UTC|UCT","Etc/UTC|UTC","Etc/UTC|Universal","Etc/UTC|Zulu","Europe/Athens|Asia/Nicosia","Europe/Athens|EET","Europe/Athens|Europe/Bucharest","Europe/Athens|Europe/Helsinki","Europe/Athens|Europe/Kiev","Europe/Athens|Europe/Mariehamn","Europe/Athens|Europe/Nicosia","Europe/Athens|Europe/Riga","Europe/Athens|Europe/Sofia","Europe/Athens|Europe/Tallinn","Europe/Athens|Europe/Uzhgorod","Europe/Athens|Europe/Vilnius","Europe/Athens|Europe/Zaporozhye","Europe/Chisinau|Europe/Tiraspol","Europe/Dublin|Eire","Europe/Istanbul|Asia/Istanbul","Europe/Istanbul|Turkey","Europe/Lisbon|Atlantic/Canary","Europe/Lisbon|Atlantic/Faeroe","Europe/Lisbon|Atlantic/Faroe","Europe/Lisbon|Atlantic/Madeira","Europe/Lisbon|Portugal","Europe/Lisbon|WET","Europe/London|Europe/Belfast","Europe/London|Europe/Guernsey","Europe/London|Europe/Isle_of_Man","Europe/London|Europe/Jersey","Europe/London|GB","Europe/London|GB-Eire","Europe/Moscow|Europe/Simferopol","Europe/Moscow|W-SU","Europe/Paris|Africa/Ceuta","Europe/Paris|Arctic/Longyearbyen","Europe/Paris|Atlantic/Jan_Mayen","Europe/Paris|CET","Europe/Paris|Europe/Amsterdam","Europe/Paris|Europe/Andorra","Europe/Paris|Europe/Belgrade","Europe/Paris|Europe/Berlin","Europe/Paris|Europe/Bratislava","Europe/Paris|Europe/Brussels","Europe/Paris|Europe/Budapest","Europe/Paris|Europe/Busingen","Europe/Paris|Europe/Copenhagen","Europe/Paris|Europe/Gibraltar","Europe/Paris|Europe/Ljubljana","Europe/Paris|Europe/Luxembourg","Europe/Paris|Europe/Madrid","Europe/Paris|Europe/Malta","Europe/Paris|Europe/Monaco","Europe/Paris|Europe/Oslo","Europe/Paris|Europe/Podgorica","Europe/Paris|Europe/Prague","Europe/Paris|Europe/Rome","Europe/Paris|Europe/San_Marino","Europe/Paris|Europe/Sarajevo","Europe/Paris|Europe/Skopje","Europe/Paris|Europe/Stockholm","Europe/Paris|Europe/Tirane","Europe/Paris|Europe/Vaduz","Europe/Paris|Europe/Vatican","Europe/Paris|Europe/Vienna","Europe/Paris|Europe/Warsaw","Europe/Paris|Europe/Zagreb","Europe/Paris|Europe/Zurich","Europe/Paris|Poland","Europe/Ulyanovsk|Europe/Astrakhan","Pacific/Auckland|Antarctica/McMurdo","Pacific/Auckland|Antarctica/South_Pole","Pacific/Auckland|NZ","Pacific/Bougainville|Antarctica/Macquarie","Pacific/Bougainville|Asia/Srednekolymsk","Pacific/Bougainville|Etc/GMT-11","Pacific/Bougainville|Pacific/Efate","Pacific/Bougainville|Pacific/Guadalcanal","Pacific/Bougainville|Pacific/Kosrae","Pacific/Bougainville|Pacific/Noumea","Pacific/Bougainville|Pacific/Pohnpei","Pacific/Bougainville|Pacific/Ponape","Pacific/Chatham|NZ-CHAT","Pacific/Easter|Chile/EasterIsland","Pacific/Fakaofo|Etc/GMT-13","Pacific/Fakaofo|Pacific/Enderbury","Pacific/Galapagos|Etc/GMT+6","Pacific/Gambier|Etc/GMT+9","Pacific/Guam|Pacific/Saipan","Pacific/Honolulu|HST","Pacific/Honolulu|Pacific/Johnston","Pacific/Honolulu|US/Hawaii","Pacific/Kiritimati|Etc/GMT-14","Pacific/Niue|Etc/GMT+11","Pacific/Pago_Pago|Pacific/Midway","Pacific/Pago_Pago|Pacific/Samoa","Pacific/Pago_Pago|US/Samoa","Pacific/Pitcairn|Etc/GMT+8","Pacific/Tahiti|Etc/GMT+10","Pacific/Tahiti|Pacific/Rarotonga"],
countries:["AD|Europe/Andorra","AE|Asia/Dubai","AF|Asia/Kabul","AG|America/Port_of_Spain America/Antigua","AI|America/Port_of_Spain America/Anguilla","AL|Europe/Tirane","AM|Asia/Yerevan","AO|Africa/Lagos Africa/Luanda","AQ|Antarctica/Casey Antarctica/Davis Antarctica/DumontDUrville Antarctica/Mawson Antarctica/Palmer Antarctica/Rothera Antarctica/Syowa Antarctica/Troll Antarctica/Vostok Pacific/Auckland Antarctica/McMurdo","AR|America/Argentina/Buenos_Aires America/Argentina/Cordoba America/Argentina/Salta America/Argentina/Jujuy America/Argentina/Tucuman America/Argentina/Catamarca America/Argentina/La_Rioja America/Argentina/San_Juan America/Argentina/Mendoza America/Argentina/San_Luis America/Argentina/Rio_Gallegos America/Argentina/Ushuaia","AS|Pacific/Pago_Pago","AT|Europe/Vienna","AU|Australia/Lord_Howe Antarctica/Macquarie Australia/Hobart Australia/Currie Australia/Melbourne Australia/Sydney Australia/Broken_Hill Australia/Brisbane Australia/Lindeman Australia/Adelaide Australia/Darwin Australia/Perth Australia/Eucla","AW|America/Curacao America/Aruba","AX|Europe/Helsinki Europe/Mariehamn","AZ|Asia/Baku","BA|Europe/Belgrade Europe/Sarajevo","BB|America/Barbados","BD|Asia/Dhaka","BE|Europe/Brussels","BF|Africa/Abidjan Africa/Ouagadougou","BG|Europe/Sofia","BH|Asia/Qatar Asia/Bahrain","BI|Africa/Maputo Africa/Bujumbura","BJ|Africa/Lagos Africa/Porto-Novo","BL|America/Port_of_Spain America/St_Barthelemy","BM|Atlantic/Bermuda","BN|Asia/Brunei","BO|America/La_Paz","BQ|America/Curacao America/Kralendijk","BR|America/Noronha America/Belem America/Fortaleza America/Recife America/Araguaina America/Maceio America/Bahia America/Sao_Paulo America/Campo_Grande America/Cuiaba America/Santarem America/Porto_Velho America/Boa_Vista America/Manaus America/Eirunepe America/Rio_Branco","BS|America/Nassau","BT|Asia/Thimphu","BW|Africa/Maputo Africa/Gaborone","BY|Europe/Minsk","BZ|America/Belize","CA|America/St_Johns America/Halifax America/Glace_Bay America/Moncton America/Goose_Bay America/Blanc-Sablon America/Toronto America/Nipigon America/Thunder_Bay America/Iqaluit America/Pangnirtung America/Atikokan America/Winnipeg America/Rainy_River America/Resolute America/Rankin_Inlet America/Regina America/Swift_Current America/Edmonton America/Cambridge_Bay America/Yellowknife America/Inuvik America/Creston America/Dawson_Creek America/Fort_Nelson America/Vancouver America/Whitehorse America/Dawson","CC|Indian/Cocos","CD|Africa/Maputo Africa/Lagos Africa/Kinshasa Africa/Lubumbashi","CF|Africa/Lagos Africa/Bangui","CG|Africa/Lagos Africa/Brazzaville","CH|Europe/Zurich","CI|Africa/Abidjan","CK|Pacific/Rarotonga","CL|America/Santiago America/Punta_Arenas Pacific/Easter","CM|Africa/Lagos Africa/Douala","CN|Asia/Shanghai Asia/Urumqi","CO|America/Bogota","CR|America/Costa_Rica","CU|America/Havana","CV|Atlantic/Cape_Verde","CW|America/Curacao","CX|Indian/Christmas","CY|Asia/Nicosia Asia/Famagusta","CZ|Europe/Prague","DE|Europe/Zurich Europe/Berlin Europe/Busingen","DJ|Africa/Nairobi Africa/Djibouti","DK|Europe/Copenhagen","DM|America/Port_of_Spain America/Dominica","DO|America/Santo_Domingo","DZ|Africa/Algiers","EC|America/Guayaquil Pacific/Galapagos","EE|Europe/Tallinn","EG|Africa/Cairo","EH|Africa/El_Aaiun","ER|Africa/Nairobi Africa/Asmara","ES|Europe/Madrid Africa/Ceuta Atlantic/Canary","ET|Africa/Nairobi Africa/Addis_Ababa","FI|Europe/Helsinki","FJ|Pacific/Fiji","FK|Atlantic/Stanley","FM|Pacific/Chuuk Pacific/Pohnpei Pacific/Kosrae","FO|Atlantic/Faroe","FR|Europe/Paris","GA|Africa/Lagos Africa/Libreville","GB|Europe/London","GD|America/Port_of_Spain America/Grenada","GE|Asia/Tbilisi","GF|America/Cayenne","GG|Europe/London Europe/Guernsey","GH|Africa/Accra","GI|Europe/Gibraltar","GL|America/Godthab America/Danmarkshavn America/Scoresbysund America/Thule","GM|Africa/Abidjan Africa/Banjul","GN|Africa/Abidjan Africa/Conakry","GP|America/Port_of_Spain America/Guadeloupe","GQ|Africa/Lagos Africa/Malabo","GR|Europe/Athens","GS|Atlantic/South_Georgia","GT|America/Guatemala","GU|Pacific/Guam","GW|Africa/Bissau","GY|America/Guyana","HK|Asia/Hong_Kong","HN|America/Tegucigalpa","HR|Europe/Belgrade Europe/Zagreb","HT|America/Port-au-Prince","HU|Europe/Budapest","ID|Asia/Jakarta Asia/Pontianak Asia/Makassar Asia/Jayapura","IE|Europe/Dublin","IL|Asia/Jerusalem","IM|Europe/London Europe/Isle_of_Man","IN|Asia/Kolkata","IO|Indian/Chagos","IQ|Asia/Baghdad","IR|Asia/Tehran","IS|Atlantic/Reykjavik","IT|Europe/Rome","JE|Europe/London Europe/Jersey","JM|America/Jamaica","JO|Asia/Amman","JP|Asia/Tokyo","KE|Africa/Nairobi","KG|Asia/Bishkek","KH|Asia/Bangkok Asia/Phnom_Penh","KI|Pacific/Tarawa Pacific/Enderbury Pacific/Kiritimati","KM|Africa/Nairobi Indian/Comoro","KN|America/Port_of_Spain America/St_Kitts","KP|Asia/Pyongyang","KR|Asia/Seoul","KW|Asia/Riyadh Asia/Kuwait","KY|America/Panama America/Cayman","KZ|Asia/Almaty Asia/Qyzylorda Asia/Qostanay Asia/Aqtobe Asia/Aqtau Asia/Atyrau Asia/Oral","LA|Asia/Bangkok Asia/Vientiane","LB|Asia/Beirut","LC|America/Port_of_Spain America/St_Lucia","LI|Europe/Zurich Europe/Vaduz","LK|Asia/Colombo","LR|Africa/Monrovia","LS|Africa/Johannesburg Africa/Maseru","LT|Europe/Vilnius","LU|Europe/Luxembourg","LV|Europe/Riga","LY|Africa/Tripoli","MA|Africa/Casablanca","MC|Europe/Monaco","MD|Europe/Chisinau","ME|Europe/Belgrade Europe/Podgorica","MF|America/Port_of_Spain America/Marigot","MG|Africa/Nairobi Indian/Antananarivo","MH|Pacific/Majuro Pacific/Kwajalein","MK|Europe/Belgrade Europe/Skopje","ML|Africa/Abidjan Africa/Bamako","MM|Asia/Yangon","MN|Asia/Ulaanbaatar Asia/Hovd Asia/Choibalsan","MO|Asia/Macau","MP|Pacific/Guam Pacific/Saipan","MQ|America/Martinique","MR|Africa/Abidjan Africa/Nouakchott","MS|America/Port_of_Spain America/Montserrat","MT|Europe/Malta","MU|Indian/Mauritius","MV|Indian/Maldives","MW|Africa/Maputo Africa/Blantyre","MX|America/Mexico_City America/Cancun America/Merida America/Monterrey America/Matamoros America/Mazatlan America/Chihuahua America/Ojinaga America/Hermosillo America/Tijuana America/Bahia_Banderas","MY|Asia/Kuala_Lumpur Asia/Kuching","MZ|Africa/Maputo","NA|Africa/Windhoek","NC|Pacific/Noumea","NE|Africa/Lagos Africa/Niamey","NF|Pacific/Norfolk","NG|Africa/Lagos","NI|America/Managua","NL|Europe/Amsterdam","NO|Europe/Oslo","NP|Asia/Kathmandu","NR|Pacific/Nauru","NU|Pacific/Niue","NZ|Pacific/Auckland Pacific/Chatham","OM|Asia/Dubai Asia/Muscat","PA|America/Panama","PE|America/Lima","PF|Pacific/Tahiti Pacific/Marquesas Pacific/Gambier","PG|Pacific/Port_Moresby Pacific/Bougainville","PH|Asia/Manila","PK|Asia/Karachi","PL|Europe/Warsaw","PM|America/Miquelon","PN|Pacific/Pitcairn","PR|America/Puerto_Rico","PS|Asia/Gaza Asia/Hebron","PT|Europe/Lisbon Atlantic/Madeira Atlantic/Azores","PW|Pacific/Palau","PY|America/Asuncion","QA|Asia/Qatar","RE|Indian/Reunion","RO|Europe/Bucharest","RS|Europe/Belgrade","RU|Europe/Kaliningrad Europe/Moscow Europe/Simferopol Europe/Kirov Europe/Astrakhan Europe/Volgograd Europe/Saratov Europe/Ulyanovsk Europe/Samara Asia/Yekaterinburg Asia/Omsk Asia/Novosibirsk Asia/Barnaul Asia/Tomsk Asia/Novokuznetsk Asia/Krasnoyarsk Asia/Irkutsk Asia/Chita Asia/Yakutsk Asia/Khandyga Asia/Vladivostok Asia/Ust-Nera Asia/Magadan Asia/Sakhalin Asia/Srednekolymsk Asia/Kamchatka Asia/Anadyr","RW|Africa/Maputo Africa/Kigali","SA|Asia/Riyadh","SB|Pacific/Guadalcanal","SC|Indian/Mahe","SD|Africa/Khartoum","SE|Europe/Stockholm","SG|Asia/Singapore","SH|Africa/Abidjan Atlantic/St_Helena","SI|Europe/Belgrade Europe/Ljubljana","SJ|Europe/Oslo Arctic/Longyearbyen","SK|Europe/Prague Europe/Bratislava","SL|Africa/Abidjan Africa/Freetown","SM|Europe/Rome Europe/San_Marino","SN|Africa/Abidjan Africa/Dakar","SO|Africa/Nairobi Africa/Mogadishu","SR|America/Paramaribo","SS|Africa/Juba","ST|Africa/Sao_Tome","SV|America/El_Salvador","SX|America/Curacao America/Lower_Princes","SY|Asia/Damascus","SZ|Africa/Johannesburg Africa/Mbabane","TC|America/Grand_Turk","TD|Africa/Ndjamena","TF|Indian/Reunion Indian/Kerguelen","TG|Africa/Abidjan Africa/Lome","TH|Asia/Bangkok","TJ|Asia/Dushanbe","TK|Pacific/Fakaofo","TL|Asia/Dili","TM|Asia/Ashgabat","TN|Africa/Tunis","TO|Pacific/Tongatapu","TR|Europe/Istanbul","TT|America/Port_of_Spain","TV|Pacific/Funafuti","TW|Asia/Taipei","TZ|Africa/Nairobi Africa/Dar_es_Salaam","UA|Europe/Simferopol Europe/Kiev Europe/Uzhgorod Europe/Zaporozhye","UG|Africa/Nairobi Africa/Kampala","UM|Pacific/Pago_Pago Pacific/Wake Pacific/Honolulu Pacific/Midway","US|America/New_York America/Detroit America/Kentucky/Louisville America/Kentucky/Monticello America/Indiana/Indianapolis America/Indiana/Vincennes America/Indiana/Winamac America/Indiana/Marengo America/Indiana/Petersburg America/Indiana/Vevay America/Chicago America/Indiana/Tell_City America/Indiana/Knox America/Menominee America/North_Dakota/Center America/North_Dakota/New_Salem America/North_Dakota/Beulah America/Denver America/Boise America/Phoenix America/Los_Angeles America/Anchorage America/Juneau America/Sitka America/Metlakatla America/Yakutat America/Nome America/Adak Pacific/Honolulu","UY|America/Montevideo","UZ|Asia/Samarkand Asia/Tashkent","VA|Europe/Rome Europe/Vatican","VC|America/Port_of_Spain America/St_Vincent","VE|America/Caracas","VG|America/Port_of_Spain America/Tortola","VI|America/Port_of_Spain America/St_Thomas","VN|Asia/Bangkok Asia/Ho_Chi_Minh","VU|Pacific/Efate","WF|Pacific/Wallis","WS|Pacific/Apia","YE|Asia/Riyadh Asia/Aden","YT|Africa/Nairobi Indian/Mayotte","ZA|Africa/Johannesburg","ZM|Africa/Maputo Africa/Lusaka","ZW|Africa/Maputo Africa/Harare"]}),a});var objectAssign=function(){function a(a){if(null==a)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(a)}function b(a){var b=Object.getOwnPropertyNames(a);return Object.getOwnPropertySymbols&&(b=b.concat(Object.getOwnPropertySymbols(a))),b.filter(function(b){return c.call(a,b)})}var c=Object.prototype.propertyIsEnumerable;return Object.assign||function(c,d){for(var e,f,g=a(c),h=1;h<arguments.length;h++){e=arguments[h],f=b(Object(e));for(var i=0;i<f.length;i++)g[f[i]]=e[f[i]]}return g}}(),MPageUI=function(){var a={ONCE:"ONCE",MULTI:"MULTI"},b={attachEvents:a.ONCE,render:a.ONCE,init:a.MULTI,onReceiveProps:a.MULTI},c=function(a,b){return function(){a.apply(this,arguments),b.apply(this,arguments)}},d=function(e,f){if(f){var g=e.prototype;f.hasOwnProperty("mixins")&&f.mixins.forEach(function(a){d(e,a)});for(var h in f)if(f.hasOwnProperty(h)&&"mixins"!==h){var i=f[h],j=g.hasOwnProperty(h);if(j){var k=b[h];k===a.MULTI?g[h]=c(g[h],i):k===a.ONCE&&logger.logWarning("Error creating MPageUI class, you can't define this fn")}else g[h]=i}}},e=0,f="mpageui_";return{getWindow:function(){return window},extend:function(a,b){var c=new b;a.prototype=c,a.prototype.constructor=b},registerComponent:function(a){var b=++e+"";a.setId(f+b)},createClass:function(a){var b=function(a){this.m_props=a||{},this.base(),this.init()};return b.prototype=new MPageUI.UIComponent,b.prototype.constructor=MPageUI.UIComponent,a.hasOwnProperty("emitter")&&a.emitter&&objectAssign(b.prototype,EventEmitter.prototype),d(b,a),b}}}();MPageUI.UIComponent=function(){var a=function(){return this.m_props={},this.m_id="",this.m_parent=null,this.m_$rootElement=null,this};return a.prototype={getProps:function(){return this.m_props},setProps:function(a){return this.m_props=objectAssign(this.m_props,a),this.onReceiveProps(a),this},clearProps:function(){return this.m_props={},this},onReceiveProps:function(a){return this},attachEvents:function(){return this},base:function(){return MPageUI.registerComponent(this),this},clearElementCache:function(){return this.m_$rootElement=null,this},init:function(){return this},getId:function(){return this.m_id},setId:function(a){if("string"!=typeof a)throw new Error("UIComponent.prototype.setId expects a string.");return this.m_id=a,this},getRootElement:function(){return this.m_$rootElement&&this.m_$rootElement.length||(this.m_$rootElement=$("#"+this.m_id)),this.m_$rootElement},render:function(){return""},resize:function(a){return!1}},a}(),window.MPageFusion&&(MPageUI.Fusion=MPageFusion),MPageUI.MediaQuery=function(){var a=[{name:"XS",size:580},{name:"SM",size:760},{name:"MD",size:1024},{name:"LG",size:1240},{name:"XL",size:1540},{name:"XXL",size:2068}].map(function(a){return{name:a.name,size:a.size,query:"screen and (min-width: "+a.size+"px)"}}),b=function(a){return a?a.query:null},c=function(a){return!!a&&MPageUI.getWindow().matchMedia(a).matches},d=function(a){for(var d=a.length;d--;)if(c(b(a[d])))return a[d];return null},e=function(a,b){var c=null;return b.some(function(b){return b.name===a&&(c=b,!0)}),c},f=function(a,b,c){return b!==c&&MPageUI.MediaQuery.emit("change",a,b,c)},g=d(a),h=g;return MPageUI.getWindow().addEventListener("resize",function(b){h=g,g=d(a),f(b,h,g)}),objectAssign({atLeast:function(d){return c(b(e(d,a)))},current:function(){return g},get:function(b){return e(b,a)},queries:function(){return a}},EventEmitter.prototype)}(),MPageUI.DemoBanner=function(){var a=function(){return this.base(),this.m_name="",this.m_age=0,this.m_gender="",this.m_dateOfBirth=null,this.m_isDeceased=!1,this.m_dateOfDeath=null,this.m_location="",this.m_identificationFields=null,this.m_contactInfoFields=null,this};return MPageUI.extend(a,MPageUI.UIComponent),a.prototype.getName=function(){return this.m_name},a.prototype.setName=function(a){return this.m_name=a,this},a.prototype.getAge=function(){return this.m_age},a.prototype.setAge=function(a){return this.m_age=a,this},a.prototype.getDOB=function(){return this.m_dateOfBirth},a.prototype.setDOB=function(a){return this.m_dateOfBirth=a,this},a.prototype.getGender=function(){return this.m_gender},a.prototype.setGender=function(a){return this.m_gender=a,this},a.prototype.getDeceasedIndicator=function(){return this.m_isDeceased},a.prototype.setDeceasedIndicator=function(a){return this.m_isDeceased=a,this},a.prototype.getDateOfDeath=function(){return this.m_dateOfDeath},a.prototype.setDateOfDeath=function(a){return this.m_dateOfDeath=a,this},a.prototype.getLocation=function(){return this.m_location},a.prototype.setLocation=function(a){return this.m_location=a,this},a.prototype.addIdentifierField=function(a,b){return this.m_identificationFields||(this.m_identificationFields=[]),b="string"==typeof b?[b]:b,this.m_identificationFields.push({label:a,value:b}),this},a.prototype.addContactInformationField=function(a,b){return this.m_contactInfoFields||(this.m_contactInfoFields=[]),this.m_contactInfoFields.push({label:a,value:b}),this},a.prototype.render=function(){var a="";a+="<section id='"+this.m_id+"' class='demographics-banner demographics-banner--preventOverlap'>",a+="<header>",a+="<div class='demographics-row'>",a+="<h1>"+this.getName()+"</h1>",this.getLocation()&&(a+="<h1 title='"+this.getLocation()+"' class='demographics-location'>"+this.getLocation()+"</h1>"),a+="</div>",a+="<div class='demographics-row'>",a+="<span class='demographics-single'>",this.getDOB()&&(a+=i18n.DOB+": <b>"+(this.getDOB()||"")+"</b>"),this.getGender()&&(a+=i18n.SEX+": <b>"+this.getGender()+"</b>");var b=this.m_identificationFields,c=0;if(b){c=b.length;for(var d=0;d<c;d++)a+=b[d].label+": <b>"+b[d].value.join(",")+"</b>"}return a+="</span></div></header></section>"},a}(),MPageUI.Grouper=function(){var a=function(){this.base(),this.m_headerHTML="",this.m_bodyHTML="",this.m_isCollapsed=!1,this.m_addIconCssClass=""};return MPageUI.extend(a,MPageUI.UIComponent),a.prototype.render=function(){var a="",b=this.m_isCollapsed?"collapsed":"expanded",c=this.m_isCollapsed?"mpage-ui-grouper-hide":"";return a+="<form class='mpage-ui-grouper' id='"+this.m_id+"'><fieldset class='mpage-ui-grouper-content "+c+"'><legend class='mpage-ui-grouper-header'><div class='collapse "+b+"'></div><div class='sec-hdr'>"+this.m_headerHTML+"</div><div class='mpage-ui-add-icon "+this.m_addIconCssClass+"'></div></legend><div class='mpage-ui-grouper-body'>"+this.m_bodyHTML+"</div></fieldset></form>"},a.prototype.attachEvents=function(){var a=this;return $("#"+this.m_id).find(".mpage-ui-grouper-content .collapse").on("click",function(){a.onClick(this)}),this},a.prototype.setHeader=function(a){if("string"!=typeof a)throw new Error("MPageUI.Grouper.prototype.setHeader expects a string.");return this.m_headerHTML=a,this},a.prototype.setBody=function(a){if("string"!=typeof a)throw new Error("MPageUI.Grouper.prototype.setBody expects a string.");return this.m_bodyHTML=a,this},a.prototype.setIsCollapsed=function(a){if("boolean"!=typeof a)throw new Error("MPageUI.Grouper.prototype.setIsCollapsed expects a boolean.");return this.m_isCollapsed=a,this},a.prototype.setAddIconCssClass=function(a){if("string"!=typeof a)throw new Error("MPageUI.Grouper.prototype.setShowAddIcon expects a string.");return this.m_addIconCssClass=a,this},a.prototype.expand=function(){var a=$("#"+this.m_id);return a.find(".mpage-ui-grouper-content .collapse").addClass("expanded").removeClass("collapsed"),a.find(".mpage-ui-grouper-content").removeClass("mpage-ui-grouper-hide"),this.setIsCollapsed(!1),this},a.prototype.collapse=function(){var a=$("#"+this.m_id);return a.find(".mpage-ui-grouper-content .collapse").addClass("collapsed").removeClass("expanded"),a.find(".mpage-ui-grouper-content").addClass("mpage-ui-grouper-hide"),this.setIsCollapsed(!0),this},a.prototype.updateBody=function(a){var b=$("#"+this.m_id);return this.setBody(a),b.find(".mpage-ui-grouper-body").html(this.m_bodyHTML),this},a.prototype.updateHeader=function(a){var b=$("#"+this.m_id);return this.setHeader(a),b.find(".sec-hdr").html(this.m_headerHTML),this},a.prototype.onClick=function(a){$(a).hasClass("collapsed")?this.expand():this.collapse()},a}(),MPageUI.PlaceholderContent=function(){var a=function(){return this.base(),this.m_primaryText="",this.m_actionableControl=null,this.m_rendered=!1,this};return MPageUI.extend(a,MPageUI.UIComponent),a.prototype.setPrimaryText=function(a){if("string"!=typeof a)throw new Error("PlaceholderContent.prototype.setPrimaryText expects a string");return this.m_primaryText=a,this},a.prototype.setActionableControl=function(a){if(!a||!MPageUI.Button.prototype.isPrototypeOf(a))throw new Error("PlaceholderContent.prototype.setActionableControl expects an instance of MPageUI.Button.");return this.m_actionableControl=a,this},a.prototype.getActionableControl=function(){return this.m_actionableControl},a.prototype.setRendered=function(a){if("boolean"!=typeof a)throw new Error("PlaceholderContent.prototype.setRendered expects a boolean");return this.m_rendered=a,this},a.prototype.hasRendered=function(){return this.m_rendered},a.prototype.render=function(){var a="";return a+="<div id='"+this.m_id+"' class='placeholder-content-container'>",a+="<span class='primary-text'>"+this.m_primaryText+"</span>",a+=this.m_actionableControl?"<span class ='actionable-control'>"+this.m_actionableControl.render()+"</span>":"",a+="</div>"},a}(),MPageUI.ALERT_OPTIONS={TYPE:{INFO:"info-msg",SUCCESS:"success-msg",WARNING:"warning-msg",ERROR:"error-msg",SEVERE:"severe-msg",ADVISORY:"advisory-msg"}},MPageUI.AlertBanner=function(){var a=function(){return this.base(),this.m_dismissible=!1,this.m_primaryText="",this.m_secondaryText="",this.m_content=null,this.m_time=null,this.m_bannerType="",this.m_closeFunction=null,this};return MPageUI.extend(a,MPageUI.UIComponent),a.prototype.setDismissible=function(a){if("boolean"!=typeof a)throw new Error("AlertBanner.prototype.setDismissible expects a boolean.");return this.m_dismissible=a,this},a.prototype.setPrimaryText=function(a){if("string"!=typeof a)throw new Error("AlertBanner.prototype.setPrimaryText expects a string.");return this.m_primaryText=a,this},a.prototype.setSecondaryText=function(a){if("string"!=typeof a)throw new Error("AlertBanner.prototype.setSecondaryText expects a string.");return this.m_secondaryText=a,this},a.prototype.setContents=function(a){if(!a)throw new Error("AlertBanner.prototype.setContents expects a valid banner content");return this.m_content=a,this},a.prototype.hide=function(){return this.getRootElement().hide(),this},a.prototype.show=function(){return this.getRootElement().show(),this},a.prototype.getCloseFunction=function(){return this.m_closeFunction},a.prototype.setCloseFunction=function(a){if("function"!=typeof a)throw new Error("AlertBanner.prototype.setCloseFunction expects a function.");return this.m_closeFunction=a,this},a.prototype.setTime=function(a){return this},a.prototype.setType=function(a){if("string"!=typeof a)throw new Error("AlertBanner.prototype.setType expects a string.");return this.m_bannerType=a,this},a.prototype.render=function(){var a;if(""===this.m_bannerType)throw new Error("AlertBanner.prototype.render expects a valid banner type from MPageUI.ALERT_OPTIONS.TYPE");if(a="<div id='"+this.m_id+"' class='alert-msg'>",a+="<div class = '"+this.m_bannerType+"'>",a+=this.m_dismissible?"<div class='alert-info-dismissible'>":"<div class='alert-info'>",this.m_content){if(this.m_primaryText="",this.m_secondaryText="","function"!=typeof this.m_content.render)throw new Error("AlertBanner.prototype.render expects a MPageUI->render to be passed if setContent is used.");a+="<span class='alert-icon'>&nbsp;</span>"+this.m_content.render()+"</div>"}else a+="<span class='alert-icon'>&nbsp;</span>"+this.m_primaryText,a+="<span class='alert-msg-secondary-text'>&nbsp;"+this.m_secondaryText+"</span></div>";return this.m_dismissible&&(a+="<span id='alertClose"+this.m_id+"' class='alert-close-option'>&nbsp;</span>"),a+"</div></div>"},a.prototype.attachEvents=function(){var a=this;return a.getRootElement().on("click","#alertClose"+a.m_id,function(){a.getCloseFunction()()}),this.m_content&&"function"==typeof this.m_content.attachEvents&&this.m_content.attachEvents(),a},a}(),MPageUI.ICONS={ICON_MOVE_LEFT:"icon-move-left",ICON_MOVE_RIGHT:"icon-move-right"},MPageUI.MENU_OPTIONS={TYPE:{SELECT:0,SEPARATOR:1}},MPageUI.Menu=function(){var a=function(){return this.base(),this};return MPageUI.extend(a,MPageUI.UIComponent),a.prototype.open=function(){return this},a.prototype.close=function(){return this},a.prototype.isOpen=function(){return!1},a.prototype.render=function(){return""},a.prototype.addOption=function(a){return this},a.prototype.addOptions=function(a){if(!Array.prototype.isPrototypeOf(a))throw new Error("MPageUI.Dropdown.prototype.addOptions expects an array of options");for(var b=a.length,c=0;c<b;c++)this.addOption(a[c]);return this},a.prototype.removeAllOptions=function(){return this},a.prototype.validateOption=function(a){if("object"!=typeof a)throw new Error("MPageUI.Dropdown.prototype.addOption expects an object");var b=a.type||MPageUI.MENU_OPTIONS.TYPE.SELECT,c=MPageUI.MENU_OPTIONS.TYPE;switch(b){case c.SELECT:if(!a.label)throw new Error("MPageUI.Dropdown.prototype.addOption: 'select' options must provide a label.");if("string"!=typeof a.label)throw new Error("MPageUI.Dropdown.prototype.addOption: the label must be a string.");if(!a.onSelect)throw new Error("MPageUI.Dropdown.prototype.addOption: 'select' options must provide an onSelect callback.");if("function"!=typeof a.onSelect)throw new Error("MPageUI.Dropdown.prototype.addOption: the onSelect must be a function.");break;case c.SEPARATOR:break;default:throw new Error("MPageUI.Dropdown.prototype.addOption: the option must provide a 'type', use MPageUI.MENU_OPTIONS.TYPE")}},a}(),MPageUI.StandardMPageMenu=function(){var a=function(a){return this.base(),this.m_anchorId=a,this.m_menuItemCounter=0,this.m_standardMenu=null,this.init(),this};return MPageUI.extend(a,MPageUI.Menu),a.prototype.init=function(){var a=this;return this.m_standardMenu=new Menu(this.m_id+"_standardMenu"),this.m_standardMenu.setTypeClass("dropdown-standard-menu"),this.m_standardMenu.setAnchorElementId(this.m_anchorId),this.m_standardMenu.setAnchorConnectionCorner(["bottom","right"]),this.m_standardMenu.setContentConnectionCorner(["top","right"]),this.m_standardMenu.setIsRootMenu(!0),this.m_standardMenu.setIsActive=function(b){Menu.prototype.setIsActive.call(a.m_standardMenu,b),b||MP_MenuManager.deleteMenuObject(a.m_standardMenu.getId())},this},a.prototype.addOption=function(a){this.validateOption(a);var b=MPageUI.MENU_OPTIONS.TYPE,c=a.type||b.SELECT,d=null;switch(c){case b.SELECT:d=new MenuSelection(this.m_id+"_menuSelection_"+this.m_menuItemCounter++),d.setLabel(a.label),d.setClickFunction(this.getSelectionFunction(a));break;case b.SEPARATOR:d=new MenuSeparator(this.m_id+"_menuSeparator_"+this.m_menuItemCounter++);break;default:throw new Error("MPageUI.Dropdown.prototype.addOption: the option must provide a 'type'")}return this.m_standardMenu.addMenuItem(d),this},a.prototype.removeAllOptions=function(){for(var a=this.m_standardMenu.getMenuItemArray(),b=a.length,c=0;c<b;c++)this.m_standardMenu.removeMenuItem(a[c])||logger.logWarning("MPageUI.StandardMPageMenu.prototype.removeAllOptions: error removing menu item");return this.m_menuItemCounter=0,MP_MenuManager.updateMenuObject(this.m_standardMenu),this},a.prototype.getSelectionFunction=function(a){return function(){a.onSelect.call(a)}},a.prototype.isOpen=function(){return this.m_standardMenu.isActive()},a.prototype.open=function(){return MP_MenuManager.updateMenuObject(this.m_standardMenu),MP_MenuManager.showMenu(this.m_standardMenu.getId()),this},a.prototype.close=function(){return MP_MenuManager.closeMenuStack(!1),this},a.prototype.render=function(){return""},a}(),MPageUI.Dropdown=function(){var a=function(){return this.m_menu=null,this};return MPageUI.extend(a,MPageUI.UIComponent),a.prototype.addOption=function(a){return this.m_menu.addOption(a),this},a.prototype.addOptions=function(a){return this.m_menu.addOptions(a),this},a.prototype.removeAllOptions=function(){return this.m_menu.removeAllOptions(),this},a.prototype.isOpen=function(){return this.m_menu.isOpen()},a.prototype.open=function(){return this.m_menu.open(),this},a.prototype.close=function(){return this.m_menu.close(),this},a.prototype.toggle=function(){return this.isOpen()?this.close():this.open(),this},a}(),MPageUI.BUTTON_OPTIONS={SHAPE:{NORMAL:"",PILL:"btn-pill"},STYLE:{NORMAL:"",PRIMARY:"btn-primary",SECONDARY:"btn-secondary",INVERSE:"btn-inverse",POSITIVE:"btn-positive",NEGATIVE:"btn-negative",LINK:"btn-link"},SIZE:{NORMAL:"",SMALL:"btn-small",LARGE:"btn-large",THINLINE:"btn-thinline"},TOGGLE:{NORMAL:"",DROPDOWN:"dropdown"},ICON_POSITION:{LEFT:0,RIGHT:1}},MPageUI.Button=function(){var a=function(){return this.base(),this.m_disabled=!1,this.m_label="",this.m_onClickCallback=null,this.m_shape=MPageUI.BUTTON_OPTIONS.SHAPE.NORMAL,this.m_size=MPageUI.BUTTON_OPTIONS.SIZE.NORMAL,this.m_style=MPageUI.BUTTON_OPTIONS.STYLE.NORMAL,this.m_dataToggle=MPageUI.BUTTON_OPTIONS.TOGGLE.NORMAL,this.m_icon="",this.m_iconPosition=MPageUI.BUTTON_OPTIONS.ICON_POSITION.LEFT,this};return MPageUI.extend(a,MPageUI.UIComponent),a.prototype.isDisabled=function(){return this.m_disabled},a.prototype.setDisabled=function(a){if("boolean"!=typeof a)throw new Error("Button.prototype.setDisabled expects a boolean.");this.m_disabled=a;var b=this.getRootElement();return b.prop("disabled",a),this},a.prototype.setLabel=function(a){if("string"!=typeof a)throw new Error("Button.prototype.setLabel expects a string.");this.m_label=a;var b=this.getRootElement();return b.html(this.renderButtonContents()),this},a.prototype.setShape=function(a){if("string"!=typeof a)throw new Error("Button.prototype.setShape expects a string.");var b=this.getRootElement();return a!==this.m_shape&&(b.removeClass(this.m_shape),b.addClass(a)),this.m_shape=a,this},a.prototype.setSize=function(a){if("string"!=typeof a)throw new Error("Button.prototype.setSize expects a string.");var b=this.getRootElement();return a!==this.m_size&&(b.removeClass(this.m_size),b.addClass(a)),this.m_size=a,this},a.prototype.setStyle=function(a){if("string"!=typeof a)throw new Error("Button.prototype.setStyle expects a string.");var b=this.getRootElement();return a!==this.m_style&&(b.removeClass(this.m_style),b.addClass(a)),this.m_style=a,this},a.prototype.setDataToggle=function(a){if("string"!=typeof a)throw new Error("Button.prototype.setDataToggle");var b=this.getRootElement();return a!==this.m_dataToggle&&b.attr("data-toggle",a),this.m_dataToggle=a,this},a.prototype.setIcon=function(a){if("string"!=typeof a)throw new Error("Button.prototype.setIcon expects a string.");return this.m_icon=a,this.getRootElement().html(this.renderButtonContents()),this},a.prototype.setIconPosition=function(a){if("number"!=typeof a)throw new Error("Button.prototype.setIconPosition expects a number.");return this.m_iconPosition=a,this.getRootElement().html(this.renderButtonContents()),this},a.prototype.setOnClickCallback=function(a){if("function"!=typeof a)throw new Error("Button.prototype.setOnClickCallback expects a function.");return this.m_onClickCallback=a,this},a.prototype.onClick=function(){this.m_onClickCallback&&this.m_onClickCallback()},a.prototype.renderButtonContents=function(){var a=this.renderIcon(),b=this.m_label;return a?b?b=this.m_iconPosition===MPageUI.BUTTON_OPTIONS.ICON_POSITION.LEFT?a+"&nbsp;"+b:b+"&nbsp;"+a:a:b},a.prototype.renderIcon=function(){return this.m_icon?"<span class='"+this.m_icon+"'>&nbsp;</span>":""},a.prototype.render=function(){var a=this.m_disabled?"disabled='true'":"",b="btn",c=this.m_dataToggle?"data-toggle='"+this.m_dataToggle+"'":"",d=this.renderButtonContents();return b+=this.m_size?" "+this.m_size:"",b+=this.m_shape?" "+this.m_shape:"",b+=this.m_style?" "+this.m_style:"","<button type='button' id='"+this.m_id+"' class='"+b+"' "+a+" "+c+">"+d+"</button>"},a.prototype.attachEvents=function(){var a=this;return this.getRootElement().on("click.mpageui",function(){a.onClick()}),this},a}(),MPageUI.DropdownButton=function(){var a=function(){return this.base(),this.m_dataToggle=MPageUI.BUTTON_OPTIONS.TOGGLE.DROPDOWN,this};return MPageUI.extend(a,MPageUI.Button),a.prototype.setLabel=function(a){return this},a.prototype.setDataToggle=function(a){return this},a.prototype.render=function(){var a=this.m_disabled?" disabled='true'":"",b="btn dropdown-toggle",c="data-toggle='"+this.m_dataToggle+"'";return b+=this.m_style?" "+this.m_style:"","<button type='button' id='"+this.m_id+"' class='"+b+"' "+c+a+"><span class='caret'></span></button>"},a}(),MPageUI.SplitButton=function(){var a=function(){return this.base(),this.m_labelButton=null,this.m_dropdownButton=null,this.init(),this};return MPageUI.extend(a,MPageUI.Dropdown),a.prototype.getLabelButton=function(){return this.m_labelButton},a.prototype.getDropdownButton=function(){return this.m_dropdownButton},a.prototype.setLabelButtonClickCallback=function(a){if("function"!=typeof a)throw new Error("MPageUI.SplitButton.prototype.setLabelButtonClickCallback expects a function.");return this.m_labelButton.setOnClickCallback(a),this},a.prototype.setLabel=function(a){return this.m_labelButton.setLabel(a),this},a.prototype.setStyle=function(a){return this.m_labelButton.setStyle(a),this.m_dropdownButton.setStyle(a),this},a.prototype.init=function(){var a=this;return this.m_labelButton=new MPageUI.Button,this.m_dropdownButton=new MPageUI.DropdownButton,this.m_dropdownButton.setOnClickCallback(function(){a.toggle()}),this.m_menu=new MPageUI.StandardMPageMenu(this.m_dropdownButton.getId()),this},a.prototype.render=function(){var a="<div id='"+this.m_id+"' class='btn-group'>";return a+=this.m_labelButton.render(),a+=this.m_dropdownButton.render(),a+=this.m_menu.render(),a+"</div>"},a.prototype.attachEvents=function(){this.m_labelButton.attachEvents(),this.m_dropdownButton.attachEvents()},a}(),MPageUI.ToggleButton=function(){var a=function(){this.m_selected=!1,this.m_onSelectCallback=null,this.m_onDeselectCallback=null,this.base()};return MPageUI.extend(a,MPageUI.Button),a.prototype.isSelected=function(){return this.m_selected},a.prototype.select=function(){this.m_selected||(this.setSelected(!0),this.m_onSelectCallback&&this.m_onSelectCallback())},a.prototype.deselect=function(){this.m_selected&&(this.setSelected(!1),this.m_onDeselectCallback&&this.m_onDeselectCallback());
},a.prototype.onClick=function(){return this.m_onClickCallback?void this.m_onClickCallback():void(this.m_selected?this.deselect():this.select())},a.prototype.setOnSelectCallback=function(a){if("function"!=typeof a)throw new Error("MPageUI.ToggleButton.prototype.setOnSelectCallback expects a function");return this.m_onSelectCallback=a,this},a.prototype.setOnDeselectCallback=function(a){if("function"!=typeof a)throw new Error("MPageUI.ToggleButton.prototype.setOnDeselectCallback expects a function");return this.m_onDeselectCallback=a,this},a.prototype.setSelected=function(a){if("boolean"!=typeof a)throw new Error("MPageUI.ToggleButton.prototype.setActive expects a boolean");var b=this.getRootElement();return a?b.addClass("active"):b.removeClass("active"),this.m_selected=a,this},a.prototype.render=function(){var a=this.m_disabled?"disabled='true'":"",b="btn",c=this.m_dataToggle?"data-toggle='"+this.m_dataToggle+"'":"";return b+=this.m_size?" "+this.m_size:"",b+=this.m_shape?" "+this.m_shape:"",b+=this.m_style?" "+this.m_style:"",b+=this.m_selected?" active":"","<button type='button' id='"+this.m_id+"' class='"+b+"' "+a+" "+c+">"+this.m_label+"</button>"},a}(),MPageUI.Pager=function(){var a=function(){return this.base(),this.m_currentPageLabel="",this.m_previousLabel="",this.m_nextLabel="",this.m_currentPage=0,this.m_numberPages=0,this.m_wrap=!1,this.m_onPageChangeCallback=null,this.m_$currentPageElement=null,this.m_$nextElement=null,this.m_$previousElement=null,this};return MPageUI.extend(a,MPageUI.UIComponent),a.prototype.getCurrentPageElement=function(){return this.m_$currentPageElement&&this.m_$currentPageElement.length||(this.m_$currentPageElement=this.getRootElement().find(".current-page")),this.m_$currentPageElement},a.prototype.getNextElement=function(){return this.m_$nextElement&&this.m_$nextElement.length||(this.m_$nextElement=this.getRootElement().find(".next-page")),this.m_$nextElement},a.prototype.getPreviousElement=function(){return this.m_$previousElement&&this.m_$previousElement.length||(this.m_$previousElement=this.getRootElement().find(".prev-page")),this.m_$previousElement},a.prototype.setCurrentPageLabelPattern=function(a){if("string"!=typeof a)throw new Error("Pager.prototype.setCurrentPageLabel expects a string");return this.m_currentPageLabel=a,this.getCurrentPageElement().html(this.getCurrentPageLabel()),this},a.prototype.getCurrentPageLabel=function(){return this.m_currentPageLabel.replace("${currentPage}",this.m_currentPage+1).replace("${numberPages}",this.m_numberPages)},a.prototype.setPreviousLabel=function(a){if("string"!=typeof a)throw new Error("Pager.prototype.setPreviousLabel expects a string.");return this.m_previousLabel=a,this},a.prototype.setNextLabel=function(a){if("string"!=typeof a)throw new Error("Pager.prototype.setNextLabel expects a string.");return this.m_nextLabel=a,this},a.prototype.updateNextPreviousDisabled=function(){if(this.m_numberPages===Number.POSITIVE_INFINITY)this.getPreviousElement().prop("disabled",0===this.m_currentPage).attr("disabled",0===this.m_currentPage);else{if(this.m_wrap)return;this.getPreviousElement().prop("disabled",0===this.m_currentPage).attr("disabled",0===this.m_currentPage),this.getNextElement().prop("disabled",this.m_currentPage+1===this.m_numberPages).attr("disabled",this.m_currentPage+1===this.m_numberPages)}},a.prototype.setPagesUnknown=function(a){if("boolean"!=typeof a)throw new Error("Pager.prototype.setPagesUnknown expects a boolean.");return a&&(this.m_numberPages=Number.POSITIVE_INFINITY),this},a.prototype.updateCurrentPageLabel=function(){this.getCurrentPageElement().html(this.getCurrentPageLabel())},a.prototype.setWrap=function(a){return this.m_wrap=a,this},a.prototype.setNumberPages=function(a){if("number"!=typeof a)throw new Error("Pager.prototype.setNumberPages expects a number.");if(a<0||a%1!==0)throw new Error("Pager.prototype.setNumberPages expects a number greater than or equal to 0.");return this.m_numberPages=a,this},a.prototype.setCurrentPage=function(a){if("number"!=typeof a)throw new Error("Pager.prototype.setCurrentPage expects a number.");if(a<0||a%1!==0)throw new Error("Pager.prototype.setCurrentPage expects a number greater than or equal to 0.");return this.m_currentPage=a,this.m_wrap||this.updateNextPreviousDisabled(),this.updateCurrentPageLabel(),this},a.prototype.onClickFirst=function(){this.setCurrentPage(0),this.m_onPageChangeCallback&&this.m_onPageChangeCallback({currentPage:this.m_currentPage,numberPages:this.m_numberPages})},a.prototype.onClickPrevious=function(){this.m_numberPages===Number.POSITIVE_INFINITY&&this.m_currentPage>=0?(this.m_currentPage--,this.setCurrentPage(this.m_currentPage)):this.m_wrap?this.setCurrentPage((this.m_currentPage-1+this.m_numberPages)%this.m_numberPages):this.setCurrentPage(Math.max(0,this.m_currentPage-1)),this.m_onPageChangeCallback&&this.m_onPageChangeCallback({currentPage:this.m_currentPage,numberPages:this.m_numberPages})},a.prototype.onClickNext=function(){this.m_numberPages===Number.POSITIVE_INFINITY?(this.m_currentPage++,this.setCurrentPage(this.m_currentPage)):this.m_wrap?this.setCurrentPage((this.m_currentPage+1)%this.m_numberPages):this.setCurrentPage(Math.min(this.m_numberPages,this.m_currentPage+1)),this.m_onPageChangeCallback&&this.m_onPageChangeCallback({currentPage:this.m_currentPage,numberPages:this.m_numberPages})},a.prototype.onClickLast=function(){this.setCurrentPage(this.m_numberPages),this.m_onPageChangeCallback&&this.m_onPageChangeCallback({currentPage:this.m_currentPage,numberPages:this.m_numberPages})},a.prototype.setOnPageChangeCallback=function(a){if("function"!=typeof a)throw new Error("Pager.prototype.setOnPageChangeCallback expects a function.");return this.m_onPageChangeCallback=a,this},a.prototype.render=function(){var a=this.m_wrap?"":" disabled='true'",b="<nav id='"+this.m_id+"' class='paginator'>";return b+="<span class='next-pages'><a class='next-page' href='#' rel='next'>"+this.m_nextLabel+"</a></span>",b+="<span class='prior-pages'><a class='prev-page' href='#' rel='prev'"+a+">"+this.m_previousLabel+"</a></span>",b+="<span class='current-page'>"+this.getCurrentPageLabel()+"</span></nav>"},a.prototype.attachEvents=function(){var a=this,b=this.getRootElement();b.on("click.mpageui",".first-page",function(){a.onClickFirst()}),b.on("click.mpageui",".prev-page",function(){a.onClickPrevious()}),b.on("click.mpageui",".next-page",function(){a.onClickNext()}),b.on("click.mpageui",".last-page",function(){a.onClickLast()})},a}(),MPageUI.POPUP_OPTIONS={POSITION:{RIGHT:"right",LEFT:"left",TOP:"top",TOP_RIGHT:"top-right",TOP_LEFT:"top-left",BOTTOM:"bottom",BOTTOM_RIGHT:"bottom-right",BOTTOM_LEFT:"bottom-left"},WIDTH:{SMALL:200,MEDIUM:400,LARGE:600}},MPageUI.Popup=function(){var a=function(){return this.base(),this.m_headerHTML="",this.m_bodyHTML="",this.m_footerHTML="",this.m_anchorId="",this.m_position=MPageUI.POPUP_OPTIONS.POSITION.BOTTOM,this.m_width=MPageUI.POPUP_OPTIONS.WIDTH.SMALL,this.m_maxBodyHeight="400px",this.m_popupExistsFlag=!1,this.m_popupShowingFlag=!1,this.m_hideOnScroll=!1,this.m_scrollableParent="",this};return MPageUI.extend(a,MPageUI.UIComponent),a.prototype.setScrollableParent=function(a){if("string"!=typeof a)throw new Error("MPageUI.Popup.prototype.setScrollableParent expects a string.");return this.m_scrollableParent=a,this},a.prototype.hideOnScroll=function(a){if("boolean"!=typeof a)throw new Error("MPageUI.Popup.prototype.hideOnScroll expects a boolean.");if(!this.m_scrollableParent)throw new Error("MPageUI.Popup.prototype.hideOnScroll expects setScrollableParent to be set.");return this.m_hideOnScroll=a,this},a.prototype.exists=function(){return this.m_popupExistsFlag},a.prototype.isOpen=function(){return this.m_popupShowingFlag},a.prototype.render=function(){this.show()},a.prototype.create=function(){if(!this.m_anchorId)throw new Error("MPageUI.Popup.prototype.create expects the anchor id to be set.");var a=this,b="#"+this.m_anchorId,c="";return this.m_headerHTML&&(c+="<div class='mpage-ui-popup-header'>"+this.m_headerHTML+"</div>"),c+="<div class='mpage-ui-popup-body' id='"+this.m_id+"' style='max-height:"+this.m_maxBodyHeight+"'>"+this.m_bodyHTML+"</div>",this.m_footerHTML&&(c+="<div>"+this.m_footerHTML+"</div>"),$(b).tooltipster({content:$(c),interactive:!0,maxWidth:a.m_width,minWidth:a.m_width,position:a.m_position,restoration:"none",theme:"mpage-ui-popup",trigger:"custom",speed:0}),this.m_popupExistsFlag=!0,this},a.prototype.destroy=function(){if(!this.m_anchorId)throw new Error("MPageUI.Popup.prototype.destroy expects the anchor id to be set.");if(!this.m_popupExistsFlag)return this;var a="#"+this.m_anchorId;return $(a).tooltipster("destroy"),this.m_popupExistsFlag=!1,this.m_popupShowingFlag=!1,this.m_headerHTML="",this.m_bodyHTML="",this.m_footerHTML="",null},a.prototype.show=function(){if(!this.m_anchorId)throw new Error("MPageUI.Popup.prototype.show expects the anchor id to be set.");if(this.m_popupShowingFlag)return this;this.m_popupExistsFlag||this.create();var a="#"+this.m_anchorId;return $(a).tooltipster("show"),this.m_popupShowingFlag=!0,this},a.prototype.hide=function(){if(!this.m_anchorId)throw new Error("MPageUI.Popup.prototype.hide expects the anchor id to be set.");if(this.m_popupShowingFlag){var a="#"+this.m_anchorId;$(a).tooltipster("hide"),this.m_popupShowingFlag=!1}return this},a.prototype.toggle=function(){return this.m_popupShowingFlag?this.hide():this.show(),this},a.prototype.setAnchorId=function(a){if("string"!=typeof a)throw new Error("MPageUI.Popup.prototype.setAnchorId expects a string.");return this.m_anchorId=a,this},a.prototype.setHeader=function(a){if("string"!=typeof a)throw new Error("MPageUI.Popup.prototype.setHeader expects a string.");return this.m_headerHTML=a,this.m_popupExistsFlag&&this.changePopupContent(),this},a.prototype.setBodyContent=function(a){if("string"!=typeof a)throw new Error("MPageUI.Popup.prototype.setBodyContent expects a string.");return this.m_bodyHTML=a,this.m_popupExistsFlag&&this.changePopupContent(),this},a.prototype.setFooter=function(a){if("string"!=typeof a)throw new Error("MPageUI.Popup.prototype.setFooter expects a string.");return this.m_footerHTML=a,this.m_popupExistsFlag&&this.changePopupContent(),this},a.prototype.setPosition=function(a){if("string"!=typeof a)throw new Error("MPageUI.Popup.prototype.setPosition expects a string.");return this.m_position=a,this},a.prototype.setWidth=function(a){if("number"!=typeof a)throw new Error("MPageUI.Popup.prototype.setWidth expects a number.");return this.m_width=a,this},a.prototype.setMaxBodyHeight=function(a){if("string"!=typeof a)throw new Error("MPageUI.Popup.prototype.setMaxBodyHeight expects a string.");return this.m_maxBodyHeight=a,this},a.prototype.changePopupContent=function(){if(!this.m_anchorId)throw new Error("MPageUI.Popup.prototype.changePopupContent expects the anchor id to be set.");var a="",b="#"+this.m_anchorId;return this.m_headerHTML&&(a+="<div class='mpage-ui-popup-header'>"+this.m_headerHTML+"</div>"),a+="<div class='mpage-ui-popup-body' style='max-height:"+this.m_maxBodyHeight+"'>"+this.m_bodyHTML+"</div>",this.m_footerHTML&&(a+="<div>"+this.m_footerHTML+"</div>"),$(b).tooltipster("content",$(a)),this},a.prototype.attachEvents=function(){var a=this;return this.m_hideOnScroll&&this.m_anchorId&&$(this.m_scrollableParent).on("scroll",function(){a.isOpen()&&a.hide()}),this},a}(),MPageUI.SEGMENTED_CONTROL_OPTIONS={SELECT_MODE:{SINGLE:0,MULTI:1}},MPageUI.SegmentedControl=function(){var a=function(){return this.m_selectedSegments=null,this.m_segments=null,this.m_selectMode=MPageUI.SEGMENTED_CONTROL_OPTIONS.SELECT_MODE.SINGLE,this.base(),this};return MPageUI.extend(a,MPageUI.UIComponent),a.prototype.getSelectedSegments=function(){return this.m_selectedSegments||(this.m_selectedSegments=[]),this.m_selectedSegments},a.prototype.getSegments=function(){return this.m_segments||(this.m_segments=[]),this.m_segments},a.prototype.setSelectMode=function(a){if("number"!=typeof a)throw new Error("MPageUI.SegmentedControl.prototype.setSelectMode expects an integer");return this.m_selectMode=a,this},a.prototype.selectSegment=function(a){var b=a.uiComponent.getRootElement();return b.addClass("active"),this.getSelectedSegments().push(a),a.segment.onSelect&&a.segment.onSelect.call(a.segment),this},a.prototype.deselectSegment=function(a){var b=a.uiComponent.getRootElement();b.removeClass("active");for(var c=this.getSelectedSegments(),d=c.length,e=0;e<d;e++)if(c[e]===a){c.splice(e,1),a.segment.onDeselect&&a.segment.onDeselect.call(a.segment);break}return this},a.prototype.validateSegment=function(a){if("object"!=typeof a)throw new Error("MPageUI.SegmentedControl.prototype.validateSegment expects an object");if(!a.label)throw new Error("MPageUI.SegmentedControl.prototype.addSegment: label is required for this segment.");if(a.id&&"string"!=typeof a.id)throw new Error("MPageUI.SegmentedControl.prototype.addSegment: the label must be a string.");if(a.selected&&"boolean"!=typeof a.selected)throw new Error("MPageUI.SegmentedControl.prototype.addSegment: the selected attribute must be a boolean.");if(a.disabled&&"boolean"!=typeof a.disabled)throw new Error("MPageUI.SegmentedControl.prototype.addSegment: the disabled attribute must be a boolean.");if(!a.onSelect)throw new Error("MPageUI.SegmentedControl.prototype.addSegment: onSelect callback is required for this segment.");if("function"!=typeof a.onSelect)throw new Error("MPageUI.SegmentedControl.prototype.addSegment: the onSelect callback must be a function.");if(a.onDeselect&&"function"!=typeof a.onDeselect)throw new Error("MPageUI.SegmentedControl.prototype.addSegment: the onDeselect callback must be a function.")},a.prototype.disableSegmentAtIndex=function(a){var b=this.getSegments(),c=null;if(a<0||a>=b.length)throw new Error("SegmentedControl.prototype.selectSegmentAtIndex expects an integer between 0 and the number of segments.");return c=b[a],this.isSegmentAtIndexSelected(a)&&this.deselectSegment(c),c.uiComponent.setDisabled(!0),this},a.prototype.getSegmentById=function(a){if("string"!=typeof a)throw new Error("SegmentedControl.prototype.deselectSegmentById expects id to be a string.");for(var b=this.getSegments(),c=b.length,d=null,e=0;e<c;e++)if(d=b[e],d.segment.id===a)return d;return null},a.prototype.deselectSegmentById=function(a){var b=this.getSegmentById(a),c=null;if(b){c=this.getSelectedSegments();for(var d=c.length,e=0;e<d;e++){c[e]===b&&this.deselectSegment(b);break}}return this},a.prototype.disableSegmentById=function(a){var b=this.getSegmentById(a);return this.deselectSegmentById(a),b.uiComponent.setDisabled(!0),this},a.prototype.selectSegmentAtIndex=function(a){var b=this.getSegments(),c=null;if(a<0||a>=b.length)throw new Error("SegmentedControl.prototype.selectSegmentAtIndex expects an integer between 0 and the number of segments.");return c=b[a],this.handleSelection(c),this},a.prototype.deselectSegmentAtIndex=function(a){var b=this.getSegments(),c=null,d=null;if(a<0||a>=b.length)throw new Error("MPageUI.SegmentedControl.prototype.deselectSegmentAtIndex expects a number between 0 and the number of segments.");return c=b[a],d=this.getSelectedSegmentIndex(c),d<0?this:(this.deselectSegment(c),this)},a.prototype.isSegmentAtIndexSelected=function(a){var b=this.getSegments();if(a<0||a>=b.length)throw new Error("MPageUI.SegmentedControl.prototype.isSegmentAtIndexSelected expects a number between 0 and the number of segments.");return this.getSelectedSegmentIndex(b[a])>-1},a.prototype.getSelectedSegmentIndex=function(a){for(var b=this.getSelectedSegments(),c=b.length,d=0;d<c;d++)if(b[d]===a)return d;return-1},a.prototype.handleSelection=function(a){var b=MPageUI.SEGMENTED_CONTROL_OPTIONS.SELECT_MODE,c=this.getSelectedSegmentIndex(a);switch(this.m_selectMode){case b.MULTI:c>-1?this.deselectSegment(a):this.selectSegment(a);break;case b.SINGLE:default:c<0&&(this.deselectAllSegments(),this.selectSegment(a))}},a.prototype.deselectAllSegments=function(){var a=this.getRootElement();a.find(".active").removeClass("active");for(var b=this.getSelectedSegments(),c=b.length,d=null,e=0;e<c;e++)d=b[e],d.segment.onDeselect&&d.segment.onDeselect.call(d.segment);this.m_selectedSegments=[]},a.prototype.addSegment=function(a){this.validateSegment(a);var b=null,c=this.getSegments(),d=new MPageUI.ToggleButton,e=this;return d.setLabel(a.label),d.setSelected(a.selected||!1),d.setDisabled(a.disabled||!1),d.setOnClickCallback(function(){e.handleSelection(b)}),b={segment:a,uiComponent:d},c.push(b),a.selected&&this.getSelectedSegments().push(b),this},a.prototype.render=function(){for(var a=this.getSegments(),b=a.length,c="<div id='"+this.m_id+"' class='btn-group'>",d=0;d<b;d++)c+=a[d].uiComponent.render();return c+"</div>"},a.prototype.attachEvents=function(){for(var a=this.getSegments(),b=a.length,c=0;c<b;c++)a[c].uiComponent.attachEvents();return this},a.prototype.clearElementCache=function(){for(var a=this.getSegments(),b=a.length,c=0;c<b;c++)a[c].uiComponent.clearElementCache()},a}(),MPageUI.PEDBannerControl=function(){var a=function(){return this.base(),this.m_buttonClickCallback=null,this.m_bannerButton=new MPageUI.Button,this.m_options={buttonLabel:"",bannerText:"",buttonStyle:MPageUI.BUTTON_OPTIONS.STYLE.SECONDARY},this};return MPageUI.extend(a,MPageUI.UIComponent),a.prototype.renderBannerButton=function(){if(!this.m_bannerButton)throw new Error("MPageUI.PEDBannerControl.prototype.renderBannerButton is not able to create an instance of MPageUI Button");if(!this.m_options.buttonLabel)throw new Error("MPageUI.PEDBannerControl.prototype.renderBannerButton expects a button label");if(!this.m_buttonClickCallback)throw new Error("MPageUI.PEDBannerControl.prototype.renderBannerButton expects a button callback");return this.m_bannerButton.setLabel(this.m_options.buttonLabel),this.m_bannerButton.setStyle(this.m_options.buttonStyle),this.m_bannerButton.setOnClickCallback(this.m_buttonClickCallback),this.m_bannerButton.render()},a.prototype.setPEDBannerButtonCallback=function(a){if("function"!=typeof a)throw new Error("MPageUI.PEDBannerControl.prototype.setPEDBannerButtonCallback expects a function");return this.m_buttonClickCallback=a,this},a.prototype.setPEDBannerText=function(a){if("string"!=typeof a)throw new Error("MPageUI.PEDBannerControl.prototype.setPEDBannerText expects a string");return this.m_options.bannerText=a,this},a.prototype.setPEDButtonLabel=function(a){if("string"!=typeof a)throw new Error("MPageUI.PEDBannerControl.prototype.setPEDButtonLabel expects a string");return this.m_options.buttonLabel=a,this},a.prototype.render=function(){var a="";if(!this.m_options.bannerText)throw new Error("MPageUI.PEDBannerControl.prototype.render expects setPEDBannerText");return a+="<span class='ped-banner-text'>"+this.m_options.bannerText+"</span><span class='ped-banner-button' id='bannerBtn_"+this.m_id+"'>"+this.renderBannerButton()+"</span>"},a.prototype.attachEvents=function(){this.m_bannerButton.attachEvents()},a.prototype.clearElementCache=function(){this.m_bannerButton.clearElementCache()},a}(),MPageUI.TabControl=function(){var a=function(){return this.base(),this.m_totalWidth=null,this.m_tabs=null,this.m_canCloseTabs=!1,this.m_displayScroller=!1,this.m_canSortTabs=!1,this.m_enableLabelCount=!1,this.m_onSelectCallback=null,this.m_onDeselectCallback=null,this.m_onCloseCallback=null,this.m_onSortCallback=null,this.m_defaultTab=null,this.m_alreadyActivatedTabs=null,this.m_numberOfTabsShown=null,this.m_firstTabIndex=0,this.m_currentActiveTab=null,this.m_scrollerWidth=70,this.m_parentWidth=null,this.m_tabControlFinalized=!1,this};return MPageUI.extend(a,MPageUI.UIComponent),a.prototype.setEnableLabelCount=function(a){if("boolean"!=typeof a)throw new Error("TabControl.prototype.setEnableLabelCount expects a boolean.");return this.m_enableLabelCount=a,this},a.prototype.hideCountOnTab=function(a){return this.validateTab(a),$("#countTab"+a.id).empty(),this.resize(!0),this},a.prototype.updateCountOnTab=function(a,b){if(this.validateTab(a),"number"!=typeof b)throw new Error("MPageUI.TabControl.prototype.updateCountOnTab expects a number");var c=$("#countTab"+a.id);return c.empty(),c.append("("+b+")"),this.resize(!0),this},a.prototype.updateIndicatorOnTab=function(a,b){if(this.validateTab(a),"string"!=typeof b)throw new Error("MPageUI.TabControl.prototype.updateIndicatorOnTab expects a string");if(!a.hasIndicator)throw new Error("MPageUI.TabControl.prototype.updateIndicatorOnTab: tab is not configured to have indicators on label");var c=$("#indicatorTab"+a.id);if(0===c.length){var d=$("#labelTab"+a.id);d.prepend("<span id = 'indicatorTab"+a.id+"' class='indicator-label'>"+b+"</span>")}else c.empty(),c.append(b);return this.resize(!0),this},a.prototype.getEnableLabelCount=function(){return this.m_enableLabelCount},a.prototype.setCanCloseTabs=function(a){if("boolean"!=typeof a)throw new Error("TabControl.prototype.setCanCloseTabs expects a boolean.");return this.m_canCloseTabs=a,this},a.prototype.setCanSortTabs=function(a){if("boolean"!=typeof a)throw new Error("TabControl.prototype.setCanSortTabs expects a boolean.");return this.m_canSortTabs=a,this},a.prototype.setDefaultTab=function(a){if("string"!=typeof a)throw new Error("TabControl.prototype.setDefaultTab expects a string.");return this.m_defaultTab=a,this},a.prototype.setOnSelectCallback=function(a){if("function"!=typeof a)throw new Error("TabControl.prototype.setOnSelectCallback expects a function.");return this.m_onSelectCallback=a,this},a.prototype.setOnDeselectCallback=function(a){if("function"!=typeof a)throw new Error("TabControl.prototype.setOnDeselectCallback expects a function.");return this.m_onDeselectCallback=a,this},a.prototype.setOnSortCallback=function(a){if("function"!=typeof a)throw new Error("TabControl.prototype.setOnSortCallback expects a function.");return this.m_onSortCallback=a,this},a.prototype.setOnCloseCallback=function(a){if("function"!=typeof a)throw new Error("TabControl.prototype.setOnCloseCallback expects a function.");return this.m_onCloseCallback=a,this},a.prototype.validateTab=function(a){if("object"!=typeof a)throw new Error("MPageUI.TabControl.prototype.validateTab expects an object");if("string"!=typeof a.id)throw new Error("MPageUI.TabControl.prototype.validateTab: the id must be a string.");if("string"!=typeof a.label)throw new Error("MPageUI.TabControl.prototype.validateTab: the label must be a string.");if("string"!=typeof a.title)throw new Error("MPageUI.TabControl.prototype.validateTab: the title must be a string.");if(a.onSelect&&"function"!=typeof a.onSelect)throw new Error("MPageUI.TabControl.prototype.validateTab: the onSelect callback must be a function.");if(a.onDeselect&&"function"!=typeof a.onDeselect)throw new Error("MPageUI.TabControl.prototype.validateTab: the onDeselect callback must be a function.");if(a.onClose&&"function"!=typeof a.onClose)throw new Error("MPageUI.TabControl.prototype.validateTab: the onClose callback must be a function.");if(a.canClose&&"boolean"!=typeof a.canClose)throw new Error("MPageUI.TabControl.prototype.validateTab: the canClose callback must be a boolean.");if(a.hasIndicator&&"boolean"!=typeof a.hasIndicator)throw new Error("MPageUI.TabControl.prototype.validateTab: hasIndicator must be boolean.")},a.prototype.getTabs=function(){return this.m_tabs||[]},a.prototype.setTabs=function(a){if(!Array.prototype.isPrototypeOf(a))throw new Error("TabControl.prototype.setTabs expects a array.");for(var b=0;b<a.length;b++)this.validateTab(a[b]);return this.m_tabs=a,this},a.prototype.addTab=function(a,b){this.validateTab(a);var c=this.getRootElement();if(this.m_tabs=this.m_tabs||[],!c.length)return void(this.tabExists(a.id)||this.m_tabs.push(a));var d=this.m_tabs.length-1,e=null;if(!this.tabExists(a.id)){this.m_tabs.push(a);var f=$(this.createTab(a));if(this.m_tabs[d]){e=this.m_tabs[d].id;var g=this.getRootElement().find("#"+e+"tab");g.after(f)}else c.append(f);this.m_tabControlFinalized&&this.resize(!0),b&&this.activateTab(f)}},a.prototype.insertTab=function(a){if(!this.getRootElement().length)throw new Error("TabControl.prototype.insertTab: tab controller not available");if(this.validateTab(a),!this.tabExists(a.id)){for(var b=null,c=0,d=0;d<this.m_tabs.length;d++)if(b=this.m_tabs[d],b.id===this.m_currentActiveTab){c=d;break}this.m_tabs.splice(c+1,0,a);var e=$(this.createTab(a)),f=this.getRootElement().find("#"+this.m_currentActiveTab+"tab");f.after(e),this.resize(!0),this.activateTab(e)}},a.prototype.tabExists=function(a){for(var b=this.m_tabs,c=0;c<b.length;c++)if(b[c].id===a)return!0;return!1},a.prototype.removeTab=function(a){if(!this.getRootElement().length)throw new Error("TabControl.prototype.removeTab: tab controller not available");if("string"!=typeof a)throw new Error("TabControl.prototype.removeTab expects a string.");var b=null,c=null,d=0,e=null,f=!1,g=!1,h=this.getRootElement().find("#"+a+"tab");h.hasClass("tab-active")&&(f=!0),h.remove();for(var i=0;i<this.m_tabs.length;i++)b=this.m_tabs[i],b.id===a&&this.m_tabs.splice(i,1);var j=this.m_firstTabIndex+this.m_numberOfTabsShown-1;if(c=this.m_tabs[j],c?this.getRootElement().find("#"+c.id+"tab").removeClass("hide-tab"):(c=this.m_tabs[this.m_firstTabIndex-1],c&&(this.getRootElement().find("#"+c.id+"tab").removeClass("hide-tab"),this.m_firstTabIndex--)),this.resize(!0),f){d=this.m_alreadyActivatedTabs.length;for(var k=d-1;k>=0;k--)if(e=this.getRootElement().find("#"+this.m_alreadyActivatedTabs[k]),e.length){this.activateTab(e),g=!0;break}if(!g&&this.m_tabs.length){var l=this.getRootElement().find("#"+this.m_tabs[0].id+"tab");this.activateTab(l)}}},a.prototype.selectTab=function(a){this.activateTab($("#"+a+"tab"))},a.prototype.activateTab=function(a){var b=this.getRootElement().find(".tab-active");if(this.m_alreadyActivatedTabs=this.m_alreadyActivatedTabs||[],b.length){var c=b[0].id;this.m_alreadyActivatedTabs.push(c),this.setTabAsActive(b,!1)}this.setTabAsActive(a,!0)},a.prototype.render=function(){return this.createTabControl()},a.prototype.createTabControl=function(){var a="",b=this.m_tabs||[],c=b.length,d=null,e="tabs";this.m_secondaryCSS&&(e+=" "+this.m_secondaryCSS),a="<ul id='"+this.m_id+"' class='"+e+"'>";for(var f=0;f<c;f++)d=b[f],this.m_defaultTab||0!==f||this.setDefaultTab(d.id),a+=this.createTab(d);return a+="</ul>"},a.prototype.createTab=function(a){var b="<li id = '"+a.id+"tab' title='"+a.title+"' class = 'tab-container' style= 'width: "+this.m_minWidth+"px'>";b+="<span id = 'labelTab"+a.id+"' class='tab-label'>",a.hasIndicator&&(b+="<span id = 'indicatorTab"+a.id+"' class='indicator-label'>"+a.indicatorHTML+"</span>"),b+="<span id = 'labelTextTab"+a.id+"' class='tab-label-text'>"+a.label+"</span>",this.getEnableLabelCount()&&(b+="<span id = 'countTab"+a.id+"' class='tab-count-label'>("+a.count+")</span>"),b+="";var c="boolean"==typeof a.canClose?a.canClose:this.m_canCloseTabs;return c&&(b+="<span id = 'closeTab"+a.id+"' class='close-tab'>&nbsp;</span>"),b+="</span></li>"},a.prototype.resize=function(a){var b=this.getRootElement();if(!b.length)throw new Error("TabControl.prototype.resize tab controller not exists");var c=this.m_tabs.length,d=null,e=null,f=null,g=null,h=null,i=null,j=null;a||(this.m_firstTabIndex=0),this.m_numberOfTabsShown=0,f=this.calculatedTabWidth(a),g=this.m_totalWidth;for(var k=0;k<c;k++)if(d=this.m_tabs[k],e=this.getRootElement().find("#"+d.id+"tab"),e.length){e.outerWidth(f,!0),i=this.getOtherChildrenWidth(d),h=e.find("#labelTab"+d.id),j=e.find("#labelTextTab"+d.id);var l=e.innerWidth()-e.width(),m=e.outerWidth()-e.innerWidth();h.outerWidth(f-l-m,!0);var n=h.outerWidth();j.css("maxWidth",n-i+"px"),g<this.m_minWidth&&e.addClass("hide-tab"),e.hasClass("hide-tab")?!a&&g>=this.m_minWidth&&(this.m_numberOfTabsShown++,e.removeClass("hide-tab"),g-=f):(g-=f,this.m_numberOfTabsShown++)}if(a&&g>=this.m_minWidth){var o=this.getRootElement().find(".hide-tab")[0];o&&($(o).removeClass("hide-tab"),this.m_numberOfTabsShown++)}this.applyScrollElements(a)},a.prototype.getTotalWidth=function(){return this.getRootElement().parent().width()},a.prototype.calculatedTabWidth=function(a){a?this.m_totalWidth=this.m_parentWidth:(this.m_totalWidth=this.getTotalWidth(),this.m_parentWidth=this.m_totalWidth);var b=this.m_totalWidth/this.m_tabs.length;return b>=this.m_maxWidth?(this.m_displayScroller=!1,this.m_maxWidth):b>=this.m_minWidth?(this.m_displayScroller=!1,b):(this.m_displayScroller=!0,this.m_totalWidth-=this.m_scrollerWidth,this.calculateTabWidth())},a.prototype.getOtherChildrenWidth=function(a){var b=0,c=16,d=17,e="boolean"==typeof a.canClose?a.canClose:this.m_canCloseTabs;if(e&&(b+=this.getRootElement().find(".close-tab").outerWidth(!0)+4),a.hasIndicator){var f=this.getRootElement().find("#indicatorTab"+a.id).outerWidth(!0);f||(f+=c),b+=f}if(this.getEnableLabelCount()){var g=this.getRootElement().find("#countTab"+a.id).outerWidth(!0);g||(g+=d),b+=g}return b},a.prototype.calculateTabWidth=function(){var a=Math.floor(this.m_totalWidth/this.m_minWidth);return this.m_totalWidth/a},a.prototype.applyScrollElements=function(a){var b=this.getRootElement().find("#"+this.m_id+"leftArrow"),c=this.getRootElement().find("#"+this.m_id+"rightArrow");this.m_displayScroller?(b.length?a||(b.removeClass("active-left-arrow"),b.addClass("inactive-left-arrow")):(b=$("<li></li>").addClass("inactive-left-arrow").attr("id",this.m_id+"leftArrow"),this.getRootElement().prepend(b)),c.length?this.haveNextTabs()?(c.removeClass("inactive-right-arrow"),c.addClass("active-right-arrow")):(c.removeClass("active-right-arrow"),c.addClass("inactive-right-arrow")):(c=$("<li></li>").addClass("active-right-arrow").attr("id",this.m_id+"rightArrow"),this.getRootElement().append(c))):(b.remove(),c.remove())},a.prototype.scrollTabs=function(a){for(var b=a+this.m_numberOfTabsShown,c=this.m_tabs,d=null,e=null,f=null,g=0;g<c.length;g++)d=c[g],g>=a&&g<b?this.getRootElement().find("#"+d.id+"tab").removeClass("hide-tab"):this.getRootElement().find("#"+d.id+"tab").addClass("hide-tab");e=this.getRootElement().find("#"+this.m_id+"leftArrow"),a>0?(e.addClass("active-left-arrow"),e.removeClass("inactive-left-arrow")):(e.addClass("inactive-left-arrow"),e.removeClass("active-left-arrow")),f=this.getRootElement().find("#"+this.m_id+"rightArrow"),b===this.m_tabs.length?(f.addClass("inactive-right-arrow"),f.removeClass("active-right-arrow")):(f.addClass("active-right-arrow"),f.removeClass("inactive-right-arrow"))},a.prototype.scrollRight=function(){for(var a=null,b=this.m_tabs,c=this.m_firstTabIndex,d=c+this.m_numberOfTabsShown,e=null,f=null,g=0;g<b.length;g++)a=b[g],g===c?(this.getRootElement().find("#"+a.id+"tab").addClass("hide-tab"),this.m_firstTabIndex++,e=this.getRootElement().find("#"+this.m_id+"leftArrow"),e.removeClass("inactive-left-arrow"),e.addClass("active-left-arrow")):g===d&&this.getRootElement().find("#"+a.id+"tab").removeClass("hide-tab");d===this.m_tabs.length-1&&(f=this.getRootElement().find("#"+this.m_id+"rightArrow"),f.addClass("inactive-right-arrow"),f.removeClass("active-right-arrow"))},a.prototype.scrollLeft=function(){for(var a=null,b=this.m_tabs,c=this.m_firstTabIndex-1,d=this.m_firstTabIndex+this.m_numberOfTabsShown-1,e=null,f=null,g=0;g<b.length;g++)a=b[g],g===d?(this.getRootElement().find("#"+a.id+"tab").addClass("hide-tab"),f=this.getRootElement().find("#"+this.m_id+"rightArrow"),f.removeClass("inactive-right-arrow"),f.addClass("active-right-arrow")):g===c&&(this.getRootElement().find("#"+a.id+"tab").removeClass("hide-tab"),this.m_firstTabIndex--);0===c&&(e=this.getRootElement().find("#"+this.m_id+"leftArrow"),e.addClass("inactive-left-arrow"),e.removeClass("active-left-arrow"))},a.prototype.haveNextTabs=function(){var a=this.m_tabs.length-1,b=this.getRootElement().find("#"+this.m_tabs[a].id+"tab");return b.hasClass("hide-tab")},a.prototype.updateTitle=function(a){if(!this.getRootElement().length)throw new Error("TabControl.prototype.updateTitle: tab controller not available");if(!this.tabExists(a.id))throw new Error("TabControl.prototype.updateTitle: tab does not exists");
this.validateTab(a);var b=this.getRootElement().find("#"+a.id+"tab");$(b).attr("title",a.title)},a.prototype.applyTabSorting=function(){var a=this;this.getRootElement().sortable({axis:"x",appendTo:"#"+this.m_id,containment:"parent",items:".tab-container:not(.hide-tab)",delay:100,distance:5,forceHelperSize:!0,forcePlaceholderSize:!0,scroll:!1,tolerance:"pointer",start:function(a,b){b.placeholder.height(28),b.placeholder.width(b.item[0].scrollWidth-2)},stop:function(b,c){var d=c.item[0].id.slice(0,-3);a.reArrangeTabs(d),a.m_onSortCallback&&a.m_onSortCallback(a.m_tabs)},placeholder:"tab-placeholder"}),this.getRootElement().disableSelection()},a.prototype.reArrangeTabs=function(a){for(var b=null,c=null,d=null,e=this.getRootElement().find(".tab-container"),f=0;f<this.m_tabs.length;f++)if(b=this.m_tabs[f],b.id===a){this.m_tabs.splice(f,1);break}for(var g=0;g<e.length;g++)if(c=e[g],d=c.id.slice(0,-3),d===a){this.m_tabs.splice(g,0,b);break}},a.prototype.setTabAsActive=function(a,b){var c=a[0].id.slice(0,-3),d=this.getTabById(c);b?(a.addClass("tab-active"),this.m_currentActiveTab=c,this.makeTabVisible(c),d&&d.onSelect?d.onSelect(d):this.m_onSelectCallback&&this.m_onSelectCallback(d)):(a.removeClass("tab-active"),d&&d.onDeselect?d.onDeselect(d):this.m_onDeselectCallback&&this.m_onDeselectCallback(d))},a.prototype.makeTabVisible=function(a){for(var b=0,c=null,d=this.m_firstTabIndex+this.m_numberOfTabsShown-1,e=this.m_tabs.length,f=0;f<this.m_tabs.length;f++)if(c=this.m_tabs[f],c.id===a){b=f;break}this.m_firstTabIndex>0&&b<this.m_firstTabIndex?(this.scrollTabs(b),this.m_firstTabIndex=b):d<e-1&&b>d&&(this.m_firstTabIndex=b-this.m_numberOfTabsShown+1,this.scrollTabs(this.m_firstTabIndex))},a.prototype.getTabById=function(a){for(var b=this.m_tabs,c=null,d=0;d<b.length;d++)if(c=b[d],c.id===a)return c;return null},a.prototype.attachEvents=function(){var a=this,b=this.getRootElement();return b.on("click.mpageui",".active-right-arrow",function(){a.scrollRight($(this))}),b.on("click.mpageui",".active-left-arrow",function(){a.scrollLeft($(this))}),b.on("click.mpageui",".tab-container",function(b){$(b.target).hasClass("close-tab")||a.activateTab($(this))}),b.on("click.mpageui",".close-tab",function(){var b=this.id,c=b.slice(8),d=a.getTabById(c);a.removeTab(c),d&&d.onClose?d.onClose(d):a.m_onCloseCallback&&a.m_onCloseCallback(d)}),this},a.prototype.finalize=function(){this.attachEvents(),this.m_canSortTabs&&this.applyTabSorting(),this.resize();var a=this.getRootElement().find("#"+this.m_defaultTab+"tab");if(a.length)this.activateTab(a);else if(this.m_tabs.length>0){var b=this.getRootElement().find("#"+this.m_tabs[0].id+"tab");this.activateTab(b)}return this.m_tabControlFinalized=!0,this},a}(),MPageUI.PrimaryTabControl=function(){var a=function(){return this.base(),this.m_minWidth=140,this.m_maxWidth=250,this};return MPageUI.extend(a,MPageUI.TabControl),a}(),MPageUI.SecondaryTabControl=function(){var a=function(){return this.base(),this.m_minWidth=120,this.m_maxWidth=200,this.m_secondaryCSS="secondary-tab",this};return MPageUI.extend(a,MPageUI.TabControl),a}(),MPageUI.AddTabControl=function(){var a=function(){return this.m_displayAddTab=!0,this.m_onAddTabCallback=null,this};return MPageUI.extend(a,MPageUI.PrimaryTabControl),a.prototype.setOnAddTabCallback=function(a){if("function"!=typeof a)throw new Error("AddTabControl.prototype.setOnAddTabCallback expects a function.");return this.m_onAddTabCallback=a,this},a.prototype.render=function(){var a=this.createTabControl();return a+=this.createAddTab()},a.prototype.createAddTab=function(){var a="";return this.m_displayAddTab&&(a="<div id ='"+this.m_id+"_addTab' class= 'add-tab-wrapper'> <span class= 'add-tab'></span> </div>"),a},a.prototype.attachAddTabEvent=function(){var a=this;return $("#"+this.m_id+"_addTab").on("click.mpageui",function(){a.m_onAddTabCallback()}),this},a.prototype.finalize=function(){this.attachEvents(),this.attachAddTabEvent(),this.m_canSortTabs&&this.applyTabSorting(),this.resize();var a=this.getRootElement().find("#"+this.m_defaultTab+"tab");if(a.length)this.activateTab(a);else if(this.m_tabs.length>0){var b=this.getRootElement().find("#"+this.m_tabs[0].id+"tab");this.activateTab(b)}return this.m_tabControlFinalized=!0,this},a.prototype.getTotalWidth=function(){var a=this.getRootElement().parent().width();if(this.m_displayAddTab){var b=$("#"+this.m_id+"_addTab").outerWidth(!0);a-=b}return a},a}(),MPageUI.ViewpointTabControl=function(){var a=function(){return this.base(),this};return MPageUI.extend(a,MPageUI.AddTabControl),a.prototype.removeTab=function(a,b){if(!this.getRootElement().length)throw new Error("TabControl.prototype.removeTab: tab controller not available");if("string"!=typeof a)throw new Error("TabControl.prototype.removeTab expects a string.");var c=null,d=null,e=0,f=null,g=!1,h=!1,i=this.getRootElement().find("#"+a+"tab");i.hasClass("tab-active")&&(g=!0),i.remove();for(var j=0;j<this.m_tabs.length;j++)c=this.m_tabs[j],c.id===a&&this.m_tabs.splice(j,1);var k=this.m_firstTabIndex+this.m_numberOfTabsShown-1;if(d=this.m_tabs[k],d?this.getRootElement().find("#"+d.id+"tab").removeClass("hide-tab"):(d=this.m_tabs[this.m_firstTabIndex-1],d&&(this.getRootElement().find("#"+d.id+"tab").removeClass("hide-tab"),this.m_firstTabIndex--)),this.resize(!0),g&&!b){e=this.m_alreadyActivatedTabs.length;for(var l=e-1;l>=0;l--)if(f=this.getRootElement().find("#"+this.m_alreadyActivatedTabs[l]),f.length){this.activateTab(f),h=!0;break}if(!h&&this.m_tabs.length){var m=this.getRootElement().find("#"+this.m_tabs[0].id+"tab");this.activateTab(m)}}},a}(),MPageUI.TABLE_OPTIONS={HIGHLIGHT:{NONE:"",ROW:"table-hover",CELL:"table-hover-cell"},SORT:{ASCENDING:-1,DESCENDING:1,NONE:0},SELECT:{NONE:0,SINGLE_ROW:1,MULTI_ROW:2}},MPageUI.Table=function(){var a=function(){this.base(),this.m_columns=null,this.m_data=null,this.m_groupingData=null,this.m_recordHash=null,this.m_selection=null,this.m_maxHeight=200,this.m_options={columns:{separators:!0},highlight:MPageUI.TABLE_OPTIONS.HIGHLIGHT.NONE,namespace:"",rows:{striped:!0},show:{header:!0},select:MPageUI.TABLE_OPTIONS.SELECT.NONE},this.m_tableHover=null,this.m_rowClickCallback=null,this.m_cellClickCallback=null,this.m_columnHeaderClickCallback=null,this.m_groupClickCallback=null,this.m_hoverCallBack=null,this.m_lastClickedRecord=null};return MPageUI.extend(a,MPageUI.UIComponent),a.prototype.getColumns=function(){return this.m_columns||(this.m_columns=[]),this.m_columns},a.prototype.setColumns=function(a){return this.m_columns=a,this},a.prototype.isColumnSortable=function(a){if("string"!=typeof a)throw new Error("MPageUI.Table.prototype.isColumnSortable expects columnId to be a string");for(var b=this.getColumns(),c=b.length,d=0;d<c;d++){var e=b[d];if(e.id===a&&e.sortOptions)return!0}return!1},a.prototype.toggleSortDirection=function(){this.m_currentSortDirection*=-1},a.prototype.getSortClass=function(a){switch(a){case MPageUI.TABLE_OPTIONS.SORT.ASCENDING:return"sort-asc";case MPageUI.TABLE_OPTIONS.SORT.DESCENDING:return"sort-desc";default:return""}},a.prototype.setData=function(a){return this.validateData(a),this.m_data=a,this.resetSelection(),this.processGroups(),this.processData(),this.refresh(),this},a.prototype.processData=function(){function a(b,g){var h=b.records,i=b.groups,j=0,k=null,l=null,m=0,n=null,o=null,p=0;if(h&&h.length)for(j=h.length,p=0;p<j;p++)k="record_"+e++,n=h[p],n._MPageUI={recordHash:k,selected:!1,rowReference:c.m_id+"_"+k},f[n._MPageUI.recordHash]=n;if(i&&i.length)for(m=i.length,p=0;p<m;p++)o=i[p],"undefined"==typeof o.expanded&&(o.expanded=!0),l="undefined"!=typeof o.id?o.id+"":"group_"+d++,o._MPageUI={depth:g,groupHash:l,groupReference:c.m_id+"_"+l},f[o._MPageUI.groupHash]=o,a(o,g+1)}var b=this.m_data,c=this,d=0,e=0,f=null;this.clearRecordHash(),f=this.getRecordHash(),a(b,0)},a.prototype.setGrouping=function(a){this.m_groupingData=a,this.m_data&&(this.resetSelection(),this.processGroups(),this.processData(),this.refresh())},a.prototype.resetSelection=function(){this.m_selection=null,this.m_lastClickedRecord=null},a.prototype.processGroups=function(){function a(c,d,e,f){if(d>=b.length)return f.records||(f.records=[]),void f.records.push(c);var g=b[d].field,h=b[d].display,i=c[g],j="undefined"==typeof b[d].expanded||b[d].expanded;e[i]||(f.groups||(f.groups=[]),f.groups.push({label:c[h],expanded:j}),e[i]={},e[i]._groupRef=f.groups.length-1),a(c,d+1,e[i],f.groups[e[i]._groupRef])}if(this.m_data){var b=this.m_groupingData;if(b){for(var c=this.getAllRecords(),d=c.length,e={},f={},g=0;g<d;g++)a(c[g],0,f,e);this.m_data=e}}},a.prototype.getRecordHash=function(){return this.m_recordHash||(this.m_recordHash={}),this.m_recordHash},a.prototype.validateData=function(a){if("object"!=typeof a)throw new Error("MPageUI.Table.prototype.validateData expects an object");if(!a.groups&&!a.records)throw new Error("MPageUI.Table.prototype.validateData expects the data to have groups or records")},a.prototype.getGroupById=function(a){function b(c){var d=c.groups,e=0,f=0;if(d&&d.length)for(e=d.length,f=0;f<e;f++){if(d[f].id===a)return d[f];var g=b(d[f]);if(g)return g}return null}if("string"!=typeof a)throw new Error("MPageUI.Table.prototype.getGroupById expects a string");return b(this.m_data)},a.prototype.getAllRecords=function(){function a(c){var d=c.groups,e=c.records,f=0,g=0,h=0;if(e&&e.length)for(g=e.length,h=0;h<g;h++)b.push(e[h]);if(d&&d.length)for(f=d.length,h=0;h<f;h++)a(d[h])}var b=[];return this.m_data?(a(this.m_data),b):b},a.prototype.clearRecordHash=function(){this.m_recordHash=null},a.prototype.sortBy=function(a){if("object"!=typeof a)throw new Error("MPageUI.Table.prototype.sortBy the parameter is not an object");if(a.column){var b=a.column.id,c=a.column.direction||null;if(!this.isColumnSortable(b))return;if(this.m_currentlySortedColumnId===b)null!==c?this.m_currentSortDirection=c:this.toggleSortDirection();else if(null!==c)this.m_currentSortDirection=c;else{var d=this.getColumnSortOptions(b);this.m_currentSortDirection=d.primary.direction}this.m_currentlySortedColumnId=b}this.refresh()},a.prototype.setOptions=function(a){if("object"!=typeof a)throw new Error("MPageUI.Table.prototype.setOptions the parameter is not an object");var b=this.m_options;if(a.columns){var c=b.columns;c.separators="undefined"!=typeof a.columns.separators?a.columns.separators:c.separators}if(a.highlight&&(b.highlight="string"!=typeof a.highlight?b.highlight:a.highlight),a.rows){var d=b.rows;d.striped="undefined"!=typeof a.rows.striped?a.rows.striped:d.striped}if(a.show){var e=b.show;e.header="undefined"!=typeof a.show.header?a.show.header:e.header}return"undefined"!=typeof a.select&&(b.select="number"!=typeof a.select?b.select:a.select),a.namespace&&(b.namespace="string"!=typeof a.namespace?b.namespace:a.namespace),this},a.prototype.getAllColumnIds=function(){for(var a=this.m_columns,b=a.length,c=[],d=0;d<b;d++)c.push(a[d].id);return c},a.prototype.getAllColumnIdsExcept=function(a){for(var b=this.m_columns,c=b.length,d=[],e=0;e<c;e++)b[e].id!==a&&d.push(b[e].id);return d},a.prototype.getSelection=function(){return this.m_selection||(this.m_selection=[]),this.m_selection},a.prototype.getSelectionData=function(){for(var a=this.getSelection(),b=a.length,c=[],d=0;d<b;d++)c.push({record:a[d],columns:a[d]._MPageUI.cellSelection||null});return c},a.prototype.getRecordFromElement=function(a){var b=a.attr("data-record"),c=null;return b?(c=this.getRecordHash()[b],c?c:null):null},a.prototype.setHover=function(a,b){if("function"!=typeof a)throw new Error("MPageUI.Table.prototype.setHover expects a function");return b&&(this.m_options.highlight=b),this.m_hoverCallBack=a,this},a.prototype.setOnColumnHeaderClickCallback=function(a){if("function"!=typeof a)throw new Error("MPageUI.Table.prototype.setOnColumnHeaderClick expects a function");return this.m_columnHeaderClickCallback=a,this},a.prototype.setOnCellClickCallback=function(a){if("function"!=typeof a)throw new Error("MPageUI.Table.prototype.setOnCellClickCallback expects a function");return this.m_cellClickCallback=a,this},a.prototype.setOnRowClickCallback=function(a){if("function"!=typeof a)throw new Error("MPageUI.Table.prototype.setOnRowClickCallback expects a function");return this.m_rowClickCallback=a,this},a.prototype.setOnGroupClickCallback=function(a){if("function"!=typeof a)throw new Error("MPageUI.Table.prototype.setOnGroupClickCallback expects a function");return this.m_groupClickCallback=a,this},a.prototype.onGroupClick=function(a){var b=$(a.currentTarget);if(!b||!b.length)return void logger.logWarning("MPageUI.Table.prototype.onGroupClick: a target element was not found.");var c=b.attr("data-group");if(!c)return void logger.logWarning("MPageUI.Table.prototype.onGroupClick: a group hash has not been associated to the group section, verify the group objects.");var d=this.getRecordHash()[c];return d?(("undefined"==typeof d.collapsible||d.collapsible)&&this.toggleGroup(d),void(this.m_groupClickCallback&&this.m_groupClickCallback({groups:[d],event:a}))):void logger.logWarning("MPageUI.Table.prototype.onGroupClick: a group was not found with the hash")},a.prototype.getColumnSortOptions=function(a){for(var b=this.getColumns(),c=0;c<b.length;c++){var d=b[c];if(d.id===a&&d.sortOptions)return d.sortOptions}return null},a.prototype.onColumnHeaderClick=function(a){var b=$(a.currentTarget);if(!b||!b.length)return void logger.logWarning("MPageUI.Table.prototype.onColumnHeaderClick: a target element was not found.");var c=b.attr("data-column");if(!c)return void logger.logWarning("MPageUI.Table.prototype.onColumnHeaderClick: a field has not been associated to the column, verify the column objects.");var d=this.getColumnSortOptions(c),e=!0;d&&"undefined"!=typeof d.userSort&&(e=d.userSort),e&&this.sortBy({column:{id:c}}),this.m_columnHeaderClickCallback&&this.m_columnHeaderClickCallback({records:this.getAllRecords(),columns:[c],event:a})},a.prototype.onHover=function(a){if(this.m_hoverCallBack){var b=$(a.currentTarget.parentElement),c=null,d=null,e={};if(!b||!b.length)return void logger.logWarning("MPageUI.Table.prototype.onHover: a target element was not found.");if(c=this.getRecordFromElement(b),!c)return void logger.logWarning("MPageUI.Table.prototype.onHover: could not find a record for the row");b=$(a.currentTarget),d=b.attr("data-column"),e={records:[c],columns:[d],event:a};var f=this.m_hoverCallBack(e);f&&(this.m_tableHover||(this.m_tableHover=(new MPageTooltip).setShowDelay(0)),this.m_tableHover.setX(a.pageX).setY(a.pageY).setAnchor(b).setContent(f),this.m_tableHover.show())}},a.prototype.onRowClick=function(a){var b=$(a.currentTarget),c=null;return b&&b.length?(c=this.getRecordFromElement(b),void(c&&(this.handleSelection(c,a),this.m_rowClickCallback&&this.m_rowClickCallback({records:[c],event:a})))):void logger.logWarning("MPageUI.Table.prototype.onRowClick: a target element was not found.")},a.prototype.getRecordIndex=function(a){for(var b=this.getAllRecords(),c=0;c<b.length;c++)if(b[c]===a)return c;return-1},a.prototype.handleShiftSelect=function(a,b){var c=this.getRecordIndex(a),d=this.getRecordIndex(b),e=d,f=d;b?c<d?e=c:f=c:(e=0,f=c),this.select({records:this.getAllRecords().slice(e,f+1),options:{clearPrevious:!0}})},a.prototype.handleControlSelect=function(a){var b={records:[a],options:{toggle:!0}};this.select(b),this.m_lastClickedRecord=a},a.prototype.handleSingleSelect=function(a,b){var c={records:[a],options:{}};1===b.length&&b[0]===a?c.options.toggle=!0:c.options.clearPrevious=!0,this.select(c),this.m_lastClickedRecord=a},a.prototype.handleSelection=function(a,b){var c=this.m_options.select,d=MPageUI.TABLE_OPTIONS.SELECT,e=this.getSelection(),f=b.shiftKey,g=b.ctrlKey,h=this.m_lastClickedRecord;switch(c){case d.SINGLE_ROW:this.handleSingleSelect(a,e);break;case d.MULTI_ROW:f?this.handleShiftSelect(a,h):g?this.handleControlSelect(a):this.handleSingleSelect(a,e)}},a.prototype.onCellClick=function(a){var b=$(a.currentTarget),c=null,d=null;return b&&b.length?(c=this.getRecordFromElement(b),d=b.attr("data-column"),void(c&&d&&this.m_cellClickCallback&&this.m_cellClickCallback({records:[c],columns:[d],event:a}))):void logger.logWarning("MPageUI.Table.prototype.onCellClick: a target element was not found.")},a.prototype.toggleGroup=function(a){function b(a){var c=a.groups,e=a.records,f=0,g=0,h=null,i=null,j=0;if(e){for(g=e.length,j=0;j<g;j++)h=e[j],d.find("#"+h._MPageUI.rowReference).hide();g||d.find("#"+a._MPageUI.groupReference).next("[data-type='no-records']").hide()}if(c&&c.length)for(f=c.length,j=0;j<f;j++)i=c[j],d.find("#"+i._MPageUI.groupReference).hide(),i.expanded&&b(i)}function c(a){var b=a.groups,e=a.records,f=0,g=0,h=null,i=null,j=a.expanded,k=0;if(e&&j){for(g=e.length,k=0;k<g;k++)h=e[k],d.find("#"+h._MPageUI.rowReference).css("display","");g||d.find("#"+a._MPageUI.groupReference).next("[data-type='no-records']").css("display","")}if(b&&b.length&&j)for(f=b.length,k=0;k<f;k++)i=b[k],d.find("#"+i._MPageUI.groupReference).css("display",""),c(i)}var d=this.getRootElement().find("tbody");a.expanded=!a.expanded,d.detach();var e=d.find("#"+a._MPageUI.groupReference);a.expanded?(d.find("#"+a._MPageUI.groupReference).removeClass("collapsed"),a._MPageUI.pruned?(a._MPageUI.pruned=null,e.after(this.renderData(a,a._MPageUI.depth+1))):c(a)):(d.find("#"+a._MPageUI.groupReference).addClass("collapsed"),b(a)),this.getRootElement().find(".table-body>table:first-child").append(d),this.resize()},a.prototype.getSelectionIndex=function(a){for(var b=this.getSelection(),c=b.length,d=0;d<c;d++)if(b[d]===a)return d;return-1},a.prototype.getSelectedCellIndex=function(a,b){var c=a._MPageUI,d=c.cellSelection;if(!d)return-1;for(var e=d.length,f=0;f<e;f++)if(d[f]===b)return f;return-1},a.prototype.select=function(a){var b=a.records;b||(b=this.getAllRecords());var c=b.length,d=null,e=a.columns,f=a.options&&a.options.toggle||!1,g=a.options&&a.options.clearPrevious||!1,h=e?e.length:0;g&&this.deselectAll();for(var i=0;i<c;i++)if(d=b[i],e)for(var j=0;j<h;j++)f?this.toggleCellSelection(d,e[j]):this.selectCell(d,e[j]);else f?this.toggleRecordSelection(d):this.selectRecord(d)},a.prototype.toggleCellSelection=function(a,b){var c=this.getSelectedCellIndex(a,b);c>-1||a._MPageUI.selected?this.deselectCell(a,b):this.selectCell(a,b)},a.prototype.selectCell=function(a,b){var c=a._MPageUI,d=this.getSelectedCellIndex(a,b);if(!(c.selected||d>-1)){c.cellSelection||(c.cellSelection=[]),c.cellSelection.push(b);var e=this.getSelectionIndex(a);e<0&&this.getSelection().push(a),c.cellSelection.length===this.m_columns.length?(c.cellSelection=null,$("#"+a._MPageUI.rowReference).addClass("selected").find(".selected").removeClass("selected"),c.selected=!0):$("#"+a._MPageUI.rowReference+" td[data-column='"+b+"']").addClass("selected")}},a.prototype.deselectCell=function(a,b){var c=a._MPageUI,d=c.selected,e=this.getSelectedCellIndex(a,b),f=e>-1||d,g=null;if(f){if(g=c.cellSelection,d){c.cellSelection=g=this.getAllColumnIdsExcept(b),$("#"+a._MPageUI.rowReference).removeClass("selected"),a._MPageUI.selected=!1;for(var h=0;h<g.length;h++)$("#"+a._MPageUI.rowReference+" td[data-column='"+g[h]+"']").addClass("selected")}e>-1&&g.splice(e,1),g.length||(c.cellSelection=null,this.getSelection().splice(this.getSelectionIndex(a),1)),$("#"+a._MPageUI.rowReference+" td[data-column='"+b+"']").removeClass("selected")}},a.prototype.deselectAll=function(){for(var a=this.getSelection(),b=a.length,c=null,d=null,e=0;e<b;e++)c=a[e],d=c._MPageUI,d.selected=!1,d.cellSelection=null;this.getRootElement().find(".selected").removeClass("selected"),this.m_selection=null},a.prototype.toggleRecordSelection=function(a){var b=a._MPageUI;return b.cellSelection?void this.select({records:[a],columns:this.getAllColumnIds(),options:{toggle:!0}}):void(b.selected?this.deselectRecord(a):this.selectRecord(a))},a.prototype.selectRecord=function(a){var b=a._MPageUI,c=this.getSelectionIndex(a);if(!b.selected){var d=$("#"+a._MPageUI.rowReference);b.cellSelection&&b.cellSelection.length&&(d.find(".selected").removeClass("selected"),b.cellSelection=null),d.addClass("selected"),a._MPageUI.selected=!0,c<0&&this.getSelection().push(a)}},a.prototype.deselectRecord=function(a){var b=a._MPageUI,c=this.getSelectionIndex(a);if(!(c<0)){var d=$("#"+a._MPageUI.rowReference);b.cellSelection&&b.cellSelection.length&&(b.cellSelection=null,d.find(".selected").removeClass("selected")),d.removeClass("selected"),b.selected=!1,this.getSelection().splice(c,1)}},a.prototype.renderColumns=function(){var a="<colgroup>";return a+=this.getColumns().map(function(a){return"<col data-column='"+a.id+"' class='"+(a.css||"")+"'>"}).join(""),a+"</colgroup>"},a.prototype.render=function(){var a=this.getClasses(),b="<div id='"+this.m_id+"' class='"+a+"'>";return b+="<div class='table-head'><table>",b+=this.renderColumns(),b+=this.renderHeader(),b+="</table></div>",b+="<div class='table-body'><table>",b+=this.renderColumns(),b+=this.renderBody(),b+="</table></div></div>"},a.prototype.getClasses=function(){var a="table-base";return a+=this.m_options.namespace?" "+this.m_options.namespace:"",a+=this.m_options.rows.striped?" table-striped":"",a+=this.m_options.columns.separators?" table-with-separators":"",a+=this.m_options.highlight?" "+this.m_options.highlight:""},a.prototype.renderHeader=function(){if(!this.m_options.show.header)return"";for(var a="<thead><tr>",b="",c=this.m_columns,d=c?c.length:0,e="",f=!0,g=0,h=0;h<d;h++)f=!0,g=c[h],b="",e="",g.width&&(e="width='"+g.width+"'"),this.isColumnSortable(g.id)&&(f="undefined"==typeof g.sortOptions.userSort||g.sortOptions.userSort,f&&(b+=" sortable ",this.m_currentlySortedColumnId===g.id&&(b+=this.getSortClass(this.m_currentSortDirection)))),a+="<th class='"+b+"' data-column='"+c[h].id+"' scope='col'"+e+">"+(c[h].label||"&nbsp;")+"</th>";return a+"</tr></thead>"},a.prototype.compare=function(a,b){try{return"number"==typeof a||"number"==typeof b?(a=a||0,b=b||0):"string"!=typeof a&&"string"!=typeof b||(a=(a||"").toUpperCase(),b=(b||"").toUpperCase()),a>b?-1:a<b?1:0}catch(a){return logger.logError("Called MPageUI.Table.prototype.compare(a,b) with an invalid value for a or b"),0}},a.prototype.getSortFunction=function(){var a=this,b=this.m_currentlySortedColumnId,c=this.getColumnSortOptions(b),d=c.primary.field,e=this.m_currentSortDirection;return function(b,f){var g=b[d],h=f[d],i=a.compare(g,h);if(0!==i)return e*i;if(c&&c.secondary)for(var j=c.secondary,k=j.length,l=0;l<k;l++)if(g=b[j[l].field],h=f[j[l].field],i=a.compare(g,h),0!==i)return j[l].direction*i;return 0}},a.prototype.renderNoRecords=function(a,b){return"<tr data-type='no-records' class='table-row no-records group-level-"+b+"'><td class='table-cell' colspan='"+this.m_columns.length+"'>"+a+"</td></tr>"},a.prototype.renderData=function(a,b){function c(a,b){var f=a.records,g=null,h=d.getColumnSortOptions(d.m_currentlySortedColumnId),i=a.groups,j=null,k=!0;if(f&&(h&&f.length&&(g=d.getSortFunction(),f.sort(g)),f.length?e+=d.renderRecords(f,b,a):"undefined"==typeof a.no_records?e+=d.renderNoRecords(i18n.discernabu.NO_RESULTS_FOUND,b):a.no_records&&(e+=d.renderNoRecords(a.no_records,b))),i&&i.length)for(var l=0;l<i.length;l++)j=i[l],"undefined"!=typeof j.expanded&&(k=j.expanded),j.showCount&&(j.recordCount=d.getRecordsCount(j,0)),e+=d.renderGroup(j,b),k?c(j,b+1):j._MPageUI.pruned=!0}var d=this,e="";return c(a,b),e},a.prototype.getRecordsCount=function(a){function b(a){var d=a.records,e=a.groups,f=null;if(d&&d.length&&(c+=d.length),e&&e.length)for(var g=0;g<e.length;g++)f=e[g],b(f)}var c=0;return b(a),c},a.prototype.renderGroup=function(a,b){var c="table-section group-level-"+b;a.css&&(c+=" "+a.css);var d=a.showCount||!1,e=!0,f=!0;"undefined"!=typeof a.collapsible&&(f=a.collapsible),"undefined"!=typeof a.expanded&&(e=a.expanded),e||(c+=" collapsed"),f&&(c+=" collapsible");var g=d?"<span data-group-count='"+a.recordCount+"' class='table-section-count'>&nbsp;("+a.recordCount+")</span>":"",h="";return h+="<tr id='"+a._MPageUI.groupReference+"' data-group='"+a._MPageUI.groupHash+"' class='"+c+"'>",h+="<th data-group='"+a._MPageUI.groupHash+"' colspan='"+this.m_columns.length+"'><span class='table-section-icon'></span>"+a.label+g+"</th>",h+"</tr>"},a.prototype.renderRecords=function(a,b,c){for(var d="",e=a.length,f=null,g=null,h=this.m_columns,i=h.length,j=null,k=null,l=null,m="",n="",o=null,p="",q="",r=0;r<e;r++){m="table-row",f=a[r],l=f._MPageUI,l.selected&&(m+=" selected"),b>0&&(q="data-group='"+c._MPageUI.groupHash+"'",m+=" group-level-"+b),this.m_options.rows.striped&&(m+=r%2===0?"":" stripe"),d+="<tr id='"+this.m_id+"_"+f._MPageUI.recordHash+"'"+q+" data-record='"+f._MPageUI.recordHash+"' class='"+m+"'>";for(var s=0;s<i;s++){if(p="",n="table-cell",g=h[s],j=g.id,l.cellSelection&&l.cellSelection.length){o=l.cellSelection;for(var t=0;t<o.length;t++)j===o[t]&&(n+=" selected")}g.width&&(p+="width='"+g.width+"'"),d+=g.row_heading?"<th scope='row'>":"<td data-record='"+f._MPageUI.recordHash+"' data-column='"+g.id+"' class='"+n+"'"+p+">",k=g.contents,k&&(d+=k(f)),d+=g.row_heading?"</th>":"</td>"}d+="</tr>"}return d},a.prototype.renderBody=function(){var a="",b=this.m_data;return a+="<tbody>"+this.renderData(b,0)+"</tbody>"},a.prototype.refresh=function(){var a=this.getRootElement();a&&a.length&&(a.find(".table-head>table:first-child")[0].innerHTML=this.renderColumns()+this.renderHeader(),a.find(".table-body>table:first-child")[0].innerHTML=this.renderColumns()+this.renderBody(),this.resize())},a.prototype.resize=function(){if(this.m_options.show.header){var a=this.getRootElement();a&&a.length&&(this.applyMaxHeight(),this.shiftTableHeader())}},a.prototype.applyMaxHeight=function(){var a=this.getRootElement(),b=this.getMaxHeight(),c=a.find(".table-head"),d=c[0].offsetHeight,e=b-d,f=a.find(".table-body");f.css({"max-height":e+"px"})},a.prototype.shiftTableHeader=function(){var a=this.getRootElement(),b=a.find(".table-body"),c=b.find("table:first"),d=b[0].offsetHeight,e=c[0].offsetHeight;e>d?a.find(".table-head").addClass("shifted"):a.find(".table-head").removeClass("shifted")},a.prototype.getMaxHeight=function(){return this.m_maxHeight},a.prototype.setMaxHeight=function(a){if("number"!=typeof a)throw new Error("MPageUI.Table.prototype.setMaxHeight expects a number");return this.m_maxHeight=a,this.resize(),this},a.prototype.attachEvents=function(){var a=this.getRootElement(),b=this;a.on("click.mpageui","thead th",function(a){b.onColumnHeaderClick(a)}),a.on("click.mpageui","tbody tr.table-row",function(a){b.onRowClick(a)}),a.on("click.mpageui","tbody tr td.table-cell",function(a){b.onCellClick(a)}),a.on("click.mpageui","tbody tr.table-section",function(a){b.onGroupClick(a)}),a.on("mouseenter.mpageui","tbody tr td.table-cell",function(a){b.onHover(a)})},a}(),MPageUI.TEXT_CONTROL_OPTIONS={TYPE:{TEXT:"field-text",TEXT_AREA:"field-textarea"}},MPageUI.TextControl=function(){var a=function(){return this.base(),this.m_headerLabel="",this.m_width=null,this.m_currentValue="",this.m_requiredInd=!1,this.m_fieldType=MPageUI.TEXT_CONTROL_OPTIONS.TYPE.TEXT,this.m_placeholder="",this.m_onChangeCallback=null,this.m_onKeyUpCallback=null,this.m_onFocusCallback=null,this.m_$inputElement=null,this};return MPageUI.extend(a,MPageUI.UIComponent),a.prototype.getInputId=function(){return this.m_id+"Input"},a.prototype.getLabelId=function(){return this.m_id+"Label"},a.prototype.setPlaceholder=function(a){return this.m_placeholder=a,this.getInputElement().attr("placeholder",a),this},a.prototype.setHeaderLabel=function(a){if(!CERN_Validate.string.isString(a))throw new Error("MPageUI.TextControl.prototype.setHeaderLabel expects a string.");return this.m_headerLabel=a,this},a.prototype.setWidth=function(a){if(!CERN_Validate.number.isPositive(a))throw new Error("TextControl.prototype.setWidth expects a number > 0");return this.m_width=a,this},a.prototype.getCurrentValue=function(){return this.m_currentValue},a.prototype.setCurrentValue=function(a){if(!CERN_Validate.string.isString(a))throw new Error("TextControl.prototype.setCurrentValue expects a string.");return this.m_currentValue=a,this.getInputElement().val(a),this},a.prototype.isRequired=function(){return this.m_requiredInd},a.prototype.setRequired=function(a){if("boolean"!=typeof a)throw new Error("TextControl.prototype.setRequired expects a boolean.");return this.m_requiredInd=a,this.getInputElement().prop("required",a),this},a.prototype.setOnChangeCallback=function(a){if("function"!=typeof a)throw new Error("TextControl.prototype.setOnChangeCallback expects a function");return this.m_onChangeCallback=a,this},a.prototype.setOnKeyUpCallback=function(a){return this.m_onKeyUpCallback=a,this},a.prototype.render=function(){var a=["field",this.m_fieldType,this.isRequired()?"field-required":""];a=a.join(" ");var b="<p id='"+this.m_id+"' class='"+a+"'>";return b+=this.renderLabel(),b+=this.renderInput(),b+="</p>"},a.prototype.renderLabel=function(){var a="";return this.m_headerLabel.length&&(a+="<label id='"+this.getLabelId()+"' for='"+this.getInputId()+"'>"+this.m_headerLabel+"</label>"),a},a.prototype.renderInput=function(){var a=this.isRequired()?"required":"",b="placeholder='"+this.m_placeholder+"'",c=this.isRequired()?"aria-required='true'":"",d=[b,a,c].join(" ");return"<input type='text' id='"+this.getInputId()+"' class='field-input' "+d+">"},a.prototype.attachEvents=function(){var a=this,b=this.getInputElement();b.on("input.mpageui",function(){a.onUpdate(this.value),a.emit("input",this.value)}),b.on("keyup.mpageui",function(b){a.m_onKeyUpCallback&&a.m_onKeyUpCallback(b),a.emit("keyup",b)}),b.on("focus.mpageui",function(b){a.m_onFocusCallback&&a.m_onFocusCallback(b),a.emit("focus",b)})},a.prototype.onUpdate=function(a){this.setCurrentValue(a),this.m_onChangeCallback&&this.m_onChangeCallback(a)},a.prototype.getInputElement=function(){return this.m_$inputElement&&this.m_$inputElement.length||(this.m_$inputElement=$("#"+this.getInputId())),this.m_$inputElement},a.prototype.isEmpty=function(){return CERN_Validate.string.isBlank(this.m_currentValue)},objectAssign(a.prototype,EventEmitter.prototype),a}(),MPageUI.TextArea=function(){var a=function(){return this.base(),this.m_height=null,this.m_rows=1,this.m_fieldType=MPageUI.TEXT_CONTROL_OPTIONS.TYPE.TEXT_AREA,this};return MPageUI.extend(a,MPageUI.TextControl),a.prototype.setHeightInPixels=function(a){if(!CERN_Validate.number.isPositive(a))throw new Error("TextArea.prototype.setHeightInPixels expects a number > 0.");return this.m_height=a,this},a.prototype.setHeightInRows=function(a){if(!CERN_Validate.number.isGreaterThanOrEqualTo(1))throw new Error("TextArea.prototype.setHeightInRows expects an integer >= 1");return this.m_rows=a,this},a.prototype.renderInput=function(){var a="style='";a+=this.m_width?"width:"+this.m_width+"px;":"",a+=this.m_height?"height:"+this.m_height+"px;":"",a+="'";var b=["rows='"+this.m_rows+"'",a,this.m_placeholder?"placeholder='"+this.m_placeholder+"'":"",this.isRequired()?"required":"",this.isRequired()?"aria-required='true'":""].join(" ");return"<textarea id='"+this.getInputId()+"' class='field-input' "+b+">"+this.m_currentValue+"</textarea>"},a}(),MPageUI.Search=function(){var a=27,b=function(a,b){return b.replace(a,function(a){return"<b>"+a+"</b>"})},c=function(a,c,d){return d(a,b.bind(this,c))},d=function(a,b,d,e){var f=new MenuSelection;return f.setLabel(c(a,b,e)),f.setClickFunction(function(){d(a)}),f},e=function(a,b){return"undefined"!=typeof a[b]},f=function(a,b){e(b,"label")&&a.setHeaderLabel(b.label),e(b,"placeholder")&&a.setPlaceholder(b.placeholder),e(b,"required")&&a.setRequired(b.required)},g=function(a,b,c,d){var e=(new MPageUI.TextControl).on("input",b).on("keyup",c).on("focus",d);return f(e,a),e},h=function(a){a.getMenuItemArray()&&a.getMenuItemArray().length&&(MP_MenuManager.updateMenuObject(a),MP_MenuManager.showMenu(a.getId()))},i=function(a,b,c,e,f){b.forEach(function(b){a.addMenuItem(d(b,c,e,f))})},j=function(a,b,c){return a?c.filter(function(c){return a(c,function(a){return b.test(a)})}):c},k=function(){MP_MenuManager.closeMenuStack(!1);
},l=function(a){var b=a.getMenuItemArray();if(b&&b.length)for(;b.length;)a.removeMenuItem(b[b.length-1])},m=function(a,b){var c=new Menu(a);return c.setTypeClass("dropdown-standard-menu"),c.setAnchorElementId(b),c.setAnchorConnectionCorner(["bottom","left"]),c.setContentConnectionCorner(["top","left"]),c.setContentParentId(b),c.setIsRootMenu(!0),c.setAutoFlipVertical(!1),c.setIsPersistent(!0),c.setIsActive=function(a){Menu.prototype.setIsActive.call(c,a),a||MP_MenuManager.deleteMenuObject(c.getId())},c},n=function(b){return b&&b.keyCode===a},o=function(a,b){return new RegExp(a,b?"i":"")},p=function(a,b,c,d,e){k(),l(a),b&&b.length&&(i(a,b,d,c,e),h(a))},q=function(a,b,c,d,e,f,g){a.getRootElement().removeClass("search-control-loading"),a.getValue()&&p(b,j(e,c,d),f,c,g)},r=function(a){k(),a.getRootElement().removeClass("search-control-loading").addClass("search-control-error")},s=function(a,b,c,d,e,f,g){a.getRootElement().removeClass("search-control-error").addClass("search-control-loading"),b(a.getValue()).then(function(b){q(a,e,o(a.getValue(),d.ignoreCase),b,c,f,g)},function(){r(a)})};return MPageUI.createClass({emitter:!0,init:function(){this.m_filter=null,this.m_menu=m(this.m_id+"Menu",this.m_id),this.m_options={ignoreCase:!0,label:"",placeholder:"",required:!1,throttle:50},this.m_provider=null,this.m_template=null,this.m_textControl=g(this.m_options,this.handleInput.bind(this),this.handleKeyUp.bind(this),this.handleFocus.bind(this)),this.m_timeout=null},handleFocus:function(){this.getValue()&&s(this,this.m_provider,this.m_filter,this.m_options,this.m_menu,this.handleSelect.bind(this),this.m_template)},handleKeyUp:function(a){n(a)&&k()},handleInput:function(a){clearTimeout(this.m_timeout),this.m_timeout=setTimeout(function(){return a?void s(this,this.m_provider,this.m_filter,this.m_options,this.m_menu,this.handleSelect.bind(this),this.m_template):void k()}.bind(this),this.m_options.throttle)},handleSelect:function(a){this.emit("select",a)},setOptions:function(a){return this.m_options=objectAssign(this.m_options,a),f(this.m_textControl,a),this},setValue:function(a){return this.m_textControl.setCurrentValue(a),this},getValue:function(){return this.m_textControl.getCurrentValue()},setFilter:function(a){return this.m_filter=a,this},setTemplate:function(a){return this.m_template=a,this},setProvider:function(a){return this.m_provider=a,this},render:function(){return"<div id='"+this.m_id+"' class='search-control'>"+this.m_textControl.render()+"</div>"},attachEvents:function(){this.m_textControl.attachEvents()}})}(),MPageUI.PANEL_OPTIONS={BEHAVIOR:{OVERLAY:"overlay",SQUISH:"squish"},SIDE:{START:"start",END:"end"},WIDTH:{SMALL:"panel-small",MEDIUM:"panel-medium",LARGE:"panel-large"}},MPageUI.PanelLayout=MPageUI.createClass({emitter:!0,init:function(){this.m_dimensions={height:0},this.m_expanded=!1,this.m_open=!1,this.m_options={behavior:MPageUI.PANEL_OPTIONS.BEHAVIOR.OVERLAY,side:MPageUI.PANEL_OPTIONS.SIDE.END,width:MPageUI.PANEL_OPTIONS.WIDTH.MEDIUM},this.m_panel=null,this.m_content=null},setOptions:function(a){var b=this.getRootElement();return a.width&&b.removeClass(this.m_options.width),objectAssign(this.m_options,a),b.attr("data-slide-panel-behavior",this.m_options.behavior),b.attr("data-slide-panel-side",this.m_options.side),b.addClass(a.width),this},resize:function(a){if(a||(a=this.m_dimensions),this.m_dimensions=a,this.m_content.resize(a),this.m_open){var b=function(a){return a&&a.length?a[0].offsetHeight:0},c=0;if(this.m_expanded)c=Math.min(a.height,this.m_panel.absoluteHeight()),this.getRootElement().css({"min-height":c+"px"}),this.m_panel.resize({maxHeight:a.height,height:c});else if(this.m_open){var d=b(this.m_content.getRootElement()),e=this.m_panel.absoluteHeight(),f=Math.min(a.height/2,e);c=Math.max(f,d),this.getRootElement().css({"min-height":c+"px"}),this.m_panel.resize({maxHeight:a.height,height:c})}}},handlePanelExpand:function(){this.m_expanded=!this.m_expanded,this.resize(this.m_dimensions),this.emit("panelToggleExpand",this.m_expanded)},handlePanelClose:function(){this.closePanel()},openPanel:function(){this.m_open=!0,this.getRootElement().addClass("slide-panel-open"),this.resize(this.m_dimensions),this.emit("panelOpen")},closePanel:function(){this.m_open=!1,this.getRootElement().removeClass("slide-panel-open").css({"min-height":"0px"}),this.emit("panelClose")},isPanelOpen:function(){return this.m_open},getContent:function(){return this.m_content},setContent:function(a){return this.m_content=a,this},getPanel:function(){return this.m_panel},setPanel:function(a){return this.m_panel=a,this.m_panel.on("panelToggleExpand",this.handlePanelExpand.bind(this)),this.m_panel.on("panelClose",this.handlePanelClose.bind(this)),this},render:function(){var a="panel-layout "+this.m_options.width,b="<div id='"+this.m_id+"' data-slide-panel-behavior='"+this.m_options.behavior+"' data-slide-panel-side='"+this.m_options.side+"' class='"+a+"'>";return b+="<div class='slide-panel-detail'>"+this.m_content.render()+"</div>",b+="<div class='slide-panel-master'>"+this.m_panel.render()+"</div>",b+"</div>"},attachEvents:function(){this.m_content.attachEvents(),this.m_panel.attachEvents()}}),MPageUI.PanelLayoutInterface={init:function(){this.m_layout=new MPageUI.PanelLayout,this.m_layout.on("panelClose",function(){this.emit("panelClose")}.bind(this)),this.m_layout.on("panelOpen",function(){this.emit("panelOpen")}.bind(this)),this.m_layout.on("panelToggleExpand",function(a){this.emit("panelToggleExpand",a)}.bind(this))},setOptions:function(a){this.m_layout.setOptions(a)},openPanel:function(){this.m_layout.openPanel()},closePanel:function(){this.m_layout.closePanel()},getContent:function(){return this.m_layout.getContent()},setContent:function(a){return this.m_layout.setContent(a),this},getPanel:function(){return this.m_layout.getPanel()},setPanel:function(a){return this.m_layout.setPanel(a),this},render:function(){return this.m_layout.render()},resize:function(a){this.m_layout.resize(a)},attachEvents:function(){this.m_layout.attachEvents()}},MPageUI.ComponentPanel=function(){var a=function(a){return a&&a.length?a[0].offsetHeight:0},b=function(a){return a&&a.length?a[0].scrollHeight:0},c=function(a){a&&a.attachEvents()};return MPageUI.createClass({emitter:!0,init:function(){this.m_dimensions={height:0},this.m_expanded=!1,this.m_actionsComponent=null,this.m_titleComponent=null,this.m_alertsComponent=null,this.m_bodyComponent=null},handlePanelExpand:function(){this.m_expanded=!this.m_expanded,this.m_expanded?this.getRootElement().addClass("panel-expanded"):this.getRootElement().removeClass("panel-expanded"),this.emit("panelToggleExpand",this.m_expanded)},handlePanelClose:function(){this.emit("panelClose")},getActionsComponent:function(){return this.m_actionsComponent},setActionsComponent:function(a){return this.m_actionsComponent=a,this},getTitleComponent:function(){return this.m_titleComponent},setTitleComponent:function(a){return this.m_titleComponent=a,this},getAlertsComponent:function(){return this.m_alertsComponent},setAlertsComponent:function(a){return this.m_alertsComponent=a,this},getBodyComponent:function(){return this.m_bodyComponent},setBodyComponent:function(a){return this.m_bodyComponent=a,this},absoluteHeight:function(){var c=this.getRootElement();return a(c.find(".component-panel-actions-section"))+a(c.find(".component-panel-title-section"))+a(c.find(".component-panel-alerts-section"))+b(c.find(".component-panel-body-section"))+a(c.find(".panel-expander"))},resize:function(c){c||(c=this.m_dimensions),this.m_dimensions=c;var d=this.getRootElement(),e=d.find(".panel-expander"),f=a(d.find(".component-panel-actions-section")),g=a(d.find(".component-panel-title-section")),h=a(d.find(".component-panel-alerts-section")),i=c.height-(f+g+h-1),j=b(d.find(".component-panel-body-section")),k=0;i<j&&c.height<c.maxHeight||this.m_expanded?(e.show(),k=a(e)):this.m_expanded||e.hide(),d.find(".component-panel-body-section").css({"max-height":Math.max(0,i-k)+"px"})},render:function(){var a=function(){return this.m_actionsComponent?"<div class='component-panel-actions-section'>"+this.m_actionsComponent.render()+"</div>":""}.bind(this),b=function(){return this.m_titleComponent?"<div class='component-panel-title-section'>"+this.m_titleComponent.render()+"</div>":""}.bind(this),c=function(){return this.m_alertsComponent?"<div class='component-panel-alerts-section'>"+this.m_alertsComponent.render()+"</div>":""}.bind(this),d=function(){return this.m_bodyComponent?"<div class='component-panel-body-section'>"+this.m_bodyComponent.render()+"</div>":""}.bind(this),e="<div id='"+this.m_id+"' class='component-panel'>";return e+="<div class='panel-close'></div>",e+=a(),e+=b(),e+=c(),e+=d(),e+="<div class='panel-expander'><span></span></div>",e+"</div>"},attachEvents:function(){c(this.m_actionsComponent),c(this.m_titleComponent),c(this.m_alertsComponent),c(this.m_bodyComponent),this.getRootElement().find(".panel-expander").on("click.mpageui",function(){this.handlePanelExpand()}.bind(this)),this.getRootElement().find(".panel-close").on("click.mpageui",function(){this.handlePanelClose()}.bind(this))}})}(),MPageUI.PanelInterface={init:function(){this.m_panel=new MPageUI.ComponentPanel,this.m_panel.on("panelToggleExpand",function(a){this.emit("panelToggleExpand",a)}.bind(this)),this.m_panel.on("panelClose",function(){this.emit("panelClose")}.bind(this))},setActions:function(a){return this.m_panel.setActionsComponent(a),this},setTitle:function(a){return this.m_panel.setTitleComponent(a),this},setAlerts:function(a){return this.m_panel.setAlertsComponent(a),this},setBody:function(a){return this.m_panel.setBodyComponent(a),this},getActions:function(){return this.m_panel.getActionsComponent()},getTitle:function(){return this.m_panel.getTitleComponent()},getAlerts:function(){return this.m_panel.getAlertsComponent()},getBody:function(){return this.m_panel.getBodyComponent()},absoluteHeight:function(){return this.m_panel.absoluteHeight()},resize:function(a){this.m_panel.resize(a)},render:function(){return this.m_panel.render()},attachEvents:function(){this.m_panel.attachEvents()}},MPageUI.ComponentPanelActions=function(){var a=3,b=function(a){return a.map(function(a){return{label:a.label,onSelect:a.action,type:MPageUI.MENU_OPTIONS.TYPE.SELECT}})},c=function(b){var c=[],d=b.length;b.length>a&&(d=a-1);for(var e=0;e<d;e++)c.push((new MPageUI.Button).setLabel(b[e].label).setOnClickCallback(b[e].action).setStyle(MPageUI.BUTTON_OPTIONS.STYLE.SECONDARY));return c},d=function(c){if(c.length<=a)return null;var d=new MPageUI.SplitButton;return d.setStyle(MPageUI.BUTTON_OPTIONS.STYLE.SECONDARY),d.setLabelButtonClickCallback(c[a-1].action),d.setLabel(c[a-1].label),d.addOptions(b(c.slice(a,c.length))),d},e=function(a,b){return b&&a.push(b),a},f=function(a){return e(c(a),d(a))},g=function(a){return a.map(function(a){return a.render()}).join("")};return MPageUI.createClass({init:function(){this.m_buttons=[]},setActions:function(a){this.m_buttons=f(a||[]),this.getRootElement().html(g(this.m_buttons)),this.attachEvents()},render:function(){return"<div id='"+this.m_id+"' class='component-panel-actions'>"+g(this.m_buttons)+"</div>"},attachEvents:function(){this.m_buttons.forEach(function(a){a.attachEvents()})}})}(),MPageUI.PanelActionsInterface=function(){return{init:function(){this.m_componentPanelActions=new MPageUI.ComponentPanelActions},setActions:function(a){return this.m_componentPanelActions.setActions(a),this},render:function(){return this.m_componentPanelActions.render()},attachEvents:function(){this.m_componentPanelActions.attachEvents()}}}(),MPageUI.ComponentPanelTitle=function(){var a=function(a){return(a||[]).map(function(a){return"<div class='component-panel-title-row'><div>"+(a.primary||"")+"</div><div>"+(a.secondary||"")+"</div></div>"}).join("")};return MPageUI.createClass({init:function(){this.m_title="",this.m_subTitles=[]},setTitle:function(a){return this.m_title=a,this.getRootElement().find("h3:first").html(a||""),this},setSubTitles:function(b){return this.m_subTitles=b,this.getRootElement().find("div:first").html(a(b)),this},render:function(){return"<div id='"+this.m_id+"' class='component-panel-title'><h3>"+(this.m_title||"")+"</h3><div>"+a(this.m_subTitles)+"</div></div>"}})}(),MPageUI.PanelTitleInterface={init:function(){this.title=new MPageUI.ComponentPanelTitle},setTitle:function(a){this.title.setTitle(a.title),this.title.setSubTitles(a.subTitles)},render:function(){return this.title.render()}},MPageUI.ComponentPanelAlerts=function(){var a=function(a){var b=new MPageUI.AlertBanner;return b.setPrimaryText(a.primaryText||""),b.setSecondaryText(a.secondaryText||""),b.setType(a.type||MPageUI.ALERT_OPTIONS.TYPE.INFO),b},b=function(b){return(b||[]).map(function(b){return a(b).render()}).join("")};return MPageUI.createClass({init:function(){this.m_alerts=[]},setAlerts:function(a){return this.m_alerts=a,this.getRootElement().html(b(this.m_alerts)),this},render:function(){return"<div id='"+this.m_id+"' class='component-panel-alerts'>"+b(this.m_alerts)+"</div>"}})}(),MPageUI.PanelAlertsInterface=function(){return{init:function(){this.m_componentPanelAlerts=new MPageUI.ComponentPanelAlerts},setAlerts:function(a){return this.m_componentPanelAlerts.setAlerts(a),this},render:function(){return this.m_componentPanelAlerts.render()}}}(),function(a,b,c){function d(b,c){this.bodyOverflowX,this.callbacks={hide:[],show:[]},this.checkInterval=null,this.Content,this.$el=a(b),this.$elProxy,this.elProxyPosition,this.enabled=!0,this.options=a.extend({},i,c),this.mouseIsOverProxy=!1,this.namespace="tooltipster-"+Math.round(1e5*Math.random()),this.Status="hidden",this.timerHide=null,this.timerShow=null,this.$tooltip,this.options.iconTheme=this.options.iconTheme.replace(".",""),this.options.theme=this.options.theme.replace(".",""),this._init()}function e(b,c){var d=!0;return a.each(b,function(a,e){if("undefined"==typeof c[a]||b[a]!==c[a])return d=!1,!1}),d}function f(){return!k&&j}function g(){var a=c.body||c.documentElement,b=a.style,d="transition";if("string"==typeof b[d])return!0;v=["Moz","Webkit","Khtml","O","ms"],d=d.charAt(0).toUpperCase()+d.substr(1);for(var e=0;e<v.length;e++)if("string"==typeof b[v[e]+d])return!0;return!1}var h="tooltipster",i={animation:"fade",arrow:!0,arrowColor:"",autoClose:!0,content:null,contentAsHTML:!1,contentCloning:!0,debug:!0,delay:200,minWidth:0,maxWidth:null,functionInit:function(a,b){},functionBefore:function(a,b){b()},functionReady:function(a,b){},functionAfter:function(a){},hideOnClick:!1,icon:"(?)",iconCloning:!0,iconDesktop:!1,iconTouch:!1,iconTheme:"tooltipster-icon",interactive:!1,interactiveTolerance:350,multiple:!1,offsetX:0,offsetY:0,onlyOne:!1,position:"top",positionTracker:!1,positionTrackerCallback:function(a){"hover"==this.option("trigger")&&this.option("autoClose")&&this.hide()},restoration:"current",speed:350,timer:0,theme:"tooltipster-default",touchDevices:!0,trigger:"hover",updateAnimation:!0};d.prototype={_init:function(){var b=this;if(c.querySelector){var d=null;void 0===b.$el.data("tooltipster-initialTitle")&&(d=b.$el.attr("title"),void 0===d&&(d=null),b.$el.data("tooltipster-initialTitle",d)),null!==b.options.content?b._content_set(b.options.content):b._content_set(d);var e=b.options.functionInit.call(b.$el,b.$el,b.Content);"undefined"!=typeof e&&b._content_set(e),b.$el.removeAttr("title").addClass("tooltipstered"),!j&&b.options.iconDesktop||j&&b.options.iconTouch?("string"==typeof b.options.icon?(b.$elProxy=a('<span class="'+b.options.iconTheme+'"></span>'),b.$elProxy.text(b.options.icon)):b.options.iconCloning?b.$elProxy=b.options.icon.clone(!0):b.$elProxy=b.options.icon,b.$elProxy.insertAfter(b.$el)):b.$elProxy=b.$el,"hover"==b.options.trigger?(b.$elProxy.on("mouseenter."+b.namespace,function(){f()&&!b.options.touchDevices||(b.mouseIsOverProxy=!0,b._show())}).on("mouseleave."+b.namespace,function(){f()&&!b.options.touchDevices||(b.mouseIsOverProxy=!1)}),j&&b.options.touchDevices&&b.$elProxy.on("touchstart."+b.namespace,function(){b._showNow()})):"click"==b.options.trigger&&b.$elProxy.on("click."+b.namespace,function(){f()&&!b.options.touchDevices||b._show()})}},_show:function(){var a=this;"shown"!=a.Status&&"appearing"!=a.Status&&(a.options.delay?a.timerShow=setTimeout(function(){("click"==a.options.trigger||"hover"==a.options.trigger&&a.mouseIsOverProxy)&&a._showNow()},a.options.delay):a._showNow())},_showNow:function(c){var d=this;d.options.functionBefore.call(d.$el,d.$el,function(){if(d.enabled&&null!==d.Content){c&&d.callbacks.show.push(c),d.callbacks.hide=[],clearTimeout(d.timerShow),d.timerShow=null,clearTimeout(d.timerHide),d.timerHide=null,d.options.onlyOne&&a(".tooltipstered").not(d.$el).each(function(b,c){var d=a(c),e=d.data("tooltipster-ns");a.each(e,function(a,b){var c=d.data(b),e=c.status(),f=c.option("autoClose");"hidden"!==e&&"disappearing"!==e&&f&&c.hide()})});var e=function(){d.Status="shown",a.each(d.callbacks.show,function(a,b){b.call(d.$el)}),d.callbacks.show=[]};if("hidden"!==d.Status){var f=0;"disappearing"===d.Status?(d.Status="appearing",g()?(d.$tooltip.clearQueue().removeClass("tooltipster-dying").addClass("tooltipster-"+d.options.animation+"-show"),d.options.speed>0&&d.$tooltip.delay(d.options.speed),d.$tooltip.queue(e)):d.$tooltip.stop().fadeIn(e)):"shown"===d.Status&&e()}else{d.Status="appearing";var f=d.options.speed;d.bodyOverflowX=a("body").css("overflow-x"),a("body").css("overflow-x","hidden");var h="tooltipster-"+d.options.animation,i="-webkit-transition-duration: "+d.options.speed+"ms; -webkit-animation-duration: "+d.options.speed+"ms; -moz-transition-duration: "+d.options.speed+"ms; -moz-animation-duration: "+d.options.speed+"ms; -o-transition-duration: "+d.options.speed+"ms; -o-animation-duration: "+d.options.speed+"ms; -ms-transition-duration: "+d.options.speed+"ms; -ms-animation-duration: "+d.options.speed+"ms; transition-duration: "+d.options.speed+"ms; animation-duration: "+d.options.speed+"ms;",k=d.options.minWidth?"min-width:"+Math.round(d.options.minWidth)+"px;":"",l=d.options.maxWidth?"max-width:"+Math.round(d.options.maxWidth)+"px;":"",m=d.options.interactive?"pointer-events: auto;":"";if(d.$tooltip=a('<div class="tooltipster-base '+d.options.theme+'" style="'+k+" "+l+" "+m+" "+i+'"><div class="tooltipster-content"></div></div>'),g()&&d.$tooltip.addClass(h),d._content_insert(),d.$tooltip.appendTo("body"),d.reposition(),d.options.functionReady.call(d.$el,d.$el,d.$tooltip),g()?(d.$tooltip.addClass(h+"-show"),d.options.speed>0&&d.$tooltip.delay(d.options.speed),d.$tooltip.queue(e)):d.$tooltip.css("display","none").fadeIn(d.options.speed,e),d._interval_set(),a(b).on("scroll."+d.namespace+" resize."+d.namespace,function(){d.reposition()}),d.options.autoClose)if(a("body").off("."+d.namespace),"hover"==d.options.trigger){if(j&&setTimeout(function(){a("body").on("touchstart."+d.namespace,function(){d.hide()})},0),d.options.interactive){j&&d.$tooltip.on("touchstart."+d.namespace,function(a){a.stopPropagation()});var n=null;d.$elProxy.add(d.$tooltip).on("mouseleave."+d.namespace+"-autoClose",function(){clearTimeout(n),n=setTimeout(function(){d.hide()},d.options.interactiveTolerance)}).on("mouseenter."+d.namespace+"-autoClose",function(){clearTimeout(n)})}else d.$elProxy.on("mouseleave."+d.namespace+"-autoClose",function(){d.hide()});d.options.hideOnClick&&d.$elProxy.on("click."+d.namespace+"-autoClose",function(){d.hide()})}else"click"==d.options.trigger&&(setTimeout(function(){a("body").on("click."+d.namespace+" touchstart."+d.namespace,function(){d.hide()})},0),d.options.interactive&&d.$tooltip.on("click."+d.namespace+" touchstart."+d.namespace,function(a){a.stopPropagation()}))}d.options.timer>0&&(d.timerHide=setTimeout(function(){d.timerHide=null,d.hide()},d.options.timer+f))}})},_interval_set:function(){var b=this;b.checkInterval=setInterval(function(){if(0===a("body").find(b.$el).length||0===a("body").find(b.$elProxy).length||"hidden"==b.Status||0===a("body").find(b.$tooltip).length)"shown"!=b.Status&&"appearing"!=b.Status||b.hide(),b._interval_cancel();else if(b.options.positionTracker){var c=b._repositionInfo(b.$elProxy),d=!1;e(c.dimension,b.elProxyPosition.dimension)&&("fixed"===b.$elProxy.css("position")?e(c.position,b.elProxyPosition.position)&&(d=!0):e(c.offset,b.elProxyPosition.offset)&&(d=!0)),d||(b.reposition(),b.options.positionTrackerCallback.call(b,b.$el))}},200)},_interval_cancel:function(){clearInterval(this.checkInterval),this.checkInterval=null},_content_set:function(a){"object"==typeof a&&null!==a&&this.options.contentCloning&&(a=a.clone(!0)),this.Content=a},_content_insert:function(){var a=this,b=this.$tooltip.find(".tooltipster-content");"string"!=typeof a.Content||a.options.contentAsHTML?b.empty().append(a.Content):b.text(a.Content)},_update:function(a){var b=this;b._content_set(a),null!==b.Content?"hidden"!==b.Status&&(b._content_insert(),b.reposition(),b.options.updateAnimation&&(g()?(b.$tooltip.css({width:"","-webkit-transition":"all "+b.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms","-moz-transition":"all "+b.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms","-o-transition":"all "+b.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms","-ms-transition":"all "+b.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms",transition:"all "+b.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms"}).addClass("tooltipster-content-changing"),setTimeout(function(){"hidden"!=b.Status&&(b.$tooltip.removeClass("tooltipster-content-changing"),setTimeout(function(){"hidden"!==b.Status&&b.$tooltip.css({"-webkit-transition":b.options.speed+"ms","-moz-transition":b.options.speed+"ms","-o-transition":b.options.speed+"ms","-ms-transition":b.options.speed+"ms",transition:b.options.speed+"ms"})},b.options.speed))},b.options.speed)):b.$tooltip.fadeTo(b.options.speed,.5,function(){"hidden"!=b.Status&&b.$tooltip.fadeTo(b.options.speed,1)}))):b.hide()},_repositionInfo:function(a){return{dimension:{height:a.outerHeight(!1),width:a.outerWidth(!1)},offset:a.offset(),position:{left:parseInt(a.css("left")),top:parseInt(a.css("top"))}}},hide:function(c){var d=this;c&&d.callbacks.hide.push(c),d.callbacks.show=[],clearTimeout(d.timerShow),d.timerShow=null,clearTimeout(d.timerHide),d.timerHide=null;var e=function(){a.each(d.callbacks.hide,function(a,b){b.call(d.$el)}),d.callbacks.hide=[]};if("shown"==d.Status||"appearing"==d.Status){d.Status="disappearing";var f=function(){d.Status="hidden","object"==typeof d.Content&&null!==d.Content&&d.Content.detach(),d.$tooltip.remove(),d.$tooltip=null,a(b).off("."+d.namespace),a("body").off("."+d.namespace).css("overflow-x",d.bodyOverflowX),a("body").off("."+d.namespace),d.$elProxy.off("."+d.namespace+"-autoClose"),d.options.functionAfter.call(d.$el,d.$el),e()};g()?(d.$tooltip.clearQueue().removeClass("tooltipster-"+d.options.animation+"-show").addClass("tooltipster-dying"),d.options.speed>0&&d.$tooltip.delay(d.options.speed),d.$tooltip.queue(f)):d.$tooltip.stop().fadeOut(d.options.speed,f)}else"hidden"==d.Status&&e();return d},show:function(a){return this._showNow(a),this},update:function(a){return this.content(a)},content:function(a){return"undefined"==typeof a?this.Content:(this._update(a),this)},reposition:function(){function c(){var c=a(b).scrollLeft();C-c<0&&(f=C-c,C=c),C+i-c>g&&(f=C-(g+c-i),C=g+c-i)}function d(c,d){h.offset.top-a(b).scrollTop()-j-F-12<0&&d.indexOf("top")>-1&&(H=c),h.offset.top+h.dimension.height+j+12+F>a(b).scrollTop()+a(b).height()&&d.indexOf("bottom")>-1&&(H=c,E=h.offset.top-j-F-12)}var e=this;if(0!==a("body").find(e.$tooltip).length){e.$tooltip.css("width",""),e.elProxyPosition=e._repositionInfo(e.$elProxy);var f=null,g=a(b).width(),h=e.elProxyPosition,i=e.$tooltip.outerWidth(!1),j=(e.$tooltip.innerWidth()+1,e.$tooltip.outerHeight(!1));if(e.$elProxy.is("area")){var k=e.$elProxy.attr("shape"),l=e.$elProxy.parent().attr("name"),m=a('img[usemap="#'+l+'"]'),n=m.offset().left,o=m.offset().top,p=void 0!==e.$elProxy.attr("coords")?e.$elProxy.attr("coords").split(","):void 0;if("circle"==k){var q=parseInt(p[0]),r=parseInt(p[1]),s=parseInt(p[2]);h.dimension.height=2*s,h.dimension.width=2*s,h.offset.top=o+r-s,h.offset.left=n+q-s}else if("rect"==k){var q=parseInt(p[0]),r=parseInt(p[1]),t=parseInt(p[2]),u=parseInt(p[3]);h.dimension.height=u-r,h.dimension.width=t-q,h.offset.top=o+r,h.offset.left=n+q}else if("poly"==k){for(var v=0,w=0,x=0,y=0,z="even",A=0;A<p.length;A++){var B=parseInt(p[A]);"even"==z?(B>x&&(x=B,0===A&&(v=x)),B<v&&(v=B),z="odd"):(B>y&&(y=B,1==A&&(w=y)),B<w&&(w=B),z="even")}h.dimension.height=y-w,h.dimension.width=x-v,h.offset.top=o+w,h.offset.left=n+v}else h.dimension.height=m.outerHeight(!1),h.dimension.width=m.outerWidth(!1),h.offset.top=o,h.offset.left=n}var C=0,D=0,E=0,F=parseInt(e.options.offsetY),G=parseInt(e.options.offsetX),H=e.options.position;if("top"==H){var I=h.offset.left+i-(h.offset.left+h.dimension.width);C=h.offset.left+G-I/2,E=h.offset.top-j-F-12,c(),d("bottom","top")}if("top-left"==H&&(C=h.offset.left+G,E=h.offset.top-j-F-12,c(),d("bottom-left","top-left")),"top-right"==H&&(C=h.offset.left+h.dimension.width+G-i,E=h.offset.top-j-F-12,c(),d("bottom-right","top-right")),"bottom"==H){var I=h.offset.left+i-(h.offset.left+h.dimension.width);C=h.offset.left-I/2+G,E=h.offset.top+h.dimension.height+F+12,c(),d("top","bottom")}if("bottom-left"==H&&(C=h.offset.left+G,E=h.offset.top+h.dimension.height+F+12,c(),d("top-left","bottom-left")),"bottom-right"==H&&(C=h.offset.left+h.dimension.width+G-i,E=h.offset.top+h.dimension.height+F+12,c(),d("top-right","bottom-right")),"left"==H){C=h.offset.left-G-i-12,D=h.offset.left+G+h.dimension.width+12;var J=h.offset.top+j-(h.offset.top+h.dimension.height);if(E=h.offset.top-J/2-F,C<0&&D+i>g){var K=2*parseFloat(e.$tooltip.css("border-width")),L=i+C-K;e.$tooltip.css("width",L+"px"),j=e.$tooltip.outerHeight(!1),C=h.offset.left-G-L-12-K,J=h.offset.top+j-(h.offset.top+h.dimension.height),E=h.offset.top-J/2-F}else C<0&&(C=h.offset.left+G+h.dimension.width+12,f="left")}if("right"==H){C=h.offset.left+G+h.dimension.width+12,D=h.offset.left-G-i-12;var J=h.offset.top+j-(h.offset.top+h.dimension.height);if(E=h.offset.top-J/2-F,C+i>g&&D<0){var K=2*parseFloat(e.$tooltip.css("border-width")),L=g-C-K;e.$tooltip.css("width",L+"px"),j=e.$tooltip.outerHeight(!1),J=h.offset.top+j-(h.offset.top+h.dimension.height),E=h.offset.top-J/2-F}else C+i>g&&(C=h.offset.left-G-i-12,f="right")}if(e.options.arrow){var M="tooltipster-arrow-"+H;if(e.options.arrowColor.length<1)var N=e.$tooltip.css("background-color");else var N=e.options.arrowColor;if(f?"left"==f?(M="tooltipster-arrow-right",f=""):"right"==f?(M="tooltipster-arrow-left",f=""):f="left:"+Math.round(f)+"px;":f="","top"==H||"top-left"==H||"top-right"==H)var O=parseFloat(e.$tooltip.css("border-bottom-width")),P=e.$tooltip.css("border-bottom-color");else if("bottom"==H||"bottom-left"==H||"bottom-right"==H)var O=parseFloat(e.$tooltip.css("border-top-width")),P=e.$tooltip.css("border-top-color");else if("left"==H)var O=parseFloat(e.$tooltip.css("border-right-width")),P=e.$tooltip.css("border-right-color");else if("right"==H)var O=parseFloat(e.$tooltip.css("border-left-width")),P=e.$tooltip.css("border-left-color");else var O=parseFloat(e.$tooltip.css("border-bottom-width")),P=e.$tooltip.css("border-bottom-color");O>1&&O++;var Q="";if(0!==O){var R="",S="border-color: "+P+";";M.indexOf("bottom")!==-1?R="margin-top: -"+Math.round(O)+"px;":M.indexOf("top")!==-1?R="margin-bottom: -"+Math.round(O)+"px;":M.indexOf("left")!==-1?R="margin-right: -"+Math.round(O)+"px;":M.indexOf("right")!==-1&&(R="margin-left: -"+Math.round(O)+"px;"),Q='<span class="tooltipster-arrow-border" style="'+R+" "+S+';"></span>'}e.$tooltip.find(".tooltipster-arrow").remove();var T='<div class="'+M+' tooltipster-arrow" style="'+f+'">'+Q+'<span style="border-color:'+N+';"></span></div>';e.$tooltip.append(T)}e.$tooltip.css({top:Math.round(E)+"px",left:Math.round(C)+"px"})}return e},enable:function(){return this.enabled=!0,this},disable:function(){return this.hide(),this.enabled=!1,this},destroy:function(){var b=this;b.hide(),b.$el[0]!==b.$elProxy[0]&&b.$elProxy.remove(),b.$el.removeData(b.namespace).off("."+b.namespace);var c=b.$el.data("tooltipster-ns");if(1===c.length){var d=null;"previous"===b.options.restoration?d=b.$el.data("tooltipster-initialTitle"):"current"===b.options.restoration&&(d="string"==typeof b.Content?b.Content:a("<div></div>").append(b.Content).html()),d&&b.$el.attr("title",d),b.$el.removeClass("tooltipstered").removeData("tooltipster-ns").removeData("tooltipster-initialTitle")}else c=a.grep(c,function(a,c){return a!==b.namespace}),b.$el.data("tooltipster-ns",c);return b},elementIcon:function(){return this.$el[0]!==this.$elProxy[0]?this.$elProxy[0]:void 0},elementTooltip:function(){return this.$tooltip?this.$tooltip[0]:void 0},option:function(a,b){return"undefined"==typeof b?this.options[a]:(this.options[a]=b,this)},status:function(){return this.Status}},a.fn[h]=function(){var b=arguments;if(0===this.length){if("string"==typeof b[0]){var c=!0;switch(b[0]){case"setDefaults":a.extend(i,b[1]);break;default:c=!1}return!!c||this}return this}if("string"==typeof b[0]){var e="#*$~&";return this.each(function(){var c=a(this).data("tooltipster-ns"),d=c?a(this).data(c[0]):null;if(!d)throw new Error("You called Tooltipster's \""+b[0]+'" method on an uninitialized element');if("function"!=typeof d[b[0]])throw new Error('Unknown method .tooltipster("'+b[0]+'")');var f=d[b[0]](b[1],b[2]);if(f!==d)return e=f,!1}),"#*$~&"!==e?e:this}var f=[],g=b[0]&&"undefined"!=typeof b[0].multiple,h=g&&b[0].multiple||!g&&i.multiple,j=b[0]&&"undefined"!=typeof b[0].debug,k=j&&b[0].debug||!j&&i.debug;return this.each(function(){var c=!1,e=a(this).data("tooltipster-ns"),g=null;e?h?c=!0:k&&console.log('Tooltipster: one or more tooltips are already attached to this element: ignoring. Use the "multiple" option to attach more tooltips.'):c=!0,c&&(g=new d(this,b[0]),e||(e=[]),e.push(g.namespace),a(this).data("tooltipster-ns",e),a(this).data(g.namespace,g)),f.push(g)}),h?f:this};var j=!!("ontouchstart"in b),k=!1;a("body").one("mousemove",function(){k=!0})}(jQuery,window,document),function(a,b){if("object"==typeof exports&&"object"==typeof module)module.exports=b(require("CERN_Platform"),require("logger"),require("CapabilityTimer"),require("ScriptRequest"));else if("function"==typeof define&&define.amd)define(["CERN_Platform","logger","CapabilityTimer","ScriptRequest"],b);else{var c="object"==typeof exports?b(require("CERN_Platform"),require("logger"),require("CapabilityTimer"),require("ScriptRequest")):b(a.CERN_Platform,a.logger,a.CapabilityTimer,a.ScriptRequest);for(var d in c)("object"==typeof exports?exports:a)[d]=c[d]}}("undefined"!=typeof self?self:this,function(a,b,c,d){return function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,b),e.l=!0,e.exports}var c={};return b.m=a,b.c=c,b.d=function(a,c,d){b.o(a,c)||Object.defineProperty(a,c,{configurable:!1,enumerable:!0,get:d})},b.n=function(a){var c=a&&a.__esModule?function(){return a.default}:function(){return a};return b.d(c,"a",c),c},b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},b.p="",b(b.s=1)}([function(b,c){b.exports=a},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}b.__esModule=!0,b.default=void 0;var e=d(c(2)),f=d(c(0)),g=d(c(3)),h=d(c(4)),i=d(c(5)),j=function(){var a=Promise.resolve(),b=new h.default("mpage_featureToggles"),c=function(a,b){new g.default("CAP:MPG.CHECK_FEATURE_TOGGLE",f.default.getCriterion().CRITERION.CATEGORY_MEAN).addMetaData("toggleName",a).addMetaData("isEnabled",String(b)).capture()},d=function(d){var g=b.getCachedToggleStatus(d);if(g){var h=g.isEnabled;return c(d,h),Promise.resolve({featureToggleName:d,isEnabled:h})}var i=f.default.getWrappedDiscernObject("PVFEATURE");return i.isAvailable().then(function(e){if(e)return a=a.then(function(){
return i.invoke("SetFeatureName",[d])}).then(function(){return i.invoke("IsFeatureToggleEnabled")}).then(function(a){return c(d,a),b.cacheToggleStatus({featureToggleName:d,isEnabled:Boolean(a)}),{featureToggleName:d,isEnabled:Boolean(a)}});throw new Error("PVFEATURE discern object not available")}).catch(function(b){return c(d,"false"),e.default.logJSError(b,null,"mpageFeatureToggle.js","getStatusFromCOMObject"),a=a.then(function(){return{featureToggleName:d,isEnabled:!1}})})},j=function(a,d){return void 0===d&&(d=""),new Promise(function(f){var g=b.getCachedToggleStatus(a);if(g){var h=g.isEnabled;c(a,h),f({featureToggleName:a,isEnabled:h})}else i.default.getStatusFromCachedRequests(a,d).then(function(d){var e=d.isEnabled;c(a,e),b.cacheToggleStatus({featureToggleName:a,isEnabled:e}),f({featureToggleName:a,isEnabled:e})}).catch(function(b){c(a,"false"),e.default.logJSError(b,null,"mpageFeatureToggle.js","getStatusFromScript"),f({featureToggleName:a,isEnabled:!1})})})};return{getToggleStatus:function(a,b){return void 0===b&&(b=""),f.default.inMillenniumContext()?d(a):j(a,b)}}}(),k=j;b.default=k,window.MP_FEATURE_TOGGLE=j},function(a,c){a.exports=b},function(a,b){a.exports=c},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a){"@babel/helpers - typeof";return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(a)}b.__esModule=!0,b.default=void 0;var f=d(c(0)),g=function(a){try{var b=JSON.parse(sessionStorage.getItem(a));return"object"===e(b)&&b?b:{}}catch(a){return{}}},h=function(a,b){var c=g(b);c[a.featureToggleName]=a,sessionStorage.setItem(b,JSON.stringify(c))},i=function(){function a(a){this._sessionName=a,this._featureToggleMap={},f.default.inMillenniumContext()||(this._featureToggleMap=g(sessionStorage.getItem(this._sessionName)))}var b=a.prototype;return b.destroy=function(){this._featureToggleMap={},f.default.inMillenniumContext()||sessionStorage.removeItem(this._sessionName)},b.cacheToggleStatus=function(a){this._featureToggleMap[a.featureToggleName]=a,f.default.inMillenniumContext()||h(a,this._sessionName)},b.getCachedToggleStatus=function(a){return this._featureToggleMap[a]},a}();b.default=i},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}b.__esModule=!0,b.default=void 0;var e=d(c(6)),f=function(){var a={};return{getStatusFromCachedRequests:function(b,c){void 0===c&&(c="");var d=a[b+"|"+c];if(d)return d.promise;var f=(0,e.default)(b,c).then(function(d){return delete a[b+"|"+c],d});return a[b+"|"+c]={promise:f},f}}}(),g=f;b.default=g},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}b.__esModule=!0,b.default=void 0;var e=d(c(0)),f=d(c(7)),g=e.default.getCriterion().CRITERION,h=g.USERNAME,i=g.POSITION_CD,j=function(a,b){return void 0===b&&(b=""),new Promise(function(c,d){(new f.default).setArtifactInfo({artifactId:"mpage-feature-toggle",functionName:"getFeatureToggleStatus"}).setProgramName("mp_retrieve_feature_toggle").setParameterArray(["^MINE^","^"+a+"^","^"+h+"^",i+".0","^^","^"+b+"^"]).setResponseHandler(function(a){"F"!==a.getStatus()?c({isEnabled:Boolean(a.getResponse().ISENABLED)}):d(a)}).setErrorStatusHandler(function(a,b){d("Response- "+a+" :: status- "+b)}).performRequest()})},k=j;b.default=k},function(a,b){a.exports=d}])});var ieVersion;ieVersion=/MSIE (\d+\.\d+);/.test(navigator.userAgent)?new Number(RegExp.$1):0;var CERN_Browser={m_isCanvasAvailable:null,m_userAgentString:"",m_colorDepth:0,m_screenWidth:0,m_screenHeight:0,m_availableWidth:0,m_availableHeight:0,m_viewportWidth:$(window).innerWidth(),m_viewportHeight:$(window).innerHeight(),m_orientation:null};CERN_Browser.ORIENTATION={LANDSCAPE:"LANDSCAPE",PORTRAIT:"PORTRAIT"},CERN_Browser.isCanvasAvailable=function(){return"boolean"!=typeof this.m_isCanvasAvailable&&(this.m_isCanvasAvailable=!!document.createElement("canvas").getContext),this.m_isCanvasAvailable},CERN_Browser.Base64={encode:function(a){return window.btoa(unescape(encodeURIComponent(a)))},decode:function(a){return decodeURIComponent(escape(window.atob(a)))}},CERN_Browser.getUserAgent=function(){return!this.m_userAgentString&&navigator&&navigator.userAgent&&(this.m_userAgentString=navigator.userAgent),this.m_userAgentString},CERN_Browser.getColorDepth=function(){return!this.m_colorDepth&&screen&&screen.colorDepth&&(this.m_colorDepth=screen.colorDepth),this.m_colorDepth},CERN_Browser.getScreenHeight=function(){return!this.m_screenHeight&&screen&&screen.height&&(this.m_screenHeight=screen.height),this.m_screenHeight},CERN_Browser.getScreenWidth=function(){return!this.m_screenWidth&&screen&&screen.width&&(this.m_screenWidth=screen.width),this.m_screenWidth},CERN_Browser.getScreenResolution=function(){return this.getScreenWidth()+"x"+this.getScreenHeight()},CERN_Browser.getAvailableHeight=function(){return!this.m_availableHeight&&screen&&screen.availHeight&&(this.m_availableHeight=screen.availHeight),this.m_availableHeight},CERN_Browser.getAvailableWidth=function(){return!this.m_availableWidth&&screen&&screen.availWidth&&(this.m_availableWidth=screen.availWidth),this.m_availableWidth},CERN_Browser.getAvailableResolution=function(){return this.getAvailableWidth()+"x"+this.getAvailableHeight()},CERN_Browser.getViewportHeight=function(){return this.m_viewportHeight},CERN_Browser.getViewportWidth=function(){return this.m_viewportWidth},CERN_Browser.getViewportResolution=function(){return this.getViewportWidth()+"x"+this.getViewportHeight()},CERN_Browser.getOrientation=function(){return this.m_viewportHeight>this.m_viewportWidth?this.ORIENTATION.PORTRAIT:this.ORIENTATION.LANDSCAPE},CERN_Browser.validateWindowResize=function(){var a=$(window).innerHeight(),b=$(window).innerWidth();return(a!==this.m_viewportHeight||b!==this.m_viewportWidth)&&(this.m_viewportHeight=a,this.m_viewportWidth=b,!0)},CERN_Browser.setOnBeforeUnload=function(a){return"function"!=typeof a?void logger.logError("Browser Unload Event call back argument is not a function"):void(window.onbeforeunload=a)},CERN_Browser.resetOnBeforeUnload=function(){window.onbeforeunload=null};var CERN_Validate={};CERN_Validate.string={},CERN_Validate.string.isString=function(a){return"string"==typeof a},CERN_Validate.string.isNumeric=function(a){return CERN_Validate.string.isString(a)&&/^[-+]?[0-9]*[.,]?[0-9]+$/.test(a)&&CERN_Validate.number.isNumber(parseFloat(a))},CERN_Validate.string.isEmpty=function(a){return CERN_Validate.string.isString(a)&&""===a},CERN_Validate.string.isBlank=function(a){return CERN_Validate.string.isEmpty(a)||/^[\s\n\r]*$/.test(a)},CERN_Validate.number={},CERN_Validate.number.isNumber=function(a){return"number"==typeof a&&isFinite(a)},CERN_Validate.number.isInteger=function(a){return CERN_Validate.number.isNumber(a)&&a%1===0},CERN_Validate.number.isFloat=function(a){return CERN_Validate.number.isNumber(a)&&a%1!==0},CERN_Validate.number.isNegative=function(a){return CERN_Validate.number.isNumber(a)&&a<0},CERN_Validate.number.isPositive=function(a){return CERN_Validate.number.isNumber(a)&&a>0},CERN_Validate.number.isGreaterThanOrEqualTo=function(a,b){return CERN_Validate.number.isNumber(a)&&CERN_Validate.number.isNumber(b)&&a>=b},CERN_Validate.number.isLessThanOrEqualTo=function(a,b){return CERN_Validate.number.isNumber(a)&&CERN_Validate.number.isNumber(b)&&a<=b},CERN_Validate.number.isZero=function(a){return CERN_Validate.number.isNumber(a)&&0===a},CERN_Validate.number.isEven=function(a){return CERN_Validate.number.isInteger(a)&&a%2===0},CERN_Validate.number.isOdd=function(a){return CERN_Validate.number.isInteger(a)&&a%2!==0},CERN_Validate.number.isWithinRange=function(a,b,c,d){if(!CERN_Validate.number.isNumber(b)||!CERN_Validate.number.isNumber(c))return!1;if(!CERN_Validate.number.isNumber(a))return!1;if(b>c){var e=b;b=c,c=e}return d?a>=b&&a<=c:a>b&&a<c},CERN_Validate.array={},CERN_Validate.array.isArray=function(a){return Array.prototype.isPrototypeOf(a)},CERN_Validate.array.isEmpty=function(a){return CERN_Validate.array.isArray(a)&&0===a.length},CERN_Validate.array.contains=function(a,b){if(!CERN_Validate.array.isArray(a))return!1;for(var c=a.length,d=0;d<c;d++)if(a[d]===b)return!0;return!1},CERN_Validate.array.containsOnlyStrings=function(a){if(!CERN_Validate.array.isArray(a))return!1;for(var b=a.length,c=0;c<b;c++)if(!CERN_Validate.string.isString(a[c]))return!1;return!0},CERN_Validate.array.containsOnlyNumbers=function(a){if(!CERN_Validate.array.isArray(a))return!1;for(var b=a.length,c=0;c<b;c++)if(!CERN_Validate.number.isNumber(a[c]))return!1;return!0},CERN_Validate.array.containsOnlyObjects=function(a){if(!CERN_Validate.array.isArray(a))return!1;for(var b=a.length,c=0;c<b;c++)if("object"!=typeof a[c])return!1;return!0},CERN_Validate.array.containsOnlyObjectsOfPrototype=function(a,b){if(!CERN_Validate.array.isArray(a))return!1;for(var c=a.length,d=0;d<c;d++)if(!b.prototype.isPrototypeOf(a[d]))return!1;return!0},CERN_Validate.object={},CERN_Validate.object.isObject=function(a){return"object"==typeof a},CERN_Validate.object.isEmpty=function(a){if(!CERN_Validate.object.isObject(a))return!1;for(var b in a)if(a.hasOwnProperty(b))return!1;return!0},CERN_Validate.object.hasKey=function(a,b){return CERN_Validate.object.isObject(a)&&"undefined"!=typeof a[b]},MPageComponent.prototype.bedrockShorthandConversions={PARENT_ENTITY_ID:"PE_ID",PARENT_ENTITY_NAME:"PE_NM",CDF_MEANING:"CDF_MN",GROUP_SEQ:"G_SQ",VALUE_SEQ:"V_SQ",FREETEXT_DESC:"FTXT",VALUE_TYPE_FLAG:"V_TYP",QUALIFIER_FLAG:"Q_FLG",CHARGE_ASSIGN:"CH_ASSIGN"},MPageComponent.prototype.addDisplayFilter=function(a){null===this.m_displayFilters&&(this.m_displayFilters=[]),this.m_displayFilters.push(a)},MPageComponent.prototype.alwaysHideHeader=function(){return this.m_alwaysHideHeader},MPageComponent.prototype.addFilterMappingObject=function(a,b){b&&"undefined"!=typeof this.bedrockShorthandConversions[b.field]&&(b.field=this.bedrockShorthandConversions[b.field]),this.m_filterMappingsObj[a]=b},MPageComponent.prototype.addIViewMenuItem=function(a){null===this.m_iViewMenuItems&&(this.m_iViewMenuItems=[]),this.m_iViewMenuItems.push(a)},MPageComponent.prototype.addLookbackMenuItem=function(a){null===this.m_lookBackMenuItems&&(this.m_lookBackMenuItems=[]),this.m_lookBackMenuItems.push(a)},MPageComponent.prototype.addGroup=function(a){null===this.m_groups&&(this.m_groups=[]),this.m_groups.push(a)},MPageComponent.prototype.addGrouperFilterCatalogCodes=function(a){null===this.m_grouperFilterCatalogCodes&&(this.m_grouperFilterCatalogCodes=[]),this.m_grouperFilterCatalogCodes.push(a)},MPageComponent.prototype.addGrouperFilterCriteria=function(a){null===this.m_grouperFilterCriteria&&(this.m_grouperFilterCriteria=[]),this.m_grouperFilterCriteria.push(a)},MPageComponent.prototype.addGrouperFilterEventSets=function(a){this.addGrouperFilterCriteria(a)},MPageComponent.prototype.addMenuDither=function(a){var b=_g(this.m_menuOptions[a].id);b&&(Util.Style.acss(b,"opts-menu-item-dthr"),this.m_menuOptions[a].isMenuDithered=!0)},MPageComponent.prototype.addMenuItem=function(a){null===this.m_menuItems&&(this.m_menuItems=[]),this.m_menuItems.push(a)},MPageComponent.prototype.addMenuOption=function(a,b,c,d,e,f){var g=_g("optsMenuActions"+this.m_componentId);if(g&&!g.hasChildNodes()){var h=!!d&&d;this.m_menuOptions[a]={itemName:a,id:b,text:c,ditherOnLoad:d,isMenuDithered:h,evtType:e,fn:f},this.m_menuOptionNames.push(a)}},MPageComponent.prototype.beforeDestroy=function(){CERN_EventListener.removeAllListeners(this,this)},MPageComponent.prototype.getAggregateTimer=function(){return this.m_aggregateTimer},MPageComponent.prototype.getAutoSuggestAddScript=function(){return this.m_AutoSuggestScript},MPageComponent.prototype.getAutoSuggestAddTimerName=function(){return this.m_AutoSuggestAddTimerName},MPageComponent.prototype.getBrLookbackUnits=function(){return this.m_brlookbackUnits},MPageComponent.prototype.getBrLookbackUnitTypeFlag=function(){return this.m_brlookbackUnitTypeFlag},MPageComponent.prototype.getColumn=function(){return this.m_column},MPageComponent.prototype.getCompColor=function(){var a=this.getStyles();return a?a.getColor():void 0},MPageComponent.prototype.getComponentId=function(){return this.m_componentId},MPageComponent.prototype.getComponentFilterMean=function(){return this.m_componentFilterMean},MPageComponent.prototype.getComponentLoadTimerName=function(){return this.m_compLoadTimerName},MPageComponent.prototype.getComponentRenderTimerName=function(){return this.m_compRenderTimerName},MPageComponent.prototype.getComponentTable=function(){return this.m_componentTable},MPageComponent.prototype.getCriterion=function(){return this.criterion},MPageComponent.prototype.getCustomizeView=function(){return this.m_isCustomizeView},MPageComponent.prototype.getDateFormat=function(){return this.m_dateFormat},MPageComponent.prototype.getDisplayEnabled=function(){return this.m_compDisp},MPageComponent.prototype.getDisplayFilters=function(){return this.m_displayFilters},MPageComponent.prototype.getFilters=function(){return this.m_filters},MPageComponent.prototype.getFilterMappingsObj=function(){return this.m_filterMappingsObj},MPageComponent.prototype.getFooterText=function(){return this.m_footerText},MPageComponent.prototype.getGapCheckBannerDismiss=function(){return this.m_gapCheckBannerDismiss},MPageComponent.prototype.getGrouperCatalogCodes=function(a){if(this.m_grouper_arr||(this.m_grouper_arr=[]),null!==a&&!isNaN(a))return this.m_grouper_arr[a]?this.m_grouper_arr[a].catalogCodes:""},MPageComponent.prototype.getGrouperCatLabel=function(a){if(this.m_grouper_arr||(this.m_grouper_arr=[]),null!==a&&!isNaN(a))return this.m_grouper_arr[a]?this.m_grouper_arr[a].catLabel:""},MPageComponent.prototype.getGrouperCriteria=function(a){if(this.m_grouper_arr||(this.m_grouper_arr=[]),null!==a&&!isNaN(a))return this.m_grouper_arr[a]?this.m_grouper_arr[a].criteria:""},MPageComponent.prototype.getGrouperFilterCatalogCodes=function(){return this.m_grouperFilterCatalogCodes},MPageComponent.prototype.getGrouperFilterCatLabel=function(){return this.m_grouperFilterCatLabel},MPageComponent.prototype.getGrouperFilterCriteria=function(){return this.m_grouperFilterCriteria},MPageComponent.prototype.getGrouperFilterEventSets=function(){return this.getGrouperFilterCriteria()},MPageComponent.prototype.getGrouperFilterLabel=function(){return this.m_grouperFilterLabel},MPageComponent.prototype.getGrouperEventSets=function(a){return this.getGrouperCriteria(a)},MPageComponent.prototype.getGrouperLabel=function(a){if(this.m_grouper_arr||(this.m_grouper_arr=[]),null!==a&&!isNaN(a))return this.m_grouper_arr[a]?this.m_grouper_arr[a].label:""},MPageComponent.prototype.getGroups=function(){return null===this.m_groups&&(this.m_groups=[]),this.m_groups},MPageComponent.prototype.getGrp1CatalogCodes=function(){return this.getGrouperCatalogCodes(0)},MPageComponent.prototype.getGrp1CatLabel=function(){return this.getGrouperCatLabel(0)},MPageComponent.prototype.getGrp1Criteria=function(){return this.getGrouperCriteria(0)},MPageComponent.prototype.getGrp1EventSets=function(){return this.getGrouperCriteria(0)},MPageComponent.prototype.getGrp1Label=function(){return this.getGrouperLabel(0)},MPageComponent.prototype.getGrp2CatalogCodes=function(){return this.getGrouperCatalogCodes(1)},MPageComponent.prototype.getGrp2CatLabel=function(){return this.getGrouperCatLabel(1)},MPageComponent.prototype.getGrp2Criteria=function(){return this.getGrouperCriteria(1)},MPageComponent.prototype.getGrp2EventSets=function(){return this.getGrouperCriteria(1)},MPageComponent.prototype.getGrp2Label=function(){return this.getGrouperLabel(1)},MPageComponent.prototype.getGrp3CatalogCodes=function(){return this.getGrouperCatalogCodes(2)},MPageComponent.prototype.getGrp3CatLabel=function(){return this.getGrouperCatLabel(2)},MPageComponent.prototype.getGrp3Criteria=function(){return this.getGrouperCriteria(2)},MPageComponent.prototype.getGrp3EventSets=function(){return this.getGrouperCriteria(2)},MPageComponent.prototype.getGrp3Label=function(){return this.getGrouperLabel(2)},MPageComponent.prototype.getGrp4CatalogCodes=function(){return this.getGrouperCatalogCodes(3)},MPageComponent.prototype.getGrp4CatLabel=function(){return this.getGrouperCatLabel(3)},MPageComponent.prototype.getGrp4Criteria=function(){return this.getGrouperCriteria(3)},MPageComponent.prototype.getGrp4EventSets=function(){return this.getGrouperCriteria(3)},MPageComponent.prototype.getGrp4Label=function(){return this.getGrouperLabel(3)},MPageComponent.prototype.getGrp5CatalogCodes=function(){return this.getGrouperCatalogCodes(4)},MPageComponent.prototype.getGrp5CatLabel=function(){return this.getGrouperCatLabel(4)},MPageComponent.prototype.getGrp5Criteria=function(){return this.getGrouperCriteria(4)},MPageComponent.prototype.getGrp5EventSets=function(){return this.getGrouperCriteria(4)},MPageComponent.prototype.getGrp5Label=function(){return this.getGrouperLabel(4)},MPageComponent.prototype.getGrp6CatalogCodes=function(){return this.getGrouperCatalogCodes(5)},MPageComponent.prototype.getGrp6CatLabel=function(){return this.getGrouperCatLabel(5)},MPageComponent.prototype.getGrp6Criteria=function(){return this.getGrouperCriteria(5)},MPageComponent.prototype.getGrp6EventSets=function(){return this.getGrouperCriteria(5)},MPageComponent.prototype.getGrp6Label=function(){return this.getGrouperLabel(5)},MPageComponent.prototype.getGrp7CatalogCodes=function(){return this.getGrouperCatalogCodes(6)},MPageComponent.prototype.getGrp7CatLabel=function(){return this.getGrouperCatLabel(6)},MPageComponent.prototype.getGrp7Criteria=function(){return this.getGrouperCriteria(6)},MPageComponent.prototype.getGrp7EventSets=function(){return this.getGrouperCriteria(6)},MPageComponent.prototype.getGrp7Label=function(){return this.getGrouperLabel(6)},MPageComponent.prototype.getGrp8CatalogCodes=function(){return this.getGrouperCatalogCodes(7)},MPageComponent.prototype.getGrp8CatLabel=function(){return this.getGrouperCatLabel(7)},MPageComponent.prototype.getGrp8Criteria=function(){return this.getGrouperCriteria(7)},MPageComponent.prototype.getGrp8EventSets=function(){return this.getGrouperCriteria(7)},MPageComponent.prototype.getGrp8Label=function(){return this.getGrouperLabel(7)},MPageComponent.prototype.getGrp9CatalogCodes=function(){return this.getGrouperCatalogCodes(8)},MPageComponent.prototype.getGrp9CatLabel=function(){return this.getGrouperCatLabel(8)},MPageComponent.prototype.getGrp9Criteria=function(){return this.getGrouperCriteria(8)},MPageComponent.prototype.getGrp9EventSets=function(){return this.getGrouperCriteria(8)},MPageComponent.prototype.getGrp9Label=function(){return this.getGrouperLabel(8)},MPageComponent.prototype.getGrp10CatalogCodes=function(){return this.getGrouperCatalogCodes(9)},MPageComponent.prototype.getGrp10CatLabel=function(){return this.getGrouperCatLabel(9)},MPageComponent.prototype.getGrp10Criteria=function(){return this.getGrouperCriteria(9)},MPageComponent.prototype.getGrp10EventSets=function(){return this.getGrouperCriteria(9)},MPageComponent.prototype.getGrp10Label=function(){return this.getGrouperLabel(9)},MPageComponent.prototype.getHasActionsMenu=function(){return this.m_hasActionsMenu},MPageComponent.prototype.getPreferencesObj=function(){return this.m_componentPreferences},MPageComponent.prototype.getIViewItemsArrElement=function(a,b){if(this.m_iViewItemsArr||(this.m_iViewItemsArr=[]),null!==a&&!isNaN(a))switch(b){case"BAND":return this.m_iViewItemsArr[a]?this.m_iViewItemsArr[a].bandName:"";case"SECTION":return this.m_iViewItemsArr[a]?this.m_iViewItemsArr[a].sectionName:"";case"ITEM":return this.m_iViewItemsArr[a]?this.m_iViewItemsArr[a].itemName:"";default:return""}},MPageComponent.prototype.getIViewMenuItems=function(){return this.m_iViewMenuItems},MPageComponent.prototype.getLabel=function(){return this.m_label},MPageComponent.prototype.getLink=function(){return this.m_link},MPageComponent.prototype.getViewpointLink=function(){return this.m_viewpoint_link},MPageComponent.prototype.getViewLink=function(){return this.m_view_link},MPageComponent.prototype.getLookbackDays=function(){return this.m_lookbackDays},MPageComponent.prototype.getLookbackMenuItems=function(){return this.m_lookBackMenuItems},MPageComponent.prototype.getResultRangeDirection=function(){return this.m_resultRangeDirection},MPageComponent.prototype.getLookbackUnits=function(){return this.m_lookbackUnits},MPageComponent.prototype.getLookbackUnitTypeFlag=function(){return this.m_lookbackUnitTypeFlag},MPageComponent.prototype.getMedHistory=function(){return this.m_medHistory},MPageComponent.prototype.getMedRecAdmit=function(){return this.m_medRecAdmit},MPageComponent.prototype.getMedRecTransfer=function(){return this.m_medRecTransfer},MPageComponent.prototype.getMedRecCrossEncTx=function(){return this.m_medRecCrossEncTx},MPageComponent.prototype.getMedRecDischarge=function(){return this.m_medRecDischarge},MPageComponent.prototype.getMenu=function(){return MP_MenuManager.getMenuObject(this.m_compMenuId)},MPageComponent.prototype.getMenuItems=function(){return this.m_menuItems},MPageComponent.prototype.getMenuOptionNames=function(){return this.m_menuOptionNames},MPageComponent.prototype.getMenuOptions=function(){return this.m_menuOptions},MPageComponent.prototype.getMPageName=function(){return this.m_MPageName},MPageComponent.prototype.getPageGroupSequence=function(){return this.m_pageGroupSeq},MPageComponent.prototype.getRenderStrategy=function(){return this.m_renderStrategy},MPageComponent.prototype.getReportId=function(){return this.m_reportId},MPageComponent.prototype.getReportMean=function(){return this.m_reportMean},MPageComponent.prototype.getRootComponentNode=function(){if(null===this.m_rootComponentNode){var a=this.getStyles();this.m_rootComponentNode=_g(a.getId())}return this.m_rootComponentNode},MPageComponent.prototype.getSectionContentNode=function(){if(null===this.m_sectionContentNode){var a=this.getStyles();this.m_sectionContentNode=_g(a.getContentId())}return this.m_sectionContentNode},MPageComponent.prototype.getSelectedDataGroup=function(){return this.m_selectedDataGroup},MPageComponent.prototype.getSelectedTimeFrame=function(){return this.m_selectedTimeFrame},MPageComponent.prototype.getSequence=function(){return this.m_sequence},MPageComponent.prototype.getScope=function(){return this.m_scope},MPageComponent.prototype.getScopeHTML=function(){return this.m_ScopeHTML},MPageComponent.prototype.getScrollNumber=function(){return this.m_scrollNumber},MPageComponent.prototype.getSubLabel=function(){return this.m_subLabel},MPageComponent.prototype.getToggleStatus=function(){return this.m_toggleStatus},MPageComponent.prototype.getPregnancyLookbackInd=function(){return this.m_pregLookbackInd},MPageComponent.prototype.getHILookupKey=function(){return this.m_hiLookupKey},MPageComponent.prototype.getAliasType=function(){return this.m_aliasType},MPageComponent.prototype.getAliasPoolCd=function(){return this.m_aliasPoolCd},MPageComponent.prototype.getExternalDataInd=function(){return this.m_externalDataInd},MPageComponent.prototype.getPatientEnteredDataInd=function(){return this.m_patEnteredDataInd},MPageComponent.prototype.getHITestUri=function(){return this.m_hiTestUri},MPageComponent.prototype.hasInfoButton=function(){return this.m_hasInfoButton},MPageComponent.prototype.setSequenceInContextualView=function(a){this.m_sequenceInContextualView=a},MPageComponent.prototype.setHasInfoButton=function(a){this.m_hasInfoButton=1==a},MPageComponent.prototype.isInfoButtonEnabled=function(){return this.m_isInfoEnabled},MPageComponent.prototype.setIsInfoButtonEnabled=function(a){this.m_isInfoEnabled=1==a},MPageComponent.prototype.showInfoButton=function(a,b){var c=this.getSectionContentNode(),d=$(c).find(".info-icon");b?$(d).removeClass("hidden"):$(d).addClass("hidden")},MPageComponent.prototype.hasCompFilters=function(){return this.m_hasCompFilters},MPageComponent.prototype.hasLookBackDropDown=function(){return this.m_hasLookBackDropDown},MPageComponent.prototype.isDisplayable=function(){return!this.isComponentFiltered()&&this.m_compDisp},MPageComponent.prototype.getRequiredCompDisclaimerText=function(){return this.m_disclaimerText},MPageComponent.prototype.setRequiredCompDisclaimerText=function(a){this.m_disclaimerText=a},MPageComponent.prototype.getGapCheckCriteria=function(){return this.m_requiredCriteria},MPageComponent.prototype.setGapCheckCriteria=function(a){this.m_requiredCriteria=parseInt(a,10)},MPageComponent.prototype.setOnComponentDisclaimerClose=function(a){this.m_onComponentDisclaimerClose=a},MPageComponent.prototype.getOnComponentDisclaimerClose=function(){return this.m_onComponentDisclaimerClose},MPageComponent.prototype.setOnSubLabelChange=function(a){this.m_onSubLabelChange=a},MPageComponent.prototype.getOnSubLabelChange=function(){return this.m_onSubLabelChange},MPageComponent.prototype.setOnFinalizeComponent=function(a){this.m_onFinalizeComponent=a},MPageComponent.prototype.getOnFinalizeComponent=function(){return this.m_onFinalizeComponent},MPageComponent.prototype.setOnContextualViewToggle=function(a){this.m_onContextualViewToggle=a},MPageComponent.prototype.getOnContextualViewToggle=function(){return this.m_onContextualViewToggle},MPageComponent.prototype.getGapCheckRequiredInd=function(){return this.m_isRequired},MPageComponent.prototype.setGapCheckRequiredInd=function(a){this.m_isRequired=a},MPageComponent.prototype.getGapCheckOverrideInd=function(){return this.m_overrideInd},MPageComponent.prototype.setGapCheckOverrideInd=function(a){this.m_overrideInd=parseInt(a,10)},MPageComponent.prototype.getSatisfiedInd=function(){return this.m_isSatisfied},MPageComponent.prototype.setSatisfiedInd=function(a){this.m_isSatisfied=a},MPageComponent.prototype.isComponentFiltered=function(){if(null!==this.m_displayFilters&&this.m_displayFilters.length>0)for(var a=this.m_displayFilters.length;a--;){var b=this.m_displayFilters[a];if(b.checkFilters()===!1)return CERN_EventListener.removeAllListeners(this,this),!0}return!1},MPageComponent.prototype.isAlwaysExpanded=function(){return this.m_isAlwaysExpanded},MPageComponent.prototype.isEditMode=function(){return this.m_editMode},MPageComponent.prototype.isExpanded=function(){return this.m_isExpanded};MPageComponent.prototype.isIViewAdd=function(){};MPageComponent.prototype.isLineNumberIncluded=function(){return this.m_includeLineNumber},MPageComponent.prototype.isLoaded=function(){return this.m_compLoad},MPageComponent.prototype.isMenuDithered=function(a){return this.m_menuOptions[a].isMenuDithered},MPageComponent.prototype.isNewLink=function(){return this.m_newLink},MPageComponent.prototype.isPlusAddEnabled=function(){return!(!this.isPlusAddCustom()||!this.m_isPlusAdd)||!!CERN_Platform.inMillenniumContext()&&this.m_isPlusAdd},MPageComponent.prototype.isRefreshEnabled=function(){return this.m_isRefreshEnabled},MPageComponent.prototype.isResourceRequired=function(){return this.m_resourceRequired},MPageComponent.prototype.isScrollingEnabled=function(){return this.m_isScrollEnabled},MPageComponent.prototype.isPlusAddCustom=function(){return this.m_isPlusAddCustom},MPageComponent.prototype.getStyles=function(){return this.m_styles},MPageComponent.prototype.isContextualViewCompatible=function(){return this.m_isContextualViewCompatible},MPageComponent.prototype.isAddedToContextualView=function(){return this.m_isAddedToContextualView},MPageComponent.prototype.getContextualViewControl=function(){return this.m_contextualViewControl},MPageComponent.prototype.canHaveContextualViewControl=function(){return this.m_canHaveContextualViewControl},MPageComponent.prototype.getContextualViewControlInPlaceholderView=function(){return this.m_contextualViewControlInPlaceholderView},MPageComponent.prototype.getSequenceInContextualView=function(a){return this.m_sequenceInContextualView},MPageComponent.prototype.getRootPlaceholderComponentNode=function(){if(null===this.m_rootPlaceholderComponentNode||!this.m_rootPlaceholderComponentNode.length){var a=this.getStyles();this.m_rootPlaceholderComponentNode=$("#"+a.getId()+"PlaceholderView")}return this.m_rootPlaceholderComponentNode},MPageComponent.prototype.getPlaceholderView=function(){return this.m_placeholderView},MPageComponent.prototype.getResultCount=function(){return this.m_resultCount},MPageComponent.prototype.setAggregateTimer=function(a){this.m_aggregateTimer=a},MPageComponent.prototype.setAlwaysExpanded=function(a){this.m_isAlwaysExpanded=a},MPageComponent.prototype.setAutoSuggestAddScript=function(a){this.m_AutoSuggestScript=a},MPageComponent.prototype.setAutoSuggestAddTimerName=function(a){this.m_AutoSuggestAddTimerName=a},MPageComponent.prototype.setBrLookbackUnits=function(a){this.m_brlookbackUnits=a},MPageComponent.prototype.setBrLookbackUnitTypeFlag=function(a){this.m_brlookbackUnitTypeFlag=a},MPageComponent.prototype.setColumn=function(a){this.m_column=a},MPageComponent.prototype.setCompColor=function(a){var b=this.getStyles();b&&a&&a.length>0&&b.setColor(a)},MPageComponent.prototype.setCompFilters=function(a){this.m_hasCompFilters=a},MPageComponent.prototype.setComponentId=function(a){this.m_componentId=a;var b=this.getStyles();null!==b&&b.setComponentId(a)},MPageComponent.prototype.setComponentFilterMean=function(a){this.m_componentFilterMean=a},MPageComponent.prototype.setComponentLoadTimerName=function(a){this.m_compLoadTimerName=a},MPageComponent.prototype.setComponentRenderTimerName=function(a){this.m_compRenderTimerName=a},MPageComponent.prototype.setComponentTable=function(a){if(!ComponentTable.prototype.isPrototypeOf(a))throw new Error("Called setComponentTable on MPageComponent with non ComponentTable type for componentTable parameter");this.m_componentTable=a},MPageComponent.prototype.getComponentTable=function(){return this.m_componentTable},MPageComponent.prototype.setFlowsheetTable=function(a){if(!FlowsheetTable.prototype.isPrototypeOf(a))throw new Error("Called setFlowsheetTable on MPageComponent with non FlowsheetTable type for FlowsheetTable parameter");this.m_flowsheetTable=a},MPageComponent.prototype.getFlowsheetTable=function(){return this.m_flowsheetTable},MPageComponent.prototype.setCriterion=function(a){this.criterion=a},MPageComponent.prototype.setCustomizeView=function(a){this.m_isCustomizeView=a},MPageComponent.prototype.setDateFormat=function(a){this.m_dateFormat=a},MPageComponent.prototype.setDisplayEnabled=function(a){this.m_compDisp=a},MPageComponent.prototype.setDisplayFilters=function(a){this.m_displayFilters=a},MPageComponent.prototype.setEditMode=function(a){this.m_editMode=a},MPageComponent.prototype.setExpandCollapseState=function(a){this.m_isExpanded=a;var b=i18n.discernabu,c=this.getRootComponentNode(),d=Util.Style.g("sec-hd-tgl",c,"span");a?(Util.Style.rcss(c,"closed"),d[0].innerHTML="-",d[0].title=b.HIDE_SECTION):(Util.Style.acss(c,"closed"),d[0].innerHTML="+",d[0].title=b.SHOW_SECTION)},MPageComponent.prototype.setExpanded=function(a){this.m_isExpanded=a},MPageComponent.prototype.setFilterMappingsObj=function(a){return!!a&&(this.m_filterMappingsObj=a,!0)},MPageComponent.prototype.setFooterText=function(a){this.m_footerText=a},MPageComponent.prototype.setGapCheckBannerDismiss=function(a){this.m_gapCheckBannerDismiss=a},MPageComponent.prototype.setGrouperCatalogCodes=function(a,b){this.m_grouper_arr||(this.m_grouper_arr=[]),null===a||isNaN(a)||(this.m_grouper_arr[a]?this.m_grouper_arr[a].catalogCodes=b:(this.m_grouper_arr[a]={},this.m_grouper_arr[a].catalogCodes=b))},MPageComponent.prototype.setGrouperCatLabel=function(a,b){this.m_grouper_arr||(this.m_grouper_arr=[]),null===a||isNaN(a)||(this.m_grouper_arr[a]?this.m_grouper_arr[a].catLabel=b:(this.m_grouper_arr[a]={},this.m_grouper_arr[a].catLabel=b))},MPageComponent.prototype.setGrouperCriteria=function(a,b){this.m_grouper_arr||(this.m_grouper_arr=[]),null===a||isNaN(a)||(this.m_grouper_arr[a]?this.m_grouper_arr[a].criteria=b:(this.m_grouper_arr[a]={},
this.m_grouper_arr[a].criteria=b))},MPageComponent.prototype.setGrouperEventSets=function(a,b){this.setGrouperCriteria(a,b)},MPageComponent.prototype.setGrouperLabel=function(a,b){this.m_grouper_arr||(this.m_grouper_arr=[]),null===a||isNaN(a)||(this.m_grouper_arr[a]?this.m_grouper_arr[a].label=b:(this.m_grouper_arr[a]={},this.m_grouper_arr[a].label=b))},MPageComponent.prototype.setGrp1CatalogCodes=function(a){this.setGrouperCatalogCodes(0,a)},MPageComponent.prototype.setGrp1CatLabel=function(a){this.setGrouperCatLabel(0,a)},MPageComponent.prototype.setGrp1Criteria=function(a){this.setGrouperCriteria(0,a)},MPageComponent.prototype.setGrp1EventSets=function(a){this.setGrouperCriteria(0,a)},MPageComponent.prototype.setGrp1Label=function(a){this.setGrouperLabel(0,a)},MPageComponent.prototype.setGrp2CatalogCodes=function(a){this.setGrouperCatalogCodes(1,a)},MPageComponent.prototype.setGrp2CatLabel=function(a){this.setGrouperCatLabel(1,a)},MPageComponent.prototype.setGrp2Criteria=function(a){this.setGrouperCriteria(1,a)},MPageComponent.prototype.setGrp2EventSets=function(a){this.setGrouperCriteria(1,a)},MPageComponent.prototype.setGrp2Label=function(a){this.setGrouperLabel(1,a)},MPageComponent.prototype.setGrp3CatalogCodes=function(a){this.setGrouperCatalogCodes(2,a)},MPageComponent.prototype.setGrp3CatLabel=function(a){this.setGrouperCatLabel(2,a)},MPageComponent.prototype.setGrp3Criteria=function(a){this.setGrouperCriteria(2,a)},MPageComponent.prototype.setGrp3EventSets=function(a){this.setGrouperCriteria(2,a)},MPageComponent.prototype.setGrp3Label=function(a){this.setGrouperLabel(2,a)},MPageComponent.prototype.setGrp4CatalogCodes=function(a){this.setGrouperCatalogCodes(3,a)},MPageComponent.prototype.setGrp4CatLabel=function(a){this.setGrouperCatLabel(3,a)},MPageComponent.prototype.setGrp4Criteria=function(a){this.setGrouperCriteria(3,a)},MPageComponent.prototype.setGrp4EventSets=function(a){this.setGrouperCriteria(3,a)},MPageComponent.prototype.setGrp4Label=function(a){this.setGrouperLabel(3,a)},MPageComponent.prototype.setGrp5CatalogCodes=function(a){this.setGrouperCatalogCodes(4,a)},MPageComponent.prototype.setGrp5CatLabel=function(a){this.setGrouperCatLabel(4,a)},MPageComponent.prototype.setGrp5Criteria=function(a){this.setGrouperCriteria(4,a)},MPageComponent.prototype.setGrp5EventSets=function(a){this.setGrouperCriteria(4,a)},MPageComponent.prototype.setGrp5Label=function(a){this.setGrouperLabel(4,a)},MPageComponent.prototype.setGrp6CatalogCodes=function(a){this.setGrouperCatalogCodes(5,a)},MPageComponent.prototype.setGrp6CatLabel=function(a){this.setGrouperCatLabel(5,a)},MPageComponent.prototype.setGrp6Criteria=function(a){this.setGrouperCriteria(5,a)},MPageComponent.prototype.setGrp6EventSets=function(a){this.setGrouperCriteria(5,a)},MPageComponent.prototype.setGrp6Label=function(a){this.setGrouperLabel(5,a)},MPageComponent.prototype.setGrp7CatalogCodes=function(a){this.setGrouperCatalogCodes(6,a)},MPageComponent.prototype.setGrp7CatLabel=function(a){this.setGrouperCatLabel(6,a)},MPageComponent.prototype.setGrp7Criteria=function(a){this.setGrouperCriteria(6,a)},MPageComponent.prototype.setGrp7Label=function(a){this.setGrouperLabel(6,a)},MPageComponent.prototype.setGrp8CatalogCodes=function(a){this.setGrouperCatalogCodes(7,a)},MPageComponent.prototype.setGrp8CatLabel=function(a){this.setGrouperCatLabel(7,a)},MPageComponent.prototype.setGrp8Criteria=function(a){this.setGrouperCriteria(7,a)},MPageComponent.prototype.setGrp8EventSets=function(a){this.setGrouperCriteria(7,a)},MPageComponent.prototype.setGrp8Label=function(a){this.setGrouperLabel(7,a)},MPageComponent.prototype.setGrp9CatalogCodes=function(a){this.setGrouperCatalogCodes(8,a)},MPageComponent.prototype.setGrp9CatLabel=function(a){this.setGrouperCatLabel(8,a)},MPageComponent.prototype.setGrp9Criteria=function(a){this.setGrouperCriteria(8,a)},MPageComponent.prototype.setGrp9EventSets=function(a){this.setGrouperCriteria(8,a)},MPageComponent.prototype.setGrp9Label=function(a){this.setGrouperLabel(8,a)},MPageComponent.prototype.setGrp10CatalogCodes=function(a){this.setGrouperCatalogCodes(9,a)},MPageComponent.prototype.setGrp10CatLabel=function(a){this.setGrouperCatLabel(9,a)},MPageComponent.prototype.setGrp10Criteria=function(a){this.setGrouperCriteria(9,a)},MPageComponent.prototype.setGrp10EventSets=function(a){this.setGrouperCriteria(9,a)},MPageComponent.prototype.setGrp10Label=function(a){this.setGrouperLabel(9,a)},MPageComponent.prototype.setGrouperFilterCatalogCodes=function(a){this.m_grouperFilterCatalogCodes=a},MPageComponent.prototype.setGrouperFilterCatLabel=function(a){this.m_grouperFilterCatLabel=a},MPageComponent.prototype.setGrouperFilterCriteria=function(a){this.m_grouperFilterCriteria=a},MPageComponent.prototype.setGrouperFilterEventSets=function(a){this.setGrouperFilterCriteria(a)},MPageComponent.prototype.setGrouperFilterLabel=function(a){this.m_grouperFilterLabel=a},MPageComponent.prototype.setGroups=function(a){this.m_groups=a},MPageComponent.prototype.setHasActionsMenu=function(a){this.m_hasActionsMenu=a},MPageComponent.prototype.setAlwaysHideHeader=function(a){this.m_alwaysHideHeader=a},MPageComponent.prototype.setLookBackDropDown=function(a){this.m_hasLookBackDropDown=a},MPageComponent.prototype.setIncludeLineNumber=function(a){this.m_includeLineNumber=a},MPageComponent.prototype.setIViewItemsArrElement=function(a,b,c,d){this.m_iViewItemsArr||(this.m_iViewItemsArr=[]),null===a||isNaN(a)||(this.m_iViewItemsArr[a]={bandName:b,sectionName:c,itemName:d})},MPageComponent.prototype.setIViewMenuItems=function(a){this.m_iViewMenuItems=a},MPageComponent.prototype.setLabel=function(a){this.m_label=a},MPageComponent.prototype.setLink=function(a){this.m_link=a},MPageComponent.prototype.setViewpointLink=function(a){this.m_viewpoint_link=a},MPageComponent.prototype.setViewLink=function(a){this.m_view_link=a},MPageComponent.prototype.setLoaded=function(a){this.m_compLoad=a},MPageComponent.prototype.setLookbackDays=function(a){this.m_lookbackDays=a},MPageComponent.prototype.setLookbackMenuItems=function(a){this.m_lookBackMenuItems=a},MPageComponent.prototype.setLookbackUnits=function(a){this.m_lookbackUnits=a},MPageComponent.prototype.setResultRangeDirection=function(a){this.m_resultRangeDirection=a},MPageComponent.prototype.setLookbackUnitTypeFlag=function(a){this.m_lookbackUnitTypeFlag=a},MPageComponent.prototype.setMedHistory=function(a){this.m_medHistory=a},MPageComponent.prototype.setMedRecAdmit=function(a){this.m_medRecAdmit=a},MPageComponent.prototype.setMedRecTransfer=function(a){this.m_medRecTransfer=a},MPageComponent.prototype.setMedRecCrossEncTx=function(a){this.m_medRecCrossEncTx=a},MPageComponent.prototype.setMedRecDischarge=function(a){this.m_medRecDischarge=a},MPageComponent.prototype.setMenu=function(a){this.m_compMenuId=a.getId(),MP_MenuManager.updateMenuObject(a)},MPageComponent.prototype.setMenuItems=function(a){this.m_menuItems=a},MPageComponent.prototype.setMenuOptionNames=function(a){a?this.m_menuOptionNames=a:this.m_menuOptionNames=[]},MPageComponent.prototype.setMenuOptions=function(a){a?this.m_menuOptions=a:this.m_menuOptions=[]},MPageComponent.prototype.setMenuOptionText=function(a,b){if(b){this.m_menuOptions[a].text=b;var c=_g(this.m_menuOptions[a].id);c&&(c.innerHTML=b)}},MPageComponent.prototype.setMPageName=function(a){this.m_MPageName=a},MPageComponent.prototype.setNewLink=function(a){this.m_newLink=a},MPageComponent.prototype.setPageGroupSequence=function(a){this.m_pageGroupSeq=a},MPageComponent.prototype.setPreferencesObj=function(a){this.m_componentPreferences=a},MPageComponent.prototype.setRenderStrategy=function(a){!this.m_renderStrategy&&a&&RenderStrategy.prototype.isPrototypeOf(a)&&(a.setComponentToRender(this),this.m_renderStrategy=a)},MPageComponent.prototype.setPlusAddEnabled=function(a){this.m_isPlusAdd=a},MPageComponent.prototype.setPlusAddCustomInd=function(a){this.m_isPlusAddCustom=a},MPageComponent.prototype.setRefreshEnabled=function(a){this.m_isRefreshEnabled=a},MPageComponent.prototype.setReportId=function(a){this.m_reportId=a},MPageComponent.prototype.setReportMean=function(a){this.m_reportMean=a},MPageComponent.prototype.setResourceRequired=function(a){this.m_resourceRequired=a},MPageComponent.prototype.setRootComponentNode=function(a){this.m_rootComponentNode=a},MPageComponent.prototype.setScope=function(a){this.m_scope=a},MPageComponent.prototype.setScopeHTML=function(a){this.m_ScopeHTML=a},MPageComponent.prototype.setScrollingEnabled=function(a){this.m_isScrollEnabled=a},MPageComponent.prototype.setScrollNumber=function(a){this.m_scrollNumber=a},MPageComponent.prototype.setSectionContentNode=function(a){this.m_sectionContentNode=a},MPageComponent.prototype.setSelectedDataGroup=function(a){this.m_selectedDataGroup=a},MPageComponent.prototype.setSelectedTimeFrame=function(a){this.m_selectedTimeFrame=a},MPageComponent.prototype.setSequence=function(a){this.m_sequence=a},MPageComponent.prototype.setStyles=function(a){this.m_styles=a},MPageComponent.prototype.setSubLabel=function(a){this.m_subLabel=a},MPageComponent.prototype.setToggleStatus=function(a){"string"==typeof a?this.m_toggleStatus=parseInt(a,10):"number"==typeof a&&(this.m_toggleStatus=a)},MPageComponent.prototype.setPregnancyLookbackInd=function(a){this.m_pregLookbackInd=a},MPageComponent.prototype.setHILookupKey=function(a){this.m_hiLookupKey=a},MPageComponent.prototype.setAliasType=function(a){this.m_aliasType=a},MPageComponent.prototype.setAliasPoolCd=function(a){this.m_aliasPoolCd=a},MPageComponent.prototype.setExternalDataInd=function(a){this.m_externalDataInd=a},MPageComponent.prototype.setPatientEnteredDataInd=function(a){this.m_patEnteredDataInd=a},MPageComponent.prototype.setHITestUri=function(a){this.m_hiTestUri=a.replace(/&#047;/g,"/")},MPageComponent.prototype.setContextualViewCompatible=function(a){this.m_isContextualViewCompatible=a},MPageComponent.prototype.setAddedToContextualView=function(a){this.m_isAddedToContextualView=a},MPageComponent.prototype.toggledFromContextualView=function(){this.getOnContextualViewToggle()()},MPageComponent.prototype.setContextualViewControl=function(a){this.m_contextualViewControl=a},MPageComponent.prototype.setHasContextualViewControl=function(a){this.m_canHaveContextualViewControl=a},MPageComponent.prototype.setContextualViewControlInPlaceholderView=function(a){this.m_contextualViewControlInPlaceholderView=a},MPageComponent.prototype.setRootPlaceholderComponentNode=function(a){this.m_rootPlaceholderComponentNode=a},MPageComponent.prototype.setPlaceholderView=function(a){this.m_placeholderView=a},MPageComponent.prototype.setSequenceInContextualView=function(a){this.m_sequenceInContextualView=a},MPageComponent.prototype.setResultCount=function(a){a&&"string"==typeof a?this.m_resultCount=parseInt(a.replace(/[^0-9]+/g,""),10):"number"==typeof a&&(this.m_resultCount=a)},MPageComponent.prototype.generateNoDataFoundHTML=function(){var a=i18n.discernabu;return"<h3 class='info-hd'><span class='res-normal'>"+a.NO_RESULTS_FOUND+"</span></h3><span class='res-none'>"+a.NO_RESULTS_FOUND+"</span>"},MPageComponent.prototype.generateScriptFailureHTML=function(){var a=i18n.discernabu,b=this.getStyles().getNameSpace()+"-";return"<h3 class='info-hd'><span class='res-normal'>"+a.ERROR_RETREIVING_DATA+"</span></h3><dl class='"+b+"info error-message error-text'><dd><span>"+a.ERROR_RETREIVING_DATA+"</span></dd></dl>"},MPageComponent.prototype.applyTemplate=function(a){var b=this.getSectionContentNode();Util.Style.acss(b,a)},MPageComponent.prototype.createAccordionContent=function(){return this.m_renderStrategy.createComponentFilter()},MPageComponent.prototype.createAccordionControls=function(){var a=i18n.discernabu,b=this.getComponentId(),c=$("<div></div>").addClass("lb-pg-hd lb-page-ctrl"),d=$("<a></a>").addClass("setDefault").html(a.SET_AS_DEFAULT),e=$("<a></a>").addClass("resetAll").html(a.RESET_ALL);return d.click(function(){MP_Core.AppUserPreferenceManager.SaveCompPreferences(b)}),e.click(function(){MP_Core.AppUserPreferenceManager.ClearCompPreferences(b)}),c.append(d),c.append(e),c},MPageComponent.prototype.createMenu=function(){var a=this.m_menuOptionNames,b=a.length,c=_g("optsMenuActions"+this.m_componentId);if(c){c.hasChildNodes()&&(c.innerHTML="");for(var d=Util.ce("div"),e=0;e<b;e++){var f="opts-menu-item",g=this.m_menuOptions[a[e]];g.ditherOnLoad&&(f+=" opts-menu-item-dthr");var h=Util.cep("div",{id:g.id,className:f});h.innerHTML=g.text,g.evtType&&"function"==typeof g.fn&&Util.addEvent(h,g.evtType,g.fn),d.appendChild(h)}if(b>0){var i=_g("optsMenupersonalize"+this.m_componentId);i&&Util.Style.acss(i,"opts-personalize-sec-divider")}c.appendChild(d)}},MPageComponent.prototype.getFilterValues=function(a){var b=null,c=[],d=a.VALS.length,e=null,f=0;for(f=0;f<d;f++)e=a.VALS[f],b=new MPageGroupValue,b.setId(e.PE_ID),b.setName(e.PE_NM),b.setMeaning(e.CDF_MN),b.setDescription(CERN_Platform.encoding.htmlDecode(e.FTXT)),b.setSequence(e.G_SQ),b.setValueSequence(e.V_SQ),b.setValueTypeFlag(e.V_TYP),b.setQualifierFlag(e.Q_FLG),b.setParentId(e.PE_ID2),c.push(b);return c},MPageComponent.prototype.initHovers=function(a){for(var b=Util.Style.g("result-info",a,"DL"),c=b.length;c--;){var d=b[c],e=Util.gns(d);e&&Util.Style.ccss(e,"result-details")&&hs(d,e,this)}},MPageComponent.prototype.loadCategoryTypeAssignments=function(a){var b=null,c=0,d=null,e=-1,f=null,g=null,h=0;for(b=this.getFilterValues(a),c=b.length,f=new MPageGrouper,h=0;h<c;h++)d=b[h],d.getSequence()!=e&&(g=new MPageCodeValueGroup,e=d.getSequence(),g.setSequence(e),f.addGroup(g)),g.addCode(d.getId());this.addGroup(f)},MPageComponent.prototype.loadCEGroupers=function(a){var b=null,c=0,d=-1,e="",f=null,g=null,h=null,i=0,j=0,k=null,l=0,m=0;if(h=this.getGroups(),h&&0!==h.length)for(i=h.length,l=0;l<i;l++)if(f=h[l],f.getSequence()==a.F_SQ){for(b=this.getFilterValues(a),c=b.length,g=new MPageGrouper,g.setGroupId(f.getGroupId()),g.setGroupName(f.getGroupName()),m=0;m<c;m++)k=b[m],k.getSequence()!=d&&(d=k.getSequence(),f=new MPageEventCodeGroup,f.setSequence(d),g.addGroup(f)),j=k.getId(),e=k.getDescription(),j>0&&f.addEventCode(j),""!==e&&f.setGroupName(e);h[l]=g}},MPageComponent.prototype.loadComponentColor=function(a){var b=null,c=null;this.getCompColor()||(b=this.getFilterValues(a),c=b[0].m_meaning.replace("_","").toLowerCase(),this.setCompColor(c))},MPageComponent.prototype.loadEventCodes=function(a){var b=null,c=0,d=[],e=0,f=null,g=!1,h=0;for(b=this.getGroups(),c=b.length,h=0;h<c;h++)if(b[h].getSequence()==a.F_SQ){f=b[h];break}if(f){if(f.isSequenced())return;f.setEventCodes(null)}else f=new MPageEventCodeGroup,f.setGroupId(a.F_ID),f.setGroupName(a.F_MN),f.setSequence(a.F_SQ),g=!0;for(f.setSequenced("EVENT_SEQ"===a.FC_MN),d=this.getFilterValues(a),e=d.length,h=0;h<e;h++)f.addEventCode(d[h].getId());g&&this.addGroup(f)},MPageComponent.prototype.loadEventSets=function(a){var b=null,c=0,d=null,e=0,f=null,g=null,h=0,i=!1,j=null,k=null,l=[],m=[],n=0;for(b=this.getGroups(),c=b.length,n=0;n<c;n++)if(b[n].getSequence()==a.F_SQ){g=b[n],h=n;break}if(g){if(MPageSequenceGroup.prototype.isPrototypeOf(g)||g.isSequenced())return;g.setEventSets(null)}else g=new MPageEventSetGroup,g.setGroupId(a.F_ID),g.setGroupName(a.F_MN),g.setSequence(a.F_SQ),j=!0;for(g.setSequenced("EVENT_SET_SEQ"===a.FC_MN),d=this.getFilterValues(a),e=d.length,n=0;n<e;n++)f=d[n],g.addEventSet(f.getId()),l.push(f.getId()),"CODE_VALUE"!=f.getName()&&(i=!0),MP_Util.AddItemToMapArray(m,f.getName(),f.getId());return i?(k=new MPageSequenceGroup,k.setMultiValue(i),k.setItems(l),k.setMapItems(m),k.setSequence(g.getSequence()),k.setGroupId(g.getGroupId()),k.setGroupName(g.getGroupName()),void(j?this.addGroup(k):b[h]=k)):void(j&&this.addGroup(g))},MPageComponent.prototype.loadIViewOptions=function(a){var b=null,c=0,d=null,e=null,f=0;for(b=this.getFilterValues(a),c=b.length,f=0;f<c;f++)d=b[f],e=new MP_Core.MenuItem,e.setName(d.getName()),e.setDescription(d.getDescription()),e.setId(d.getId()),e.setValSequence(d.getValueSequence()),e.setValTypeFlag(d.getValueTypeFlag()),this.addIViewMenuItem(e)},MPageComponent.prototype.loadFilterMappings=function(){},MPageComponent.prototype.loadDefaultFilterMappings=function(){this.addFilterMappingObject("EVENT",{setFunction:this.loadEventCodes,type:"DEFAULT_FILTER",field:"ALL"}),this.addFilterMappingObject("EVENT_SET",{setFunction:this.loadEventSets,type:"DEFAULT_FILTER",field:"ALL"}),this.addFilterMappingObject("PRIM_EVENT_SET",{setFunction:this.loadEventSets,type:"DEFAULT_FILTER",field:"ALL"}),this.addFilterMappingObject("COLOR_THEME_CDS",{setFunction:this.loadComponentColor,type:"DEFAULT_FILTER",field:"ALL"}),this.addFilterMappingObject("LOOK_BACK",{setFunction:this.loadLookbackOptions,type:"DEFAULT_FILTER",field:"ALL"}),this.addFilterMappingObject("PF_MULTI_SELECT",{setFunction:this.loadPowerFormOptions,type:"DEFAULT_FILTER",field:"ALL"}),this.addFilterMappingObject("IVIEW_SELECT",{setFunction:this.loadIViewOptions,type:"DEFAULT_FILTER",field:"ALL"}),this.addFilterMappingObject("CAT_TYPE_ASSIGN",{setFunction:this.loadCategoryTypeAssignments,type:"DEFAULT_FILTER",field:"ALL"}),this.addFilterMappingObject("CE_GROUP",{setFunction:this.loadCEGroupers,type:"DEFAULT_FILTER",field:"ALL"}),this.addFilterMappingObject("EVENT_SEQ",{setFunction:this.loadEventCodes,type:"DEFAULT_SEQUENCED_FILTER",field:"ALL"}),this.addFilterMappingObject("EVENT_SET_SEQ",{setFunction:this.loadEventSets,type:"DEFAULT_SEQUENCED_FILTER",field:"ALL"})},MPageComponent.prototype.loadLookbackOptions=function(a){var b=null,c=0,d=null,e=null,f=0;for(b=this.getFilterValues(a),c=b.length,f=0;f<c;f++){switch(d=b[f],e=new ResultRangeSelection,e.setUnits(parseInt(d.getDescription(),10)),e.setScope(this.getScope()),d.getMeaning().toUpperCase()){case"HOURS":e.setType(1);break;case"DAYS":e.setType(2);break;case"WEEKS":e.setType(3);break;case"MONTHS":e.setType(4);break;case"YEARS":e.setType(5)}e.setDisplay(ResultRangeSelectionUtility.getDisplayText(e)),this.addLookbackMenuItem(e)}e=new ResultRangeSelection,e.setUnits(this.getBrLookbackUnits()),e.setScope(this.getScope()),e.setType(this.getBrLookbackUnitTypeFlag()),e.setDisplay(ResultRangeSelectionUtility.getDisplayText(e)),this.addLookbackMenuItem(e)},MPageComponent.prototype.loadMappedSettings=function(a,b){var c=null,d=null,e=null,f=[],g=0,h=null,i=[],j=0;if(f=this.getFilterValues(b),g=f.length,c=a.field,d=a.type,e=a.setFunction,!e||!c||!d)return!1;for(j=0;j<g;j++)switch(h=f[j],c.toUpperCase()){case"FTXT":i.push(h.getDescription());break;case"PE_ID":i.push(h.getId());break;case"NOMEN":i.push({nomen_id:h.getId(),seq:h.getValueSequence(),qual_flag:h.getQualifierFlag()});break;case"V_SQ":i.push({id:h.getId(),seq:h.getValueSequence()});break;case"LOOK_BACK":i.push({value:h.getDescription(),units:h.getMeaning()});break;case"CH_ASSIGN":i.push({parent_id:h.getParentId(),id:h.getId()})}switch(d.toUpperCase()){case"ARRAY":case"NOMEN":case"VALUE_SEQ":e.call(this,i);break;case"STRING":case"NUMBER":case"OBJECT":e.apply(this,i);break;case"BOOLEAN":e.call(this,"1"===i[0]);break;default:e.call(this,b)}},MPageComponent.prototype.loadPowerFormOptions=function(a){var b=null,c=null,d=0,e=null,f=0;for(c=this.getFilterValues(a),d=c.length,f=0;f<d;f++)e=c[f],b=new MP_Core.MenuItem,b.setName(e.getName()),b.setDescription(e.getDescription()),b.setId(e.getId()),this.addMenuItem(b)},MPageComponent.prototype.openTab=function(){alert("ERROR: openTab has not been implemented within the component")},MPageComponent.prototype.fireDiagnosisAddedEvent=function(){CERN_EventListener.fireEvent(this,this,EventListener.EVENT_DIAGNOSIS_ADDED,null)},MPageComponent.prototype.listenForDiagnosisEvents=function(){CERN_EventListener.addListener(this,EventListener.EVENT_DIAGNOSIS_ADDED,this.onDiagnosisAdded,this),CERN_EventListener.addListener(this,EventListener.EVENT_CONDITIONS_UPDATE,this.onDiagnosisAdded,this)},MPageComponent.prototype.onDiagnosisAdded=function(){},MPageComponent.prototype.listenForPrescribedEvents=function(){CERN_EventListener.addListener(this,EventListener.EVENT_PRESCRIPTION_REMOVED,this.onPrescriptionAddedRemoved,this),CERN_EventListener.addListener(this,EventListener.EVENT_ORDER_ACTION,this.onPrescriptionAddedRemoved,this)},MPageComponent.prototype.onPrescriptionAddedRemoved=function(){},MPageComponent.prototype.refreshComponent=function(){this.isDisplayable()&&(this.getStyles().getComponentType()===CERN_COMPONENT_TYPE_WORKFLOW&&(CERN_EventListener.fireEvent(this,this,EventListener.EVENT_CRITICAL_UPDATE,{critical:null}),CERN_EventListener.fireEvent(this,this,EventListener.EVENT_COUNT_UPDATE,{count:null}),CERN_EventListener.fireEvent(this,this,EventListener.EVENT_ERROR_UPDATE,{error:null})),this.startComponentDataRetrieval())},MPageComponent.prototype.removeMenuDither=function(a){var b=_g(this.m_menuOptions[a].id);b&&(Util.Style.rcss(b,"opts-menu-item-dthr"),this.m_menuOptions[a].isMenuDithered=!1)};MPageComponent.prototype.renderAccordion=function(a){};MPageComponent.prototype.resizeComponent=function(){var a="",b=0,c=null,d=this.getStyles().getComponentType(),e=null,f=0,g=null,h=20,i=0;if(d===CERN_COMPONENT_TYPE_WORKFLOW){if(e=$("#vwpBody"),!e.length)return;if(i=e.height(),c=$("#"+this.getStyles().getId()),!c.length)return;g=c.find(".content-body"),g.length&&(b=c.height(),f=g.height(),a=i-(b-f+h)+"px",g.css("max-height",a).css("overflow-y","auto"))}this.getComponentTable()&&this.getComponentTable().updateAfterResize(),this.getFlowsheetTable()&&this.getFlowsheetTable().updateAfterResize()},MPageComponent.prototype.RetrieveRequiredResources=function(){alert("ERROR: RetrieveRequiredResources has not been implemented within the component")},MPageComponent.prototype.sortGrouperArrayByLabel=function(){this.m_grouper_arr||(this.m_grouper_arr=[]),this.m_grouper_arr.sort(function(a,b){if(a.label&&b.label){var c=a.label.toUpperCase(),d=b.label.toUpperCase();return c<d?-1:c===d?0:1}if(a.catLabel&&b.catLabel){var e=a.catLabel.toUpperCase(),f=b.catLabel.toUpperCase();return e<f?-1:e===f?0:1}return a.label||a.catLabel?1:-1})},MPageComponent.prototype.updateLabel=function(a){this.m_label=a;var b=this.getRootComponentNode(),c=Util.gc(b,0),d=Util.gc(Util.Style.g("sec-title",c,"span")[0],0),e=_gbt("a",d);e[0]?e[0].innerHTML=a:d.innerHTML=a},MPageComponent.prototype.updateSubLabel=function(a){this.m_subLabel=a,this.m_onSubLabelChange(a);var b=this.getRootComponentNode(),c=Util.Style.g("sec-total",b,"span");c.length&&(c[0].innerHTML=this.m_subLabel)},MPageComponent.prototype.showLoading=function(){$(this.getSectionContentNode()).empty(),this.updateSubLabel(i18n.LOADING_DATA+"...")},MPageComponent.prototype.initializeComponent=function(a){this.setCriterion(a),this.loadDefaultFilterMappings(),this.loadFilterMappings()},MPageComponent.prototype.loadComponentSettings=function(a){var b=null,c=0,d=null,e=null,f=MP_Core.AppUserPreferenceManager,g=null,h=0;if(this.setComponentId(a.F_ID),this.setComponentFilterMean(a.F_MN),this.setReportId(a.R_ID),this.setReportMean(a.R_MN),this.setLabel(a.LBL),this.setMenuOptionNames(null),this.setMenuOptions(null),this.setLink(a.LNK),this.setScrollNumber(a.SCR_NM),this.setScrollingEnabled(a.SCR_EN),this.setPlusAddEnabled(1===a.PLS_AD),this.setDateFormat(a.DT_DSP),this.setBrLookbackUnits(a.LB_UNT||0),this.setBrLookbackUnitTypeFlag(a.LB_TYP||0),this.setLookbackDays(this.getLookbackDays()||0),this.setLookbackUnits(this.getLookbackUnits()||a.LB_UNT||0),this.setLookbackUnitTypeFlag(this.getLookbackUnitTypeFlag()||a.LB_TYP||0),this.setScope(this.getScope()||a.SCP),g=f.GetComponentById(a.F_ID,this.criterion.category_mean)){if(this.setIsInfoButtonEnabled(g.IsInfoButtonEnabled),this.setExpanded(g.expanded),this.setColumn(g.col_seq),this.setSequence(g.row_seq),this.setPageGroupSequence(g.group_seq),this.setGrouperFilterLabel(g.grouperFilterLabel||""),this.setGrouperFilterCatalogCodes(g.grouperFilterCatalogCodes||null),this.setGrouperFilterCatLabel(g.grouperFilterCatLabel||""),this.setGrouperFilterCriteria(g.grouperFilterCriteria||null),this.setSelectedTimeFrame(g.selectedTimeFrame||null),this.setSelectedDataGroup(g.selectedDataGroup||null),this.setPreferencesObj(g.preferencesObj||null),g.hasOwnProperty("gapCheckBannerDismiss")&&this.setGapCheckBannerDismiss(g.gapCheckBannerDismiss),g.preferencesObj){var i=!1;g.preferencesObj.hasOwnProperty("REQUIRED")&&(i=!0,this.setGapCheckBannerDismiss(!!g.preferencesObj.REQUIRED),delete g.preferencesObj.REQUIRED),Object.keys(g.preferencesObj).length||(i=!0,g.preferencesObj=null),i&&(this.setPreferencesObj(g.preferencesObj),this.savePreferences(!1))}g.compThemeColor&&this.setCompColor(g.compThemeColor),"undefined"!==g.toggleStatus&&null!==g.toggleStatus&&2!==a.TS?this.setToggleStatus(g.toggleStatus):this.setToggleStatus(a.TS),"undefined"!=typeof g.preferencesObj&&null!==g.preferencesObj&&"undefined"!=typeof g.preferencesObj.contextualViewPrefs&&null!==g.preferencesObj.contextualViewPrefs&&(this.setAddedToContextualView(g.preferencesObj.contextualViewPrefs.isAddedToContextualView),this.setSequenceInContextualView(g.preferencesObj.contextualViewPrefs.row_seq))}else this.setExpanded(a.EXP),this.setColumn(a.C_SQ),this.setSequence(a.R_SQ),this.setPageGroupSequence(a.G_SQ),this.setCompColor(a.THM),this.setToggleStatus(a.TS);for(d=this.getFilterMappingsObj(),c=a.FILT.length,h=0;h<c;h++)b=a.FILT[h],e=d[b.F_MN],e?this.loadMappedSettings(e,b):(e=d[b.FC_MN])&&e.setFunction.call(this,b)},MPageComponent.prototype.createMainMenu=function(){if(this.isDisplayable()){var a="mainCompMenu"+this.getStyles().getId(),b=new Menu(a);b.setIsRootMenu(!0),b.setAnchorElementId(a),b.setAnchorActiveClass("opts-menu-open"),b.setTypeClass("menu-wrkflw-comp-menu"),b.setAnchorConnectionCorner(["bottom","right"]),b.setContentConnectionCorner(["top","right"]),b.setContentParentId(this.getStyles().getId()),this.setMenu(b)}},MPageComponent.prototype.loadDisplayFilters=function(){},MPageComponent.prototype.startComponentDataRetrieval=function(){this.isResourceRequired()?this.RetrieveRequiredResources():this.retrieveComponentData()},MPageComponent.prototype.retrieveComponentData=function(){try{"function"==typeof this.InsertData&&this.InsertData()}catch(a){throw MP_Util.LogJSError(a,this,"base-component.js","retrieveComponentData"),a}},MPageComponent.prototype.InsertData=function(){alert("ERROR: InsertData has not been implemented within the component")},MPageComponent.prototype.renderComponent=function(a){this.HandleSuccess(a)},MPageComponent.prototype.HandleSuccess=function(){alert("ERROR: HandleSuccess has not been implemented within the component")},MPageComponent.prototype.preProcessing=function(){},MPageComponent.prototype.finalizeComponent=function(a,b){var c=this.getRootComponentNode(),d=this;if(c){var e=Util.Style.g("sec-total",c,"span");b?(d.setResultCount(b),e.length&&($(e).removeClass("hidden"),e[0].innerHTML=b)):e.length&&$(e).addClass("hidden");var f=this.getSectionContentNode();"string"==typeof a?f.innerHTML=a:$(f).html(a),this.initHovers(f),MP_Util.Doc.InitSubToggles(f,"sub-sec-hd-tgl"),setTimeout(function(){MP_Util.Doc.InitScrolling(Util.Style.g("scrollable",f,"div"),d.getScrollNumber(),"1.6")},0);var g=$(c).find(".error-message");g.length?($(c).find(".sec-title>span:first-child").addClass("error-icon-component"),$(g).css("border","1px solid #C00").css("padding","2px 4px"),CERN_EventListener.fireEvent(this,this,EventListener.EVENT_ERROR_UPDATE,{error:!0})):($(c).find(".sec-title>span:first-child").removeClass("error-icon-component"),CERN_EventListener.fireEvent(this,this,EventListener.EVENT_ERROR_UPDATE,{error:!1})),this.m_flowsheetTable?this.m_flowsheetTable.finalize():this.m_componentTable&&this.m_componentTable.finalize()}this.notifyAggregateTimer(),this.getOnFinalizeComponent()(b)},MPageComponent.prototype.getRequiredInd=function(){return 2===this.getToggleStatus()||this.getGapCheckCriteria()>0},MPageComponent.prototype.notifyAggregateTimer=function(){this.m_aggregateTimer instanceof AggregateTimer&&this.m_aggregateTimer.completeTask(this.getStyles().getId())},MPageComponent.prototype.savePreferences=function(a){MP_Core.AppUserPreferenceManager.UpdateSingleCompPreferences(this,a)},MPageComponent.prototype.postProcessing=function(){var a=this;setTimeout(function(){a.resizeComponent()},50)},MPageComponent.prototype.createComponentDisclaimerContainer=function(){var a=this,b=a.getComponentId(),c=a.getRequiredCompDisclaimerText()||"",d=new MPageUI.AlertBanner;return d.setType(MPageUI.ALERT_OPTIONS.TYPE.ADVISORY),d.setPrimaryText(c),d.setDismissible(!0),d.setCloseFunction(function(){a.m_onComponentDisclaimerClose(),d.hide();var c=$("#reqInd"+b);c.removeClass("hidden"),a.setGapCheckBannerDismiss(!0),a.savePreferences(!0)}),d},MPageComponent.prototype.updateComponentRequiredIndicator=function(a){var b=this.getRootComponentNode(),c=$(b);if(b){var d=c.find(".disclaimer-text");a&&!this.getSatisfiedInd()?this.getGapCheckBannerDismiss()?(d.hide(),this.m_showGapCheckingHeaderIcon=!0):(this.displayComponentDisclaimerContainer(),this.m_showGapCheckingHeaderIcon=!1):(d.hide(),this.m_showGapCheckingHeaderIcon=!1)}this.updateHeader()},MPageComponent.prototype.displayComponentDisclaimerContainer=function(){var a=this.getRootComponentNode(),b=$(a),c=b.find(".disclaimer-text");if(!c.length){var d=this.createComponentDisclaimerContainer(),e=d.render();c=$(e).addClass("disclaimer-text");var f=b.find("H2")[0];$(f).after(c),d.attachEvents()}c.show()},MPageComponent.prototype.createHeaderToggles=function(){var a=this,b=this.getHeaderToggles();if(0===b.length)return null;for(var c='<div class="hdr-toggle-container" id="hdrToggleContainer'+this.getComponentId()+'">',d=this.getActiveHeaderToggleIndex(),e=b.length,f=0;f<e;f++)c+='<span class="hdr-toggle '+(d===f?b[f].active:b[f].inactive)+'" data-toggle-button-index="'+f+'">'+(b[f].text||"&nbsp;")+"</span>";c+="</div>";var g=$(c);return g.on("click","span",function(){var b=parseInt($(this).attr("data-toggle-button-index"),10);a.activateHeaderToggle(b)}),g},MPageComponent.prototype.activateHeaderToggle=function(a){var b=$("#hdrToggleContainer"+this.getComponentId()),c=this.getHeaderToggles(),d=this.getActiveHeaderToggleIndex();if(a!==d){var e=b.children('[data-toggle-button-index="'+d+'"]');e.removeClass(c[d].active).addClass(c[d].inactive);var f=b.children('[data-toggle-button-index="'+a+'"]');f.removeClass(c[a].inactive).addClass(c[a].active),this.setActiveHeaderToggleIndex(a),this.handleHeaderToggleClick(a)}},MPageComponent.prototype.addHeaderToggleStyle=function(a,b){this.addHeaderToggle({active:a,inactive:b})},MPageComponent.prototype.handleHeaderToggleClick=function(a){},MPageComponent.prototype.getActiveHeaderToggleIndex=function(){return this.m_activeHeaderToggleIndex},MPageComponent.prototype.setActiveHeaderToggleIndex=function(a){this.m_activeHeaderToggleIndex=a},MPageComponent.prototype.getHeaderToggleStyles=function(){return this.getHeaderToggles()},MPageComponent.prototype.setHeaderToggleStyles=function(a){this.setHeaderToggles(a)},MPageComponent.prototype.getHeaderToggles=function(){return null===this.m_headerToggleObjects&&(this.m_headerToggleObjects=[]),this.m_headerToggleObjects},MPageComponent.prototype.setHeaderToggles=function(a){this.m_headerToggleObjects=a},MPageComponent.prototype.addHeaderToggle=function(a){null===this.m_headerToggleObjects&&(this.m_headerToggleObjects=[]),this.m_headerToggleObjects.push(a)},MPageComponent.prototype.onTitleClick=function(){if(CERN_Platform.inMillenniumContext()){var a=this.getCriterion(),b=this.getLink(),c=this.getViewLink(),d=this.getViewpointLink();CERN_Platform.viewLink(0,a.executable,a.person_id,a.encntr_id,b,c,d)}},MPageComponent.prototype.updateComponentAsOfDisplay=function(){$("#mainCompRefresh"+this.getComponentId()).attr("title",this.getAsOfDateString())},MPageComponent.prototype.getAsOfDateString=function(){var a=new Date,b=new mp_formatter.DateTimeFormatter(MPAGE_LOCALE),c=b.format(a,mp_formatter.DateTimeFormatter.TIME_24HOUR_NO_SECONDS),d=this.getLabel()+" - "+i18n.discernabu.AS_OF_TIME.replace("{0}",c);
return $("<textarea />").html(d).text()},MPageComponent.prototype.postDOMLocationChange=function(){},MPageComponent.prototype.createComponentContextualViewControl=function(){if(this.isContextualViewCompatible()){var a=new MPageUI.Button;return a.setStyle(MPageUI.BUTTON_OPTIONS.STYLE.LINK),a.setSize(MPageUI.BUTTON_OPTIONS.SIZE.SMALL),a}},MPageComponent.prototype.createPlaceholderViewOfComponent=function(){return this.m_placeholderView||(this.m_placeholderView=new MPageUI.PlaceholderContent,this.m_placeholderView.setPrimaryText(this.getLabel()),this.m_contextualViewControlInPlaceholderView=this.createComponentContextualViewControl(),this.m_contextualViewControlInPlaceholderView.setIcon(MPageUI.ICONS.ICON_MOVE_LEFT),this.m_placeholderView.setActionableControl(this.m_contextualViewControlInPlaceholderView)),$("<div>"+this.m_placeholderView.render()+"</div>").addClass("section").attr("id",this.getStyles().getId()+"PlaceholderView")},MPageComponent.prototype.addPendingAction=function(a){return MP_PendingData.addPendingAction(this.getComponentId(),this.getLabel(),a,MP_PendingData.requestLevel.COMPONENT)},MPageComponent.prototype.removePendingAction=function(a){return MP_PendingData.removePendingAction(this.getComponentId(),a,MP_PendingData.requestLevel.COMPONENT)},MPageComponent.prototype.setOnUpdateHeader=function(a){this.m_onUpdateHeader=a},MPageComponent.prototype.getOnUpdateHeader=function(){return this.m_onUpdateHeader},MPageComponent.prototype.updateHeader=function(){this.m_onUpdateHeader()},DummyComponentStyle.prototype=new ComponentStyle,DummyComponentStyle.prototype.constructor=ComponentStyle,DummyComponent.prototype=new MPageComponent,DummyComponent.prototype.constructor=MPageComponent,DummyComponent.prototype.postProcessing=function(){},DummyComponent.prototype.retrieveComponentData=function(){this.renderComponent()},DummyComponent.prototype.renderComponent=function(){var a=new MPageUI.AlertBanner;a.setType(MPageUI.ALERT_OPTIONS.TYPE.INFO),a.setPrimaryText(i18n.discernabu.MPageView.COMPONENT_NOT_AVAILABLE),this.finalizeComponent(a.render(),"")},DummyComponent.prototype.loadComponentSettings=function(a){var b=MP_Core.AppUserPreferenceManager,c=null;this.setComponentId(a.F_ID),this.setReportId(a.R_ID),this.setReportMean(a.R_MN),this.setLabel(a.LBL),this.setPlusAddEnabled(!1),c=b.GetComponentById(a.F_ID),c?(this.setExpanded(c.expanded),this.setColumn(c.col_seq),this.setSequence(c.row_seq),this.setPageGroupSequence(c.group_seq),this.setPreferencesObj(c.preferencesObj||null),c.compThemeColor&&this.setCompColor(c.compThemeColor),"undefined"!==c.toggleStatus&&null!==c.toggleStatus&&2!==a.TS?this.setToggleStatus(c.toggleStatus):this.setToggleStatus(a.TS),"undefined"!=typeof c.preferencesObj&&null!==c.preferencesObj&&"undefined"!=typeof c.preferencesObj.contextualViewPrefs&&null!==c.preferencesObj.contextualViewPrefs&&(this.setAddedToContextualView(c.preferencesObj.contextualViewPrefs.isAddedToContextualView),this.setSequenceInContextualView(c.preferencesObj.contextualViewPrefs.row_seq))):(this.setExpanded(a.EXP),this.setColumn(a.C_SQ),this.setSequence(a.R_SQ),this.setPageGroupSequence(a.G_SQ),this.setCompColor(a.THM),this.setToggleStatus(a.TS))},CPMMPageComponent.prototype=new MPageComponent,CPMMPageComponent.prototype.constructor=MPageComponent,CPMMPageComponent.prototype.getPathwayInstanceId=function(){return this.m_pathwayInstanceId},CPMMPageComponent.prototype.setPathwayInstanceId=function(a){this.m_pathwayInstanceId=a},CPMMPageComponent.prototype.getConceptGroupCd=function(){return this.m_conceptGroupCd},CPMMPageComponent.prototype.getNodeId=function(){return this.m_nodeId},CPMMPageComponent.prototype.getCpComponentId=function(){return this.m_cpComponentId},CPMMPageComponent.prototype.getPathwayActions=function(){return this.m_pathwayActions?this.m_pathwayActions:[]},CPMMPageComponent.prototype.getPathwayId=function(){return this.m_pathwayId},CPMMPageComponent.prototype.setConceptGroupCd=function(a){this.m_conceptGroupCd=a},CPMMPageComponent.prototype.setNodeId=function(a){this.m_nodeId=a},CPMMPageComponent.prototype.setCpComponentId=function(a){this.m_cpComponentId=a},CPMMPageComponent.prototype.setPathwayActions=function(a){this.m_pathwayActions=a},CPMMPageComponent.prototype.setPathwayId=function(a){this.m_pathwayId=a},CPMMPageComponent.prototype.setComponentConfig=function(a){this.m_componentConfig=a},CPMMPageComponent.prototype.getComponentConfig=function(){return this.m_componentConfig||(this.m_componentConfig=[]),this.m_componentConfig},CPMMPageComponent.prototype.getConceptGroupConfig=function(){return this.m_conceptGroupConfig||(this.m_conceptGroupConfig=[]),this.m_conceptGroupConfig},CPMMPageComponent.prototype.setConceptGroupConfig=function(a){this.m_conceptGroupConfig=a},CPMMPageComponent.prototype.getConceptGroupMeanings=function(){return this.m_conceptGroupMeanings||(this.m_conceptGroupMeanings=[]),this.m_conceptGroupMeanings},CPMMPageComponent.prototype.setConceptGroupMeanings=function(a){"string"==typeof a?this.m_conceptGroupMeanings=[a]:this.m_conceptGroupMeanings=a},CPMMPageComponent.prototype.processComponentConfig=function(a,b){},CPMMPageComponent.prototype.processPathwayActions=function(a){},CPMMPageComponent.prototype.getCustomContentLocation=function(){return this.m_customContentLocation},CPMMPageComponent.prototype.setCustomContentLocation=function(a){this.m_customContentLocation=a},CPMMPageComponent.prototype.getMenuIds=function(){return this.m_menuIds||(this.m_menuIds=[]),this.m_menuIds},CPMMPageComponent.prototype.addMenuId=function(a){"string"!=typeof a&&MP_Util.LogError("Id supplied to addMenuId is not a valid string.");var b=this.getMenuIds();b.push(a)},CPMMPageComponent.prototype.commitChanges=function(a){},CPMMPageComponent.prototype.cleanUp=function(){var a,b,c=0,d=0;if(this.m_menuIds&&this.m_menuIds.length>0){for(c=this.m_menuIds.length,a=c;a--;){var e=MP_MenuManager.getMenuObject(this.m_menuIds[a]),f=e.getMenuItemArray();for(b=0,d=f.length;b<d;b++)e.removeMenuItem(f[b]);MP_MenuManager.deleteMenuObject(this.m_menuIds[a])}this.m_menuIds=null}var g,h=CERN_MPageComponents,i=h.length;for(a=i;a--;)g=h[a],g.m_componentId===this.getComponentId()&&h.splice(a,1)},CPMMPageComponent.prototype.setConceptDisp=function(a){this.m_conceptDisp=a},CPMMPageComponent.prototype.getConceptDisp=function(){return this.m_conceptDisp},CPMMPageComponent.prototype.setConceptCd=function(a){if("number"!=typeof a)throw new Error("Invalid Cocnept CD passed to 'setConceptCd'");this.m_conceptCd=a},CPMMPageComponent.prototype.getConceptCd=function(){return this.m_conceptCd},CPMMPageComponent.prototype.setIntentionCd=function(a){if("number"!=typeof a)throw new Error("Invalid Intention CD passed to 'setIntentionCd'");this.m_intentionCd=a},CPMMPageComponent.prototype.getIntentionCd=function(){return this.m_intentionCd},CPMMPageComponent.prototype.setIntentionMean=function(a){if("string"!=typeof a)throw new Error("Invalid Intention meaning passed to 'setIntentionMean'");this.m_intentionMean=a},CPMMPageComponent.prototype.getIntentionMean=function(){return this.m_intentionMean},CPMMPageComponent.prototype.setConceptMean=function(a){if("string"!=typeof a)throw new Error("Invalid Concept meaning passed to 'setConceptMean'");this.m_conceptMean=a},CPMMPageComponent.prototype.getConceptMean=function(){return this.m_conceptMean},CPMMPageComponent.prototype.loadUserPrefs=function(){var a,b=MP_Core.AppUserPreferenceManager.GetComponentById(this.getComponentId());b&&(a=b.preferencesObj||{},this.setPreferencesObj(a),"number"==typeof a.EXPANDED&&this.setExpanded(!!a.EXPANDED))},CPMMPageComponent.prototype.setTriggeringNomenclature=function(a){if("number"!=typeof a)throw new Error("Type Error: Non-number 'nomenclatureId' passed into CPMMPageComponent method 'setTriggeringNomenclatureId'");this.m_triggeringNomenclature=a},CPMMPageComponent.prototype.getTriggeringNomenclature=function(){return this.m_triggeringNomenclature||(this.m_triggeringNomenclature=0),this.m_triggeringNomenclature},CPMMPageComponent.prototype.setCustomOptionsObject=function(a){this.m_customOptionsObject=a},CPMMPageComponent.prototype.getCustomOptionsObject=function(){return this.m_customOptionsObject||null},CPMMPageComponent.prototype.getIsHidden=function(){return this.m_isHidden},CPMMPageComponent.prototype.setIsHidden=function(a){if("boolean"!=typeof a)throw new Error("Called setIsHidden on CPMMPageComponent with non boolean type for isHidden parameter");this.m_isHidden=a},CPMMPageComponent.prototype.autoSave=function(){return""},CPMMPageComponent.attachMethods=function(a){var b,c=CPMMPageComponent.prototype,d=a.prototype;for(b in c)c.hasOwnProperty(b)&&(d[b]||(d[b]=c[b]))},MPageCPNodeController.prototype.componentMapping={},MPageCPNodeController.prototype.getComponentMapping=function(){return this.componentMapping},MPageCPNodeController.prototype.getId=function(){return this.m_id},MPageCPNodeController.prototype.setId=function(a){if("string"!=typeof a&&"number"!=typeof a)throw new Error("Type Error: Invalid 'id' passed into MPageCPNodeController method 'setId'");this.m_id=a},MPageCPNodeController.prototype.getConceptCd=function(){return this.m_conceptCd},MPageCPNodeController.prototype.setConceptCd=function(a){if("number"!=typeof a)throw new Error("Type Error: Invalid 'conceptCd' passed into MPageCPNodeController method 'setConceptCd'");this.m_conceptCd=a},MPageCPNodeController.prototype.getPathwayId=function(){return this.m_pathwayId},MPageCPNodeController.prototype.setPathwayId=function(a){if("number"!=typeof a)throw new Error("Type Error: Invalid 'conceptCd' passed into MPageCPNodeController method 'setPathwayId'");this.m_pathwayId=a},MPageCPNodeController.prototype.getPathwayTypeCd=function(){return this.m_pathwayTypeCd},MPageCPNodeController.prototype.setPathwayTypeCd=function(a){if("number"!=typeof a)throw new Error("Type Error: Invalid 'conceptCd' passed into MPageCPNodeController method 'setPathwayTypeCd'");this.m_pathwayTypeCd=a},MPageCPNodeController.prototype.getPathwayTypeMean=function(){return this.m_pathwayTypeMean},MPageCPNodeController.prototype.setPathwayTypeMean=function(a){if("string"!=typeof a)throw new Error("Type Error: Invalid 'conceptCd' passed into MPageCPNodeController method 'pathwayTypeMean'");this.m_pathwayTypeMean=a},MPageCPNodeController.prototype.getPathwayInstance=function(){return this.m_pathwayInstance},MPageCPNodeController.prototype.setPathwayInstance=function(a){if("object"!=typeof a)throw new Error("Type Error: Invalid 'conceptCd' passed into MPageCPNodeController method 'pathwayTypeMean'");this.m_pathwayInstance=a},MPageCPNodeController.prototype.getConceptConfig=function(){return this.m_conceptConfiguration},MPageCPNodeController.prototype.setConceptConfig=function(a){this.m_conceptConfiguration=a},MPageCPNodeController.prototype.getNodeConfig=function(){return this.m_nodeConfiguration},MPageCPNodeController.prototype.setNodeConfig=function(a){this.m_nodeConfiguration=a},MPageCPNodeController.prototype.getCustomContentLocation=function(){return this.m_customContentLocation},MPageCPNodeController.prototype.setCustomContentLocation=function(a){this.m_customContentLocation=a},MPageCPNodeController.prototype.getContainerId=function(){return this.m_containerId},MPageCPNodeController.prototype.setContainerId=function(a){if("string"!=typeof a&&"number"!=typeof a)throw new Error("Type Error: Invalid 'id' passed into MPageCPNodeController method 'setContainerId'");this.m_containerId=a},MPageCPNodeController.prototype.getConceptMean=function(){return this.m_conceptMean},MPageCPNodeController.prototype.setConceptMean=function(a){if("string"!=typeof a)throw new Error("Type Error: Non-string type 'mean' passed into MPageCPNodeController method 'setCocneptMean'");this.m_conceptMean=a},MPageCPNodeController.prototype.getComponentList=function(){return this.m_componentList||(this.m_componentList=[]),this.m_componentList},MPageCPNodeController.prototype.setComponentList=function(a){this.m_componentList=a},MPageCPNodeController.prototype.getView=function(){return this.m_view||(this.m_view=new CPNodeView),this.m_view},MPageCPNodeController.prototype.setView=function(a){this.m_view=a},MPageCPNodeController.prototype.addComponentMapping=function(a,b){var c=this.getComponentMapping();if("string"!=typeof a)throw new Error("Type Error: Non-string 'meaning' passed into MPageCPNodeController method 'addComponentMapping'");if("function"!=typeof b)throw new Error("Type Error: Non-function 'classConstructor' passed into MPageCPNodeController method 'addComponentMapping'");if(c[a])throw new Error("Runtime Error: 'meaning' already exists in MPageCPNodeController componentMapping - '"+a+"'");c[a]=b},MPageCPNodeController.prototype.getConstructorByMeaning=function(a){if("string"!=typeof a)throw new Error("Type Error: Non-string 'meaning' passed into MPageCPNodeController method 'getConstructorByMeaning'");return this.getComponentMapping()[a]?this.getComponentMapping()[a]:null},MPageCPNodeController.prototype.commitComponentActions=function(){this.getView().commitComponentChanges(!0)},MPageCPNodeController.prototype.undoComponentActions=function(){this.getView().commitComponentChanges(!1)},MPageCPNodeController.prototype.dispose=function(){this.getView().destroyView()},MPageCPNodeController.prototype.processPathwayConfiguration=function(a){if(!a)throw new Error("Runtime Error: Undefined config passed into CPMController method 'processPathwayConfiguration'");this.setPathwayId(a.PATHWAY_ID),this.setPathwayTypeMean(a.PATHWAY_TYPE_MEAN),this.setPathwayTypeCd(a.PATHWAY_TYPE_CD),1==a.CONCEPT_LIST.length&&this.setConceptConfig(a.CONCEPT_LIST[0].CG_LIST),a.PATHWAY_INSTANCE&&this.setPathwayInstance(a.PATHWAY_INSTANCE),this.setNodeConfig(a.NODE_LIST)},MPageCPNodeController.prototype.getConceptGroupConfigByMeaning=function(a,b){for(var c=this.m_conceptConfiguration||[],d=[],e=c.length;e--;)a.indexOf(c[e].CONCEPT_GROUP_CD_MEAN)>=0&&b==c[e].INTENTION_CD&&d.push(c[e]);return d},MPageCPNodeController.prototype.getComponentActions=function(a){var b,c,d=null,e=null,f=null,g=null,h=[];if(d=this.getPathwayInstance())for(e=d.PATHWAY_ACTIONS,b=e.NODE_LIST.length;b--;)for(f=e.NODE_LIST[b],c=f.COMPONENT_LIST.length;c--;)if(g=f.COMPONENT_LIST[c],g.COMPONENT_ID===a)return h=g.ACTIONS;return h},MPageCPNodeController.prototype.getNodeById=function(a){for(var b=this.m_nodeConfiguration,c=b.length;c--;)if(b[c].CP_NODE_ID==a)return b[c]},MPageCPNodeController.prototype.processNodeConfiguration=function(a){throw new Error("Error: 'processNodeConfiguration' not implemented on 'MPageCPNodeController'")},CPMController.prototype=new MPageCPNodeController,CPMController.prototype.constructor=CPMController,CPMController.prototype.setCPMTabMenuId=function(a){this.m_cpmTabMenuId=a},CPMController.prototype.getCPMTabMenuId=function(){return this.m_cpmTabMenuId},CPMController.prototype.getTriggeringNomenclature=function(){return this.m_triggeringNomenclature},CPMController.prototype.setTriggeringNomenclature=function(a){if("number"!=typeof a)throw new Error("Type Error: 'nomenclatureId' passed into CPMController method 'setTriggeringNomenclature'");this.m_triggeringNomenclature=a},CPMController.prototype.getCustomOptionsObject=function(){return this.m_customOptionsObject},CPMController.prototype.setCustomOptionsObject=function(a){this.m_customOptionsObject=a};var CPM_MPageComponents=null,CPMCurrCompIndex=null;CPMController.prototype.addOutsideComponents=function(a){a.push({COMP_TYPE_CD_MEANING:"IMPRESSIONS",COMP_DETAIL_LIST:[]})},CPMController.prototype.processOutsideComponent=function(a,b){a.setSequence(100+b),a.setPageGroupSequence(1),a.setColumn(1)},CPMController.prototype.createCpmConfigRequest=function(a,b){var c;return c=new MP_Core.ScriptRequest(this,"ENG:CPMController_retrieveNodeConfiguration"),c.setProgramName("cp_load_pathway_config"),c.setParameters(["^MINE^",a+".0",b+".0"]),c.setAsync(!0),c},CPMController.prototype.processNodeConfiguration=function(a){var b=900,c=900,d=this.getNodeById(a);if(!d)throw new Error("Runtime Error: Undefined config passed into CPMController method 'processNodeConfiguration'");var e,f,g,h,i,j,k,l,m,n,o=d.COMPONENT_LIST||[],p=d.INTENTION_CD_MEANING||"",q=this.getComponentList(),r=d.CONCEPT_CD_MEAN||"",s=d.CONCEPT_CD_DISP||"",t=d.INTENTION_CD||0,u=d.CONCEPT_CD||0,v=this.getPathwayId()||0,w=this.getView();for(w.setViewSettings(d),this.addOutsideComponents(o),CPMCurrCompIndex=void 0==CPMCurrCompIndex?0:o.length,this.buildTabMenu(u),k=0,l=o.length;k<l;k++)e=o[k],h=e.COMP_TYPE_CD_MEANING,m=e.CP_COMPONENT_ID,n=e.CONCEPT_GROUP_CD,h&&(i=this.getConstructorByMeaning(h),i&&(j=new i,j.setCustomOptionsObject(this.getCustomOptionsObject()),j.setIntentionCd(t),j.setIntentionMean(p),j.setConceptCd(u),j.setConceptMean(r),j.setConceptDisp(s),j.setTriggeringNomenclature(this.getTriggeringNomenclature()),j.setAlwaysExpanded(!0),j.setCustomContentLocation(this.getCustomContentLocation()),j.setCpComponentId(m),j.setComponentId(this.getId()+k),j.setNodeId(a),j.setPathwayId(v),j.setConceptGroupCd(n),j.setComponentConfig(e),0!=e.ROW&&0!=e.GROUP&&0!=e.COLUMN?(j.setSequence(e.ROW),j.setPageGroupSequence(e.GROUP),j.setColumn(e.COLUMN)):(j.setSequence(b),b++,j.setPageGroupSequence(c),j.setColumn(1)),g=this.getComponentActions(m),j.setPathwayActions(g),j.processPathwayActions(g),f=this.getConceptGroupConfigByMeaning(j.getConceptGroupMeanings(),t),j.setConceptGroupConfig(f),j.processComponentConfig(e,f),j.getIsHidden()||(q.push(j),w.addComponent(j)),(j instanceof VitalsCPMComponent||j instanceof LabsCPMComponent)&&j.setScope(2)))},CPMController.prototype.buildTabMenu=function(a){var b=$("#"+this.getCPMTabMenuId()),c="cpmTabMenu"+a,d=null,e=i18n.discernabu.cpm_core_o1;MP_MenuManager.getMenuObject(c)&&MP_MenuManager.deleteMenuObject(c),d=new Menu(c),d.setTypeClass("menu-page-menu"),d.setIsRootMenu(!0),d.setLabel(""),d.setAutoFlipVertical(!1),d.setAnchorElementId("chxTabsMenu"+a),d.setAnchorConnectionCorner(["bottom","right"]),d.setContentConnectionCorner(["top","right"]);var f="cpmTabLinksMenu"+a,g=new Menu(f);g.setLabel(e.LINKSLABEL),g.setCloseOnClick(!1),g.setAnchorConnectionCorner(["top","left"]),g.setContentConnectionCorner(["top","right"]),g.setIsDisabled(!0),g.setTypeClass("diaglinks-cpm-menu-item-disabled"),d.addMenuItem(g);var h="cpmTabDiagramsMenu"+a,i=new Menu(h);i.setLabel(e.DIAGLABEL),i.setCloseOnClick(!1),i.setAnchorConnectionCorner(["top","left"]),i.setContentConnectionCorner(["top","right"]),i.setIsDisabled(!0),i.setTypeClass("diaglinks-cpm-menu-item-disabled"),d.addMenuItem(i),MP_MenuManager.addMenuObject(d),b.append("<div id='chxTabsMenu"+a+"' class='cpm-tab-menu-inactive'>&nbsp;</div>")},CPMController.prototype.configureView=function(){var a=new CPMView;a.setName("CPM"),a.setId("cpm"+this.getId()),a.setRenderStrategyConstructor(CPMRenderStrategy),a.setCustomCSS("wf cpm"),a.setContainer($("#"+this.getContainerId())),a.setContainerId(this.getContainerId()),this.setView(a)},CPMController.prototype.render=function(){var a=this.getContainerId(),b=this.getView();if(!a)throw new Error("Runtime Error: No 'containerId' set on instance of 'CPMController'");$("#"+this.getContainerId()).empty(),b.initializeComponents(),b.renderMPage()};var CPM_Util=function(){return{refreshComponentsToStorage:function(a){if(a&&a.length){CPMCurrCompIndex||(CPMCurrCompIndex=0),CPM_MPageComponents=[];for(var b=CPMCurrCompIndex,c=a.length;b<c;b++)a[b]&&CPM_MPageComponents.push(a[b])}}}}();CPMController.prototype.processComponentLayout=function(){var a,b,c,d=this.getComponentList(),e=-1,f=-1;for(CPM_Util.refreshComponentsToStorage(d),b=0,c=d.length;b<c;b++)a=d[b],a.setPageGroupSequence(1),a.setColumn(1),"undefined"!=typeof NewOrdersCPMComponent&&a instanceof NewOrdersCPMComponent?a.setSequence(97):"undefined"!=typeof AllergyComponentCPM&&a instanceof AllergyComponentCPM?a.setSequence(0):"undefined"!=typeof LabsCPMComponent&&a instanceof LabsCPMComponent?(f=b,a.setSequence(1)):"undefined"!=typeof VitalsCPMComponent&&a instanceof VitalsCPMComponent?(e=b,a.setSequence(2)):"undefined"!=typeof DiagramCPMComponent&&a instanceof DiagramCPMComponent?a.setSequence(96):"undefined"!=typeof DocumentsCPMComponent&&a instanceof DocumentsCPMComponent?a.setSequence(4):"undefined"!=typeof PhysicianImpressionsCPMComponent&&a instanceof PhysicianImpressionsCPMComponent?a.setSequence(98):"undefined"!=typeof TreatAssessmentComponentCPM&&a instanceof TreatAssessmentComponentCPM?a.setSequence(96):this.processOutsideComponent(a,b);e>=0&&f>=0&&(d[e].setSequence(2),d[e].setPageGroupSequence(0),d[e].setColumn(2),d[f].setSequence(1),d[f].setPageGroupSequence(0),d[f].setColumn(1))},CPMController.prototype.retrieveNodeConfiguration=function(){var a=this,b=a.getConceptCd(),c=a.getPathwayId();if(!b)throw new Error("Runtime Error: No concept mean set on CPMController.  Cannot retrieve node configuration.");MP_Core.XmlStandardRequest(null,this.createCpmConfigRequest(c,b),function(b){var c="",d=null,e=0,f=0;if(a.configureView(),b||(c="Error retrieving CPM Configuration"),"S"===b.getStatus()){if(d=b.getResponse(),!d)throw new Error("Runtime Error: Undefined 'response' from CPMController method 'retrieveNodeConfiguration'");a.processPathwayConfiguration(d);for(var g=a.getNodeConfig(),e=g.length;e--;)if("TREATMENTS"==g[e].INTENTION_CD_MEANING){f=g[e].CP_NODE_ID;break}return a.processNodeConfiguration(f),g&&g.length&&"!CONCEPT ONLY!"==g[0].NODE_NAME&&a.processComponentLayout(),void a.render()}c="Z"===b.getStatus()?"No configuration for this result type was found":"Error retrieving configuration",$("#"+a.getContainerId()).html(c)})},CPMRenderStrategy.prototype=new RenderStrategy,CPMRenderStrategy.prototype.constructor=CPMRenderStrategy,CPMRenderStrategy.prototype.createComponentHeader=function(){var a=$("<h2></h2>").addClass("cpm "+this.componentStyle.getHeaderClass());return this.addComponentSection(a,this.createComponentToggleControl()),this.addComponentSection(a,this.createComponentTitle()),a[0]},CPMRenderStrategy.prototype.createComponentToggleControl=function(){return this.component.isAlwaysExpanded()?null:$("<div></div>").addClass("cpm-sec-hd-tgl").attr("title",this.i18nCore.HIDE_SECTION)[0]},CPMRenderStrategy.prototype.createComponentAccordion=function(){return null},CPMRenderStrategy.prototype.createComponentTitle=function(){var a=$("<span></span>").addClass("cpm-header "+this.componentStyle.getTitle());return this.addComponentSection(a,this.createComponentAnchor()),this.addComponentSection(a,this.createComponentSubTitleSection()),this.addComponentSection(a,this.createPlusAddControl()),this.addComponentSection(a,this.createHeaderSeparator()),this.addComponentSection(a,this.createHeaderDropdown()),a[0]},CPMRenderStrategy.prototype.createHeaderSeparator=function(){return"<span class='header-separator'></span>"};var InteractionChecking=function(){function a(a,b,c,d){try{var e=a.length;a[e]={idx:c,pIdx:d,iObj:b}}catch(a){throw new Error("ERROR in function AddInteraction(idx["+c+"],pIdx["+d+"]): "+a.message)}}function b(a,b){try{for(var c=a.length,d=0;d<c;d++)if(a[d].synonym_id==b)return d;return-1}catch(a){throw new Error("ERROR in function findSynonymId(id["+b+"]): "+a.message)}}function c(a,b,c,d,e){try{for(var f=a.length,g=0;g<f;g++)if(b&&c&&a[g].SeverityLevel==b&&a[g].InteractionType==c||d&&e&&a[g].SilSeverityLevel==d&&a[g].SilConfidenceLevel==e)return g;return-1}catch(a){throw new Error("ERROR in function findTypeCombo(severity["+b+"],type["+c+"],silSeverity["+d+"],silConfidence["+e+"]): "+a.message)}}function d(a,d){try{var e,f=a.length;if(0==f)a[f]={synonym_name:d.subjectEntityName,synonym_id:d.subjectSynonymId,types:[]},e=a[f].types.length,a[f].types[e]={SeverityLevel:d.severityLevel,InteractionType:d.interactionType,SilSeverityLevel:d.silSeverityLevel,SilConfidenceLevel:d.silConfidenceLevel};else{var g=b(a,d.subjectSynonymId);g==-1?a[f]={synonym_name:d.subjectEntityName,synonym_id:d.subjectSynonymId,types:[]}:f=g,e=a[f].types.length;var h=-1;e>0&&(h=c(a[f].types,d.severityLevel,d.interactionType,d.silSeverityLevel,d.silConfidenceLevel)),h==-1&&(a[f].types[e]={SeverityLevel:d.severityLevel,InteractionType:d.interactionType,SilSeverityLevel:d.silSeverityLevel,SilConfidenceLevel:d.silConfidenceLevel})}}catch(a){throw new Error("ERROR in function AddInteractionByMed(): "+a.message)}}function e(a,b,c){var e,f,g,h,i,j,k=(a.length,{});if(!c){var l=[];return l.push(new Promise(function(a,c){b.getHostProperty("SubjectEntityName").then(function(b){e=b,a()})}),new Promise(function(a,c){b.getHostProperty("SubjectSynonymId").then(function(b){f=b,a()})}),new Promise(function(a,c){b.getHostProperty("SeverityLevel").then(function(b){g=b,a()})}),new Promise(function(a,c){b.getHostProperty("InteractionType").then(function(b){h=b,a()})}),new Promise(function(a,c){b.getHostProperty("SilSeverityLevel").then(function(b){i=b,a()})}),new Promise(function(a,c){b.getHostProperty("SilConfidenceLevel").then(function(b){j=b,a()})})),Promise.all(l).then(function(){k={subjectEntityName:e,subjectSynonymId:f,severityLevel:g,interactionType:h,silSeverityLevel:i,silConfidenceLevel:j},d(a,k)})}e=b.SubjectEntityName,f=b.SubjectSynonymId,g=b.SeverityLevel,h=b.InteractionType,i=b.SilSeverityLevel,j=b.SilConfidenceLevel,k={subjectEntityName:e,subjectSynonymId:f,severityLevel:g,interactionType:h,silSeverityLevel:i,silConfidenceLevel:j},d(a,k)}function f(b,c,d,e,f,g){var h;switch(b){case 0:h=g.arrDrugDrug;break;case 1:h=g.arrDrugAllergy;break;case 2:h=g.arrDrugFood;break;case 3:h=g.arrDupTherapy;break;case 4:h=g.arrIVCompatibility;break;default:logger.logJSError("Error in trying to set the interaction type.","Interaction Checking","inn_util_interaction_checking.js","GetInteractions")}a(h,d,e,f),c.interactionCnt++}function g(a,b){a.DrugDrugInteractions=b.arrDrugDrug,a.DrugAllergyInteractions=b.arrDrugAllergy,a.DrugFoodInteractions=b.arrDrugFood,a.DupTherapyInteractions=b.arrDupTherapy,a.IVCompatibilityInteractions=b.arrIVCompatibility}function h(a){var b={arrDrugDrug:{type:"Drug Drug Interaction"},arrDrugAllergy:{type:"Drug Allergy Interaction"},arrDrugFood:{type:"Drug Food Interaction"},arrDupTherapy:{type:"Duplicate Therapy Interaction"},arrIVCompatibility:{type:"IV Compatibility Interaction"}},c=[];if("undefined"==typeof a.GetInteractionCheckAtEx)return alert("The registered version of PVInteractionCheckingCom.dll does not support Interaction Checking from this MPage.  Please contact your system administrator."),j=!1,k()?null:Promise.resolve(null);if(j=!0,k())try{var d=a.GetInteractionCheckCount();if(d>0){var h=[];h.interactionCnt=0;for(var i=0;i<d;i++){var l=a.GetInteractionCheckAtEx(i),m=l.InteractionCollection.GetInteractionCount();if(m>0)for(var n=0;n<m;n++){var o=l.InteractionCollection.GetInteractionAt(n);f(o.InteractionType,h,o,n,i,b),e(c,o,!0)}}return h.Medications=c,g(h,b),h}return null}catch(a){throw new Error("ERROR in function GetInteractions(): "+a.message)}else try{return a.GetInteractionCheckCount().then(function(d){if(d>0){var h=[];h.interactionCnt=0;for(var i=[],j=0;j<d;j++)i.push(a.GetInteractionCheckAtEx(j).then(function(a){return a.InteractionCollection.GetInteractionCount().then(function(d){if(d>0){for(var g=[],i=0;i<d;i++)g.push(a.InteractionCollection.GetInteractionAt(i).then(function(a){return a.getHostProperty("InteractionType").then(function(d){return f(d,h,a,i,j,b),e(c,a,!1)})}));return Promise.all(g)}})}));return Promise.all(i).then(function(){return h.Medications=c,g(h,b),h}).catch(function(a){throw new Error("ERROR in function GetInteractions(): "+a.message)})}return null}).catch(function(a){throw new Error(a)})}catch(a){throw new Error("ERROR in function GetInteractions(): "+a.message)}}var i,j=!0,k=function(){return/(MSIE|Edge|Trident\/7.0)/gi.test(navigator.userAgent)};return{init:function(){try{return null==i&&(i=window.external.DiscernObjectFactory("MEDICATIONCOLLECTION")),!0}catch(a){throw new Error("ERROR in function init(): "+a.message)}},GetisDllSupported:function(){return j},RemoveMedicationAt:function(a){return new Promise(function(b,c){try{k()?(i.RemoveMedicationAt(a),b()):i.RemoveMedicationAt(a).then(function(){b()}).catch(function(b){c(new Error("ERROR in function RemoveMedicationAt("+a+"): "+b.message))})}catch(b){c(new Error("ERROR in function RemoveMedicationAt("+a+"): "+b.message))}})},ClearMedicationCollection:function(){return new Promise(function(a,b){try{k()?(i.Clear(),a()):i.Clear().then(function(){a()}).catch(function(a){b(new Error("ERROR in function ClearMedicationCollection(): "+a.message))})}catch(a){b(new Error("ERROR in function ClearMedicationCollection(): "+a.message))}})},AddMedication:function(a,b,c,d){var e=this;return new Promise(function(f,g){try{null==i&&e.init();var h=window.external.DiscernObjectFactory("MEDICATIONOB");if(!k())return i.GetMedicationCount().then(function(e){return h.AddSynonym(a,b).then(function(){return h.UniqueIdentifier=e.toString()+b+a.toString(),h.mnemonic=b,h.OrderDetails=c,h.VenueType=d,i.AddMedication(h).then(function(){f()})})}).catch(function(e){g(new Error("ERROR in function AddMedication("+a+","+b+","+c+","+d+"): "+e.message))});var j=i.GetMedicationCount();h.AddSynonym(a,b),h.UniqueIdentifier=j.toString()+b+a.toString(),h.mnemonic=b,h.OrderDetails=c,h.VenueType=d,i.AddMedication(h),f()}catch(e){g(new Error("ERROR in function AddMedication("+a+","+b+","+c+","+d+"): "+e.message))}})},GetMedicationCnt:function(){return new Promise(function(a,b){try{if(k()){var c=i.GetMedicationCount();a(c)}i.GetMedicationCount().then(function(b){a(b)}).catch(function(a){b(new Error("ERROR in function GetMedicationCnt(): "+a.message))})}catch(a){b(new Error("ERROR in function GetMedicationCnt(): "+a.message))}})},CheckforInteractions:function(a){return new Promise(function(b,c){try{if(!k())return i.GetMedicationCount().then(function(c){if(c>0){var d=window.external.DiscernObjectFactory("PVINTERACTIONCHECKING");return d.CheckMedicationsInteractions(i,a).then(function(a){return a.GetInteractionCheckCount().then(function(c){return c>0?h(a).then(function(a){b(a)}):void b(null)})})}b(null)}).catch(function(a){c(new Error("ERROR in function CheckforInteractions(): "+a.message))});var d=i.GetMedicationCount();if(d>0){var e=window.external.DiscernObjectFactory("PVINTERACTIONCHECKING");iccObj=e.CheckMedicationsInteractions(i,a);var f=iccObj.GetInteractionCheckCount();if(f>0){var g=h(iccObj);b(g)}else b(null)}else b(null)}catch(a){c(new Error("ERROR in function CheckforInteractions(): "+a.message))}})}}}();CPNodeView.prototype=new MPageView,CPNodeView.prototype.constructor=CPNodeView,CPNodeView.prototype.getId=function(){return this.m_id},CPNodeView.prototype.setId=function(a){if("string"!=typeof a&&"number"!=typeof a)throw new Error("Type Error: Invalid 'id' passed into CPNodeView method 'setId'");this.m_id=a},CPNodeView.prototype.setContainerId=function(a){this.m_containerId=a},CPNodeView.prototype.getContainerId=function(){return this.m_containerId},CPNodeView.prototype.getCustomCSS=function(){return this.m_customCSS},CPNodeView.prototype.setCustomCSS=function(a){if("string"!=typeof a)throw new Error("Type Error: Non-string 'css' passed into CPNodeView method 'setCustomCSS'");this.m_customCSS=a},CPNodeView.prototype.getRenderStrategyConstructor=function(){return this.m_renderStrategy},CPNodeView.prototype.setRenderStrategyConstructor=function(a){if("function"!=typeof a)throw new Error("Type Error: Non-constructor 'rsConstructor' passed into CPNodeView method 'setRenderStrategyConstructor'");this.m_renderStrategy=a},CPNodeView.prototype.createNewRenderStrategy=function(){var a=this.getRenderStrategyConstructor();return a?new a:new RenderStrategy},CPNodeView.prototype.resizeComponents=function(){for(var a,b=this.getComponents()||[],c=b.length;c--;)a=b[c],a.isDisplayable()&&a.resizeComponent()},CPNodeView.prototype.resizeView=function(){this.resizeComponents()},CPNodeView.prototype.initializeComponents=function(){var a,b,c=this.getComponents()||[],d=this.getCriterion(),e=c.length;
for(b=0;b<e;b++)a=c[b],a&&(a.initializeComponent(d),a.loadDisplayFilters(),a.createMainMenu(),a.preProcessing())},CPNodeView.prototype.renderComponents=function(a){var b=this.getContainer();MPageView.prototype.renderComponents.call(this,a),b&&b.length&&b.addClass(this.getCustomCSS())},CPNodeView.prototype.attachEvents=function(a){if(a){var b=i18n.discernabu,c=a.getRootComponentNode(),d=$(c);d.find(".cpm-sec-hd-tgl").click(function(a){d.hasClass("closed")?(d.removeClass("closed"),this.innerHTML="-",this.title=b.HIDE_SECTION):(d.addClass("closed"),this.innerHTML="+",this.title=b.SHOW_SECTION)})}},CPNodeView.prototype.renderMPage=function(){var a,b,c=this,d=this.getComponents()||[],e=null,f=d.length;for(this.renderComponents(d),b=0;b<f;b++)a=d[b],a.isLoaded()||(a.setLoaded(!0),a.startComponentDataRetrieval()),this.attachEvents(a);MP_Util.Doc.SetupExpandCollapse(this.getContainerId()),$(window).on("resize."+this.getId(),function(){e&&clearTimeout(e),e=setTimeout(function(){c.resizeView()},500)})},CPNodeView.prototype.getCriterion=function(){var a=JSON.parse(m_criterionJSON);return MP_Util.GetCriterion(a,CERN_static_content)},CPNodeView.prototype.cleanComponents=function(){for(var a=this.getComponents()||[],b=a.length;b--;)a[b].cleanUp()},CPNodeView.prototype.commitComponentChanges=function(a){for(var b=this.getComponents()||[],c=b.length;c--;)b[c].commitChanges(a)},CPNodeView.prototype.destroyView=function(){this.cleanComponents(),$(window).off("."+this.getId())},CPMView.prototype=new CPNodeView,CPMView.prototype.constructor=CPMView,FusionRenderStrategy.prototype=new RenderStrategy,FusionRenderStrategy.prototype.constructor=RenderStrategy,FusionRenderStrategy.prototype.createComponentShell=function(){return this.createComponentContainer()};var Util=function(){var a=[],b=document,c=window;return{EventCache:function(){var a=[];return{add:function(b,c,d){a.push(arguments)},remove:function(b,c,d){for(var e,f=a.length-1;f>=0;f-=1)b==a[f][0]&&c==a[f][1]&&d==a[f][2]&&(e=a[f],e[0].removeEventListener?e[0].removeEventListener(e[1],e[2],e[3]):e[0].detachEvent&&("on"!=e[1].substring(0,2)&&(e[1]="on"+e[1]),e[0].detachEvent(e[1],e[0][c+d])))},flush:function(){for(var b,c=a.length-1;c>=0;c-=1){var d=a[c];d[0].removeEventListener&&d[0].removeEventListener(d[1],d[2],d[3]),b=d[1],"on"!=d[1].substring(0,2)&&(d[1]="on"+d[1]),d[0].detachEvent&&(d[0].detachEvent(d[1],d[2]),d[0][b+d[2]]&&d[0].detachEvent(d[1],d[0][b+d[2]]))}}}}(),ce:function(c){var d=a[c];return d||(d=a[c]=b.createElement(c)),d?d.cloneNode(!1):null},cep:function(a,b){var c=this.ce(a);return this.mo(c,b)},mo:function(a,b,c){a=a||{},b=b||{};var d;for(d in b)d&&(a[d]=void 0===a[d]?b[d]:c?a[d]:b[d]);return a},de:function(a){a&&this.gp(a).removeChild(a)},cancelBubble:function(a){a=c.event||a,a&&(a.stopPropagation?a.stopPropagation():a.cancelBubble=!0)},preventDefault:function(a){a=c.event||a,a&&(a.preventDefault?a.preventDefault():a.returnValue=!1)},goff:function(a){var b=0,c=0;if(a.offsetParent)for(;a.offsetParent;)b+=a.offsetLeft,c+=a.offsetTop,a=a.offsetParent;else(a.x||a.y)&&(b+=a.x||0,c+=a.y||0);return[b,c]},gp:function(a){if(!a.parentNode)return a;for(a=a.parentNode;3===a.nodeType&&a.parentNode;)a=a.parentNode;return a},gc:function(a,b){b=b||0;var c=-1;if(!a.childNodes[b])return null;for(a=a.childNodes[0];a&&c<b&&(1!==a.nodeType||(c++,c!==b));)a=this.gns(a);return a},gcs:function(a){for(var b=[],c=a.childNodes,d=0;d<c.length;d++){var e=c[d];1===e.nodeType&&b.push(e)}return b},gns:function(a){if(!a)return null;for(var b=a.nextSibling;b&&1!==b.nodeType;)b=b.nextSibling;return b},gps:function(a){for(var b=a.previousSibling;b&&1!==b.nodeType;)b=b.previousSibling;return b},ac:function(a,b){return b.appendChild(a),a},ia:function(a,b){var c=Util.gp(b),d=Util.gns(b);d?c.insertBefore(a,d):Util.ac(a,c)},addEvent:function(a,b,c){function d(a,b,c){a.myEvents||(a.myEvents={}),a.myEvents[b]||(a.myEvents[b]=[]);var d=a.myEvents[b];d[d.length]=c}function e(a,b){if(a&&a.myEvents&&a.myEvents[b])for(var c=a.myEvents[b],d=0,e=c.length;d<e;d++)c[d]()}a.addEventListener?(a.addEventListener(b,c,!1),Util.EventCache.add(a,b,c)):a.attachEvent?(a["e"+b+c]=c,a[b+c]=function(){a["e"+b+c](window.event)},a.attachEvent("on"+b,a[b+c]),Util.EventCache.add(a,b,c)):(d(a,b,c),a["on"+b]=function(){e(a,b)})},removeEvent:function(a,b,c){Util.EventCache.remove(a,b,c)},popup:function(a,b,c){function d(a,b){return b?a+"="+b+",":""}function e(){c=c||{};var a,b={};for(a in f)a&&(b[a]=void 0!==c[a]?c[a]:f[a]);return b}if(!window.open)return!1;var f={w:screen.width,h:screen.height,rz:!0,mb:!0,scb:!0,stb:!0,tb:!0,lb:!0,tp:null,lft:null,sx:null,sy:null,dp:"no",dr:"no",fs:"no"};c=e();var g=d("dependent",c.dp)+d("directories",c.dr)+d("fullscreen",c.fs)+d("location",c.lb?1:0)+d("menubar",c.mb)+d("resizable",c.rz?1:0)+d("scrollbars",c.scb?1:0)+d("status",c.stb?1:0)+d("toolbar",c.tb?1:0)+d("top",c.tp)+d("left",c.lft)+d("width",c.w)+d("height",c.h)+d("screenX",c.sx)+d("screenY",c.sy);g=g.substring(0,g.length-1);var h=window.open(a,b,g);return window.blur(),h.focus&&h.focus(),!0},Convert:{},Cookie:{},Detect:{},i18n:{},Load:{},Pos:{},Style:{},Timeout:{}}}();Util.addEvent(window,"unload",Util.EventCache.flush),Util.Style=function(){return{ccss:function(a,b){if("undefined"==typeof a.className||!a.className||!a.getAttribute("class"))return!1;for(var c=a.getAttribute("class").split(" "),d=0,e=c.length;d<e;d++)if(c[d]===b)return!0;return!1},acss:function(a,b){return this.ccss(a,b)?a:(a.className=(a.className?a.className+" ":"")+b,a)},rcss:function(a,b){if(!this.ccss(a,b))return a;for(var c=a.className.split(" "),d="",e=0,f=c.length;e<f;e++){var g=c[e];g!==b&&(d+=d.length>0?" "+g:g)}return a.className=d,a},tcss:function(a,b){return this.ccss(a,b)?(this.rcss(a,b),!1):(this.acss(a,b),!0)},co:function(a){a.style.MozOpacity="",a.style.opacity="",a.style.filter=""},g:function(a,b,c){b=b||document,c=c||"*";for(var d=[],e=_gbt(c,b),f=e.length,g=0,h=0;g<f;g++)this.ccss(e[g],a)&&(d[h]=e[g],h++);return d}}}(),Util.Pos=function(){return{gso:function(){var a=document,b=a.body,c=window,d=a.documentElement,e=d.scrollTop,f=b.scrollTop,g=d.scrollLeft,h=b.scrollLeft;return"number"==typeof c.pageYOffset?[c.pageYOffset,c.pageXOffset]:"number"==typeof e?f>e||h>g?[f,h]:[e,g]:[f,h]},goo:function(a){return a?[a.offsetTop,a.offsetLeft,a.offsetHeight,a.offsetWidth]:[0,0,0,0]},gop:function(a){var b=0,c=0;if(a.offsetParent)for(b=a.offsetLeft,c=a.offsetTop,a=a.offsetParent;a;)b+=a.offsetLeft,c+=a.offsetTop,a=a.offsetParent;return[c,b]},gvs:function(){var a=window,b=document,c=b.body,d=b.documentElement;return"undefined"!=typeof a.innerWidth?[a.innerHeight,a.innerWidth]:"undefined"!=typeof d&&"undefined"!=typeof d.clientWidth&&0!==d.clientWidth?[d.clientHeight,d.clientWidth]:[c.clientHeight,c.clientWidth]}}}(),Function.prototype.method=function(a,b){return this.prototype[a]=b,this},Function.method("inherits",function(a){var b={},c=this.prototype=new a;return this.method("uber",function(d){d in b||(b[d]=0);var e,f,g=b[d],h=a.prototype;if(g){for(;g;)h=h.constructor.prototype,g-=1;e=h[d]}else e=c[d],e==this[d]&&(e=h[d]);return b[d]+=1,f=e.apply(this,Array.prototype.slice.apply(arguments,[1])),b[d]-=1,f}),this}),Function.prototype.createAttribute=function(a,b){this.prototype["m_"+a]=b,this.prototype["get"+a]=function(){return this["m_"+a]},this.prototype["set"+a]=function(b){this["m_"+a]=b}},MPageComponentInteractive.inherits(MPageComponent),MPageGrouper.inherits(MPageGroup),MPageEventSetGroup.inherits(MPageGroup),MPageCatalogCodeGroup.inherits(MPageGroup),MPageEventCodeGroup.inherits(MPageGroup),MPageCodeValueGroup.inherits(MPageGroup),MPageSequenceGroup.inherits(MPageGroup),MPageGroupValue.prototype.getParentId=function(){return this.m_parentId},MPageGroupValue.prototype.setParentId=function(a){this.m_parentId=a},MPageGroupValue.prototype.getId=function(){return this.m_id},MPageGroupValue.prototype.setId=function(a){this.m_id=a},MPageGroupValue.prototype.getName=function(){return this.m_name},MPageGroupValue.prototype.setName=function(a){this.m_name=a},MPageGroupValue.prototype.getSequence=function(){return this.m_sequence},MPageGroupValue.prototype.setSequence=function(a){this.m_sequence=a},MPageGroupValue.prototype.getDescription=function(){return this.m_description},MPageGroupValue.prototype.setDescription=function(a){this.m_description=a},MPageGroupValue.prototype.getMeaning=function(){return this.m_meaning},MPageGroupValue.prototype.setMeaning=function(a){this.m_meaning=a},MPageGroupValue.prototype.getValueSequence=function(){return this.m_valSequence},MPageGroupValue.prototype.setValueSequence=function(a){this.m_valSequence=a},MPageGroupValue.prototype.getValueTypeFlag=function(){return this.m_valTypeFlag},MPageGroupValue.prototype.setValueTypeFlag=function(a){this.m_valTypeFlag=a},MPageGroupValue.prototype.getQualifierFlag=function(){return this.m_qualifierFlag},MPageGroupValue.prototype.setQualifierFlag=function(a){this.m_qualifierFlag=a};var CERN_COMPONENT_TYPE_SUMMARY=1,CERN_COMPONENT_TYPE_WORKFLOW=2,CERN_EventListener=null,CERN_MPageComponents=null,CERN_ObjectDefinitionMapping={},CERN_BrowserDevInd=!1,CK_DATA={},STR_PAD_LEFT=1,STR_PAD_RIGHT=2,STR_PAD_BOTH=3;if(Array.prototype.addAll||(Array.prototype.addAll=function(a){if(a&&a.length>0)for(var b=0,c=a.length;b<c;b++)this.push(a[b])}),!Array.prototype.indexOf)throw new Error("Browser version does not contain an implementation of Array.prototype.indexOf");if(!Function.prototype.bind)throw new Error("Browser version does not contain an implementation of Function.prototype.bind");if(!document.getElementsByClassName)throw new Error("Browser version does not contain an implementation of document.getElementsByClassName");window.onerror=function(a,b,c,d,e){var f=null,g=null,h=null,i=i18n.UNKNOWN,j=null,k=null,l={errorMessage:a,line:c,columnNumber:d,file:b.search(/([a-zA-Z0-9-_]+\.js)|(\/group\?)/)!==-1?b.match(/([a-zA-Z0-9-_]+\.js)|(\/group\?)/)[0]:b},m=null;"undefined"!=typeof m_criterionJSON&&(j=CERN_Platform.getCriterion().CRITERION,k=j.CATEGORY_MEAN,m={VIEW:j.CATEGORY_MEAN,VIEW_POINT:"undefined"!=typeof m_viewpointJSON&&m_viewpointJSON?JSON.parse(m_viewpointJSON).VP_INFO.VIEWPOINT_NAME:"",PERSON_ID:j.PERSON_ID,ENCNTRS:j.ENCNTRS,PRSNL_ID:j.PRSNL_ID,POSITION_CD:j.POSITION_CD,PPR_CD:j.PPR_CD,LOGICAL_DOMAIN_ID:j.LOGICAL_DOMAIN_ID,USER:j.USERNAME,APP_NAME:j.EXECUTABLE?j.EXECUTABLE.split(".")[0]:"",RELEASE_VERSION:j.RELEASE_VERSION},"WORKLIST_RELEASE_VERSION"in j&&(m.WORKLIST_RELEASE_VERSION=j.WORKLIST_RELEASE_VERSION));try{i=e&&e.stack?e.stack:arguments.callee.caller.toString()}catch(a){}var n=i18n.UNEXPECTED_ERROR_CAUGHT+"<br />"+i18n.discernabu.JS_ERROR+": "+a+"<br />"+i18n.FILE+": "+b+"<br />"+i18n.LINE_NUMBER+": "+c+"<br />"+i18n.SOURCE+": "+i+"<br />",o=i===i18n.UNKNOWN?"Unknown":i,p=new CapabilityTimer("CAP:MPG_Page_Level_Error_Details",k);p.addMetaData("err",JSON.stringify(l)),p.addMetaData("context",JSON.stringify(m)),p.addMetaData("sTrace",o),p.capture();var q=MP_StackProcessor.populateServerURL(o),r=MP_StackProcessor.populateUniqueGroupTokens(o);Object.assign(l,q,r);var s=MP_StackProcessor.populateSanitizedStackTrace(o,q,r),t=populateRemoteLogInfoObject(l,m,s);if(log.setLoggingActive(!0),logger.logError(n,{loggedObject:t}),CERN_BrowserDevInd)throw new Error(i18n.UNEXPECTED_ERROR_CAUGHT+"<br />"+i18n.discernabu.JS_ERROR+": "+a+"<br />"+i18n.FILE+": "+b+"<br />"+i18n.LINE_NUMBER+": "+c);return f=MP_ModalDialog.retrieveModalDialogObject("errorModal"),f||(f=MP_Util.generateModalDialogBody("errorModal","error",i18n.PAGE_ERROR,i18n.PAGE_ERROR_ACTION),f.setHeaderTitle(i18n.ERROR_OCCURED),g=new ModalButton("refreshButton"),g.setText(i18n.REFRESH).setCloseOnClick(!0),g.setOnClickFunction(function(){CERN_Platform.refreshMPage()}),f.addFooterButton(g),h=new ModalButton("closeButton"),h.setText(i18n.CLOSE).setCloseOnClick(!0),f.addFooterButton(h)),MP_ModalDialog.updateModalDialogObject(f),MP_ModalDialog.showModalDialog("errorModal"),!0},window.addEventListener("unhandledrejection",function(a){var b=null,c=null,d=null,e=null,f=null,g=a.detail?a.detail.reason:null;g?(e=g.message?g.message:g,f=g.stack?g.stack:"Unhandled Promise Rejection"):(e="Unhandled rejection",f="Unhandled Promise Rejection"),"undefined"!=typeof m_criterionJSON&&(b=CERN_Platform.getCriterion().CRITERION,c=b.CATEGORY_MEAN,d={VIEW:b.CATEGORY_MEAN,VIEW_POINT:"undefined"!=typeof m_viewpointJSON&&m_viewpointJSON?JSON.parse(m_viewpointJSON).VP_INFO.VIEWPOINT_NAME:"",PERSON_ID:b.PERSON_ID,ENCNTRS:b.ENCNTRS,PRSNL_ID:b.PRSNL_ID,POSITION_CD:b.POSITION_CD,PPR_CD:b.PPR_CD,LOGICAL_DOMAIN_ID:b.LOGICAL_DOMAIN_ID,USER:b.USERNAME,APP_NAME:b.EXECUTABLE?b.EXECUTABLE.split(".")[0]:"",RELEASE_VERSION:b.RELEASE_VERSION},"WORKLIST_RELEASE_VERSION"in b&&(d.WORKLIST_RELEASE_VERSION=b.WORKLIST_RELEASE_VERSION));var h=new CapabilityTimer("CAP:MPG_Page_Level_Uncaught_Rejection_Details",c);h.addMetaData("err",JSON.stringify(e)),h.addMetaData("context",JSON.stringify(d)),h.addMetaData("sTrace",f),h.capture();var i=i18n.UNEXPECTED_ERROR_CAUGHT+"\n"+i18n.discernabu.JS_ERROR+": "+e+"\n"+i18n.SOURCE+": "+f+"\nerrorOrigin: Unhandled promise rejection \n",j=populateRemoteLogInfoObject(e,d,f);j.errorOrigin="Unhandled promise rejection",log.setLoggingActive(!0),logger.logError(i,{loggedObject:j})});var MP_StackProcessor=function(){return{populateServerURL:function(a){var b=/(http|https):\/\/([\w\.\:\-]+\/){4}(?=[\w\.\-\/]+\.js)/gi;return b.test(a)?{serverURL:a.match(b)[0]}:{}},populateUniqueGroupTokens:function(a){var b=/(http|https):\/\/([\w\.\:\-]+\/){5}group\?\[\{[\[\'\"\w\_\:\,\.\-\]]+\}\]/g,c=a.match(b),d=c?c.filter(function(a,b,c){return c.indexOf(a)===b}):[];return d.reduce(function(a,b,c){return a["groupToken"+(c+1)]=b,a},{})},populateSanitizedStackTrace:function(a,b,c){var d=a,e=/[-[\]{}()*+!<=:?.\/\\^$|#\s,]/g;return d=Object.entries(c).reduce(function(a,b){var c=b[0],d=b[1];return a.replace(new RegExp(d.replace(e,"\\$&"),"g"),c)},d),b&&b.serverURL&&(d=d.replace(new RegExp(b.serverURL.replace(e,"\\$&"),"g"),"")),d}}}(),MP_Core=function(){return{GetNormalcyClass:function(a){var b="res-normal",c=a.getNormalcy();if(c)switch(c.meaning){case"LOW":b="res-low";break;case"HIGH":b="res-high";break;case"ABNORMAL":b="res-abnormal";break;case"CRITICAL":case"EXTREMEHIGH":case"PANICHIGH":case"EXTREMELOW":case"PANICLOW":case"VABNORMAL":case"POSITIVE":b="res-severe"}return b},GetNormalcyResultDisplay:function(a,b){var c=["<span class='",MP_Core.GetNormalcyClass(a),"'><span class='res-ind'>&nbsp;</span><span class='res-value'>",MP_Core.GetEventViewerLink(a,CERN_Platform.encoding.htmlEncode(MP_Util.Measurement.GetString(a,null,"longDateTime2",b))),"</span>",MP_Util.Measurement.GetModifiedIcon(a),"</span>"];return c.join("")},GetEventViewerLink:function(a,b){var c=[a.getPersonId(),a.getEncntrId(),a.getEventId(),'"EVENT"'],d=["<a onclick='MP_Util.LaunchClinNoteViewer(",c.join(","),"); return false;' href='#'>",b,"</a>"];return d.join("")},Criterion:function(a,b){var c=null,d=null,e=[];this.person_id=a.PERSON_ID,this.encntr_id=a.ENCNTRS.length>0?a.ENCNTRS[0].ENCNTR_ID:0,this.provider_id=a.PRSNL_ID,this.username=a.USERNAME||"",this.executable=a.EXECUTABLE,this.static_content=b,this.position_cd=a.POSITION_CD,this.ppr_cd=a.PPR_CD,this.release_identifier=a.RELEASE_IDENTIFIER,this.release_version=a.RELEASE_VERSION,this.debug_ind=a.DEBUG_IND,CERN_BrowserDevInd=1===(1&parseInt(this.debug_ind,10)),this.help_file_local_ind=a.HELP_FILE_LOCAL_IND,this.category_mean=a.CATEGORY_MEAN,this.locale_id=2===(2&parseInt(this.debug_ind,10))?"en_us":a.LOCALE_ID,this.logical_domain_id="undefined"!=typeof a.LOGICAL_DOMAIN_ID?a.LOGICAL_DOMAIN_ID:null,this.is_utc=a.IS_UTC,"WORKLIST_RELEASE_VERSION"in a&&(this.worklist_release_version=a.WORKLIST_RELEASE_VERSION);try{if(CERN_Platform.inMillenniumContext())this.client_tz=a.CLIENT_TZ;else{this.client_tz=MP_Timezone.getTzIndex();var f=Intl.DateTimeFormat().resolvedOptions().timeZone;f||(f=MP_Timezone.getName()),document.cookie="mp_client_tz="+encodeURIComponent(f)+";path=/"}}catch(a){logger.logWarning("Unable to set client time zone"),this.client_tz=0,document.cookie="mp_client_tz="+encodeURIComponent(MP_Timezone.getName())+";path=/"}this.facility_cd=a.ENCNTR_LOCATION.FACILITY_CD;var g=a.ENCNTR_OVERRIDE;if(g)for(var h=g.length;h--;)e.push(g[h].ENCNTR_ID);else e.push(this.encntr_id);this.setPatientInfo=function(a){c=a},this.getPatientInfo=function(){return c},this.getPersonnelInfo=function(){return d||(d=new MP_Core.PersonnelInformation(this.provider_id,this.person_id)),d},this.getEncounterOverride=function(){return e}},PatientInformation:function(){var a=null,b=null,c=null,d=null,e="";this.setSex=function(a){b=a},this.getSex=function(){return b},this.setAdminSex=function(a){c=a},this.getAdminSex=function(){return c},this.setBirthSex=function(a){d=a},this.getBirthSex=function(){return d},this.setDOB=function(b){a=b},this.getDOB=function(){return a},this.setName=function(a){e=a},this.getName=function(){return e}},PeriopCases:function(){var a=null,b=null,c=null,d=null,e=null;this.setCaseID=function(b){a=b},this.getCaseID=function(){return a},this.setDays=function(a){b=a},this.getDays=function(){return b},this.setHours=function(a){c=a},this.getHours=function(){return c},this.setMins=function(a){d=a},this.getMins=function(){return d},this.setCntdwnDscFlg=function(a){e=a},this.getCntdwnDscFlg=function(){return e}},ScriptRequest:function(a,b){var c=a||null,d=b||"",e="",f="",g=null,h=null,i=!0,j=null,k=null,l=null,m=!1,n=null,o=!1;this.setExecCallback=function(a){m=a},this.getExecCallback=function(){return m},this.logCompletion=function(a){logger.logMessage("<b>Request Ended</b><br /><ul><li>program: "+f+"</li><li>end_time: "+new Date+"</li><li>status: "+a.status+"</li></ul>")},this.logStart=function(){logger.logMessage("<b>Request Started</b><br /><ul><li>program: "+f+"</li><li>start_time: "+new Date+"</li></ul>")},this.start=function(){MP_Core.XMLCCLRequestCallBack(this.m_comp,this)},this.getResponseHandler=function(){return j},this.setResponseHandler=function(a){j=a},this.getTimer=function(){return k},this.setTimer=function(a){k=a},this.getComponent=function(){return c},this.getLoadTimer=function(){return d},this.setName=function(a){e=a},this.getName=function(){return e},this.setProgramName=function(a){f=a},this.getProgramName=function(){return f},this.setParameters=function(a){g=a},this.getParameters=function(){return g},this.setRequestBlobIn=function(a){h=a},this.getRequestBlobIn=function(){return h},this.setAsync=function(a){i=a},this.isAsync=function(){return i},this.getSource=function(){return l},this.setSource=function(a){l=a},this.getRequiresRawData=function(){return o},this.setRequiresRawData=function(a){o=a},this.getArtifactInfo=function(){return n},this.setArtifactInfo=function(a){if(("object"!=typeof a||Array.isArray(a))&&null!==a)throw new Error("MP_Core.setArtifactInfo: artifactInfo parameter must be an object type or null");this.m_artifactInfo=a}},ScriptReply:function(a){var b="",c="F",d="",e=null,f=a;this.setName=function(a){b=a},this.getName=function(){return b},this.setStatus=function(a){c=a},this.getStatus=function(){return c},this.setError=function(a){d=a},this.getError=function(){return d},this.setResponse=function(a){e=a},this.getResponse=function(){return e},this.getComponent=function(){return f}},PersonnelInformation:function(a,b){var c=a,d=null,e=null;try{e=CERN_Platform.getDiscernObject("PVCONTXTMPAGE"),logger.logDiscernInfo(null,"PVCONTXTMPAGE","mp_core.js","PersonnelInformation"),e&&(d=e.GetValidEncounters(b),logger.logDebug("Viewable Encounters: "+d))}catch(a){}finally{e=null}this.getPersonnelId=function(){return c},this.getViewableEncounters=function(){return d}},GetViewableEncntrs:function(a,b){function c(){var c=null,d="";try{c=CERN_Platform.getDiscernObject("PVCONTXTMPAGE"),logger.logDiscernInfo(null,"PVCONTXTMPAGE","mp_core.js","getViewableFromPvContxtMpage"),c&&(d=c.GetValidEncounters(a,b),logger.logDebug("Viewable Encounters obtained from PVCONTXTMPAGE: "+d))}catch(a){}finally{c=null}return d}function d(){var c=[],d={artifactId:"mpage-core",functionName:"retrieveEncntrsFromClinicalContext"},f=new MP_Core.ScriptRequest,g="mp_get_valid_encounters";c=b?["^MINE^",a+".0",b]:["^MINE^",a+".0"],f.setProgramName(g),f.setArtifactInfo(d),f.setParameters(c),f.setAsync(!0),f.setExecCallback(!0),MP_Core.XMLCCLRequestCallBack(null,f,e)}function e(a){var b="",c=MP_Resources.getSharedResource("viewableEncntrs");if("S"===a.getStatus())try{var d=a.getResponse();b=$.map(d.AUTH_ENCOUNTER.AUTH_ENCOUNTERS,function(a){return a.ENCOUNTER_ID+".0"}).join(","),logger.logDebug("Viewable Encounters obtained from ClinicalContext service: "+b)}catch(a){logger.logJSError(a,this,"mp_core.js","GetViewableEncntrs")}else logger.logError("Unable to successfully retrieve Viewable Encounters from ClinicalContext service");c.setIsAvailable(!0),c.setIsBeingRetrieved(!1),c.setResourceData(b),CERN_EventListener.fireEvent(null,f,"viewableEncntrInfoAvailable",c)}var f=this,g="",h=MP_Resources.getSharedResource("viewableEncntrs");return h||(h=new SharedResource("viewableEncntrs"),MP_Resources.addSharedResource("viewableEncntrs",h)),h.isResourceAvailable()&&h.getResourceData()?h:(g=c(),g?(h.setResourceData(g),h.setIsAvailable(!0),h):(h.isBeingRetrieved()||(h.setIsBeingRetrieved(!0),d()),h))},XMLCclRequestWrapper:function(a,b,c,d){var e=null,f=null,g=null,h=null;MPageComponent.prototype.isPrototypeOf(a)?(g=new ComponentScriptRequest,g.setComponent(a),e=new RTMSTimer(a.getComponentLoadTimerName(),a.getCriterion().category_mean),f=new RTMSTimer(a.getComponentRenderTimerName(),a.getCriterion().category_mean),g.setLoadTimer(e),g.setRenderTimer(f),h={artifactId:a.getComponentFilterMean(),functionName:"MP_Core.XMLCclRequestWrapper"}):(g=new ScriptRequest,h={artifactId:"mpage-core",functionName:"XMLCclRequestWrapper"}),g.setProgramName(b),g.setArtifactInfo(h),g.setParameterArray(c||[]),g.setAsyncIndicator("boolean"!=typeof d||d),g.performRequest()},XMLCCLRequestCallBack:function(a,b,c){MP_Core.XmlStandardRequest(a,b,c)},XmlStandardRequest:function(a,b,c){var d=null,e=null,f=null;MPageComponent.prototype.isPrototypeOf(a)?(f=new ComponentScriptRequest,f.setComponent(a),d=new RTMSTimer(a.getComponentLoadTimerName(),a.getCriterion().category_mean),e=new RTMSTimer(a.getComponentRenderTimerName(),a.getCriterion().category_mean),f.setLoadTimer(d),f.setRenderTimer(e)):(f=new ScriptRequest,d=new RTMSTimer(b.getLoadTimer()),f.setLoadTimer(d)),f.setName(b.getName()),f.setProgramName(b.getProgramName()),f.setArtifactInfo(b.getArtifactInfo()),f.setResponseHandler(c),f.setDataBlob(b.getRequestBlobIn()||""),f.setParameterArray(b.getParameters()||[]),f.setAsyncIndicator(b.isAsync()),f.setRawDataIndicator(b.getRequiresRawData()),f.performRequest()},XMLCCLRequestThread:function(a,b,c){var d=a,e=b,f=c;f.setName(a),this.getName=function(){return d},this.getComponent=function(){return e},this.getRequest=function(){return f}},XMLCCLRequestThreadManager:function(a,b,c){var d=null,e=null,f=!1,g=!1,h=0;this.addThread=function(a){d||(d=[]),d.push(a)},this.begin=function(){if(d&&d.length>0)for(h=d.length;h--;){var e=d[h];MP_Core.XMLCCLRequestCallBack(e.getComponent(),e.getRequest(),this.completeThread)}else if(c){var f=b.isLineNumberIncluded()?"(0)":"";b.finalizeComponent(MP_Util.HandleNoDataResponse(b.getStyles().getNameSpace()),f),b.postProcessing()}else a(null,b)},this.completeThread=function(i){if(e||(e=[]),"S"===i.getStatus()?f=!0:"F"===i.getStatus()&&(g=!0),e.push(i),e.length===d.length){var j=b.isLineNumberIncluded()?"(0)":"",k=null;try{if(c)if(g){for(k=[],h=e.length;h--;){var l=e[h];"F"===l.getStatus()&&k.push(l.getError())}b.finalizeComponent(MP_Util.HandleErrorResponse(b.getStyles().getNameSpace(),k.join("<br />")),"")}else f?a(e,b):(j=b.isLineNumberIncluded()?"(0)":"",b.finalizeComponent(MP_Util.HandleNoDataResponse(b.getStyles().getNameSpace()),j));else a(e,b)}catch(a){logger.logJSError(a,b,"mp_core.js","XMLCCLRequestThreadManager");var m=i18n.discernabu;k=["<b>",m.JS_ERROR,"</b><br /><ul><li>",m.MESSAGE,": ",a.message,"</li><li>",m.NAME,": ",a.name,"</li><li>",m.NUMBER,": ",65535&a.number,"</li><li>",m.DESCRIPTION,": ",a.description,"</li></ul>"],b.finalizeComponent(MP_Util.HandleErrorResponse(b.getStyles().getNameSpace(),k.join("")),"")}finally{b&&"undefined"!=typeof b.postProcessing&&b.postProcessing()}}}},MapObject:function(a,b){this.name=a,this.value=b},ReferenceRangeResult:function(){var a=-1,b=-1,c=-1,d=-1,e=null,f=null,g=null,h=null,i="",j="",k="",l="",m=0,n=0,o=0,p=0,q="",r="",s="",t="";this.init=function(u,v){var w=MP_Util.GetNumericFormatter();c=w.format(u.CRITICAL_LOW.NUMBER),""!=u.CRITICAL_LOW.UNIT_CD&&(g=MP_Util.GetValueFromArray(u.CRITICAL_LOW.UNIT_CD,v)),u.CRITICAL_LOW_TEXT&&(k=u.CRITICAL_LOW_TEXT),u.CRITICAL_LOW.ISVALID&&(u.CRITICAL_LOW.MODIFIER_CD&&(s=MP_Util.GetValueFromArray(u.CRITICAL_LOW.MODIFIER_CD,v).display),o=u.CRITICAL_LOW.ISVALID),d=w.format(u.CRITICAL_HIGH.NUMBER),""!=u.CRITICAL_HIGH.UNIT_CD&&(h=MP_Util.GetValueFromArray(u.CRITICAL_HIGH.UNIT_CD,v)),u.CRITICAL_HIGH_TEXT&&(l=u.CRITICAL_HIGH_TEXT),u.CRITICAL_HIGH.ISVALID&&(u.CRITICAL_HIGH.MODIFIER_CD&&(t=MP_Util.GetValueFromArray(u.CRITICAL_HIGH.MODIFIER_CD,v).display),p=u.CRITICAL_HIGH.ISVALID),a=w.format(u.NORMAL_LOW.NUMBER),""!=u.NORMAL_LOW.UNIT_CD&&(e=MP_Util.GetValueFromArray(u.NORMAL_LOW.UNIT_CD,v)),u.NORMAL_LOW_TEXT&&(i=u.NORMAL_LOW_TEXT),u.NORMAL_LOW.ISVALID&&(u.NORMAL_LOW.MODIFIER_CD&&(q=MP_Util.GetValueFromArray(u.NORMAL_LOW.MODIFIER_CD,v).display),m=u.NORMAL_LOW.ISVALID),b=w.format(u.NORMAL_HIGH.NUMBER),""!=u.NORMAL_HIGH.UNIT_CD&&(f=MP_Util.GetValueFromArray(u.NORMAL_HIGH.UNIT_CD,v)),u.NORMAL_HIGH_TEXT&&(j=u.NORMAL_HIGH_TEXT),u.NORMAL_HIGH.ISVALID&&(u.NORMAL_HIGH.MODIFIER_CD&&(r=MP_Util.GetValueFromArray(u.NORMAL_HIGH.MODIFIER_CD,v).display),n=u.NORMAL_HIGH.ISVALID)},this.getNormalLow=function(){return a},this.getNormalHigh=function(){return b},this.getNormalLowUOM=function(){return e},this.getNormalHighUOM=function(){return f},this.getCriticalLow=function(){return c},this.getCriticalHigh=function(){return d},this.getCriticalLowUOM=function(){return g},this.getCriticalHighUOM=function(){return h},this.getNormalLowValidity=function(){return m},this.getNormalHighValidity=function(){return n},this.getCriticalLowValidity=function(){return o},this.getCriticalHighValidity=function(){return p},this.getNormalLowText=function(){return i},this.getNormalHighText=function(){return j},this.getCriticalLowText=function(){return k},this.getCriticalHighText=function(){return l},this.getNormalLowModifier=function(){return q},this.getNormalHighModifier=function(){return r},this.getCriticalLowModifier=function(){return s},this.getCriticalHighModifier=function(){return t},this.toNormalInlineString=function(){var c=e?e.display:"",d=f?f.display:"";return 0!=a||0!=b?a+"&nbsp;"+c+" - "+b+"&nbsp;"+d:""},this.toCriticalInlineString=function(){var a=g?g.display:"",b=h?h.display:"";return 0!=c||0!=d?c+"&nbsp;"+a+" - "+d+"&nbsp;"+b:""}},QuantityValue:function(){var a,b,c=null,d=null,e=0,f=!1;this.init=function(g,h){for(var i=g.QUANTITY_VALUE,j=g.REFERENCE_RANGE,k=0,l=i.length;k<l;k++){var m=i[k].NUMBER;if(b=i[k].PRECISION,isNaN(m)||(a=MP_Util.Measurement.SetPrecision(m,b),e=m),""!=i[k].MODIFIER_CD){var n=MP_Util.GetValueFromArray(i[k].MODIFIER_CD,h);n&&(a=n.display+a,f=!0)}""!=i[k].UNIT_CD&&(c=MP_Util.GetValueFromArray(i[k].UNIT_CD,h));for(var o=0,p=j.length;o<p;o++)d=new MP_Core.ReferenceRangeResult,d.init(j[o],h)}},this.getValue=function(){return a},this.getRawValue=function(){return e},this.getUOM=function(){return c},this.getRefRange=function(){return d},this.getPrecision=function(){return b},this.toString=function(){return c?a+" "+c.display:a},this.hasModifier=function(){return f}},Measurement:function(){var a=0,b=0,c=0,d=null,e=null,f=null,g=null,h=null,i=null,j="",k=0,l="";this.init=function(h,i,j,k,l,m,n){a=h,b=i,c=j,d=k,e=l,g=m,f=n},this.initFromRec=function(m,n){var o=new Date,p=new Date;a=m.EVENT_ID,b=m.PATIENT_ID,c=m.ENCOUNTER_ID,l=m.CLASSIFICATION,d=MP_Util.GetValueFromArray(m.EVENT_CD,n),o.setISO8601(m.EFFECTIVE_DATE),e=o,g=MP_Util.Measurement.GetObject(m,n),p.setISO8601(m.UPDATE_DATE),f=p,h=MP_Util.GetValueFromArray(m.NORMALCY_CD,n),i=MP_Util.GetValueFromArray(m.STATUS_CD,n),j=m.COMMENT,k=m.HAS_COMMENTS_IND},this.getEventId=function(){return a},this.getPersonId=function(){return b},this.getEncntrId=function(){return c},this.getClassification=function(){return l},this.getEventCode=function(){return d},this.getDateTime=function(){return e},this.getUpdateDateTime=function(){return f},this.getResult=function(){return g},this.setNormalcy=function(a){h=a},this.getNormalcy=function(){return h},this.setStatus=function(a){i=a},this.getStatus=function(){return i},this.isModified=function(){if(i){var a=i.meaning;if("MODIFIED"===a||"ALTERED"===a)return!0}return!1},this.getComment=function(){return j},this.getCommentsIndicator=function(){return k}},MenuItem:function(){var a,b="",c="",d=0,e=0,f=0;this.setDescription=function(a){c=a},this.getDescription=function(){return c},this.setName=function(a){b=a},this.getName=function(){return b},this.setId=function(a){d=a},this.getId=function(){return d},this.setMeaning=function(b){a=b},this.getMeaning=function(){return a},this.setValSequence=function(a){e=a},this.getValSequence=function(){return e},this.setValTypeFlag=function(a){f=a},this.getValTypeFlag=function(){return f}},CriterionFilters:function(a){var b=a,c=[];this.addFilter=function(a,b){c.push(new MP_Core.MapObject(a,b))},this.checkFilters=function(){for(var a=b.getPatientInfo(),d=c.length;d--;){var e=c[d],f=null;switch(e.name){case MP_Core.CriterionFilters.SEX_MEANING:var g=a.getSex();if(g&&e.value==g.meaning)continue;return!1;case MP_Core.CriterionFilters.DOB_OLDER_THAN:if(f=a.getDOB(),f&&f<=e.value)continue;return!1;case MP_Core.CriterionFilters.DOB_YOUNGER_THAN:if(f=a.getDOB(),f&&f>=e.value)continue;return!1;case MP_Core.CriterionFilters.ADMIN_SEX_MEANING:var h=a.getAdminSex();if(h&&e.value==h.meaning)continue;return!1;case MP_Core.CriterionFilters.BIRTH_SEX_MEANING:var i=a.getBirthSex();if(i&&e.value==i.meaning)continue;return!1;default:return logger.logError("Unhandled criterion filter"),!1}}return!0}},CreateSimpleError:function(a,b){var c=[],d=i18n.discernabu,e=a.isLineNumberIncluded()?"(0)":"";c.push("<b>",d.DISCERN_ERROR,"</b><br /><ul><li>",b,"</li></ul>"),a.finalizeComponent(MP_Util.HandleErrorResponse(a.getStyles().getNameSpace(),c.join("")),e),a.postProcessing()},generateUserMessageHTML:function(a,b,c,d){var e="";if("string"!=typeof a)return logger.logError("generateUserMessageHTML only accepts msgType parameters of string"),"";switch(a.toLowerCase()){case"error":e="<div class='error-container "+(d||"")+"'><span class='error-text message-info-text'>"+(b||"")+"</span>"+(c||"")+"</div>";break;case"warning":e="<div class='warning-container "+(d||"")+"'><span class='message-info-text'>"+(b||"")+"</span>"+(c||"")+"</div>";break;case"information":e="<div class='information-container "+(d||"")+"'><span class='message-info-text'>"+(b||"")+"</span>"+(c||"")+"</div>";break;case"busy":e="<div class='busy-container "+(d||"")+"'><span class='message-info-text'>"+(b||"")+"</span>"+(c||"")+"</div>";break;default:e="<div class='default-container "+(d||"")+"'><span class='message-info-text'>"+(b||"")+"</span>"+(c||"")+"</div>"}return e}}}();MP_Core.CriterionFilters.SEX_MEANING=1,MP_Core.CriterionFilters.DOB_OLDER_THAN=2,MP_Core.CriterionFilters.DOB_YOUNGER_THAN=3,MP_Core.CriterionFilters.ADMIN_SEX_MEANING=4,MP_Core.CriterionFilters.BIRTH_SEX_MEANING=5,MP_Core.AppUserPreferenceManager=function(){function a(a,e,g){function h(){return new Promise(function(e,f){var h=null!=a?JSON.stringify(a):"",i={artifactId:"mpage-core",functionName:"WritePreferences"},k=g?g:c,l=new ScriptRequest;l.setProgramName("MP_MAINTAIN_USER_PREFS"),l.setArtifactInfo(i),l.setAsyncIndicator(j),l.setParameterArray(["^mine^",b.provider_id+".0","^"+k+"^","~"+h+"~",3202020]),
l.setResponseHandler(function(b){var c=b.getStatus();"Z"===c?d[k]=null:"S"===c?d[k]=a:(logger.logError(b.getError()),f(b.getError())),e()}),l.performRequest()})}var i=CERN_Platform.inEdgeContext(),j=i||!!e;if(j){var k=f.then(h);f=k.catch(function(){logger.logError("Failed to save user preferences.")});var l=f;return l.finally(function(){l===f&&(f=Promise.resolve())})}return h()}var b=null,c="",d=null,e=function(a,b){null!==a.getGapCheckBannerDismiss()&&(b.gapCheckBannerDismiss=a.getGapCheckBannerDismiss())},f=Promise.resolve();return{Initialize:function(a,e){b=a,c=e,d={}},SetPreferences:function(a,b){var e=b?b:c;d[e]=MP_Core.AppUserPreferenceManager.isValidUserPref({artifactId:"mpage-core",functionName:"SetPreferences"},a)},LoadPreferences:function(a){return new Promise(function(e,f){if(!b)return logger.logError("Validation Failed: the AppUserPreferenceManager must be initialized prior to usage."),void f();var g=a?a:c;if(d[g])return void e(d[g]);var h={artifactId:"mpage-core",functionName:"LoadPreferences"},i=new ScriptRequest;i.setProgramName("MP_GET_USER_PREFS"),i.setArtifactInfo(h),i.setParameterArray(["^mine^",b.provider_id+".0","^"+g+"^",3202020]),i.setResponseHandler(function(a){var b=a.getStatus(),c=a.getResponse();return"Z"===b?void e(null):void("S"===b?(d[g]=MP_Core.AppUserPreferenceManager.isValidUserPref(h,c.PREF_STRING,i.getProgramName()),e(d[g])):(logger.logError(a.getError()),f(a.getError())))}),i.performRequest()})},GetPreferences:function(a){var e=a?a:c;return b?d[e]?Promise.resolve(d[e]):this.LoadPreferences(e):Promise.resolve(null)},SavePreferences:function(b){return new Promise(function(f,g){var h=document.body,i=Util.Style.g("col-group",h,"div"),j=0,k=0,l=0,m=0,n={};n.user_prefs={};var o=n.user_prefs;o.page_prefs={};var p=o.page_prefs;p.components=[],p.workspace_prefs={};for(var q=p.components,r=0,s=i.length;r<s;r++){j=r+1;var t=Util.Style.g("col-outer1",i[r],"div");if(t.length>0)for(var u=Util.gcs(t[0]),v=0,w=u.length;v<w;v++){k=v+1;for(var x=Util.gcs(u[v]),y=0,z=x.length;y<z;y++){var A={};l=y+1,m=jQuery(x[y]).attr("id");var B=MP_Util.GetCompObjByStyleId(m);A.id=B.getComponentId(),A.group_seq=j,A.col_seq=k,A.row_seq=l,A.preferencesObj=B.getPreferencesObj(),B.getCompColor()&&(A.compThemeColor=B.getCompColor()),e(B,A),A.toggleStatus=2===B.getToggleStatus()?1:B.getToggleStatus(),A.grouperFilterLabel=B.getGrouperFilterLabel(),A.grouperFilterCatLabel=B.getGrouperFilterCatLabel(),A.grouperFilterCriteria=B.getGrouperFilterCriteria(),A.grouperFilterCatalogCodes=B.getGrouperFilterCatalogCodes(),A.selectedTimeFrame=B.getSelectedTimeFrame(),A.selectedDataGroup=B.getSelectedDataGroup(),jQuery(x[y]).hasClass("closed")?A.expanded=!1:A.expanded=!0,q.push(A)}}}return d[c]&&d[c].user_prefs&&d[c].user_prefs.page_prefs&&d[c].user_prefs.page_prefs.components&&d[c].user_prefs.page_prefs.components.length>0&&d[c].user_prefs.page_prefs.components.forEach(function(a){(i.length&&0===a.toggleStatus||!i.length)&&q.push(a)}),d[c]&&d[c].user_prefs&&d[c].user_prefs.page_prefs&&d[c].user_prefs.page_prefs.workspace_prefs&&(n.user_prefs.page_prefs.workspace_prefs=d[c].user_prefs.page_prefs.workspace_prefs),a(n,!1,c).then(function(){(void 0===b||b)&&CERN_Platform.refreshMPage(),f()}).catch(g)})},ClearCompPreferences:function(b){var c=MP_Util.GetCompObjById(b),e=c.criterion.category_mean,f=d[e],g=null,h=MP_Core.AppUserPreferenceManager.isValidUserPref({artifactId:"mp_core",functionName:"ClearCompPreferences"},JSON.stringify(f));if(null!=h){for(var i=h.user_prefs.page_prefs.components,j=i.length;j--;)h&&i[j].id===b&&(i[j].grouperFilterLabel="",i[j].grouperFilterCatLabel="",i[j].grouperFilterCriteria=g,i[j].grouperFilterCatalogCodes=g,i[j].selectedTimeFrame="",i[j].selectedDataGroup="");return c.setLookbackUnits(c.getBrLookbackUnits()),c.setLookbackUnitTypeFlag(c.getBrLookbackUnitTypeFlag()),c.setGrouperFilterLabel(""),c.setGrouperFilterCatLabel(""),c.setGrouperFilterCriteria(g),c.setGrouperFilterCatalogCodes(g),c.setSelectedTimeFrame(""),c.setSelectedDataGroup(""),c.setPreferencesObj(null),c.setGapCheckBannerDismiss(null),d[e]=h,a(d[e],!1,e).then(function(){var a=c.getRenderStrategy();if(a){var b=a.getComponentId(),d=$("#lookbackContainer"+b);d.length&&d.replaceWith(a.createComponentLookback());var e=$("#filterDropDownMenu"+b);e.length&&e.replaceWith(a.createComponentFilter())}$(c.getSectionContentNode()).empty(),c.startComponentDataRetrieval()})}},UpdatePrefsIdentifier:function(a){a&&"string"==typeof a&&(c=a)},UpdateAllCompPreferences:function(b,c,f){var g=0,h=null,i=0,j={},k=null,l=null,m=null,n="",o=!1,p=null,q=0,r={},s=0;if(f||(f=!1),!b||!b.length)return Promise.resolve();for(p=d[b[0].criterion.category_mean]||{user_prefs:{page_prefs:{components:[]}}},p.user_prefs=p.user_prefs||{page_prefs:{components:[]}},p.user_prefs.page_prefs=p.user_prefs.page_prefs||{components:[]},p.user_prefs.page_prefs.components=p.user_prefs.page_prefs.components||[],h=p.user_prefs.page_prefs.components,i=h.length,s=i;s--;)j[h[s].id]=s;for(i=b.length,s=i;s--;)k=b[s],"undefined"!=typeof j[k.getComponentId()]?(q=j[k.getComponentId()],r=h[q],o=!1):(r={},o=!0),r.id=k.getComponentId(),r.group_seq=k.getPageGroupSequence(),r.col_seq=k.getColumn(),r.row_seq=k.getSequence(),r.preferencesObj=k.getPreferencesObj(),r.toggleStatus=2===k.getToggleStatus()?1:k.getToggleStatus(),r.expanded=k.isExpanded(),r.IsInfoButtonEnabled=k.isInfoButtonEnabled(),k.getCompColor()&&(r.compThemeColor=k.getCompColor()),e(k,r),k.getGrouperFilterLabel()&&(r.grouperFilterLabel=k.getGrouperFilterLabel()),k.getGrouperFilterCriteria()&&(r.grouperFilterCriteria=k.getGrouperFilterCriteria()),k.getGrouperFilterCatLabel()&&(r.grouperFilterCatLabel=k.getGrouperFilterCatLabel()),k.getGrouperFilterCatalogCodes()&&(r.grouperFilterCatalogCodes=k.getGrouperFilterCatalogCodes()),k.getSelectedTimeFrame()&&(r.selectedTimeFrame=k.getSelectedTimeFrame()),k.getSelectedDataGroup()&&(r.selectedDataGroup=k.getSelectedDataGroup()),o&&(h.push(r),j[r.id]=h.length-1);if(c)for(s=i;s--;)k=b[s],n=k.getStyles().getNameSpace(),g=k.getComponentId(),l=k.isAddedToContextualView()&&MPageFusion.coreAPI.base.mediaQuery.atLeast("XL")?$("#"+n+g+"PlaceholderView"):$("#"+n+g),l.length&&(q=j[k.getComponentId()],r=h[q],m=l.parent(),r.col_seq=m.index()+1,r.row_seq=l.index(),k.setColumn(r.col_seq),k.setSequence(r.row_seq));return d[b[0].criterion.category_mean]=p,a(d[b[0].criterion.category_mean],f,b[0].criterion.category_mean)},UpdateSingleCompPreferences:function(a,b){return MP_Core.AppUserPreferenceManager.UpdateAllCompPreferences([a],!1,b)},SaveCompPreferences:function(b,c,f,g,h){return new Promise(function(i,j){var k,l=MP_Util.GetCompObjById(b),m=d[l.criterion.category_mean],n=!0,o=MP_Core.AppUserPreferenceManager.isValidUserPref({artifactId:"mp_core",functionName:"SaveCompPreferences"},JSON.stringify(m));if(null!=o&&!g){var p=o.user_prefs.page_prefs.components;for(k=p.length;k--;)o&&p[k].id===b&&(n=!1,c&&(p[k].compThemeColor=c),f&&("1"==f?p[k].expanded=!0:p[k].expanded=!1),h&&("1"==h?p[k].IsInfoButtonEnabled=1:p[k].IsInfoButtonEnabled=0),e(l,p[k]),l.getGrouperFilterLabel()&&(p[k].grouperFilterLabel=l.getGrouperFilterLabel()),l.getGrouperFilterCatLabel()&&(p[k].grouperFilterCatLabel=l.getGrouperFilterCatLabel()),(l.getGrouperFilterCriteria()||null===l.getGrouperFilterCriteria())&&(p[k].grouperFilterCriteria=l.getGrouperFilterCriteria()),l.getGrouperFilterCatalogCodes()||null===l.getGrouperFilterCatalogCodes()?p[k].grouperFilterCatalogCodes=l.getGrouperFilterCatalogCodes():p[k].grouperFilterCatalogCodes=[],l.getSelectedTimeFrame()&&(p[k].selectedTimeFrame=l.getSelectedTimeFrame()),l.getSelectedDataGroup()&&(p[k].selectedDataGroup=l.getSelectedDataGroup()),p[k].toggleStatus=2===l.getToggleStatus()?1:l.getToggleStatus(),p[k].col_seq=l.getColumn(),p[k].row_seq=l.getSequence(),p[k].preferencesObj=l.getPreferencesObj());if(n){var q={};q.id=b,q.group_seq=l.getPageGroupSequence(),q.col_seq=l.getColumn(),q.row_seq=l.getSequence(),q.preferencesObj=l.getPreferencesObj(),q.compThemeColor=c,e(l,q),l.getGrouperFilterLabel()&&(q.grouperFilterLabel=l.getGrouperFilterLabel()),l.getGrouperFilterCriteria()&&(q.grouperFilterCriteria=l.getGrouperFilterCriteria()),l.getGrouperFilterCatLabel()&&(q.grouperFilterCatLabel=l.getGrouperFilterCatLabel()),l.getGrouperFilterCatalogCodes()&&(q.grouperFilterCatalogCodes=l.getGrouperFilterCatalogCodes()),l.getSelectedTimeFrame()&&(q.selectedTimeFrame=l.getSelectedTimeFrame()),l.getSelectedDataGroup()&&(q.selectedDataGroup=l.getSelectedDataGroup()),q.toggleStatus=2===l.getToggleStatus()?1:l.getToggleStatus(),q.expanded=l.isExpanded(),p.push(q)}return d[l.criterion.category_mean]=o,a(d[l.criterion.category_mean],!1,l.criterion.category_mean).then(i).catch(j)}if(l)return c&&l.setCompColor&&l.setCompColor(c),f&&l.setExpandCollapseState&&l.setExpandCollapseState("1"==f),h&&l.setIsInfoButtonEnabled&&l.setIsInfoButtonEnabled("1"==h?1:0),MP_Core.AppUserPreferenceManager.UpdateSingleCompPreferences(l)})},ClearPreferences:function(b){MP_PendingData.launchPendingDataDialog(MP_PendingData.requestLevel.VIEW,function(){a(null,!1,b).then(function(){MP_Viewpoint.refreshActiveView()})})},isValidUserPref:function(a,b,c){var d=null;try{d=JSON.parse(b)}catch(b){var e=CERN_Platform.getCriterion().CRITERION,f=new CapabilityTimer("CAP:MPG_Component_Level_Error_Details",a&&a.artifactId?a.artifactId:"No Additional Info"),g={artifactInfo:a||null,script:c||""},h={VIEW:e.CATEGORY_MEAN,VIEW_POINT:"undefined"!=typeof m_viewpointJSON&&m_viewpointJSON?JSON.parse(m_viewpointJSON).VP_INFO.VIEWPOINT_NAME:"",PERSON_ID:e.PERSON_ID,ENCNTRS:e.ENCNTRS,PRSNL_ID:e.PRSNL_ID,POSITION_CD:e.POSITION_CD,PPR_CD:e.PPR_CD,LOGICAL_DOMAIN_ID:e.LOGICAL_DOMAIN_ID,USER:e.USERNAME,APP_NAME:e.EXECUTABLE?e.EXECUTABLE.split(".")[0]:"",RELEASE_VERSION:e.RELEASE_VERSION};"WORKLIST_RELEASE_VERSION"in e&&(h.WORKLIST_RELEASE_VERSION=e.WORKLIST_RELEASE_VERSION),f.addMetaData("err",JSON.stringify(g)),f.addMetaData("context",JSON.stringify(h)),f.addMetaData("sTrace",b.name+": "+b.message),f.capture(),(new ScriptRequest).logErrorCaptureDetails("JSON Parsing Error",g,h,b.message)}return d},GetComponentById:function(a,b){var e=b?b:c,f=null;try{d[e].user_prefs.page_prefs.components.some(function(b){if(b.id==a)return f=b,!0})}catch(a){}finally{return f}}}}();var MP_Util=function(){function a(a){logger.logJSError(a,null,"mp_core.js","LaunchClinNoteViewer"),alert(i18n.discernabu.CAN_NOT_VIEW_RESULTS+"  "+i18n.CONTACT_ADMINISTRATOR)}function b(a,b,c,d){var e=i18n.discernabu,f=0,g="";b=b?b:new Date,c=c?c:0;var h=6e4,i=60*h,j=24*i,k=7*j,l=0,m=0,n=0,o=0,p=0,q=0;f=b.getTime()-a.getTime();var r=null,s=null;0==c?(r=function(a){return Math.ceil(a)},s=function(a,b){return a<=b}):(r=function(a){return Math.floor(a)},s=function(a,b){return a<b});var t=function(){var c=0,d=0,e=0,f=0,g=b.getDate();return b.getMonth()>a.getMonth()?(f=b.getMonth()-a.getMonth(),b.getDate()<a.getDate()&&(d=1)):b.getMonth()<a.getMonth()?(f=12-a.getMonth()+b.getMonth(),c=1,b.getDate()<a.getDate()&&(d=1)):b.getDate()<a.getDate()&&(c=1,f=11),b.getDate()>=a.getDate()&&(g=b.getDate()-a.getDate()),e=b.getFullYear()-a.getFullYear()-c,f+=12*e+g/32-d};return l=r(f/h),m=r(f/i),n=r(f/j),o=r(f/k),p=t(),p=r(p),q=r(p/12),g=s(m,2)?d?e.WITHIN_MINS.replace("{0}",l):e.X_MINUTES.replace("{0}",l):s(n,2)?d?e.WITHIN_HOURS.replace("{0}",m):e.X_HOURS.replace("{0}",m):s(o,2)?d?e.WITHIN_DAYS.replace("{0}",n):e.X_DAYS.replace("{0}",n):s(p,2)?d?e.WITHIN_WEEKS.replace("{0}",o):e.X_WEEKS.replace("{0}",o):s(q,2)?d?e.WITHIN_MONTHS.replace("{0}",p):e.X_MONTHS.replace("{0}",p):d?e.WITHIN_YEARS.replace("{0}",q):e.X_YEARS.replace("{0}",q)}var c=null,d=null,e=[];return{addComponentsToGlobalStorage:function(a){if(a&&a.length){null===CERN_MPageComponents&&(CERN_MPageComponents=[]);for(var b=0,c=a.length;b<c;b++)a[b]&&CERN_MPageComponents.push(a[b])}},removeComponentsFromGlobalStorage:function(a){a&&a.length&&CERN_MPageComponents&&a.forEach(function(a){var b=CERN_MPageComponents.indexOf(a);b!==-1&&CERN_MPageComponents.splice(b,1)})},GetComponentArray:function(a){var b=[],c=[],d=[],e=-1,f=-1;if(null!=a){a.sort(SortMPageComponents);for(var g=0,h=a.length;g<h;g++){var i=a[g];if(i.isDisplayable()){var j=i.getPageGroupSequence(),k=i.getColumn();j!=f&&(e=-1,c=[],b.push(c),f=j),k!=e&&(d=[],c.push(d),e=k),d.push(i)}}}return b},GetCriterion:function(a,b){logger.logDebug("Criterion: "+JSON.stringify(a));var c=a.CRITERION;c&&!c.RELEASE_VERSION&&window.releaseInfo&&(c.RELEASE_IDENTIFIER=window.releaseInfo.mpagesCoreReleaseIdentifier||"",c.RELEASE_VERSION=window.releaseInfo.mpagesCoreReleaseVersion||"","^ORG^"===window.releaseInfo.mode&&(c.WORKLIST_RELEASE_IDENTIFIER=window.releaseInfo.mpagesOrganizerReleaseIdentifier||"",c.WORKLIST_RELEASE_VERSION=window.releaseInfo.mpagesOrganizerReleaseVersion||""));var d=new MP_Core.Criterion(c,b),e=MP_Util.LoadCodeListJSON(c.CODES),f=c.PERSON_INFO,g=new MP_Core.PatientInformation;if(g.setName(f.PERSON_NAME),g.setSex(MP_Util.GetValueFromArray(f.SEX_CD,e)),g.setAdminSex(MP_Util.GetValueFromArray(f.ADMIN_SEX_CD,e)),g.setBirthSex(MP_Util.GetValueFromArray(f.BIRTH_SEX_CD,e)),void 0!=f.ABS_DOB&&""!=f.ABS_DOB){var h="([0-9]{4})(-([0-9]{2})(-([0-9]{2})(T([0-9]{2}):([0-9]{2})(:([0-9]{2})(\\.([0-9]+))?)?Z?)?)?)?",i=f.ABS_DOB.match(new RegExp(h)),j=new Date(i[1],i[3]-1,i[5],i[7],i[8],i[10]);g.setDOB(j)}return d.setPatientInfo(g),d},CalcWithinTime:function(a){return b(a,null,null,!0)},CalcAge:function(a,c){return c=c?c:new Date,b(a,c,1,!1)},DisplayDateByOption:function(a,b){var c=MP_Util.GetDateFormatter();switch(a.getDateFormat()){case 1:return c.format(b,mp_formatter.DateTimeFormatter.FULL_DATE_2YEAR);case 2:return c.format(b,mp_formatter.DateTimeFormatter.FULL_DATE_TIME_2YEAR);case 3:return MP_Util.CalcWithinTime(b);case 4:return"&nbsp";default:return c.format(b,mp_formatter.DateTimeFormatter.FULL_DATE_TIME_2YEAR)}},LaunchMenu:function(a,b){var c=_g(a);MP_Util.closeMenuInit(c,b),null!=c&&(Util.Style.ccss(c,"menu-hide")?(_g(b).style.zIndex=2,Util.Style.rcss(c,"menu-hide")):(_g(b).style.zIndex=1,Util.Style.acss(c,"menu-hide")))},LaunchCompFilterSelection:function(a,b,c){var d,e,f,g,h=MP_Util.GetCompObjById(a),i=i18n.discernabu,j=h.getStyles(),k=j.getNameSpace();d=b===-1?i.FACILITY_DEFINED_VIEW:"ohx"===k||"ohx2"===k?h.getGrouperCatLabel(b).toString():h.getGrouperLabel(b).toString();var l=i.FACILITY_DEFINED_VIEW,m=j.getId(),n=h.getCriterion().static_content,o=m+"TypeMenu",p=0;if("ohx"===k||"ohx2"===k)var q=h.getGrouperCatalogCodes(b);else var r=h.getGrouperCriteria(b);"ohx"===k||"ohx2"===k?h.setGrouperFilterCatLabel(d):h.setGrouperFilterLabel(d),d!==l?"ohx"===k||"ohx2"===k?h.setGrouperFilterCatalogCodes(q):h.setGrouperFilterCriteria(r):(h.setGrouperFilterCriteria(null),h.setGrouperFilterCatalogCodes(null));var s=_g("cf"+a+"msg");s&&Util.de(s),d!==l?(e=Util.ce("span"),f=["<span id='cf",a,"msg' class='filter-applied-msg' title='",d,"'>",i.FILTER_APPLIED,"</span>"],e.innerHTML=f.join(""),g=_g("lbMnuDisplay"+a),Util.ia(e,g)):(e=Util.ce("span"),f=["<span id='cf",a,"msg' class='filter-applied-msg' title=''></span>"],e.innerHTML=f.join(""),g=_g("lbMnuDisplay"+a),Util.ia(e,g));var t=_g("Accordion"+a+"ContentDiv");t.innerHTML="";var u=[];u.push("<div id='cf",o,"' class='acc-mnu'>"),u.push("<span id='cflabel",a,"' onclick='MP_Util.LaunchMenu(\"",o,'", "',m,"\");'>",i.FILTER_LABEL,d,"<a id='compFilterDrop",a,"'><img src='",n,"/images/3943_16.gif'></a></span>"),u.push("<div class='cvClassFilterSpan lb-mnu-selectWindow lb-menu2 menu-hide' id='",o,"'><div class='acc-mnu-contentbox'>"),u.push("<div><span id='cf",m,"' class='cf-mnu' onclick='MP_Util.LaunchCompFilterSelection(",a,",-1,1);'>",i.FACILITY_DEFINED_VIEW,"</span></div>");var v=h.m_grouper_arr.length;for(p=0;p<v;p++)h.getGrouperLabel(p)&&u.push("<div><span id='cf",m,p,"' class='cf-mnu' onclick='MP_Util.LaunchCompFilterSelection(",a,",",p,",1);'>",h.getGrouperLabel(p).toString(),"</span></div>"),h.getGrouperCatLabel(p)&&u.push("<div><span id='cf",m,p,"' class='cf-mnu' onclick='MP_Util.LaunchCompFilterSelection(",a,",",p,",1);'>",h.getGrouperCatLabel(p).toString(),"</span></div>");u.push("</div></div></div>"),t.innerHTML=u.join(""),1===c&&(d===i.FACILITY_DEFINED_VIEW?h.startComponentDataRetrieval():"ohx"===k||"ohx2"===k?h.FilterRefresh(d,q):h.FilterRefresh(d,r))},closeMenuInit:function(a,b){var c,d=b+"Menu",e=b+"Mnu",f=b+"TypeMenu",g=function(b){b||(b=window.event),b.relatedTarget.id==a.id&&Util.Style.acss(a,"menu-hide"),b.stopPropagation(),Util.cancelBubble(b)};if(a.id!=d&&a.id!=e&&a.id!=f||(c=b),!h)var h=window.event;window.attachEvent?Util.addEvent(a,"mouseleave",function(){Util.Style.acss(a,"menu-hide"),_g(c).style.zIndex=1}):Util.addEvent(a,"mouseout",g)},CreateTitleText:function(a,b,c){var d=[];return a.isLineNumberIncluded()&&d.push("(",b,")"),c&&""!==c&&d.push(" ",c),d.join("")},GetContentClass:function(a,b){if(a.isScrollingEnabled()){var c=a.getScrollNumber();if(b>c&&c>0)return"content-body scrollable"}return"content-body"},CreateTimer:function(a,b,c,d,e){var f=new RTMSTimer(a,b).addMetaData("rtms.legacy.metadata.1",c||null).addMetaData("rtms.legacy.metadata.2",d||null).addMetaData("rtms.legacy.metadata.3",e||null);return f.start(),f},GetCodeSet:function(a,b){var c=[],d={artifactId:"mpage-core",functionName:"GetCodeSet"},e=new ScriptRequest;return e.setProgramName("MP_GET_CODESET"),e.setArtifactInfo(d),e.setParameterArray(["^MINE^",a+".0"]),e.setAsyncIndicator(b),e.setResponseHandler(function(a){var b=a.getResponse();"S"===a.getStatus()&&(c=MP_Util.LoadCodeListJSON(b.CODES))}),e.performRequest(),c},GetCodeSetAsync:function(a,b,c){try{var d=[],e="CODESET_"+a+".0",f=MP_Resources.getSharedResource(e);if(f&&f.isResourceAvailable())b(f.getResourceData());else{var g={artifactId:"mpage-core",functionName:"GetCodeSetAsync"},h=new ScriptRequest;h.setProgramName("MP_GET_CODESET"),h.setArtifactInfo(g),h.setParameterArray(["^MINE^",a+".0"]),h.setResponseHandler(function(g){var h=g.getResponse();h&&"S"===g.getStatus()?(d=h.CODES,f=new SharedResource(e),f&&(f.setResourceData(d),f.setIsAvailable(!0),MP_Resources.addSharedResource(e,f)),b(d)):"Z"===g.getStatus()?(logger.logError("No source codes retrieved, Code Set: "+a),c&&c(g)):(logger.logError("There was an error retrieving source codes, Code Set: "+a),c&&c(g))}),h.performRequest()}}catch(a){logger.logJSError(a,null,"mp_core.js","GetCodeSetAsync")}},GetCodeSetP:function(a){return new Promise(function(b,c){MP_Util.GetCodeSetAsync(a,b,c)})},GetCodeByMeaning:function(a,b){for(var c=a.length;c--;){var d=a[c].value;if(d.meaning==b)return d}return null},GetCodeValueByMeaning:function(a,b){var c=e[b];if(c||(c=e[b]=MP_Util.GetCodeSet(b,!1)),c&&c.length>0)for(var d=c.length;d--;){var f=c[d].value;if(f.meaning===a)return f}return null},GetCodeValueByMeaningP:function(a,b){return MP_Util.GetCodeSetP(b).then(function(b){var c=MP_Util.GetCodeByMeaning(MP_Util.LoadCodeListJSON(b),a);return c?c:null})},GetItemFromMapArray:function(a,b){for(var c=0;c<a.length;c++)if(a[c].name==b)return a[c].value},AddItemToMapArray:function(a,b,c){var d=MP_Util.GetItemFromMapArray(a,b);d||(d=[],a.push(new MP_Core.MapObject(b,d))),d.push(c)},CreateClinNoteLink:function(a,b,c,d,e,f){var g=e&&e>""?e:"STANDARD",h="";if(c>0){var i=[];i.push(a,b,c,'"'+g+'"',f),h="<a onclick='javascript:MP_Util.LaunchClinNoteViewer("+i.join(",")+"); return false;' href='#'>"+d+"</a>"}else h=d;return h},SortBySequence:function(a,b){try{var c=a.SEQUENCE,d=b.SEQUENCE;if(a.SEQUENCE)return c>d?1:c<d?-1:0}catch(a){MP_Util.LogJSError(a,this,"mp_core.js","sortBySequence")}},LaunchClinNoteViewer:function(b,c,d,e,f){var g=parseFloat(b),h=parseFloat(f),i=CERN_Platform.getWrappedDiscernObject("PVVIEWERMPAGE");switch(logger.logDiscernInfo(null,"PVVIEWERMPAGE","mp_core.js","LaunchClinNoteViewer"),e){case"AP":i.invoke("CreateAPViewer").then(function(){return i.invoke("AppendAPEvent",[d,h])}).then(function(){i.invoke("LaunchAPViewer")}).catch(function(b){a(b)});break;case"DOC":i.invoke("CreateDocViewer",[g]).then(function(){return MP_Util.IsArray(d)?d.reverse().reduce(function(a,b){return a.then(function(){return i.invoke("AppendDocEvent",[b])})},Promise.resolve()):i.invoke("AppendDocEvent",[d])}).then(function(){i.invoke("LaunchDocViewer")}).catch(function(b){a(b)});break;case"EVENT":i.invoke("CreateEventViewer",[g]).then(function(){return MP_Util.IsArray(d)?d.reverse().reduce(function(a,b){return a.then(function(){return i.invoke("AppendEvent",[b])})},Promise.resolve()):i.invoke("AppendEvent",[d])}).then(function(){i.invoke("LaunchEventViewer")}).catch(function(b){a(b)});break;case"MICRO":i.invoke("CreateMicroViewer",[g]).then(function(){return MP_Util.IsArray(d)?d.reverse().reduce(function(a,b){return a.then(function(){return i.invoke("AppendMicroEvent",[b])})},Promise.resolve()):i.invoke("AppendMicroEvent",[d])}).then(function(){i.invoke("LaunchMicroViewer")}).catch(function(b){a(b)});break;case"GRP":i.invoke("CreateGroupViewer").then(function(){return MP_Util.IsArray(d)?d.reverse().reduce(function(a,b){return a.then(function(){return i.invoke("AppendGroupEvent",[b])})},Promise.resolve()):i.invoke("AppendGroupEvent",[d])}).then(function(){i.invoke("LaunchGroupViewer")}).catch(function(b){a(b)});break;case"PROC":i.invoke("CreateProcViewer",[g]).then(function(){return MP_Util.IsArray(d)?d.reverse().reduce(function(a,b){return a.then(function(){return i.invoke("AppendProcEvent",[b])})},Promise.resolve()):i.invoke("AppendProcEvent",[d])}).then(function(){i.invoke("LaunchProcViewer")}).catch(function(b){a(b)});break;case"HLA":i.invoke("CreateAndLaunchHLAViewer",[g,d]).catch(function(b){a(b)});break;case"NR":i.invoke("LaunchRemindersViewer",[d]).catch(function(b){a(b)});break;case"STANDARD":alert(i18n.discernabu.CAN_NOT_VIEW_RESULTS)}},IsArray:function(a){return"object"==typeof a&&a instanceof Array},IsString:function(a){return"string"==typeof a},HandleNoDataResponse:function(a){var b=i18n.discernabu;return"<h3 class='info-hd'><span class='res-normal'>"+b.NO_RESULTS_FOUND+"</span></h3><span class='res-none'>"+b.NO_RESULTS_FOUND+"</span>"},HandleErrorResponse:function(a,b){var c=[],d=i18n.discernabu,e=a&&a.length>0?a+"-":"";return c.push("<h3 class='info-hd'><span class='res-normal'>",d.ERROR_RETREIVING_DATA,"</span></h3>"),c.push("<dl class='",e,"info error-message error-text'><dd><span>",d.ERROR_RETREIVING_DATA,"</span></dd></dl>"),b&&b.length&&logger.logError(i18n.COMPONENTS+": "+a+"<br />"+b),c.join("")},GetValueFromArray:function(a,b){if(null!=b)for(var c=0,d=b.length;c<d;c++)if(b[c].name==a)return b[c].value;return null},GetCompObjById:function(a){for(var b=CERN_MPageComponents,c=b.length,d=c;d--;){var e=b[d];if(e.m_componentId===a)return e}return null},GetCompObjByStyleId:function(a){for(var b=CERN_MPageComponents.length,c=b;c--;){var d=CERN_MPageComponents[c],e=d.getStyles();if(e.getId()===a)return d}return null},LoadCodeListJSON:function(a){var b=[],c=null;if(null!=a)for(var d=0;d<a.length;d++){var e={};c=a[d],e.codeValue=c.CODE,e.display=c.DISPLAY,e.description=c.DESCRIPTION,e.codeSet=c.CODE_SET,e.sequence=c.SEQUENCE,e.meaning=c.MEANING;var f=new MP_Core.MapObject(e.codeValue,e);b.push(f)}return b},LoadPersonelListJSON:function(a){var b,c=[];if(null!=a)for(var d=0;d<a.length;d++){var e={};b=a[d],e.id=b.ID,b.BEG_EFFECTIVE_DT_TM&&(e.beg_dt_tm=b.BEG_EFFECTIVE_DT_TM,e.beg_dt_tm_string=/[0-9]+-[0-9]+-[0-9]+/.exec(b.BEG_EFFECTIVE_DT_TM)+"T"+/[0-9]+:[0-9]+:[0-9]+/.exec(b.BEG_EFFECTIVE_DT_TM)+"Z"),b.END_EFFECTIVE_DT_TM&&(e.end_dt_tm=b.END_EFFECTIVE_DT_TM,e.end_dt_tm_string=/[0-9]+-[0-9]+-[0-9]+/.exec(b.END_EFFECTIVE_DT_TM)+"T"+/[0-9]+:[0-9]+:[0-9]+/.exec(b.END_EFFECTIVE_DT_TM)+"Z"),e.fullName=b.PROVIDER_NAME.NAME_FULL,e.firstName=b.PROVIDER_NAME.NAME_FIRST,e.middleName=b.PROVIDER_NAME.NAME_MIDDLE,e.lastName=b.PROVIDER_NAME.NAME_LAST,e.userName=b.PROVIDER_NAME.USERNAME,e.initials=b.PROVIDER_NAME.INITIALS,e.title=b.PROVIDER_NAME.TITLE;var f=new MP_Core.MapObject(e.id,e);c[d]=f}return c},LoadPhoneListJSON:function(a){var b=[],c=null,d=0;if(a)for(var e=a.length;e--;){var f={};c=a[e],f.personId=c.PERSON_ID,d=c.PHONES.length,f.phones=[];for(var g=0;g<d;g++){var h={};h.phoneNum=c.PHONES[g].PHONE_NUM,h.phoneType=c.PHONES[g].PHONE_TYPE,f.phones.push(h)}var i=new MP_Core.MapObject(f.personId,f);b[e]=i}return b},WriteToFile:function(a){try{var b=8,c=0,d=new ActiveXObject("Scripting.FileSystemObject"),e=d.OpenTextFile("c:\\temp\\test.txt",b,!0,c);e.write(a),e.close()}catch(a){var f="Error:";f+="\nNumber:"+a.number,f+="\nDescription:"+a.description,document.write(f)}},pad:function(a,b,c,d){if("undefined"==typeof b&&(b=0),"undefined"==typeof c&&(c=" "),"undefined"==typeof d&&(d=STR_PAD_RIGHT),b+1>=a.length)switch(d){case STR_PAD_LEFT:a=Array(b+1-a.length).join(c)+a;break;case STR_PAD_BOTH:var e=0,f=Math.ceil((e=b-a.length)/2),g=e-f;a=Array(g+1).join(c)+a+Array(f+1).join(c);break;default:a+=Array(b+1-a.length).join(c)}return a},GraphResults:function(a,b,c){var d=MP_Util.GetCompObjById(b),e="",f=i18n.discernabu,g="",h=d.getLookbackUnitTypeFlag()?d.getLookbackUnitTypeFlag():"2",i=d.getLookbackUnits()?d.getLookbackUnits():"365",j="",k="",l=d.getScope(),m=d.getCriterion();if(!(l>0))return void logger.logError("No scope defined for component "+d.getLabel());switch(h){case 1:k=f.LAST_N_HOURS.replace("{0}",i);break;case 2:k=f.LAST_N_DAYS.replace("{0}",i);break;case 3:k=f.LAST_N_WEEKS.replace("{0}",i);break;case 4:k=f.LAST_N_MONTHS.replace("{0}",i);break;case 5:k=f.LAST_N_YEARS.replace("{0}",i);break;default:k=f.LAST_N_DAYS.replace("{0}",i)}switch(l){case 1:g=f.ALL_N_VISITS.replace("{0}",k),e="0.0";break;case 2:g=f.SELECTED_N_VISIT.replace("{0}",k),e=m.encntr_id+".0"}CERN_Platform.inMillenniumContext()?(j="^MINE^,"+m.person_id+".0,"+e+","+a+".0,^"+m.static_content+"\\discrete-graphing^,"+c+".0,"+m.provider_id+".0,"+m.position_cd+".0,"+m.ppr_cd+".0,"+i+","+h+",200,^"+g+"^",ReportLauncher.launchCCLReport("mp_retrieve_graph_results",j,{modal:!0,showButtons:!1,showToolbar:!1,width:1200,height:700,useEdge:CERN_Platform.inEdgeContext()})):(j="^MINE^,"+m.person_id+".0,"+e+","+a+".0,^"+m.static_content+"/discrete-graphing^,"+c+".0,"+m.provider_id+".0,"+m.position_cd+".0,"+m.ppr_cd+".0,"+i+","+h+",200,^"+g+"^,^^,^^,^^,1",MD_reachViewerDialog.LaunchReachGraphViewer(j)),Util.preventDefault()},ReleaseRequestReference:function(a){if(CERN_Platform.inMillenniumContext()&&XMLCCLREQUESTOBJECTPOINTER)for(var b in XMLCCLREQUESTOBJECTPOINTER)XMLCCLREQUESTOBJECTPOINTER[b]===a&&delete XMLCCLREQUESTOBJECTPOINTER[b]},AlertConfirm:function(a,b,c,d,e,f){var g="<button id='acTrueButton' data-val='1'>"+(c?c:i18n.discernabu.CONFIRM_OK)+"</button>",h="";d&&(h="<button id='acFalseButton' data-val='0'>"+d+"</button>"),b||(b="&nbsp;");var i=function(){var a=parseInt(this.getAttribute("data-val"),10);$(".modal-div").remove(),$(".modal-dialog").remove(),$("html").css("overflow","auto"),a&&"function"==typeof f&&f()},j=Util.cep("div",{className:"modal-div"}),k=Util.cep("div",{className:"modal-dialog"});k.innerHTML="<div class='modal-dialog-hd'>"+b+"</div><div class='modal-dialog-content'>"+a+"</div><div class='modal-dialog-ft'><div class='modal-dialog-btns'>"+g+h+"</div></div>";var l=document.body;Util.ac(j,l),Util.ac(k,l),Util.addEvent(_g("acTrueButton"),"click",i),d&&Util.addEvent(_g("acFalseButton"),"click",i),e&&d?_g("acFalseButton").focus():_g("acTrueButton").focus(),$("html").css("overflow","hidden"),$(j).height($(document).height())},CreateAutoSuggestBoxHtml:function(a,b){var c=[],d="",e=a.getStyles().getNameSpace(),f=a.getComponentId();return d=b?e+b+f:e+"ContentCtrl"+f,c.push("<div class='search-box-div'><form name='contentForm' onSubmit='return false'><input type='text' id='",d,"'"," class='search-box'></form></div>"),c.join("")},AddAutoSuggestControl:function(a,b,c,d,e){new AutoSuggestControl(a,b,c,d,e)},RetrieveAutoSuggestSearchBox:function(a){var b=a.getStyles().getNameSpace(),c=a.getComponentId();return _g(b+"ContentCtrl"+c)},CreateParamArray:function(a,b){var c=1===b?"0.0":"0";return a&&a.length>0&&(c=a.length>1?1===b?"value("+a.join(".0,")+".0)":"value("+a.join(",")+")":1===b?a[0]+".0":a[0]),c},LoadSpinner:function(a,b,c){if(a&&"string"==typeof a){var d=$("#"+a),e=d.height(),f="";if(b)f="height: "+e+"px; margin-top: -"+e+"px;";else{var g=d.offsetParent(),h=g.height()-e;f="height: "+e+"px; top: "+h+"px;"}c?d.append("<div id='"+c+"' class='loading-screen' style='"+f+"'><div class='loading-spinner'>&nbsp;</div></div>"):d.append("<div class='loading-screen' style='"+f+"'><div class='loading-spinner'>&nbsp;</div></div>")}},GetDateFormatter:function(){return c||(c=new mp_formatter.DateTimeFormatter(MPAGE_LOCALE)),c},GetNumericFormatter:function(){return d||(d=new mp_formatter.NumericFormatter(MPAGE_LOCALE)),d},PrintReport:function(a,b,c){function d(){try{var a=document.createElement("iframe");a.setAttribute("display","none"),document.body.appendChild(a);var b=a.contentWindow,c=b?b.document:null;c&&(c.write(f),c.close(),b.focus(),b.print())}catch(a){logger.logJSError(a,null,"mpage-core.js","PrintReport")}finally{$(a).remove()}}var e=1,f="",g=MP_ModalDialog.retrieveModalDialogObject("printDialog");if(!g){g=new ModalDialog("printDialog"),g.setHeaderTitle("&nbsp;"),MP_ModalDialog.addModalDialogObject(g);var h=new ModalButton("cancelButton");h.setText(i18n.discernabu.CONFIRM_CANCEL),h.setCloseOnClick(!0),g.addFooterButton(h);var i=new ModalButton("printButton");i.setText(i18n.PRINT),i.setCloseOnClick(!1),i.setOnClickFunction(d),g.addFooterButton(i)}MP_ModalDialog.showModalDialog("printDialog");var j={artifactId:"mpage-core",functionName:"PrintReport"},k=new ScriptRequest;k.setName("Print Report Script Request"),k.setProgramName("pwx_rpt_driver_to_mpage"),k.setArtifactInfo(j),k.setParameterArray(["^MINE^","^"+a+"^",b,c,e]),k.setRawDataIndicator(!0),k.setResponseHandler(function(a){$("body").css("cursor","default"),f=a.getResponse(),g.setBodyHTML(f||i18n.NO_DATA_FOUND)}),k.performRequest(),$("body").css("cursor","wait")},CalculatePrecision:function(a){var b=0,c=MP_Util.IsString(a)?a:a.toString(),d=c.search(/\.(\d)/);if(d!==-1){var e=c.length;b=e-d-1}return b},CreateDateParameter:function(a){var b=a.getDate(),c="",d=a.format("yyyy HH:MM:ss");switch(a.getMonth()){case 0:c="JAN";break;case 1:c="FEB";break;case 2:c="MAR";break;case 3:c="APR";break;case 4:c="MAY";break;case 5:c="JUN";break;case 6:c="JUL";break;case 7:c="AUG";break;case 8:c="SEP";break;case 9:c="OCT";break;case 10:c="NOV";break;case 11:c="DEC";break;default:alert("unknown month")}return b+"-"+c+"-"+d},LogDebug:function(a){logger.logDebug(a)},LogWarn:function(a){logger.logWarning(a)},LogInfo:function(a){logger.logMessage(a)},LogError:function(a){logger.logError(a)},LogScriptCallInfo:function(a,b,c,d){logger.logScriptCallInfo(a,b,c,d)},LogScriptCallError:function(a,b,c,d){logger.logScriptCallError(a,b,c,d)},LogJSError:function(a,b,c,d){logger.logJSError(a,b,c,d)},LogDiscernInfo:function(a,b,c,d){logger.logDiscernInfo(a,b,c,d)},LogMpagesEventInfo:function(a,b,c,d,e){logger.logMPagesEventInfo(a,b,c,d,e)},LogCclNewSessionWindowInfo:function(a,b,c,d){logger.logCCLNewSessionWindowInfo(a,b,c,d)},LogTimerInfo:function(a,b,c,d,e){logger.logTimerInfo(a,b,c,d,e)},AddCookieProperty:function(a,b,c){var d=CK_DATA[a];d||(d={}),d[b]=c,CK_DATA[a]=d},GetCookieProperty:function(a,b){var c=CK_DATA[a];return c&&c[b]?c[b]:null},WriteCookie:function(){var a=JSON.stringify(CK_DATA);document.cookie="CookieJar="+a+";"},RetrieveCookie:function(){var a=document.cookie,b=a.match(/CookieJar=({[^;]+})(;|\b|$)/);b&&b[1]&&(CK_DATA=JSON.parse(b[1]))},GetCookieValue:GetCookieValueUtil,generateModalDialogBody:function(a,b,c,d){var e=null;if(e=MP_ModalDialog.retrieveModalDialogObject(a),!e)switch(b.toLowerCase()){case"error":e=new ErrorModal(a);break;case"warning":e=new WarningModal(a);break;case"information":e=new InfoModal(a);break;case"busy":e=new BusyModal(a);break;default:e=new MessageModal(a)}return e.setMessage(c,d),e},setObjectDefinitionMapping:function(a,b){return"string"==typeof a&&(a=a.toUpperCase(),"function"==typeof b&&(CERN_ObjectDefinitionMapping[a]=b,
!0))},getObjectDefinitionMapping:function(a){return"string"!=typeof a?null:(a=a.toUpperCase(),"undefined"==typeof CERN_ObjectDefinitionMapping[a]?null:CERN_ObjectDefinitionMapping[a])},updateObjectDefinitionMapping:function(a,b){return"string"!=typeof a?null:(a=a.toUpperCase(),"undefined"==typeof CERN_ObjectDefinitionMapping[a]?(logger.logMessage("Object mapping does not exists for "+a),!1):"function"==typeof b&&(CERN_ObjectDefinitionMapping[a]=b,!0))},removeObjectDefinitionMapping:function(a){return"string"!=typeof a?null:(a=a.toUpperCase(),"undefined"==typeof CERN_ObjectDefinitionMapping[a]?(logger.logMessage("Object mapping does not exists for "+a),!1):delete CERN_ObjectDefinitionMapping[a])},enhancedStringify:function(a,b,c,d,e){var f,g,h,i=e||[],j=function(a,e){if("string"==typeof a){var f,g=a.toUpperCase();if(1!==c&&"string"==typeof e&&""!==e&&g.indexOf("_DT_TM")>-1)return f=d?"XXX_REPLACE_DT_START_XXX"+e.replace("Z","+00:00XXX_REPLACE_DT_END_XXX"):"XXX_REPLACE_DT_START_XXX"+e+"XXX_REPLACE_DT_END_XXX";if(1!==b&&"number"==typeof e&&(g.indexOf("_ID")>-1||g.indexOf("_CD")>-1)){var h=i.some(function(b){return b===a});h||i.push(a)}}return e},k=function(a){return a.indexOf(".")===-1?a+".0":a};f=JSON.stringify(a,j).replace(/XXX_REPLACE_DT_START_XXX/g,"\\/Date(").replace(/XXX_REPLACE_DT_END_XXX/g,")\\/");for(var l=i.length;l--;)g='("'+i[l]+'":\\d+\\.?\\d*)',h=new RegExp(g,"gi"),f=f.replace(h,k);return f}}}();MP_Util.Doc=function(){function a(a,c,d,g){var h=i18n.discernabu,i=_g("optMenuConfig"+a);if(!i){i=Util.cep("div",{className:"opts-menu-config-content menu-hide",id:"optMenuConfig"+a});var j=[];j.push("<div title = '",h.COLOR_STANDARD,"' class='opts-menu-config-item opt-config-mnu-lightgrey' data-color='lightgrey' id='optConfigMnuLightGrey",a,"'></div>","<div title = '",h.COLOR_BROWN,"' class='opts-menu-config-item opt-config-mnu-brown' data-color='brown' id='optConfigMnuBrown",a,"'></div>","<div title = '",h.COLOR_CERNER_BLUE,"' class='opts-menu-config-item opt-config-mnu-cernerblue' data-color='cernerblue' id='optConfigMnuCernerBlue",a,"'></div>","<div title = '",h.COLOR_DARK_GREEN,"' class='opts-menu-config-item opt-config-mnu-darkgreen' data-color='darkgreen' id='optConfigMnuDarkGreen",a,"'></div>","<div title = '",h.COLOR_GREEN,"' class='opts-menu-config-item opt-config-mnu-green' data-color='green' id='optConfigMnuGreen",a,"'></div>","<div title = '",h.COLOR_GREY,"' class='opts-menu-config-item opt-config-mnu-grey' data-color='grey' id='optConfigMnuGrey",a,"'></div>","<div title = '",h.COLOR_LIGHT_BLUE,"' class='opts-menu-config-item opt-config-mnu-lightblue' data-color='lightblue' id='optConfigMnuLightBlue",a,"'></div>","<div title = '",h.COLOR_NAVY,"' class='opts-menu-config-item opt-config-mnu-navy' data-color='navy' id='optConfigMnuNavy",a,"'></div>","<div title = '",h.COLOR_ORANGE,"' class='opts-menu-config-item opt-config-mnu-orange' data-color='orange' id='optConfigMnuOrange",a,"'></div>","<div title = '",h.COLOR_PINK,"' class='opts-menu-config-item opt-config-mnu-pink' data-color='pink' id='optConfigMnuPink",a,"'></div>","<div title = '",h.COLOR_PURPLE,"' class='opts-menu-config-item opt-config-mnu-purple' data-color='purple' id='optConfigMnuPurple",a,"'></div>","<div title = '",h.COLOR_YELLOW,"' class='opts-menu-config-item opt-config-mnu-yellow' data-color='yellow' id='optConfigMnuYellow",a,"'></div>"),i.innerHTML=j.join(""),Util.ac(i,document.body),Util.addEvent(_g("optMenuConfig"+a),"click",function(c){var e=c.target||c.srcElement,f=e.getAttribute("data-color");b(a,f,d)}),e(i,a,!0)}f(i,c,g)}function b(a,b,c){var d=_g(c);if(d){var e="brown|cernerblue|darkgreen|grey|green|lightblue|lightgrey|lowlight|navy|orange|pink|purple|yellow";if(e.indexOf(b)>=0){var f=/brown|cernerblue|darkgreen|grey|green|lightblue|lightgrey|lowlight|navy|orange|pink|purple|yellow/;d.className=d.className.replace(f,"")}Util.Style.acss(d,b);var g=MP_Util.GetCompObjById(a);g.setCompColor(b),setTimeout(function(){MP_Core.AppUserPreferenceManager.SaveCompPreferences(a,b,null,!1)},0)}}function c(a,b){var c=MP_Util.GetCompObjById(a),d=c.isExpanded();c.setExpandCollapseState(!d);var e=_gbt("span",b)[0];d?(e&&Util.Style.rcss(e,"opts-menu-def-exp"),setTimeout(function(){MP_Core.AppUserPreferenceManager.SaveCompPreferences(a,"","0",!1)},0)):(e&&Util.Style.acss(e,"opts-menu-def-exp"),setTimeout(function(){MP_Core.AppUserPreferenceManager.SaveCompPreferences(a,"","1",!1)},0))}function d(a,b){var c=MP_Util.GetCompObjById(a),d=c.isInfoButtonEnabled(),e=_gbt("span",b)[0],f="";c.m_reportMean&&"undefined"!=typeof c.m_reportMean&&(f=c.m_reportMean.split("_").slice(3).join(" "));var g=c.getCriterion().category_mean,h=null;d?c.setIsInfoButtonEnabled(0):(h=new CapabilityTimer("CAP:MPG_ENABLE_INFOBUTTON",g),h&&(h.addMetaData("rtms.legacy.metadata.1","InfoButton is enabled from the "+f+" Summary Component"),h.capture()),c.setIsInfoButtonEnabled(1)),d?e&&(Util.Style.rcss(e,"opts-menu-info-en"),c.showInfoButton(c,!1),setTimeout(function(){MP_Core.AppUserPreferenceManager.SaveCompPreferences(a,"","",!1,"0")},0)):e&&(Util.Style.acss(e,"opts-menu-info-en"),c.showInfoButton(c,!0),setTimeout(function(){MP_Core.AppUserPreferenceManager.SaveCompPreferences(a,"","",!1,"1")},0))}function e(a,b,c){var d=function(d){d||(d=window.event);var e=d.relatedTarget||d.toElement,f=_g("moreOptMenu"+b);if(c)var g=d.target||d.srcElement;e?Util.Style.ccss(e,"opts-menu-config-content")||(i=window.setTimeout(function(){f&&(Util.Style.ccss(e,"opts-menu-content")||Util.Style.acss(f,"menu-hide")),c&&(Util.Style.acss(a,"menu-hide"),Util.Style.ccss(g,"opts-menu-content")&&!Util.Style.ccss(e,"opts-menu-content")&&_g("moreOptMenu"+b)&&Util.Style.acss(_g("moreOptMenu"+b),"menu-hide")),_g("optMenuConfig"+b)&&Util.Style.acss(_g("optMenuConfig"+b),"menu-hide")},j)):f&&Util.Style.acss(f,"menu-hide"),Util.cancelBubble(d)};$(a).mouseleave(d),$(a).mouseenter(function(){window.clearTimeout(i)})}function f(a,b,c){var d,e=30;if(Util.Style.ccss(a,"menu-hide"))if(Util.preventDefault(),Util.Style.rcss(a,"menu-hide"),c){d=Util.goff(c);var f=c.offsetWidth,g=a.offsetWidth,h=d[0]-g;h>0?a.style.left=h-2+"px":a.style.left=d[0]+f+6+"px",a.style.top=d[1]-5+"px"}else{var i="#mainCompMenu"+b,j=$(i);if(j.length)a.style.left=$(j).offset().left-125+"px",a.style.top=$(j).offset().top+18+"px";else{var k=_g(b);d=Util.goff(k),a.style.left=d[0]+k.offsetWidth-a.offsetWidth+"px",a.style.top=d[1]+e+"px"}}else Util.Style.acss(a,"menu-hide")}function g(a){var b=i18n.discernabu,c="",d=a.getScope(),e=a.getLookbackDays(),f=e>0?e:a.getLookbackUnits(),g=e>0?2:a.getLookbackUnitTypeFlag();if(d>0)if(g>0&&f>0){var h="";switch(g){case 1:h=b.LAST_N_HOURS.replace("{0}",f);break;case 2:h=b.LAST_N_DAYS.replace("{0}",f);break;case 3:h=b.LAST_N_WEEKS.replace("{0}",f);break;case 4:h=b.LAST_N_MONTHS.replace("{0}",f);break;case 5:h=b.LAST_N_YEARS.replace("{0}",f)}switch(d){case 1:c=b.ALL_N_VISITS.replace("{0}",h);break;case 2:c=b.SELECTED_N_VISIT.replace("{0}",h)}}else switch(d){case 1:c=b.All_VISITS;break;case 2:c=b.SELECTED_VISIT}return c}var h="",i=null,j=250;return{SetupExpandCollapse:function(a){var b=i18n.discernabu,c=null,d=null;a?(c=_g(a),d=Util.Style.g("sec-hd-tgl",c,"span")):d=Util.Style.g("sec-hd-tgl");for(var e=0;e<d.length;e++){Util.addEvent(d[e],"click",MP_Util.Doc.ExpandCollapse);var f=Util.gp(Util.gp(d[e]));Util.Style.ccss(f,"closed")&&(d[e].innerHTML="+",d[e].title=b.SHOW_SECTION,d[e].setAttribute("aria-label",b.SHOW_SECTION))}},SetupCompFilters:function(a){for(var b=null,c=a.length,d=!1,e=0;e<c;e++){b=a[e],d=!1;for(var f=0;f<10;f++)if(b.getGrouperLabel(f)||b.getGrouperCatLabel(f)){d=!0;break}b.setCompFilters(d),b.hasCompFilters()&&b.isDisplayable()&&b.renderAccordion(b)}},CreateCompMenus:function(b,g){for(var h=function(a,b,c,d){a.createMainMenu();var e=a.getMenu();if(e){var f="themeSelector"+b,g=new ThemeSelector(f,b,c,d);e.addMenuItem(g);var h=new MenuSelection("defaultExpandedSelection"+b);h.setLabel(i18n.discernabu.DEFAULT_EXPANDED),h.setIsSelected(1===a.isExpanded()),h.setCloseOnClick(!1),h.setClickFunction(function(){var b=!a.isExpanded();a.setExpandCollapseState(b),a.setExpanded(b?1:0),MP_Core.AppUserPreferenceManager.UpdateSingleCompPreferences(a,!0)}),e.addMenuItem(h),MP_MenuManager.updateMenuObject(e);var i=c.replace("mainCompMenu","");Util.addEvent(_g("mainCompMenu"+i),"click",function(){MP_MenuManager.showMenu(this.id)})}},i=function(b,h,i,k,l){if(_g(h)){var m=_g("moreOptMenu"+b);if(!m){m=Util.cep("div",{className:"opts-menu-content menu-hide",id:"moreOptMenu"+b});var n=i18n.discernabu,o="",p=n.INFO_BUTTON,q="";i&&(o="opts-menu-def-exp"),l&&(q="opts-menu-info-en");var r='<div class="opts-actions-sec" id="optsMenuActions'+b+'"></div>';g||(r+=k?'<div class="opts-personalize-sec" id="optsMenupersonalize'+b+'"><div class="opts-menu-item opts-def-theme" id="optsDefTheme'+b+'">'+n.COLOR_THEME+'</div><div class="opts-menu-item opts-def-state" id="optsDefState'+b+'">'+n.DEFAULT_EXPANDED+'<span class="'+o+'">&nbsp;</span></div><div class="opts-menu-item opts-personalize-sec-divider" id="optsInfoState'+b+'">'+p+'<span class="'+q+'">&nbsp;</span></div></div>':'<div class="opts-personalize-sec" id="optsMenupersonalize'+b+'"><div class="opts-menu-item opts-def-theme" id="optsDefTheme'+b+'">'+n.COLOR_THEME+'</div><div class="opts-menu-item opts-def-state" id="optsDefState'+b+'">'+n.DEFAULT_EXPANDED+'<span class="'+o+'">&nbsp;</span></div></div>'),m.innerHTML=r,Util.ac(m,document.body)}e(m,b,!1);var s=null,t=function(a){a||(a=window.event);var c=a.relatedTarget||a.toElement;return c?void(s=window.setTimeout(function(){_g("optMenuConfig"+b)&&Util.Style.acss(_g("optMenuConfig"+b),"menu-hide")},j)):void(_g("optMenuConfig"+b)&&Util.Style.acss(_g("optMenuConfig"+b),"menu-hide"))},u=h.replace("mainCompMenu","");if(Util.addEvent(_g("mainCompMenu"+u),"click",function(){f(m,u)}),!g){var v=_g("optsDefTheme"+b);Util.addEvent(v,"mouseenter",function(){window.clearTimeout(s);var c=_g("optMenuConfig"+b);c?Util.Style.ccss(c,"menu-hide")&&f(c,h,this):a(b,h,u,this)}),Util.addEvent(m,"mouseenter",function(a){a||(a=window.event);var b=a.target||a.srcElement;Util.Style.ccss(b,"opts-def-theme")||t(a)}),Util.addEvent(v,"mouseleave",function(a){a||(a=window.event),window.clearTimeout(s);var b=a.relatedTarget||a.toElement;!b||Util.Style.ccss(b,"opts-menu-content")||Util.Style.ccss(b,"opts-menu-config-content")||t(a)}),$(_g("optsDefState"+b)).unbind("click"),$(_g("optsDefState"+b)).bind("click",function(){c(b,this)}),MP_Util.GetCompObjById(b).isExpanded()&&$(_g("optsDefState"+b).getElementsByTagName("span")).addClass("opts-menu-def-exp"),k&&Util.addEvent(_g("optsInfoState"+b),"click",function(){d(b,this)})}}},k=b,l=k.length,m=0;m<l;m++){var n=k[m],o=n.m_styles.m_nameSpace,p=n.m_styles.m_componentId,q="mainCompMenu"+o+p,r=n.isExpanded(),s=n.hasInfoButton(),t=n.isInfoButtonEnabled();"cust"!==o?i(p,q,r,s,t):h(n,p,q,o)}},HideAllCompMenus:function(){for(var a=Util.Style.g("opts-menu-content",null,"div"),b=a.length,c=b;c--;)Util.Style.ccss(a[c],"menu-hide")||Util.Style.acss(a[c],"menu-hide")},GetComments:function(a,b){for(var c="",d="",e=new mp_formatter.DateTimeFormatter(MPAGE_LOCALE),f=0,g=a.COMMENTS.length;f<g;f++)null!=b.length&&(""!=a.COMMENTS[f].RECORDED_DT_TM&&(d=e.formatISO8601(a.COMMENTS[f].RECORDED_DT_TM,mp_formatter.DateTimeFormatter.FULL_DATE_TIME_4YEAR)),f>0&&(c+="<br />"),c+=a.COMMENTS[f].RECORDED_BY>0?d+" - "+MP_Util.GetValueFromArray(a.COMMENTS[f].RECORDED_BY,b).fullName+"<br />"+a.COMMENTS[f].COMMENT_TEXT:d+"<br />"+a.COMMENTS[f].COMMENT_TEXT);return c},FinalizeComponent:function(a,b,c){var d=b.getStyles(),e=b.getRootComponentNode();if(e){var f=Util.Style.g("sec-total",e,"span");c&&f&&f.length?(b.setResultCount(c),$(f).removeClass("hidden"),f[0].innerHTML=c):f&&f.length&&$(f).addClass("hidden");var g=b.getSectionContentNode();g.innerHTML=a,MP_Util.Doc.InitHovers(d.getInfo(),g,b),MP_Util.Doc.InitSubToggles(g,"sub-sec-hd-tgl"),setTimeout(function(){MP_Util.Doc.InitScrolling(Util.Style.g("scrollable",g,"div"),b.getScrollNumber(),"1.6")},0);var h=$(e).find(".error-message");h.length?($(e).find(".sec-title>span:first-child").addClass("error-icon-component"),$(h).css("border","1px solid #C00").css("padding","2px 4px"),CERN_EventListener.fireEvent(b,b,EventListener.EVENT_ERROR_UPDATE,{error:!0})):($(e).find(".sec-title>span:first-child").removeClass("error-icon-component"),CERN_EventListener.fireEvent(b,b,EventListener.EVENT_ERROR_UPDATE,{error:!1}))}b.notifyAggregateTimer(),b.getOnFinalizeComponent&&b.getOnFinalizeComponent()&&b.getOnFinalizeComponent()()},InitScrolling:function(a,b,c){for(var d=0;d<a.length;d++)MP_Util.Doc.InitSectionScrolling(a[d],b,c)},InitSectionScrolling:function(a,b,c){var d=b*c,e=d+"em";a.style.maxHeight=e,a.style.overflowY="auto",a.style.overflowX="hidden"},InitHovers:function(a,b,c){for(var d=Util.Style.g(a,b,"DL"),e=0,f=d.length;e<f;e++){var g=d[e];if(g){var h=Util.gns(Util.gns(g));h&&Util.Style.ccss(h,"hvr")&&hs(g,h,c)}}},InitSubToggles:function(a,b){for(var c=i18n.discernabu,d=Util.Style.g(b,a,"span"),e=0;e<d.length;e++){Util.addEvent(d[e],"click",MP_Util.Doc.ExpandCollapse);var f=Util.gp(Util.gp(d[e]));Util.Style.ccss(f,"closed")&&(d[e].innerHTML="+",d[e].title=c.SHOW_SECTION)}},AddPageTitle:function(a,b,c,d,e,f,g,h,i){var j=i18n.discernabu,k=[];if(i?(a="",b=_g(i),b.innerHTML=""):b&&(b=document.body),k.push("<div class='pg-hd'>"),k.push("<h1><span class='pg-title'>",a,"</span></h1><span id='pageCtrl",h.category_mean,"' class='page-ctrl'>"),i){var l=MP_Util.GetDateFormatter();k.push("<span class='other-anchors'>",j.AS_OF_TIME.replace("{0}",l.format(new Date,mp_formatter.DateTimeFormatter.TIME_24HOUR_NO_SECONDS)),"</span>")}if(e)for(var m=0,n=e.length;m<n;m++)k.push("<span class='other-anchors'>"+e[m]+"</span>");if(d||i){var o="pageMenu"+h.category_mean;k.push("<span id='",o,"' class='page-menu'>&nbsp;</span>")}k.push("</span></div>"),b.innerHTML+=k.join("")},LaunchHelpWindow:function(a){var b="left=0,top=0,width=1200,height=700,toolbar=no";logger.logCCLNewSessionWindowInfo(null,a,"mp_core.js","LaunchHelpWindow"),CCLNEWSESSIONWINDOW(a,"_self",b,0,1),Util.preventDefault()},AddCustomizeLink:function(a){var b=_g("custView"+a.category_mean);b&&logger.logWarn("AddCustomizeLink is a deprecated function and should not be utilized")},ExpandCollapse:function(){var a=i18n.discernabu,b=Util.gp(Util.gp(this));Util.Style.ccss(b,"closed")?(Util.Style.rcss(b,"closed"),this.innerHTML="-",this.title=a.HIDE_SECTION,this.setAttribute("aria-label",a.HIDE_SECTION)):(Util.Style.acss(b,"closed"),this.innerHTML="+",this.title=a.SHOW_SECTION,this.setAttribute("aria-label",a.SHOW_SECTION))},HideHovers:function(){for(var a=Util.Style.g("hover",document.body,"DIV"),b=a.length;b--;)"BODY"==Util.gp(a[b]).nodeName&&(a[b].style.display="none",Util.de(a[b]))},ReplaceSubTitleText:function(a,b){var c=$("#lookbackDisplay"+a.getStyles().getId());c.length&&c.html(b)},ReInitSubTitleText:function(a){if(a.getScope()>0){var b=$("#lookbackDisplay"+a.getStyles().getId());b.length&&b.html(g(a))}},/*Copyright (c) 2006-2010 Paranoid Ferret Productions.  All rights reserved.

         Developed by: Paranoid Ferret Productions
         http://www.paranoidferret.com

         THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
         IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
         FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE
         CONTRIBUTORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
         LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
         FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
         WITH THE SOFTWARE.*/
RunAccordion:function(a){var b="Accordion"+a+"Content",c=100,d=_g("Accordion"+a+"Title"),e=_g("AccordionContainer"+a);Util.Style.ccss(d,"Expanded")?(Util.Style.rcss(d,"Expanded"),Util.Style.rcss(e,"Expanded")):(Util.Style.acss(d,"Expanded"),Util.Style.acss(e,"Expanded")),h==b&&(b=""),setTimeout("MP_Util.Doc.Animate("+(new Date).getTime()+","+c+",'"+h+"','"+b+"',"+a+")",33),h=b},Animate:function(a,b,c,d,e){var f=b,g=(new Date).getTime(),h=g-a,i=275,j=""==d?null:_g(d),k=""==c?null:_g(c);if(b<=h)return j&&(j.style.display="block",j.style.height=i+"px"),void(k&&(k.style.display="none",k.style.height="0px"));b-=h;var l=Math.round(b/f*i);j&&"block"!=j.style.display&&(j.style.display="block",j.style.height=i-l+"px"),k&&(k.style.height=l+"px"),setTimeout("MP_Util.Doc.Animate("+g+","+b+",'"+c+"','"+d+"',"+e+")",33)},GetSelected:function(a){for(var b=[],c=0,d=a.length,e=0;e<d;e++)a[e].selected&&(c=b.length,b[c]={},b[c].value=a[e].value,b[c].index=e);return b},ResetLayoutSettings:function(a){var b=a.getViewSettings().BR_SET.CS,c=a.getComponents(),d=null,e={},f=0,g={};for(f=b.length;f--;)g[b[f].R_MN]=b[f];for(f=c.length;f--;)d=c[f],e=g[d.getReportMean()],c[f].setSequence(e.R_SQ),c[f].setColumn(e.C_SQ);$("body").css("cursor","wait"),MP_Core.AppUserPreferenceManager.UpdateAllCompPreferences(c),CERN_Platform.refreshMPage()}}}(),MP_Util.Measurement=function(){function a(a){var b=[],c=a.ENCAPSULATED_VALUE;if(c&&c.length>0)for(var d=0,e=c.length;d<e;d++){var f=c[d].TEXT_PLAIN;null!=f&&f.length>0&&b.push(f)}return b.join("")}function b(a,b){var c=new MP_Core.QuantityValue;return c.init(a,b),c}function c(a){for(var b=0,c=a.DATE_VALUE.length;b<c;b++){var d=a.DATE_VALUE[b];if(""!=d.DATE){var e=new Date;return e.setISO8601(d.DATE),e}}return null}function d(a){for(var b=a.CODE_VALUE,c=[],d=0,e=b.length;d<e;d++){for(var f=b[d].VALUES,g=0,h=f.length;g<h;g++)c.push(f[g].SOURCE_STRING);var i=b[d].OTHER_RESPONSE;""!=i&&c.push(i)}return c.join(", ")}function e(a){for(var b=a.STRING_VALUE,c=[],d=0,e=b.length;d<e;d++)c.push(b[d].VALUE);return c.join(", ")}return{GetString:function(a,b,c,d){var e=a instanceof MP_Core.Measurement?a.getResult():MP_Util.Measurement.GetObject(a,b);return e instanceof MP_Core.QuantityValue?d?e.getValue():e.toString():e instanceof Date?e.format(c):e},GetObject:function(f,g){switch(f.CLASSIFICATION.toUpperCase()){case"QUANTITY_VALUE":return b(f,g);case"STRING_VALUE":return e(f);case"DATE_VALUE":return c(f);case"CODIFIED_VALUES":case"CODE_VALUE":return d(f);case"ENCAPSULATED_VALUE":return a(f)}},SetPrecision:function(a,b){var c=MP_Util.GetNumericFormatter();return c.format(a,"^."+b)},GetModifiedIcon:function(a){return a.isModified()?"<span class='res-modified'>&nbsp;</span>":""},GetNormalcyClass:function(a){return MP_Core.GetNormalcyClass(a)},GetNormalcyResultDisplay:function(a,b){return MP_Core.GetNormalcyResultDisplay(a,b)}}}(),EventListener.prototype.getActionIdx=function(a,b,c,d){if(a&&b){var e=this.events[a][b];if(!e)return-1;for(var f=e.length,g=f-1;g>=0;g--)if(e[g].action==c&&e[g].binding==d)return g}return-1},EventListener.prototype.addListener=function(a,b,c,d){if(this.events[a])if(this.events[a][b]){if(this.getActionIdx(a,b,c,d)==-1){var e=this.events[a][b];e[e.length]={action:c,binding:d}}}else this.events[a][b]=[],this.events[a][b][0]={action:c,binding:d};else this.events[a]=[],this.events[a][b]=[],this.events[a][b][0]={action:c,binding:d}},EventListener.prototype.removeListener=function(a,b,c,d){if(this.events[a]&&this.events[a][b]){var e=this.getActionIdx(a,b,c,d);e>=0&&this.events[a][b].splice(e,1)}},EventListener.prototype.removeAllListeners=function(a,b){if(this.events[a])for(var c in this.events[a])if(this.events[a].hasOwnProperty(c))for(var d=this.events[a][c].length;d--;)this.events[a][c][d].binding==b&&this.events[a][c].splice(d,1)},EventListener.prototype.fireEvent=function(a,b,c,d){if(a||(a=window.event),b&&this.events){var e=this.events[b];if(e){var f=e[c];if(f)for(var g=f.length;g--;){var h=f[g].action;f[g].binding&&(h=h.bind(f[g].binding)),h(a,d)}}}},CERN_EventListener=new EventListener,EventListener.EVENT_CLINICAL_EVENT=1,EventListener.EVENT_ORDER_ACTION=2,EventListener.EVENT_ADD_DOC=3,EventListener.EVENT_PREGNANCY_EVENT=4,EventListener.EVENT_COMP_CUSTOMIZE=5,EventListener.EVENT_COUNT_UPDATE=6,EventListener.EVENT_CRITICAL_UPDATE=7,EventListener.EVENT_ERROR_UPDATE=8,EventListener.EVENT_SCRATCHPAD_COUNT_UPDATE=9,EventListener.EVENT_SCRATCHPAD_REMOVED_ORDER=10,EventListener.EVENT_SCRATCHPAD_REMOVED_ORDER_ACTION=11,EventListener.EVENT_SCRATCHPAD_RECEIVED_ORDER_ACTION=12,EventListener.EVENT_REMOVE_PERSONAL_FAV_FOLDER=13,EventListener.EVENT_QOC_VIEW_VENUE_CHANGED=14,EventListener.EVENT_SCROLL=15,EventListener.EVENT_NAVIGATOR_ERR=16,EventListener.EVENT_CONDITIONS_UPDATE=17,EventListener.HEALTH_PLANS_RETRIEVED=18,EventListener.EVENT_DIAGNOSIS_ADDED=19,EventListener.EVENT_SATISFIER_UPDATE=20,EventListener.EVENT_COMPONENT_MOVED_FROM_CONTEXTUAL_VIEW=21,EventListener.EVENT_COMPONENTS_IN_VIEW=22,EventListener.EVENT_SCRATCHPAD_ORDERS_SIGNED=23,EventListener.EVENT_PRESCRIPTION_REMOVED=24,EventListener.EVENT_ADMT_ORDER_PLACED=25,EventListener.EVENT_SOFT_REFRESH=26,EventListener.EVENT_DYN_DOC_COMP_CKEDITOR_STABLE=27,EventListener.EVENT_CARE_PATHWAYS_UPDATE=28,EventListener.EVENT_SCRATCHPAD_RECEIVED_ORDER=29,EventListener.EVENT_SEND_RATIONALE_TEXT=30,EventListener.CATEGORY_MEAN_CHANGE=31,EventListener.WORKSPACE_ACTIVE_SIZE_CHANGE=32,EventListener.EVENT_SAVE_DOCUMENTATION=33,EventListener.EVENT_DOCUMENTATION_SAVED=34,EventListener.EVENT_DOCUMENTATION_COMPONENTS_IN_VIEW=35,EventListener.EVENT_REFRESH_DYN_DOC_COMP=36,EventListener.EVENT_ORION_EXAMPLE=37,"undefined"==typeof MPage&&(MPage={ActiveComponents:[],Properties:{mine:"mine",personId:0,encounter:0,userId:0,pprCd:0,posCd:0},Event:{registerEvent:function(a,b,c){return null},triggerEvent:function(a){return null},removeEvent:function(a,b){return null}},namespace:function(a){for(var b=a.split("."),c=window;b.length;){var d=b.shift();c=c[d]=c[d]||{}}return c},registerUnloadEvent:function(){Util.addEvent(window,"beforeunload",MPage.fireUnload)},registerResizeEvent:function(){Util.addEvent(window,"resize",MPage.fireResize)},fireResize:function(){var a,b,c=null;for(b=MPage.ActiveComponents.length;b--;)a=MPage.ActiveComponents[b],c=a.getTarget(),a.resize($(c).width(),$(c).height())},fireUnload:function(){var a;for(a=MPage.ActiveComponents.length;a--;)MPage.ActiveComponents[a].unload()},addCustomComp:function(a){MPage.ActiveComponents.push(a)},getCustomComp:function(a){var b,c;for(c=MPage.ActiveComponents.length;c--;)if(b=MPage.ActiveComponents[c],b.getOption("id")===a)return b;return null}}),MPage.Component=function(){this.baseclassSpecVersion=1.1,this.componentMinimumSpecVersion=1},MPage.Component.prototype.init=function(){},MPage.Component.prototype.getMenu=function(){var a=this.getOption("parentComp");return"undefined"!==a?a.getMenu():"undefined"},MPage.Component.prototype.refresh=function(){var a=null,b=null;b=this.getTarget(),b&&$(b).html(""),a=this.getOption("parentComp"),a&&a.reloadCustomComp()},MPage.Component.prototype.generate=function(a,b,c){var d=null,e=null,f=null;if(a||(a=this.getTarget()),f=b?function(a){a.render(),b(a)}:function(a){a.render()},c){e=this.options;for(d in c)c.hasOwnProperty(d)&&(e[d]=c[d]);this.options=e}return this.init(),null!=this.getMenu().getMenuItemArray()&&0!=this.getMenu().getMenuItemArray().length||$("#"+this.getMenu().getAnchorElementId()).addClass("opts-menu-empty").unbind("click"),this.loadData(f),this},MPage.Component.prototype.loadData=function(a){var b,c=this;b=function(b){c.data=b,a(c)},"undefined"===this.cclDataType&&(this.cclDataType="JSON"),this.cclProgram&&this.cclParams&&this.cclParams.length>0?this.loadCCL(this.cclProgram,this.cclParams,b,this.cclDataType):a(c)},MPage.Component.prototype.loadCcl=function(a,b,c,d){this.loadCCL(a,b,c,d)},MPage.Component.prototype.loadCCL=function(a,b,c,d){for(var e=this,f=[],g=0;g<b.length;g++)"string"==typeof b[g]?/^value *\(.*\) *$/.test(b[g])?f.push(b[g]):/^('.*'|".*"|\^.*\^)$/.test(b[g])?f.push(b[g]):f.push("^"+b[g]+"^"):"number"==typeof b[g]&&b[g]%1===0?f.push(b[g]+".0"):f.push(b[g]);var h=this.getOption("parentComp"),i=(new Date).getTime()+""+Math.random(),j=new RTMSTimer(h.getComponentLoadTimerName(),h.getCriterion().category_mean);j.addMetaData("rtms.legacy.metadata.1",h.getComponentNamespace()),j.addMetaData("rtms.legacy.metadata.2",h.getComponentOptionsObjectName()),j.addMetaData("rtms.legacy.metadata.3",i);var k=new RTMSTimer(h.getComponentRenderTimerName(),h.getCriterion().category_mean);k.addMetaData("rtms.legacy.metadata.1",h.getComponentNamespace()),k.addMetaData("rtms.legacy.metadata.2",h.getComponentOptionsObjectName());var l=new ComponentScriptRequest;l.setComponent(h),l.setProgramName(a),l.setParameterArray(f),l.setRawDataIndicator(!0),l.setLoadTimer(j),l.setRenderTimer(k),l.setResponseHandler(function(b){var f=null,g=b.getResponse(),i=null;if(!g)throw logger.logError("Script "+a+" did not return any data"),new Error("Script "+a+" did not return any data");try{switch(d){case"XML":window.ActiveXObject?(i=new ActiveXObject("Microsoft.XMLDOM"),i.async="false",i.loadXML(g)):(f=new DOMParser,i=f.parseFromString(g,"text/xml")),c.call(e,i);break;case"TEXT":c.call(e,g);break;case"JSON":c.call(e,JSON.parse(g));break;default:c.call(e,JSON.parse(g))}}catch(a){throw logger.logJSError(a,h,"mp_custom_component_core.js","loadCCL"),a}}),l.performRequest()},MPage.Component.prototype.render=function(){var a;"string"==typeof this.data&&(a=this.getTarget(),a.innerHTML=this.data)},MPage.Component.prototype.getOption=function(a){return this.options&&"undefined"!=typeof this.options[a]?this.options[a]:"undefined"},MPage.Component.prototype.setOption=function(a,b){this.options||(this.options={}),this.options[a]=b},MPage.Component.prototype.getProperty=function(a){return this.properties&&"undefined"!=typeof this.properties[a]?this.properties[a]:"undefined"},MPage.Component.prototype.setProperty=function(a,b){if(this.properties?this.properties[a]=b:(this.properties={},this.properties[a]=b),"headerTitle|headerSubTitle|headerShowHideState|userPreferences".indexOf(a)>=0){var c=this.getOption("parentComp");switch(a){case"headerTitle":c.updateLabel(b);break;case"headerSubTitle":c.updateSubLabel(b);break;case"headerShowHideState":c.setExpandCollapseState(b);break;case"userPreferences":try{c.setPreferencesObj(b),c.savePreferences(!0)}catch(a){logger.logJSError(a,c,"mp_custom_component_core.js","savePreferences")}}}return this},MPage.Component.prototype.getTarget=function(){var a=null;return this.options&&this.options.target&&(a=this.options.target),a},MPage.Component.prototype.setTarget=function(a){this.options?this.options.target=a:(this.options={},this.options.target=a)},MPage.Component.prototype.resize=function(a,b){return null},MPage.Component.prototype.unload=function(){return null},MPage.Component.prototype.getComponentUid=function(){return this.getOption("id")},MPage.Component.prototype.throwNewError=function(a,b){var c=b||new Error(a);throw logger.logError("Error occurred in a custom component: "+a),logger.logJSError(c,null,"mp_custom_component_core.js","MPage.Component.prototype.throwNewError"),c},SharedConditionResource.prototype=new SharedResource,SharedConditionResource.prototype.constructor=SharedConditionResource,SharedConditionResource.prototype.getCondPrivsRetrieved=function(){return this.m_condPrivsRetrieved},SharedConditionResource.prototype.setCondPrivsRetrieved=function(a){this.m_condPrivsRetrieved=this.booleanTranslation(a)},SharedConditionResource.prototype.getCondPrivsObj=function(){return this.m_condPrivObj},SharedConditionResource.prototype.setViewNKPPriv=function(a){this.m_condPrivObj.canViewNKP=this.booleanTranslation(a)},SharedConditionResource.prototype.setUpdtNKPPriv=function(a){this.m_condPrivObj.canUpdtNKP=this.booleanTranslation(a)},SharedConditionResource.prototype.setModifyChronicPriv=function(a){this.m_condPrivObj.canModifyChronic=this.booleanTranslation(a)},SharedConditionResource.prototype.setModifyThisVisitPriv=function(a){this.m_condPrivObj.canModifyThisVisit=this.booleanTranslation(a)},SharedConditionResource.prototype.setChronicFreeTextPriv=function(a){this.m_condPrivObj.canAddChronicFreeText=this.booleanTranslation(a)},SharedConditionResource.prototype.setNKPNomenclatures=function(a){var b,c,d=[],e=a.length,f=0;if(e)for(f=0;f<e;f++)b=a[f],c=0,b&&(c=b.ID),c&&d.push(parseInt(c,10));this.m_condPrivObj.nkpNomenclatures=d},SharedConditionResource.prototype.getNKPNomenclatures=function(){return this.m_condPrivObj.nkpNomenclatures},SharedConditionResource.prototype.setCernerNKPNomenclature=function(a){this.m_condPrivObj.cernerNKPNomenclature=parseInt(a,10)},SharedConditionResource.prototype.getCernerNKPNomenclature=function(){return this.m_condPrivObj.cernerNKPNomenclature},SharedConditionResource.prototype.setHasChronicProbs=function(a){this.m_condPrivObj.hasChronicProbs=this.booleanTranslation(a)},SharedConditionResource.prototype.getHasChronicProbs=function(){return this.m_condPrivObj.hasChronicProbs},SharedConditionResource.prototype.getMetaObj=function(){return this.m_metaObj},SharedConditionResource.prototype.setMetaObj=function(a){this.m_metaObj=a},SharedConditionResource.prototype.getIsSpecificitiesRetrieved=function(){return this.m_isSpecificitiesRetrieved},SharedConditionResource.prototype.setIsSpecificitiesRetrieved=function(a){this.m_isSpecificitiesRetrieved=this.booleanTranslation(a)},SharedConditionResource.prototype.booleanTranslation=function(a){return a===!0||a===!1?a:"1"===a||a>0},SharedConditionResource.prototype.notifyResourceConsumers=function(a){this.m_eventSource=a,SharedResource.prototype.notifyResourceConsumers.call(this)},SharedConditionResource.prototype.retrieveSharedResourceData=function(){var a=MPageEntity.entities.Condition,b=MPageEntity.getProbDxUtils(),c=this,d=JSON.parse(m_criterionJSON).CRITERION;this.getCondPrivsRetrieved()||(a.meta.userId=d.PRSNL_ID);var e={personId:d.PERSON_ID,encounterId:d.ENCNTRS[0].ENCNTR_ID,pprCd:d.PPR_CD},f=arguments.length&&void 0!==arguments[0]?arguments[0]:null,g=null!==f?f.getNomenclatureValue():null;try{if(this.isBeingRetrieved())return;this.setIsBeingRetrieved(!0),g&&null!==g?(e.nomenclatureId=g,a.listByNomen(e,function(a){a.length&&a.filterDiagnoses(f),f.isHistoricalDiagnosesRetrieved=!0,c.setIsBeingRetrieved(!1)})):(c.getEventListenerObject()&&c.getEventListenerObject().getIsDxAssistantEnabled&&(a.meta.isDxAssistantEnabled=c.getEventListenerObject().getIsDxAssistantEnabled()?1:0),a.list(e,function(e,f){if(c.setResourceData(e),c.setIsAvailable(!0),c.setIsBeingRetrieved(!1),null!==f){var g=JSON.parse(f).RECORD_DATA.META;g&&(c.setMetaObj(g),c.setViewNKPPriv(g.CANVIEWNKP),c.setUpdtNKPPriv(g.CANUPDTNKP),c.setModifyChronicPriv(g.CANMODIFYCHRONIC),c.setModifyThisVisitPriv(g.CANMODIFYTHISVISIT),c.setChronicFreeTextPriv(g.CANADDCHRONICFREETEXT),c.setNKPNomenclatures(g.NKPNOMENS),c.setCernerNKPNomenclature(g.CERNERNKPNOMENID),c.setHasChronicProbs(g.HASCHRONICPROBS),c.setCondPrivsRetrieved(!0),1===a.meta.isDxAssistantEnabled?c.setIsSpecificitiesRetrieved(!0):c.setIsSpecificitiesRetrieved(!1),e.length&&(e[0].getMeta().allEncounter=g.ALLENCOUNTER))}return c.notifyResourceConsumers(),b?(b.RefreshDiagnosisCollection(d.PERSON_ID,d.ENCNTRS[0].ENCNTR_ID),void b.RefreshProblemCollection(d.PERSON_ID)):void logger.logError("Unable to create the PROBDXUTILS COM object")}))}catch(a){this.setIsBeingRetrieved(!1),logger&&logger.logJSError(a,null,"mp_shared_condition_resource.js","retrieveSharedResourceData")}},SharedConditionResource.getSharedResource=function(a,b){b=b||{};var c=MP_Resources.getSharedResource("shared-condition-resource");c||(c=new SharedConditionResource("shared-condition-resource"),c.setEventListenerFlag(EventListener.EVENT_CONDITIONS_UPDATE),c.setEventListenerObject(b),MP_Resources.addSharedResource("shared-condition-resource",c));var d=function(){a(c.getResourceData(),c.getCondPrivsObj(),c.getMetaObj(),c)};return c.isResourceAvailable()?d():c.retrieveSharedResourceData(),CERN_EventListener.addListener(b,EventListener.EVENT_CONDITIONS_UPDATE,d,b),c},SharedConditionResource.prototype.getMatchingCondition=function(a){var b=this.getResourceData(),c=b.filter(function(b){return b.getData()===a.getData()});return c.length?c[0]:null},SharedConditionResource.prototype.removeEmptyCondition=function(a){if(a.isEmpty()){var b=this.getResourceData(),c=this.getMatchingCondition(a);c&&b.splice(b.indexOf(c),1)}},SharedConditionResource.prototype.addCondition=function(a){var b=this.getResourceData(),c=MPageEntity.entities.Condition,d=new c;return d.setData(a.getData()),d.setResponseMeta(a.getResponseMeta()),b.push(d),d},SharedConditionResource.prototype.updateCondition=function(a){var b=this.getMatchingCondition(a);b&&b.clearEntityCache()},BaseSharedResource.prototype.notifyResourceConsumers=function(a,b){try{var c=this.getEventListenerFlag(),d=this.getEventListenerObject(),e=this.getResourceData();if(CERN_EventListener.fireEvent(null,d,c,e),logger.logMessage("Firing Shared Resource Event<br />Resource Name: "+this.getName()+"<br />Resource Data: "+JSON.stringify(e)+"<br />"),a)CERN_EventListener.fireEvent(null,new MPageComponent,EventListener.EVENT_SCRATCHPAD_RECEIVED_ORDER_ACTION,b);else if(e.scratchpadObjArr&&e.scratchpadObjArr.length>0){var f=e.scratchpadObjArr.length,g=e.scratchpadObjArr[f-1];"OrderProfile"===g.addedFrom&&b&&CERN_EventListener.fireEvent(null,new MPageComponent,EventListener.EVENT_SCRATCHPAD_RECEIVED_ORDER_ACTION,g)}return!0}catch(a){return logger.logJSError(a,null,"mp_shared_resources.js","notifyResourceConsumers"),!1}},BaseSharedResource.prototype.complete=function(a){var b=this;return new Promise(function(c,d){try{b.setResourceData(a),b.setIsAvailable(!0),b.setIsBeingRetrieved(!1),b.notifyResourceConsumers(),c()}catch(a){d(Error("Error received: "+a.message))}})},SharedResource.prototype=new BaseSharedResource,SharedResource.prototype.constructor=BaseSharedResource,SharedResource.prototype.retrieveSharedResourceData=function(){var a=this;if(!this.isBeingRetrieved()){this.setIsBeingRetrieved(!0);var b=new ScriptRequest;b.setArtifactInfo({artifactId:"mpage-shared-resource",functionName:"retrieveSharedResourceData"}),b.setName("Shared Resources Data Retrieval"),b.setProgramName(this.getCclProgram()),b.setParameterArray(this.getCclParams()),b.setRawDataIndicator(!0),b.setResponseHandler(function(b){a.setResourceData(b.getResponse()),a.setIsAvailable(!0),a.setIsBeingRetrieved(!1),a.notifyResourceConsumers()}),b.performRequest()}},RestfulSharedResource.prototype=new BaseSharedResource,RestfulSharedResource.prototype.constructor=BaseSharedResource,RestfulSharedResource.prototype.retrieveSharedResourceData=function(){var a=this;this.isBeingRetrieved()||(this.setIsBeingRetrieved(!0),this.getRestfulSharedResource().then(function(b){return a.complete(b)}))},RestfulSharedResource.prototype.getRestfulSharedResource=function(){var a=this.getOptions();return new Promise(function(b,c){var d=new XMLHttpRequest;d.open(a.method||"GET",a.url,!0);var e=a.headers||{};Object.keys(e).forEach(function(b){d.setRequestHeader(b,a.headers[b])}),void 0===e.Accept&&d.setRequestHeader("Accept","application/json"),void 0!==a.withCredentials&&(d.withCredentials=a.withCredentials),d.onreadystatechange=function(a){4===d.readyState&&([200,304].indexOf(d.status)===-1?c(new Error("Server responded with a status of "+d.status)):b(a.target.responseText))},d.onerror=function(){c(Error("Network Error"))},d.send()})},LocalSharedResource.prototype=new BaseSharedResource,LocalSharedResource.prototype.constructor=BaseSharedResource,LocalSharedResource.prototype.retrieveSharedResourceData=function(){var a=this;if(!this.isBeingRetrieved()){this.setIsBeingRetrieved(!0);var b=this.getOptions();b.function.call(this,b).then(function(b){return a.complete(b)})}};var MP_Resources=function(){var a={};return{getSharedResource:function(b){return a[b]?a[b]:null},setSharedResourceData:function(a,b){var c=null;return"undefined"==typeof b?(logger.logMessage("SharedResource update data is undefined. '"+a+"' will not be updated."),!1):(c=MP_Resources.getSharedResource(a),c?c.isBeingRetrieved()?(logger.logMessage("SharedResource '"+a+"' is currently being retrieved and cannot be updated."),!1):(c.setResourceData(b),!0):(logger.logMessage("SharedResource '"+a+"' does not currently exist"),!1))},addSharedResource:function(b,c){return a[b]?(logger.logError("Attempting to overwrite an existing shared resource: "+b),!1):(a[b]=c,!0)},createSharedResource:function(b,c,d,e){if(!b)return logger.logError("Cannot create a SharedResource object without a name."),null;var f=null;return e.hasOwnProperty("url")?f=new RestfulSharedResource(b):e.hasOwnProperty("function")?f=new LocalSharedResource(b):(f=new SharedResource(b),f.setCclProgram(e.script),f.setCclParams(e.params)),f.setOptions(e),f.setEventListenerObject(c),f.setEventListenerFlag(d),a[b]=f,f},createSharedResourceObj:function(a,b,c,d,e){return this.createSharedResource(a,b,e,{script:c,params:d})},sharedResource:function(a,b,c,d){var e=MP_Resources.getSharedResource(a),f=a+"Available";CERN_EventListener.addListener(b,f,function(a,b){c(a,b)},b),e?(e.setEventListenerFlag(f),e.isResourceAvailable()?c(null,e.getResourceData()):e.retrieveSharedResourceData()):(e=MP_Resources.createSharedResource(a,b,f,d),e&&e.retrieveSharedResourceData())}}}(),MP_EventAudit=function(){this.auditevents={},this.auditevents.EVENTS={},this.auditevents.EVENTS.EVENT=[],this.m_iAuditMode=0,this.m_sAuditEventName="",this.m_sAuditEventType="",this.m_sAuditParticipantType="",this.m_sAuditParticipantRoleCd="",this.m_sAuditParticipantIDType="",this.m_sAuditDataLifeCycle="",this.m_dAuditParticipantID=0,this.m_sAuditParticipantName="",this.m_iAuditOutcomeInd=4};MP_EventAudit.prototype.setAuditMode=function(a){if("number"!=typeof a||a<0||a>4)throw new Error("EventAudit: Invalid Audit Mode");this.m_iAuditMode=a},MP_EventAudit.prototype.getAuditMode=function(){return this.m_iAuditMode},MP_EventAudit.prototype.setAuditEventName=function(a){this.m_sAuditEventName=a},MP_EventAudit.prototype.getAuditEventName=function(){return this.m_sAuditEventName},MP_EventAudit.prototype.setAuditEventType=function(a){this.m_sAuditEventType=a},MP_EventAudit.prototype.getAuditEventType=function(){return this.m_sAuditEventType},MP_EventAudit.prototype.setAuditParticipantType=function(a){this.m_sAuditParticipantType=a},MP_EventAudit.prototype.getAuditParticipantType=function(){return this.m_sAuditParticipantType},MP_EventAudit.prototype.setAuditParticipantRoleCd=function(a){this.m_sAuditParticipantRoleCd=a},MP_EventAudit.prototype.getAuditParticipantRoleCd=function(){return this.m_sAuditParticipantRoleCd},MP_EventAudit.prototype.setAuditParticipantIDType=function(a){this.m_sAuditParticipantIDType=a},MP_EventAudit.prototype.getAuditParticipantIDType=function(){return this.m_sAuditParticipantIDType},MP_EventAudit.prototype.setAuditDataLifeCycle=function(a){this.m_sAuditDataLifeCycle=a},MP_EventAudit.prototype.getAuditDataLifeCycle=function(){return this.m_sAuditDataLifeCycle},MP_EventAudit.prototype.setAuditParticipantID=function(a){this.m_dAuditParticipantID=a},MP_EventAudit.prototype.getAuditParticipantID=function(){return this.m_dAuditParticipantID},MP_EventAudit.prototype.setAuditParticipantName=function(a){this.m_sAuditParticipantName=a;var b=a.substring(7,8);this.m_iAuditOutcomeInd=parseInt(b,10)},MP_EventAudit.prototype.getAuditParticipantName=function(){return this.m_sAuditParticipantName},MP_EventAudit.prototype.setAuditOutcomeInd=function(a){this.m_iAuditOutcomeInd=a},MP_EventAudit.prototype.getAuditOutcomeInd=function(){return this.m_iAuditOutcomeInd},MP_EventAudit.prototype.toJSON=function(){return JSON.stringify(this.auditevents)},MP_EventAudit.prototype.addAuditEvent=function(){var a={};a.AUDIT_MODE=this.m_iAuditMode||0,a.EVENT_NAME=this.m_sAuditEventName||"",a.EVENT_TYPE=this.m_sAuditEventType||"",a.PARTICIPANT_TYPE=this.m_sAuditParticipantType||"",a.PARTICIPANT_ROLE_CD=this.m_sAuditParticipantRoleCd||"",a.PARTICIPANT_ID_TYPE=this.m_sAuditParticipantIDType||"",a.DATA_LIFE_CYCLE=this.m_sAuditDataLifeCycle||"",a.PARTICIPANT_ID=this.m_dAuditParticipantID||0,a.PARTICIPANT_NAME=this.m_sAuditParticipantName||"",a.OUTCOME_IND=this.m_iAuditOutcomeInd,this.auditevents.EVENTS.EVENT.push(a)},MP_EventAudit.prototype.getAuditEvents=function(){var a=this.toJSON();return a},MP_EventAudit.prototype.resetAuditEvents=function(){this.auditevents.EVENTS.EVENT=[]},MP_EventAudit.prototype.submit=function(){try{if(this.auditevents.EVENTS.EVENT&&0===this.auditevents.EVENTS.EVENT.length)throw logger.logJSError("The Audit Events array submitted for processing is empty."),new Error("EVENTAUDIT: Audit Events array is empty.");var a=this.toJSON(),b=new ScriptRequest;b.setArtifactInfo({artifactId:"mpage-event-audit",functionName:"submit"});var c="mp_submit_audit_events",d=["^MINE^","^"+a+"^"];b.setProgramName(c),b.setParameterArray(d),b.setResponseHandler(function(a){if("S"!==a.getStatus())throw logger.logJSError("An error occurred during the submission of events."),new Error("EVENTAUDIT: Error submitting events.");logger.logDebug("All events have been successfully submitted.")}),b.performRequest(),this.resetAuditEvents()}catch(a){logger.logJSError("Error encountered trying to submit audit events: <br />Message: "+a.description+"<br />Name: "+a.name+"<br />Number: "+a.number)}};var TaggingHandler=function(){if(this.m_userId=0,this.m_encounterId=0,this.m_patientId=0,this.m_pprCode=0,this.m_taggingAvailable=!1,this.m_taggedResultsContent="",this.m_taggingMenuEleId="",this.m_userTz=0,this.m_draggingAvailable=!1,this.m_draggingCallback=$.Callbacks(),this.m_contentTypes=[],this.m_contentTypesCallback=$.Callbacks(),window.OrionWebTagging){var a=this.checkWebTaggingEnabled();a.then(this.resolveFeatureToggle.bind(this)).catch(this.rejectFeatureToggle.bind(this))}else this.m_taggingDataAccess=new TaggingDao};TaggingHandler.prototype.checkWebTaggingEnabled=function(){var a="urn:cerner:millennium:mpages:enable-web-tagging";try{return MP_FEATURE_TOGGLE.getToggleStatus(a)}catch(a){return Promise.reject(a)}},TaggingHandler.prototype.resolveFeatureToggle=function(a){a.isEnabled?(this.m_taggingDataAccess=new OrionTaggingDao,MP_Util.LogInfo("Orion Tagging - enabled: "+a.isEnabled)):this.m_taggingDataAccess=new TaggingDao},TaggingHandler.prototype.rejectFeatureToggle=function(a){this.m_taggingDataAccess=new TaggingDao,MP_Util.LogJSError(a,null,"TaggingHandler.js","rejectFeatureToggle")},TaggingHandler.prototype.isTaggingAvailable=function(){return this.m_taggingAvailable},TaggingHandler.prototype.draggingAvailableCallback=function(a){this.m_draggingCallback.fired()?a(this.m_draggingAvailable):this.m_draggingCallback.add(a)},TaggingHandler.prototype.taggingContentAvailableCallback=function(a,b){var c=this;this.m_contentTypesCallback.fired()?b(c.isContentTypeAvailable(a)):this.m_contentTypesCallback.add(function(){b(c.isContentTypeAvailable(a))})},TaggingHandler.prototype.isContentTypeAvailable=function(a){return this.m_contentTypes.indexOf(a)!==-1},TaggingHandler.prototype.getEncounterId=function(){return this.m_encounterId},TaggingHandler.prototype.getPatientId=function(){return this.m_patientId},TaggingHandler.prototype.getPPRCode=function(){return this.m_pprCode},TaggingHandler.prototype.getTaggedResultsContent=function(){return this.m_taggedResultsContent},TaggingHandler.prototype.getTaggingMenuElementId=function(){return this.m_taggingMenuEleId},TaggingHandler.prototype.getUserId=function(){return this.m_userId},TaggingHandler.prototype.getUserTz=function(){return this.m_userTz},TaggingHandler.prototype.setEncounterId=function(a){if("number"!=typeof a)throw new Error("Called setEncounterId on TaggingHandler with non number type for encounterId parameter");return this.m_encounterId=a,this},TaggingHandler.prototype.setPatientId=function(a){if("number"!=typeof a)throw new Error("Called setPatientId on TaggingHandler with non number type for patientId parameter");return this.m_patientId=a,this},TaggingHandler.prototype.setPPRCode=function(a){if("number"!=typeof a)throw new Error("Called setPPRCode on TaggingHandler with non number type for pprCode parameter");return this.m_pprCode=a,this},TaggingHandler.prototype.setTaggedResultsContent=function(a){if("string"!=typeof a)throw new Error("Called setTaggedResultsContent with non string type for taggedContents parameter");return this.m_taggedResultsContent=a,this},TaggingHandler.prototype.setTaggingMenuElementId=function(a){return"string"==typeof a&&(this.m_taggingMenuEleId=a),this},TaggingHandler.prototype.setTaggingAvailable=function(a){return"boolean"==typeof a&&(this.m_taggingAvailable=a),this},TaggingHandler.prototype.setUserId=function(a){return"number"==typeof a&&(this.m_userId=a),this},TaggingHandler.prototype.setUserTz=function(a){return"number"==typeof a&&(this.m_userTz=a),this},TaggingHandler.prototype.initTaggingUtility=function(a,b){var c=this,d=i18n.discernabu.mpageResultTagging,e=38;this.setUserId(b.provider_id),this.setPatientId(b.person_id),this.setEncounterId(b.encntr_id),this.setPPRCode(b.ppr_cd),this.setUserTz(b.client_tz),this.setTaggingAvailable(!0),this.setTaggingMenuElementId(a);var f=$("#"+a);f.length&&$(f).addClass("tagging-util-icon").attr({title:d.TAGGED_ITEMS,"aria-label":d.TAGGED_ITEMS});var g=f;if(g.length){var h=new UtilitiesMenu("resultTagging");h.setLabel(d.TAGGED_ITEMS+"<span id='taggingRemoveAll' class='tagging-remove-all'>"+d.REMOVE_ALL+"</span>"),h.setWidth(400),h.setAnchorElementId($(g).attr("id")),h.setAnchorActiveClass("vwp-util-active"),h.setAnchorConnectionCorner(["bottom","right"]),h.setContentConnectionCorner(["top","right"]),h.setUtilitiesContentCreationFunction(function(){return c.queryTaggedResults(),"<div class='tagging-loading'>&nbsp;</div>"}),MP_MenuManager.addMenuObject(h),CERN_EventListener.addListener(document.body,"tagMenuLoaded",function(a,b){"undefined"!=typeof DDClipDragDrop&&DDClipDragDrop.initMPageTagClipboardDragDrop(b.draggingAvailable),b.draggingAvailable&&"undefined"!=typeof DDClipDragDrop&&DDClipDragDrop.initDragBehavior(!0)},this),CERN_EventListener.addListener(document.body,"lastItemDropped",function(){MP_MenuManager.closeMenuStack()},this),$(g).click(function(){h.isVisible()?MP_MenuManager.closeMenuStack():(h.setMaxHeight($("#vwpBody").height()-e),MP_MenuManager.showMenu("resultTagging"))})}setTimeout(function(){c.queryTaggedResults()},3e3)},TaggingHandler.prototype.deleteTaggedResults=function(a){var b=this;try{return a.DELETE_TAG.TAG_LIST?this.m_taggingDataAccess.deleteTaggedResults(this.getUserId(),this.getPatientId(),this.getEncounterId(),this.getPPRCode(),a).then(function(a){return b.deleteTaggedResultsHandler(),a},function(a){throw b.handleError(i18n.discernabu.mpageResultTagging.REMOVE_ERROR_MESSAGE,i18n.discernabu.mpageResultTagging.REMOVE_ERROR_TITLE),a}):Promise.resolve({status:"S"})}catch(a){return MP_Util.LogJSError(a,null,"TaggingHandler.js","deleteTaggedResults"),Promise.reject(Error("Failed to call delete tagged results"))}},TaggingHandler.prototype.retrieveDragResults=function(a){try{return this.m_taggingDataAccess.retrieveDragResults(this.getUserId(),this.getPatientId(),this.getEncounterId(),this.getPPRCode(),this.getUserTz(),a)}catch(a){return MP_Util.LogJSError(a,null,"TaggingHandler.js","retrieveDragResults"),Promise.reject(a)}},TaggingHandler.prototype.saveTaggedResults=function(a){var b=this;try{return this.m_taggingDataAccess.saveTaggedResults(this.getUserId(),this.getEncounterId(),a).then(function(a){return b.saveTaggedResultsHandler(a),a},function(a){throw b.handleError(i18n.discernabu.mpageResultTagging.SAVE_ERROR_MESSAGE,i18n.discernabu.mpageResultTagging.SAVE_ERROR_TITLE),a})}catch(a){return MP_Util.LogJSError(a,null,"TaggingHandler.js","saveTaggedResults"),Promise.reject(a)}},TaggingHandler.prototype.saveTaggedResult=function(a){return this.saveTaggedResults([a]);
},TaggingHandler.prototype.queryTaggedResults=function(){var a=this;try{var b=this.m_taggingDataAccess.queryTaggedResults(this.getUserId(),this.getPatientId(),this.getEncounterId(),this.getPPRCode()).then(function(b){return a.queryTaggedResultsHandler(b),b},function(b){throw a.handleError(i18n.discernabu.mpageResultTagging.QUERY_ERROR_MESSAGE,i18n.discernabu.mpageResultTagging.QUERY_ERROR_TITLE),b});return b}catch(a){return MP_Util.LogJSError(a,null,"TaggingHandler.js","queryTaggedResults"),Promise.reject(a)}},TaggingHandler.prototype.queryTaggedResultsHandler=function(a){this.updateTaggingIcon(!!a.xhtml),this.taggingCallback(a.xhtml),this.m_draggingCallback.fired()||(this.m_draggingAvailable=a.dragVersion>0,this.m_draggingCallback.fire(this.m_draggingAvailable)),this.m_contentTypesCallback.fired()||(a.contentTypes&&(this.m_contentTypes=a.contentTypes),this.m_contentTypesCallback.fire(this.m_contentTypes))},TaggingHandler.prototype.saveTaggedResultsHandler=function(a){this.updateTaggingIcon(a.tags&&a.tags.length>0),this.taggingCallback(),MP_MenuManager.closeMenuStack()},TaggingHandler.prototype.deleteTaggedResultsHandler=function(){var a=MP_MenuManager.getMenuObject("resultTagging"),b=$("#"+a.getContentElementId()+" .utilities-menu-custom-content"),c=b.find(".ddemrcontentitem").not(".ddemrcontentitem.removed");if(this.updateTaggingIcon(c&&c.length>0),c&&0===c.length){var d="<p class='tagging-no-tags'>"+i18n.discernabu.mpageResultTagging.NO_TAGGED_ITEMS_FOUND+"</p>";this.setTaggedResultsContent(d),a&&a.isVisible()&&($("#"+a.getContentElementId()+" .utilities-menu-custom-content").html(d),CERN_EventListener.fireEvent(null,document.body,"tagMenuLoaded",{draggingAvailable:this.m_draggingAvailable}))}},TaggingHandler.prototype.updateTaggingIcon=function(a){var b=$("#"+this.getTaggingMenuElementId());b.length&&(a?$(b).addClass("tagging-util-icon-active"):$(b).removeClass("tagging-util-icon-active"))},TaggingHandler.prototype.handleError=function(a,b){this.updateTaggingIcon(!1);var c=MP_MenuManager.getMenuObject("resultTagging");if(c&&c.isVisible()){$("#menuContentresultTagging").find("#taggingRemoveAll").css("display","");var d="<p class='tagging-no-tags'>"+i18n.discernabu.mpageResultTagging.NO_TAGGED_ITEMS_FOUND+"</p>";this.setTaggedResultsContent(d),$("#"+c.getContentElementId()+" .utilities-menu-custom-content").html(d),CERN_EventListener.fireEvent(null,document.body,"tagMenuLoaded",{draggingAvailable:this.m_draggingAvailable})}var e=MP_ModalDialog.retrieveModalDialogObject("resultTaggingErrorModal");if(!e){e=new ModalDialog("resultTaggingErrorModal");var f=new ModalButton("closeButton");f.setText(i18n.discernabu.CONFIRM_OK).setCloseOnClick(!0),e.addFooterButton(f),MP_ModalDialog.addModalDialogObject(e)}e=MP_Util.generateModalDialogBody("resultTaggingErrorModal","error",a,i18n.discernabu.mpageResultTagging.ERROR_ACTION),e.setHeaderTitle(b),MP_ModalDialog.updateModalDialogObject(e),MP_ModalDialog.showModalDialog("resultTaggingErrorModal")},TaggingHandler.prototype.taggingCallback=function(a){var b=this,c=i18n.discernabu.mpageResultTagging,d=MP_MenuManager.getMenuObject("resultTagging"),e="",f=".ddcategory",g=".ddemrcontentitem",h=".tagging-delete";if(d&&d.isVisible()){var i=$("#menuContentresultTagging");if(i.unbind(".resultTagging"),"undefined"==typeof DDClipDragDrop){var j=".ddcategorytitle",k=TemplateBuilder.buildTemplate('<div class="tagging-delete" dd:settype="${setType}" dd:contenttype="${contentType}" dd:entityid="${entityId}"></div>');i.on("mouseenter.resultTagging",g,function(a){var b=$(a.currentTarget);b.append(k.render({setType:"SINGLE_RESULT",contentType:b.attr("dd:contenttype"),entityId:b.attr("dd:entityid")})),a.stopPropagation()}),i.on("mouseleave.resultTagging",g,function(a){var b=$(a.currentTarget);b.find(h).remove(),a.stopPropagation()}),i.on("mouseenter.resultTagging",j,function(a){var b=$(a.currentTarget);b.append(k.render({setType:"RESULT_GROUP",contentType:"",entityId:""})),a.stopPropagation()}),i.on("mouseleave.resultTagging",j,function(a){$(a.currentTarget).find(h).remove(),a.stopPropagation()})}i.on("click.resultTagging",h,function(a){var c=$(a.currentTarget),d=c.attr("dd:settype"),e={DELETE_TAG:{TAG_LIST:[]}};"SINGLE_RESULT"===d?e.DELETE_TAG.TAG_LIST.push({contentType:c.attr("dd:contenttype"),entityId:c.attr("dd:entityid")+".0"}):"RESULT_GROUP"===d&&c.parents(f).find(g).each(function(a,b){b=$(b),e.DELETE_TAG.TAG_LIST.push({contentType:b.attr("dd:contenttype"),entityId:b.attr("dd:entityid")+".0"})}),b.deleteTaggedResults(e);var h=c.parents(f).find(g).not(".ddemrcontentitem.removed"),i=$(a.currentTarget).closest(".ddcategory,.ddemrcontentitem");h&&1===h.length?c.parents(f).remove():i.remove(),a.stopPropagation()});var l=$("#"+d.getContentElementId()+" .utilities-menu-custom-content");$("#menuContentresultTagging").find("#taggingRemoveAll").css("display","inline").click(function(){var a=l.find(".tagging-remove-dialog");a.css("display","block"),a.find("#taggingRemoveAllCancel").click(function(){a.css("display","none")}),a.find("#taggingRemoveAllRemove").click(function(){var a={DELETE_TAG:{TAG_LIST:[]}};l.find(".ddemrcontentitem").each(function(b,c){c=$(c),a.DELETE_TAG.TAG_LIST.push({contentType:c.attr("dd:contenttype"),entityId:c.attr("dd:entityid")+".0"})}),b.deleteTaggedResults(a),MP_MenuManager.closeMenuStack()})})}a?(e+="<div class='tagging-remove-dialog'><div><span class='tagging-remove-warn'>&nbsp;</span><span>"+c.REMOVE_ALL_TAGS+"</span></div><div><input id='taggingRemoveAllCancel' class='tagging-remove-button' type='button' value='"+i18n.CANCEL+"' /><input id='taggingRemoveAllRemove' class='tagging-remove-button' type='button' value='"+c.REMOVE+"' /></div></div>",e+=a):e="<p class='tagging-no-tags'>"+i18n.discernabu.mpageResultTagging.NO_TAGGED_ITEMS_FOUND+"</p>",this.setTaggedResultsContent(e),d&&d.isVisible()&&($("#"+d.getContentElementId()+" .utilities-menu-custom-content").html(e),CERN_EventListener.fireEvent(null,document.body,"tagMenuLoaded",{draggingAvailable:this.m_draggingAvailable}))};var MP_TaggingHandler=new TaggingHandler,TaggedResult=function(){this.m_emrType="",this.m_tagEntityId=0,this.m_tagDateTime="",this.m_categorizationArray=null,this.m_categorizationXML=""};TaggedResult.prototype.getCategorizationArray=function(){return this.m_categorizationArray||(this.m_categorizationArray=[]),this.m_categorizationArray},TaggedResult.prototype.getCategorizationXML=function(){return this.m_categorizationXML},TaggedResult.prototype.getEMRType=function(){return this.m_emrType},TaggedResult.prototype.getTagDateTime=function(){return this.m_tagDateTime},TaggedResult.prototype.getTagEntityId=function(){return this.m_tagEntityId},TaggedResult.prototype.setCategorizationArray=function(a){if(a&&a.length){this.m_categorizationArray=a.slice(0);for(var b=a.length,c=b-1,d="{0}",e=0;e<b;e++)d=e<c?d.replace("{0}","<category display='"+a[e]+"'>{0}</category>"):d.replace("{0}","<category display='"+a[e]+"' />");this.m_categorizationXML="<?xml version='1.0' encoding='UTF-8'?><category-data xmlns:xsi='http:// www.w3.org/2001/XMLSchema-instance' xsi:noNamespaceSchemaLocation='categorization.xsd'>"+d+"</category-data>"}return this},TaggedResult.prototype.setEMRType=function(a){return"string"==typeof a&&(this.m_emrType=a),this},TaggedResult.prototype.setTagDateTime=function(a){function b(a){return a<10?"0"+a:a}if("string"==typeof a)this.m_tagDateTime=a;else{if(!Date.prototype.isPrototypeOf(a))throw new Error("Called setTagDateTime with non string or Date type for tagDateTime parameter");var c=b(a.getMonth()+1),d=b(a.getDate()),e=b(a.getHours()),f=b(a.getMinutes()),g=b(a.getSeconds());this.m_tagDateTime=a.getFullYear()+"-"+c+"-"+d+"T"+e+":"+f+":"+g+"Z"}return this},TaggedResult.prototype.setTagEntityId=function(a){return"number"==typeof a&&(this.m_tagEntityId=a),this},TaggedResult.prototype.validateRequiredFields=function(a){var b=function(b,c){b||a(c)};b(this.m_emrType,"EMR type"),b(this.m_tagDateTime,"date time"),b(this.m_categorizationXML,"categorization XML"),"LABS"!==this.m_emrType&&"LABS_V2"!==this.m_emrType&&"TAGTEXT"!==this.m_emrType||b(this.m_tagEntityId,"entity id")},TaggedImage.prototype=new TaggedResult,TaggedImage.prototype.constructor=TaggedResult,TaggedImage.prototype.getFormatCd=function(){return this.m_formatCd},TaggedImage.prototype.setFormatCd=function(a){return"string"==typeof a&&(this.m_formatCd=a),this},TaggedImage.prototype.getBlobHandle=function(){return this.m_blobHandle},TaggedImage.prototype.setBlobHandle=function(a){return"string"==typeof a&&(this.m_blobHandle=a),this},TaggedImage.prototype.getStorageCd=function(){return this.m_storageCd},TaggedImage.prototype.setStorageCd=function(a){return"string"==typeof a&&(this.m_storageCd=a),this},TaggedImage.prototype.validateRequiredFields=function(a){var b=function(b,c){b||a(c)};TaggedResult.prototype.validateRequiredFields.call(this,a),b(this.m_blobHandle,"blob handle"),b(this.m_formatCd,"format code"),b(this.m_storageCd,"storage code")},TaggedText.prototype=new TaggedResult,TaggedText.prototype.constructor=TaggedResult,TaggedText.prototype.getFormatCd=function(){return this.m_formatCd},TaggedText.prototype.setFormatCd=function(a){return"string"==typeof a&&(this.m_formatCd=a),this},TaggedText.prototype.getTagText=function(){return this.m_tagText},TaggedText.prototype.setTagText=function(a){return"string"==typeof a&&(this.m_tagText=a),this},TaggedText.prototype.getTagTextBlob=function(){return this.m_tagTextBlob},TaggedText.prototype.setTagTextBlob=function(a){return"string"==typeof a&&(this.m_tagTextBlob=a),this},TaggedText.prototype.validateRequiredFields=function(a){var b=function(b,c){b||a(c)};TaggedResult.prototype.validateRequiredFields.call(this,a),b(this.m_tagText,"tag text"),b(this.m_formatCd,"format code")},TaggingDao.prototype.queryTaggedResults=function(a,b,c,d){var e=function(a){var b=a.getResponse(),c=a.getStatus(),d=[];if(b&&b.XHTML_TEXT){var e=$(b.XHTML_TEXT);d=$.map(e.find(".ddemrcontentitem"),function(a){return{entityId:parseInt($(a).attr("dd:entityid"),10),contentType:$(a).attr("dd:contenttype"),tagTextEntityId:parseInt($(a).attr("dd:tagtextentityid"),10),blobHandle:$(a).attr("dd:blobhandle")}})}var f={status:c,xhtml:b.XHTML_TEXT,dragVersion:b.DRAG_SUPPORT_VERSION,tags:d};if(b.CONTENT_TYPES)try{var g=JSON.parse(b.CONTENT_TYPES);g.contentImported&&g.contentImported instanceof Array&&(f.contentTypes=g.contentImported)}catch(a){MP_Util.LogJSError(a,null,"TaggingDao.js","handleQueryTaggedResults")}return f};if(!a)throw new Error("Cannot retrieve tagged results without the User Id populated");if(!b)throw new Error("Cannot retrieve tagged results without the patient id populated");if(!c)throw new Error("Cannot retrieve tagged results without the Encounter Id populated");if(!d)throw new Error("Cannot retrieve tagged results without the PPR Code populated");var f=["^MINE^",a+".0",b+".0",c+".0",d+".0"],g=new MP_Core.ScriptRequest;return g.setArtifactInfo({artifactId:"mpage-result-tagging",functionName:"queryTaggedResults"}),g.setName("queryTaggedResult"),g.setProgramName("MP_QUERY_TAGGED_RESULTS"),g.setParameters(f),new Promise(function(a,b){MP_Core.XMLCCLRequestCallBack(null,g,function(c){var d=e(c);"F"!==d.status?a(d):b(Error("QueryTaggedResults failed"))})})},TaggingDao.prototype.saveTaggedResults=function(a,b,c){var d=this;return new Promise(function(e,f){var g=function(a,b){var c=a.getResponse(),d=a.getStatus(),e=[];return"S"===d&&c.TAGGED_ITEMS&&(e=$.map(b,function(a,b){var d={contentType:a.getEMRType(),entityId:c.TAGGED_ITEMS[b].TAG_ENTITY_ID};return"IMAGES"===a.getEMRType()&&(d.blobHandle=a.getBlobHandle()),d})),{tags:e,status:d}};if(!Array.prototype.isPrototypeOf(c))return void f(new Error("Called saveTaggedResults on TaggingHandler with non Array type for taggedResults parameter"));if(!c.length)return void e({status:"S",tags:[]});if(!a)return void f(new Error("Cannot tag a result without the User Id populated"));if(!b)return void f(new Error("Cannot tag a result without the Encounter Id populated"));var h={SAVE_TAGS:{TAG_LIST:[]}};d.pushTaggedResult(h.SAVE_TAGS.TAG_LIST,c,!0);var i=["^MINE^",a+".0",b+".0",CERN_Platform.encoding.encodeAndConvertStringToLengthFormat(JSON.stringify(h))],j=new ScriptRequest;c.length>0&&"function"==typeof c[0].getTagTextBlob&&""!==c[0].getTagTextBlob()&&j.setDataBlob(c[0].getTagTextBlob()),j.setArtifactInfo({artifactId:"mpage-result-tagging",functionName:"saveTaggedResults"}).setName("saveTaggedResult").setProgramName("MP_SAVE_TAGGED_RESULTS").setParameterArray(i).setResponseHandler(function(a){var b=g(a,c);"F"!==b.status?e(b):f(Error("saveTaggedResults failed"))}).performRequest()})},TaggingDao.prototype.deleteTaggedResults=function(a,b,c,d,e){var f=function(a){var b=a.getResponse(),c=a.getStatus();return{status:c,xhtml:b.XHTML_TEXT}};if(!a)throw new Error("Cannot delete a tag result without the User Id populated");if(!b)throw new Error("Cannot retrieve tagged results without the patient id populated");if(!c)throw new Error("Cannot delete a tag result without the Encounter Id populated");if(!d)throw new Error("Cannot delete a tagged result without the user PPR code populated");var g=["^MINE^",a+".0",b+".0",c+".0",d+".0","~"+JSON.stringify(e)+"~"],h=new MP_Core.ScriptRequest;return h.setArtifactInfo({artifactId:"mpage-result-tagging",functionName:"deleteTaggedResults"}),h.setName("removeTaggedResult"),h.setProgramName("MP_DELETE_TAGGED_RESULTS"),h.setParameters(g),new Promise(function(a,b){MP_Core.XMLCCLRequestCallBack(null,h,function(c){var d=f(c);"F"!==d.status?a(d):b(Error("deleteTaggedResults failed"))})})},TaggingDao.prototype.pushTaggedResult=function(a,b,c){function d(a,b){throw new Error(a+" - "+b)}for(var e=!1,f=0;f<b.length;f++){var g=b[f];g.validateRequiredFields(function(a){d("Cannot tag a result without required field",a)});var h="",i={EMR_TYPE:g.getEMRType(),EMR_TYPE_CD:g.getEMRType(),TAG_ENTITY_ID:g.getTagEntityId()+".0",TAG_DT_TM:g.getTagDateTime(),CATEGORIZATION_XML:g.getCategorizationXML(),FORMAT_CD:"",STORAGE_CD:"",BLOB_HANDLE:"",TAG_TEXT:"",TEXT_ENCODING:"UTF-8"};if("TAGTEXT"===g.getEMRType())if(i.FORMAT_CD=g.getFormatCd(),h=g.getTagText(),c){if(e)throw new Error("Saving multiple text tags is not supported");e=!0}else i.TAG_TEXT_BLOB='<?xml version="1.0" encoding="UTF-8"?><html><body>'+h+"</body></html>",i.TEXT_ENCODING="UTF-8";else"IMAGES"===g.getEMRType()&&(i.BLOB_HANDLE=g.getBlobHandle(),i.FORMAT_CD=g.getFormatCd(),i.STORAGE_CD=g.getStorageCd());a.push(i)}},TaggingDao.prototype.retrieveDragResults=function(a,b,c,d,e,f){var g=[];this.pushTaggedResult(g,f);var h=CERN_Platform.getWrappedDiscernObject("DOCUTILSHELPER");h.isAvailable().then(function(f){if(f){var i=DDCOMMON.valueifyObject({user_id:a,patient_id:b,encntr_id:c,ppr_cd:d,user_tz:e,tags:g}),j={tags:{tag_text_blob:{charset:"en_US.UTF-8",content_type:"text/plain"},format_cd:{content_type:"text/cdf-meaning",codeset:23},storage_cd:{content_type:"text/cdf-meaning",codeset:25},emr_type_cd:{content_type:"text/cdf-meaning",codeset:32e3}}},k={tags:{xhtml_text:{charset:"en_US.UTF-8",content_type:"text/plain"},xhtml_annotation:{charset:"en_US.UTF-8",content_type:"text/plain"}}};h.supports("CallCRMAsync").then(function(a){if(a)return new Promise(function(a,b){h.invoke("CallCRMAsync",[SERVICE_TASK,969595,JSON.stringify(i),{requestOptions:JSON.stringify(j),replyOptions:JSON.stringify(k),complete:function(c){if(c=JSON.parse(c),DDCOMMON.isStepSuccessful(c)){var d=c.tags[0],e=$("<div>").html(d.xhtml_text),f=$("<div>").html(d.xhtml_annotation),g=e.find(".ddformattedtext");g.attr("dd:footnotetext",f.find(".ddtagged")[0].outerHTML),a(g[0].outerHTML)}else b(Error("Unable to retrieve note data"))},callError:function(){b(Error("Unable to call step; check task access"))}}])})}).catch(function(a){MP_Util.LogJSError(a,null,"TaggingDao.js","retrieveDragResults")})}}).catch(function(a){MP_Util.LogJSError(a,null,"TaggingDao.js","retrieveDragResults")})},OrionTaggingDao.prototype.parseResponseToConvertHTTPStatus=function(a){var b=Object.freeze({Z:"Z",S:"S",F:"F"}),c=function(a){return 204===a?b.Z:a>=200&&a<=299?b.S:b.F},d=function(a){return a.then(function(a){return a.status=c(a.status),a}).catch(function(a){throw a})};return new Promise(function(b,c){try{b(d(a))}catch(a){c(Error("Unable to perform response status converting"))}})},OrionTaggingDao.prototype.queryTaggedResults=function(a,b,c,d){return this.parseResponseToConvertHTTPStatus(this.tagging.retrieveClipboard(c,b))},OrionTaggingDao.prototype.saveTaggedResults=function(a,b,c){return this.parseResponseToConvertHTTPStatus(this.tagging.saveTaggedResults(b,c))},OrionTaggingDao.prototype.deleteTaggedResults=function(a,b,c,d,e){return this.parseResponseToConvertHTTPStatus(this.tagging.removeTaggedResults(c,b,e))},OrionTaggingDao.prototype.retrieveDragResults=function(a,b,c,d,e,f){return this.tagging.retrieveTaggedContent(c,b,f)},TextControl.Registry={m_controlMapping:{},m_delegateMapping:{}},TextControl.Registry.registerControl=function(a){TextControl.Registry.m_controlMapping[a.getId()]&&logger.logWarning("TextControl.Registry.registerControl: attempting to register control with non-unique id "+a.getId()),TextControl.Registry.m_controlMapping[a.getId()]=a},TextControl.Registry.getControlById=function(a){return TextControl.Registry.m_controlMapping[a]||null},TextControl.label_position={LEFT:0,TOP:1},TextControl.width={SMALL:"te-small",MEDIUM:"te-medium",LARGE:"te-large",SUPER:"te-super",FILL:"te-fill"},TextControl.prototype.getCurrentValue=function(){return this.m_currentValue},TextControl.prototype.setCurrentValue=function(a){if("string"!=typeof a)throw new Error("TextControl.prototype.setCurrentValue expects a string.");return this.getInputElement().val(a),this.m_currentValue=a,this.updateState(),this},TextControl.prototype.setDelegateId=function(a){if("string"!=typeof a)throw new Error("TextControl.prototype.setDelegateId expects a string");return this.m_delegateId=a,this},TextControl.prototype.isDisabled=function(){return this.m_disabled},TextControl.prototype.setDisabled=function(a){if("boolean"!=typeof a)throw new Error("TextControl.prototype.setDisabled expects a boolean.");return this.m_disabled=a,this.getInputElement().prop("disabled",a),this},TextControl.prototype.getExtensions=function(){return this.m_extensions||(this.m_extensions=[]),this.m_extensions},TextControl.prototype.addExtension=function(a){if(!TextControlExtension.prototype.isPrototypeOf(a))throw new Error("TextControl.prototype.addExtension expects a TextControlExtension object");return a.setOwnerControl(this),this.getExtensions().push(a),this},TextControl.prototype.getId=function(){return this.m_id},TextControl.prototype.setId=function(a){if("string"!=typeof a)throw new Error("TextControl.prototype.setId expects a string.");return this.m_id=a,this},TextControl.prototype.getLabel=function(){return this.m_label},TextControl.prototype.setLabel=function(a){if("string"!=typeof a)throw new Error("TextControl.prototype.setLabel expects a string.");return this.m_label=a,this},TextControl.prototype.getLabelPosition=function(){return this.m_labelPosition},TextControl.prototype.setLabelPosition=function(a){if("number"!=typeof a)throw new Error("TextControl.prototype.setLabelPosition expects a number.");return this.m_labelPosition=a,this},TextControl.prototype.getPlaceholderText=function(){return this.m_placeholderText},TextControl.prototype.setPlaceholderText=function(a){if("string"!=typeof a)throw new Error("TextControl.prototype.setPlaceholderText expects a string.");return this.m_placeholderText=a,this.getInputElement().attr("placeholder",a),this},TextControl.prototype.isRequired=function(){return this.m_requiredInd},TextControl.prototype.setRequired=function(a){if("boolean"!=typeof a)throw new Error("TextControl.prototype.setRequired expects a boolean.");this.m_requiredInd=a;var b=this.getStageElement().children(".te-label"),c=b.children(".te-required-ind"),d=this.getInputElement();return a?(b.addClass("te-required-label"),c.length||b.prepend("<span class='te-required-ind'>*</span>"),this.isEmpty()&&d.addClass("te-required")):(b.removeClass("te-required-label"),c.remove(),d.removeClass("te-required")),this},TextControl.prototype.isEmpty=function(){var a=this.m_currentValue;return this.m_strictWhitespace?CERN_Validate.string.isBlank(a):CERN_Validate.string.isEmpty(a)},TextControl.prototype.isStrictWhitespace=function(){return this.m_strictWhitespace},TextControl.prototype.setStrictWhitespace=function(a){if("boolean"!=typeof a)throw new Error("TextControl.prototype.setIsStrictWhitespace expects a boolean.");return this.m_strictWhitespace=a,this},TextControl.prototype.isValid=function(){return this.m_valid},TextControl.prototype.setValidator=function(a){if(!InputValidator.prototype.isPrototypeOf(a))throw new Error("TextControl.prototype.setValidator expects an InputValidator object.");return this.m_validator=a,this},TextControl.prototype.getExtensionElement=function(){return this.m_$extensionElement||(this.m_$extensionElement=$("#"+this.getId()+"Extensions")),this.m_$extensionElement},TextControl.prototype.setExtensionElement=function(a){if("object"!=typeof a)throw new Error("TextControl.prototype.setExtensionElement expects a jQuery object.");return this.m_$extensionElement=a,this},TextControl.prototype.getInputElement=function(){return this.m_$inputElement&&this.m_$inputElement.length||(this.m_$inputElement=$("#"+this.getId())),this.m_$inputElement},TextControl.prototype.setInputElement=function(a){if("object"!=typeof a)throw new Error("TextControl.prototype.setInputElement expects a jQuery object.");return this.m_$inputElement=a,this},TextControl.prototype.getInputGroupElement=function(){return this.m_$inputGroupElement&&this.m_$inputGroupElement.length||(this.m_$inputGroupElement=$("#"+this.m_id+"InputGroup")),this.m_$inputGroupElement},TextControl.prototype.setInputGroupElement=function(a){if("object"!=typeof a)throw new Error("TextControl.prototype.setInputGroupElement expects a jQuery object.");return this.m_$inputGroupElement=a,this},TextControl.prototype.getStageElement=function(){return this.m_$stageElement&&this.m_$stageElement.length||(this.m_$stageElement=$("#"+this.getId()+"Stage")),this.m_$stageElement},TextControl.prototype.setStageElement=function(a){if("object"!=typeof a)throw new Error("TextControl.prototype.setStageElement expects a jQuery object.");return this.m_$stageElement=a,this},TextControl.prototype.getValidationElement=function(){return this.m_$validationElement&&this.m_$validationElement.length||(this.m_$validationElement=$("#"+this.getId()+"Validation")),this.m_$validationElement},TextControl.prototype.setValidationElement=function(a){if("object"!=typeof a)throw new Error("TextControl.prototype.setValidationElement expects a jQuery object.");return this.m_$validationElement=a,this},TextControl.prototype.setWidthInPixels=function(a){if(!CERN_Validate.number.isPositive(a))throw new Error("TextControl.prototype.setWidthInPixels expects a number > 0");return this.m_width=a,this.getInputElement().length&&(this.getInputElement()[0].style.width=a+"px"),this},TextControl.prototype.setPredefinedWidth=function(a){if(!CERN_Validate.string.isString(a))throw new Error("TextControl.prototype.setPredefinedWidth expects a string.");var b=this.m_predefinedWidth;this.m_predefinedWidth=a;var c=this.getInputElement(),d=this.getInputGroupElement(),e=this.getStageElement();return c.removeClass(b),d.removeClass(b),e.removeClass(b),a===TextControl.width.FILL&&(e.addClass(TextControl.width.FILL),e.removeClass("te-label-left"),e.addClass("te-label-top")),c.addClass(a),d.addClass(a),this},TextControl.prototype.setLabelWidthInPixels=function(a){if(!CERN_Validate.number.isPositive(a))throw new Error("TextControl.prototype.setLabelWidthInPixels expects a number > 0.");return this.m_labelWidth=a,this},TextControl.prototype.setOnChangeCallback=function(a){if("function"!=typeof a)throw new Error("TextControl.prototype.setOnChangeCallback expects a function");return this.m_onChangeCallback=a,this},TextControl.prototype.setOnValidChangeCallback=function(a){if("function"!=typeof a)throw new Error("TextControl.prototype.setOnValidChangeCallback expects a function");return this.m_onValidChangeCallback=a,this},TextControl.prototype.attachDelegate=function(){if(!this.m_delegateId)throw new Error("TextControl.prototype.attachDelegate requires a delegate id be provided via TextControl.prototype.setDelegateId(...)");return TextControl.Registry.m_delegateMapping[this.m_delegateId]?void logger.logMessage("TextControl.prototype.attachDelegate: "+this.m_delegateId+" already has events bound."):($("#"+this.m_delegateId).on("keyup",".te-textbox, .te-textarea",function(a){var b=TextControl.Registry.getControlById($(this).attr("id"));b&&b.onUpdate(this.value)}),$("#"+this.m_delegateId).on("blur",".te-textbox, .te-textarea",function(){var a=TextControl.Registry.getControlById($(this).attr("id"));a&&a.onBlur()}),$("#"+this.m_delegateId).on("paste",".te-textbox, .te-textarea",function(){var a=TextControl.Registry.getControlById($(this).attr("id"));if(a){var b=this;setTimeout(function(){a.onUpdate(b.value)},100)}}),void(TextControl.Registry.m_delegateMapping[this.m_delegateId]=!0))},TextControl.prototype.renderExtensions=function(){for(var a=this.getExtensions(),b=a.length,c=0;c<b;c++)a[c].render()},TextControl.prototype.updateState=function(){var a=this.getCurrentValue(),b=this.checkValid();this.m_valid=b;var c=this.isStrictWhitespace()?CERN_Validate.string.isBlank(a):CERN_Validate.string.isEmpty(a);b&&(this.getInputElement().removeClass("te-invalid"),this.getValidationElement().hide()),this.isRequired()&&c?this.getInputElement().addClass("te-required"):this.isRequired()&&!c&&this.getInputElement().removeClass("te-required")},TextControl.prototype.checkValid=function(){return!this.m_validator||this.m_validator.validate(this.getCurrentValue())},TextControl.prototype.onUpdate=function(a){var b=this.m_valid;this.setCurrentValue(a),this.updateState(),this.updateExtensions(),this.m_onChangeCallback&&this.m_onChangeCallback(a),b!==this.m_valid&&this.m_onValidChangeCallback&&this.m_onValidChangeCallback(this.m_valid),this.postUpdate()},TextControl.prototype.onBlur=function(){this.m_valid||(this.getValidationElement().show(),this.getInputElement().addClass("te-invalid"))},TextControl.prototype.postUpdate=function(){},TextControl.prototype.updateExtensions=function(){for(var a=this.getExtensions(),b=a.length,c=0;c<b;c++)a[c].onUpdate()},TextControl.prototype.preRenderValidate=function(a){if(!this.m_id)throw new Error("TextControl requires a unique id to render");if(a&&!this.m_delegateId)throw new Error("TextControl requires a delegate id when calling TextControl.prototype.renderRaw")},TextControl.prototype.renderHtml=function(){this.m_valid=this.checkValid();var a=this.m_label,b=this.m_labelPosition,c=["te-label"],d=["te-stage"],e=["te-input-group",this.m_predefinedWidth],f="",g="",h=a,i=this.getExtensions(),j=i.length,k=this.m_id;if(this.m_predefinedWidth===TextControl.width.FILL&&(b=TextControl.label_position.TOP,d.push("te-fill")),a){var l="";this.m_labelWidth&&(l="style='width:"+this.m_labelWidth+"px;'"),b===TextControl.label_position.LEFT?(d.push("te-label-left"),h+=":&nbsp;"):d.push("te-label-top"),this.m_requiredInd&&(c.push("te-required-label"),g+="<span class='te-required-ind'>*</span>"),f="<div class='"+c.join(" ")+"' "+l+">",g+="<span class='te-label-text'>"+h+"</span>",f+=g,f+="</div>"}var m="<div id='"+k+"Stage' class='"+d.join(" ")+"'>";if(m+=f,m+="<div id='"+k+"InputGroup' class='"+e.join(" ")+"'>",m+=this.renderInputElementRaw(),j){m+="<div id='"+k+"Extensions' class='te-extensions'>";for(var n=0;n<j;n++)m+=i[n].renderRaw();m+="</div>"}return this.m_validator&&(m+="<div id='"+k+"Validation' class='te-validation' style='display: none;'>",m+=this.m_validator.getValidationMessage()||"",m+="</div>"),m+="</div></div>"},TextControl.prototype.render=function(){this.preRenderValidate(!1);var a=this,b=$(this.renderHtml()),c=this.getId();return this.setInputElement(b.find("#"+c)),this.setInputGroupElement(b.find("#"+c+"InputGroup")),this.setStageElement(b.find("#"+c+"Stage")),this.setExtensionElement(b.find("#"+c+"Extensions")),this.setValidationElement(b.find("#"+c+"Validation")),this.getInputElement().on("keyup",function(b){a.onUpdate(this.value)}).on("blur",function(){a.onBlur()}).on("paste",function(){var b=this;setTimeout(function(){a.onUpdate(b.value)},100)}),b},TextControl.prototype.renderRaw=function(){return this.preRenderValidate(!0),TextControl.Registry.registerControl(this),this.attachDelegate(),this.renderHtml()},TextControl.prototype.renderInputElementRaw=function(){var a=this.m_currentValue,b=this.m_valid,c=this.isEmpty(),d=this.m_disabled?" disabled":"",e=this.m_placeholderText?" placeholder='"+this.m_placeholderText+"'":"",f=["te-textbox"],g=a?" value='"+a+"'":"",h="style='";return h+=this.m_width?"width:"+this.m_width+"px;":"",h+="'",b||f.push("te-invalid"),this.m_requiredInd&&c&&f.push("te-required"),f.push(this.m_predefinedWidth),"<input id='"+this.m_id+"' class='"+f.join(" ")+"' type='text'"+g+e+h+d+">"},TextAreaControl.prototype=new TextControl,TextAreaControl.prototype.constructor=TextControl,TextAreaControl.prototype.setHeightInPixels=function(a){if(!CERN_Validate.number.isPositive(a))throw new Error("TextAreaControl.prototype.setHeightInPixels expects a number > 0.");return this.m_height=a,this.getInputElement().length&&(this.getInputElement()[0].style.height=a+"px"),this},TextAreaControl.prototype.setIsResizeable=function(a){if("boolean"!=typeof a)throw new Error("TextAreaControl.prototype.setIsResizeable expects a boolean.");this.m_isResizeable=a;var b=this.getInputElement();return a?b.removeClass("te-no-resize"):b.addClass("te-no-resize"),this},TextAreaControl.prototype.setHeightInRows=function(a){if(!CERN_Validate.number.isGreaterThanOrEqualTo(1))throw new Error("TextAreaControl.prototype.setHeightInRows expects an integer >= 1");return this.m_rows=a,this.getInputElement().attr("rows",a),this},TextAreaControl.prototype.renderInputElementRaw=function(){var a=this.m_currentValue,b=this.m_valid,c=this.m_strictWhitespace?CERN_Validate.string.isBlank(a):CERN_Validate.string.isEmpty(a),d=this.m_disabled?" disabled":"",e=this.m_rows,f=this.m_placeholderText?" placeholder='"+this.m_placeholderText+"'":"",g=["te-textarea"];g.push(this.m_predefinedWidth);var h="style='";return h+=this.m_width?"width:"+this.m_width+"px;":"",h+=this.m_height?"height:"+this.m_height+"px;":"",h+="'",b||g.push("te-invalid"),this.m_requiredInd&&c&&g.push("te-required"),this.m_isResizeable||g.push("te-no-resize"),"<textarea id='"+this.m_id+"' class='"+g.join(" ")+"' rows='"+e+"' type='text'"+f+h+d+">"+a+"</textarea>"},AutosizeTextAreaControl.prototype=new TextAreaControl,AutosizeTextAreaControl.prototype.constructor=TextAreaControl,AutosizeTextAreaControl.prototype.setMinHeightInPixels=function(a){if(!CERN_Validate.number.isPositive(a))throw new Error("AutosizeTextAreaControl.prototype.setMinHeightInPixels expects a number > 0.");if(a>this.m_maxHeight)throw new Error("AutosizeTextAreaControl.prototype.setMinHeightInPixels: the min value must be less than or equal to the max value.");return this.m_minHeight=a,this},AutosizeTextAreaControl.prototype.setMaxHeightInPixels=function(a){if(!CERN_Validate.number.isPositive(a))throw new Error("TextAreaControl.prototype.setMaxHeight: expecting a value greater than 0");if(a<this.m_minHeight)throw new Error("TextAreaControl.prototype.setMaxHeight: the max value must be greater than or equal to the min value");return this.m_maxHeight=a,this},AutosizeTextAreaControl.prototype.postUpdate=function(){this.handleAutoGrow()},AutosizeTextAreaControl.prototype.resize=function(){this.handleAutoGrow()},AutosizeTextAreaControl.prototype.handleAutoGrow=function(){var a=this.getInputElement();if(a.length){var b,c=a[0],d=c.offsetWidth,e=null;c.style.height="auto",b=c.scrollHeight,b<=this.m_maxHeight?c.style.height=Math.max(this.m_minHeight,b)+"px":c.style.height=this.m_maxHeight+"px",
b>this.m_maxHeight?a.css({"overflow-y":"auto"}):a.css({"overflow-y":"hidden"}),e=c.offsetWidth,d!==e&&(c.style.width=d+"px")}},TextControlExtension.prototype.onUpdate=function(){},TextControlExtension.prototype.renderRaw=function(){return""},TextControlExtension.prototype.setOwnerControl=function(a){if(!TextControl.prototype.isPrototypeOf(a))throw new Error("TextControlExtension.prototype.setOwnerControl expects an object of type TextControl.");return this.m_ownerControl=a,this},CharacterLimitExtension.prototype=new TextControlExtension,CharacterLimitExtension.prototype.constructor=TextControlExtension,CharacterLimitExtension.prototype.setAutoTruncate=function(a){if("boolean"!=typeof a)throw new Error("CharacterLimitExtension.prototype.setAutoTruncate expects a boolean.");return this.m_autoTruncate=a,this},CharacterLimitExtension.prototype.setCharacterLimit=function(a){if(!CERN_Validate.number.isPositive(a))throw new Error("CharacterLimitExtension.prototype.setCharacterLimit expects a number > 0.");if(!CERN_Validate.number.isInteger(a))throw new Error("CharacterLimitExtension.prototype.setCharacterLimit only accepts integers.");return this.m_characterLimit=a,this},CharacterLimitExtension.prototype.getCharRemainingElement=function(){return this.m_$charRemaining&&this.m_$charRemaining.length||(this.m_$charRemaining=$("#"+this.m_ownerControl.getId()+"CharRemaining")),this.m_$charRemaining},CharacterLimitExtension.prototype.onUpdate=function(){var a=this.m_ownerControl,b=a.getCurrentValue(),c=b.length,d=this.m_characterLimit-c,e=this.getCharRemainingElement();d<0?(e.addClass("te-char-limit-reached"),this.m_autoTruncate&&(a.setCurrentValue(b.substring(0,this.m_characterLimit)),a.updateState())):e.removeClass("te-char-limit-reached"),e.html(this.getCharRemainingMessage())},CharacterLimitExtension.prototype.getCharRemainingMessage=function(){var a=this.m_ownerControl,b=a.getCurrentValue(),c=b.length,d=this.m_characterLimit-c,e=Math.max(0,d)+"&nbsp;characters left";return this.m_autoTruncate&&(d=0),d<0&&(e=Math.abs(d)+"&nbsp;over"),e},CharacterLimitExtension.prototype.renderRaw=function(){var a=this.m_ownerControl,b=a.getCurrentValue(),c=b.length,d=this.m_characterLimit-c,e=["te-char-remaining"];d<0&&e.push("te-char-limit-reached");var f="<div class='te-char-limit'>";return f+="<span id='"+a.getId()+"CharRemaining' class='"+e.join(" ")+"'>"+this.getCharRemainingMessage()+"</span>",f+="</div>"},InputValidator.prototype.validate=function(a){return!0},InputValidator.prototype.getValidationMessage=function(){return""},NumericValidator.prototype=new InputValidator,NumericValidator.prototype.constructor=InputValidator,NumericValidator.prototype.getValidationMessage=function(){return"A number is required"},NumericValidator.prototype.validate=function(a){return CERN_Validate.string.isNumeric(a)},NumericRangeValidator.prototype=new NumericValidator,NumericRangeValidator.prototype.constructor=NumericValidator,NumericRangeValidator.prototype.getValidationMessage=function(){return"A number between "+this.m_minValue+" and "+this.m_maxValue+" is required"},NumericRangeValidator.prototype.setIsInclusive=function(a){if("boolean"!=typeof a)throw new Error("NumericRangeValidator.prototype.setIsInclusive expects a boolean.");return this.m_inclusive=a,this},NumericRangeValidator.prototype.setMinValue=function(a){if(!CERN_Validate.number.isNumber(a))throw new Error("NumericRangeValidator.prototype.setMinValue expects a number.");if(a>this.m_maxValue)throw new Error("NumericRangeValidator.prototype.setMinValue - min value cannot be greater than max value.");return this.m_minValue=a,this},NumericRangeValidator.prototype.setMaxValue=function(a){if(!CERN_Validate.number.isNumber(a))throw new Error("NumericRangeValidator.prototype.setMaxValue expects a number.");if(a<this.m_minValue)throw new Error("NumericRangeValidator.prototype.setMaxValue - max value cannot be less than the min value.");return this.m_maxValue=a,this},NumericRangeValidator.prototype.validate=function(a){if(NumericValidator.prototype.validate.call(this,a)){var b=parseFloat(a);return!!CERN_Validate.number.isNumber(b)&&CERN_Validate.number.isWithinRange(b,this.m_minValue,this.m_maxValue,this.m_inclusive)}return!1},MPage_Core_User_Prefs={},MPage_Core_User_Prefs.UserPrefManager=function(){var a=3202020,b=function(a){return"MPAGESPREF_"+a};return{GetPreference:function(c,d,e,f,g){if(d){var h=new ScriptRequest;h.setProgramName("MP_GET_USER_PREFS"),h.setParameterArray(["^mine^",e+".0","^"+b(c)+"^",a]),h.setAsyncIndicator(void 0===f||f),h.setResponseHandler(function(a){var b=a.getStatus(),c=a.getResponse();if("Z"===b||"S"===b){if(!g||"function"!=typeof g)return c.PREF_STRING;g(c.PREF_STRING)}else logger.logError(a.getError())}),h.performRequest()}else this.cache.hasOwnProperty(c)&&g&&"function"==typeof g&&g(this.cache[c])},SavePreference:function(c,d,e,f,g){if(e){var h=new ScriptRequest;h.setProgramName("MP_MAINTAIN_USER_PREFS"),h.setParameterArray(["^mine^",f+".0","^"+b(c)+"^","@"+d.toString().length+":"+d+"@",a]),h.setAsyncIndicator(void 0===g||g),h.setResponseHandler(function(a){"F"===a.getStatus()&&logger.logError(a.getError())}),h.performRequest()}else"undefined"!=typeof c&&"undefined"!=typeof d&&(this.cache[prefKey]=d)},ClearPreference:function(c,d,e,f){if(d){var g=CERN_Platform.getCriterion(),h=new ScriptRequest;h.setProgramName("MP_MAINTAIN_USER_PREFS"),h.setParameterArray(["^mine^",e?e:g.CRITERION.PRSNL_ID+".0","^"+b(c)+"^","^^",a]),h.setAsyncIndicator(void 0===f||f),h.setResponseHandler(function(a){"F"===a.getStatus()&&logger.logError(a.getError())}),h.performRequest()}else this.cache.hasOwnProperty(prefKey)&&delete this.cache[prefKey]}}}(),RenderStrategy.prototype.getLookbackMenuId=function(){return"lookback-menu"+this.componentId},RenderStrategy.prototype.getFilterMenuId=function(){return"filter-menu"+this.componentId},RenderStrategy.prototype.getComponentToRender=function(){return this.component},RenderStrategy.prototype.setComponentToRender=function(a){a&&MPageComponent.prototype.isPrototypeOf(a)&&(this.component=a,this.setComponentStyle(a.getStyles()),this.setComponentNamespace(a.getStyles().getNameSpace()),this.setComponentId(a.getStyles().getId()))},RenderStrategy.prototype.getComponentId=function(){return this.componentId},RenderStrategy.prototype.setComponentId=function(a){a&&"string"==typeof a&&(this.componentId=a)},RenderStrategy.prototype.getComponentStyle=function(){return this.componentStyle},RenderStrategy.prototype.setComponentStyle=function(a){a&&ComponentStyle.prototype.isPrototypeOf(a)&&(this.componentStyle=a)},RenderStrategy.prototype.getComponentNamespace=function(){return this.componentNamespace},RenderStrategy.prototype.setComponentNamespace=function(a){a&&"string"==typeof a&&(this.componentNamespace=a)},RenderStrategy.prototype.createComponentContainer=function(){var a=$("<div></div>").attr("id",this.componentId).addClass(this.componentStyle.getClassName()).addClass(CERN_Platform.inMillenniumContext()||this.component.isFusionComponent?"":"mpageui-hide-non-responsive-content");return this.component.isExpanded()||this.component.isAlwaysExpanded()||$(a).addClass("closed"),a[0]},RenderStrategy.prototype.createPlusAddControl=function(){if(!this.component.isPlusAddEnabled())return null;var a=this.component,b=i18n.discernabu.render_strategy.ADD.replace("{0}",this.component.getLabel()),c=$("<a role='button'></a>").attr({id:this.componentNamespace+"Add",href:"#","aria-label":b,title:b}).addClass("add-plus"),d=$("<span></span>").addClass("add-icon").html("&nbsp;"),e=$("<span></span>").addClass("add-text").html(this.i18nCore.ADD);return c.append(d),c.append(e),this.component.isIViewAdd()===!1?c.click(function(){a.openIView()}):c.click(function(){a.openTab()}),c[0]},RenderStrategy.prototype.createComponentSubTitleSection=function(){return $("<span></span>").addClass(this.componentStyle.getTotal()).html(this.i18nCore.LOADING_DATA+"...")[0]},RenderStrategy.prototype.createFilterAppliedSection=function(){var a=this.getComponentId(),b=this.component,c=this.i18nCore.FACILITY_DEFINED_VIEW,d="",e="";return b.getGrouperFilterCriteria()&&b.getGrouperFilterLabel()!==c&&(d=this.i18nCore.FILTER_APPLIED,e=b.getGrouperFilterLabel().toString()),b.getGrouperFilterCatalogCodes()&&b.getGrouperFilterCatLabel()!==c&&(d=this.i18nCore.FILTER_APPLIED,e=b.getGrouperFilterCatLabel().toString()),$("<span></span>").addClass("filter-applied-message").attr({id:"filterAppliedMessage"+a,title:e}).html(d)[0]},RenderStrategy.prototype.createComponentTitle=function(){var a=$("<span></span>").addClass(this.componentStyle.getTitle());return this.addComponentSection(a,this.createComponentAnchor()),this.addComponentSection(a,this.createComponentSubTitleSection()),this.addComponentSection(a,this.createPlusAddControl()),this.addComponentSection(a,this.createHeaderDropdown()),a[0]},RenderStrategy.prototype.createComponentHeader=function(){var a=$("<h2></h2>").addClass(this.componentStyle.getHeaderClass());return this.addComponentSection(a,this.createComponentTitle()),a[0]},RenderStrategy.prototype.createComponentLookback=function(){return null},RenderStrategy.prototype.createComponentOptionsMenu=function(){return $("<span></span>").addClass("opts-menu menu-hide").attr("id","mainCompMenu"+this.componentId).html("&nbsp")[0]},RenderStrategy.prototype.createHeaderDropdown=function(){function a(a){return function(){d.openDropDown(a)}}function b(a,b,c){return function(){var e=d.getCriterion(),f=new TaskDocLink;f.isAvailable().then(function(d){return d?f.launchIView(a,b,c,e.person_id,e.encntr_id):(logger.logWarning("TASKDOC is not available"),null)}).catch(function(a){logger.logJSError(a,this,"render-strategy.js","launchIViewMenuSelection")})}}var c,d=this.component,e=null,f=this.component.getIViewMenuItems(),g=null,h=this.component.getMenuItems(),i=this.getComponentId(),j=0,k=0;if(!(CERN_Platform.inMillenniumContext()&&(h&&h.length||f&&f.length)))return null;var l=new Menu("headerMenu"+i);l.setTypeClass("header-dropdown-menu"),l.setLabel("Header Menu"),l.setAnchorElementId("headerMenu"+i),l.setAnchorConnectionCorner(["bottom","left"]),l.setContentConnectionCorner(["top","left"]),l.setIsRootMenu(!0);var m=i18n.discernabu.render_strategy.ADD_OPTIONS.replace("{0}",this.component.getLabel());g=$("<a role='button'></a>").attr({id:"headerMenu"+i,"aria-label":m,title:m}).addClass("drop-Down");var n=$("<span></span>").addClass("drop-down-ctrl");if(g.append(n),$(n).click(function(){l.isActive()?MP_MenuManager.closeMenuStack(!0):MP_MenuManager.showMenu("headerMenu"+i)}),h&&h.length)for(j=0,k=h.length;j<k;j++)c=h[j],e=new MenuSelection("headerMenuItem"+i+"-"+j),e.setCloseOnClick(!0),e.setLabel(c.getDescription()),e.setClickFunction(a(c.getId())),l.addMenuItem(e);if(f&&f.length){h&&h.length&&l.addMenuItem(new MenuSeparator("headerMenuSeparator"+i));var o,p,q,r;for(j=0,k=f.length;j<k;j++){c=f[j];var s=c.getValTypeFlag();if(1===s){o=c.getDescription(),p=o.toLowerCase(),o=o.replace(/'/g,""),q="",r="";for(var t=0,u=f.length;t<u;t++){var v=f[t];v.getValSequence()===c.getValSequence()&&(2===v.getValTypeFlag()?q=v.getDescription():3===v.getValTypeFlag()&&(r=v.getDescription()))}e=new MenuSelection("iViewHeaderMenuItem"+i+"-"+j),e.setCloseOnClick(!0),e.setLabel(o),e.setClickFunction(b(p,q,r)),l.addMenuItem(e)}}}return MP_MenuManager.updateMenuObject(l),g},RenderStrategy.prototype.createComponentAnchor=function(){var a=this.component.getLink(),b=$("<span class='comp-title'></span>");if(a&&CERN_Platform.inMillenniumContext()){var c=this.i18nCore.GO_TO_TAB.replace("{0}",a);c=c.replace(/'/g,"&#39");var d=$("<a id="+this.componentStyle.getLink()+" title='"+c.replace(/'/g,"&#96")+"' href='#'>"+this.component.getLabel()+"</a>");return d.click(function(){this.component.onTitleClick()}.bind(this)),b.html(d),b}return b.html(this.component.getLabel()),b},RenderStrategy.prototype.createComponentBody=function(){var a=$("<div></div>").attr("id",this.componentStyle.getContentId()).addClass(this.componentStyle.getContentClass());return a[0]},RenderStrategy.prototype.createComponentShell=function(){try{if(!this.component||!MPageComponent.prototype.isPrototypeOf(this.component))throw new Error("Passed something other than MPageComponent to createComponentShell");var a=this.createComponentContainer();return this.addComponentSection(a,this.createComponentHeader()),this.addComponentSection(a,this.createComponentSubHeader()),this.addComponentSection(a,this.createComponentAccordion()),this.addComponentSection(a,this.createComponentNotificationsSection()),this.addComponentSection(a,this.createComponentBody()),this.addComponentSection(a,this.createComponentFooter()),a}catch(a){return logger.logJSError(a,null,"render_strategy.js","createComponentShell"),null}},RenderStrategy.prototype.createComponentSubHeader=function(){return null},RenderStrategy.prototype.addComponentSection=function(a,b){var c=$(b);a&&$(a).length&&c&&c.length&&c.each(function(b,c){$(c).appendTo(a)})},RenderStrategy.prototype.createComponentFilter=function(){function a(a,b){var d=new MenuSelection("filterMenuItem"+f+"-"+a);return d.setLabel(b),d.setCloseOnClick(!0),d.setClickFunction(c(d,a,b)),b===j&&d.setIsSelected(!0),d}function b(a){var b=$("#filterAppliedMessage"+f);b.attr("title",a),b.html(a===i?"":g.i18nCore.FILTER_APPLIED)}function c(a,c,d){return function(){if(!a.isSelected()){for(var g=null,j=null,k=null,l=o.getMenuItemArray(),m=0;m<l.length;m++)l[m].setIsSelected(!1);a.setIsSelected(!0),$("#selectedFilter"+f).html(d),b(d),"ohx"===h||"ohx2"===h?(j=e.getGrouperCatalogCodes(c),e.setGrouperFilterCatLabel(d),e.setGrouperFilterCatalogCodes(j),g=j):(k=e.getGrouperCriteria(c),e.setGrouperFilterLabel(d),e.setGrouperFilterCriteria(k),g=k),d===i?(e.setGrouperFilterCriteria(null),e.setGrouperFilterCatalogCodes(null),e.startComponentDataRetrieval()):e.FilterRefresh(d,g)}}}var d,e=this.getComponentToRender(),f=this.getComponentId(),g=this,h=this.componentNamespace,i=this.i18nCore.FACILITY_DEFINED_VIEW,j=i;e.sortGrouperArrayByLabel(),e.getGrouperFilterCriteria()&&(j=e.getGrouperFilterLabel()),e.getGrouperFilterCatalogCodes()&&(j=e.getGrouperFilterCatLabel());var k=$("<div></div>").addClass("acc-mnu").attr("id","filterDropDownMenu"+f),l=$("<span></span>").addClass("filter-label").html(this.i18nCore.FILTER_LABEL),m=$("<span></span>").addClass("selected-filter").attr("id","selectedFilter"+f).html(j),n=$("<div></div>").addClass("filter-arrow").attr("id","filterMenu"+f);k.append(l),k.append(m),k.append(n);var o=new Menu("filterMenu"+f);o.setTypeClass("filter-menu"),o.setAnchorElementId("filterMenu"+f),o.setAnchorConnectionCorner(["bottom","left"]),o.setContentConnectionCorner(["top","left"]),o.setIsRootMenu(!0),o.addMenuItem(a("",i));for(var p=e.m_grouper_arr.length,q=0,r=0;r<p&&q<10;q++)e.getGrouperLabel(q)&&(r++,d=q,o.addMenuItem(a(d,e.getGrouperLabel(q)))),e.getGrouperCatLabel(q)&&(r++,d=q,o.addMenuItem(a(d,e.getGrouperCatLabel(q))));return n.click(function(){o.isActive()?MP_MenuManager.closeMenuStack(!0):MP_MenuManager.showMenu("filterMenu"+f)}),MP_MenuManager.updateMenuObject(o),k},RenderStrategy.prototype.createComponentAccordion=function(){function a(){for(var a=0;a<10;a++)if(b.getGrouperLabel(a)||b.getGrouperCatLabel(a))return!0;return!1}var b=this.getComponentToRender(),c=b.getComponentId(),d=this.getComponentId();if(!a())return null;var e=$("<div></div>").addClass("accordion-container").attr("id","AccordionContainer"+c),f=$("<div></div>").addClass("accordion-content").attr("id","Accordion"+c+"Content"),g=$("<div></div>").addClass("acc-content-div").attr("id","accordion-content-div-"+d),h=$("<div></div>").addClass("accordion-title").attr("id","Accordion"+c+"Title");return this.addComponentSection(g,b.createAccordionContent()),this.addComponentSection(g,b.createAccordionControls()),h.click(function(){MP_Util.Doc.RunAccordion(c)}),e.append(f),e.append(h),f.append(g),e},RenderStrategy.prototype.createComponentFooter=function(){var a=this.component.getFooterText();return a&&""!==a?$("<div></div>").addClass("sec-footer").html(a)[0]:null},RenderStrategy.prototype.createComponentNotificationsSection=function(){return null},ResultRangeSelectionUtility.direction={BACKWARD:0,FORWARD:1},ResultRangeSelectionUtility.CustomType=6,ResultRangeSelectionUtility.captureResultRangeSelectionDetails=function(a,b,c){var d,e;e={defaultSelection:c,scope:this.getScopeString(a.getScope()),selection:this.getDisplayText(b)},d=new CapabilityTimer("CAP:MPG Component Lookback Selection",a.getReportMean()),d.addMetaData("rangeDetails",JSON.stringify(e)),d.capture()},ResultRangeSelectionUtility.shouldComponentRefresh=function(a,b){return a.getLookbackUnits()!==b.getUnits()||a.getLookbackUnitTypeFlag()!==b.getType()},ResultRangeSelectionUtility.refreshComponentWithNewResultRangeSelection=function(a,b){a.setLookbackUnits(b.getUnits()),a.setLookbackUnitTypeFlag(b.getType()),a.setResultRangeDirection(b.getDirection()),a.showLoading(),CERN_EventListener.fireEvent(a,a,EventListener.EVENT_COUNT_UPDATE,{count:null}),a.startComponentDataRetrieval(),this.captureResultRangeSelectionDetails(a,b,!1)},ResultRangeSelectionUtility.getScopeString=function(a){switch(a){case 1:return i18n.discernabu.All_VISITS;case 2:return i18n.discernabu.SELECTED_VISIT;default:return""}},ResultRangeSelectionUtility.getCustomDisplayString=function(a,b){return b>0?a.replace("{0}",b):a},ResultRangeSelectionUtility.getDisplayString=function(a,b){switch(a){case 1:return i18n.discernabu.LAST_N_HOURS.replace("{0}",b);case 2:return i18n.discernabu.LAST_N_DAYS.replace("{0}",b);case 3:return i18n.discernabu.LAST_N_WEEKS.replace("{0}",b);case 4:return i18n.discernabu.LAST_N_MONTHS.replace("{0}",b);case 5:return i18n.discernabu.LAST_N_YEARS.replace("{0}",b);default:return i18n.discernabu.LAST_N_DAYS.replace("{0}",b)}},ResultRangeSelectionUtility.getFullDisplayString=function(a,b,c){var d="",e=i18n.discernabu;if(b>0&&c>0)switch(d=ResultRangeSelectionUtility.getDisplayString(b,c),a){case 1:d=e.ALL_N_VISITS.replace("{0}",d);break;case 2:d=e.SELECTED_N_VISIT.replace("{0}",d)}else d=ResultRangeSelectionUtility.getScopeString(a);return d},ResultRangeSelectionUtility.getDisplayText=function(a){var b=a.getType(),c=a.getUnits(),d=a.getScope();return b===ResultRangeSelectionUtility.CustomType?ResultRangeSelectionUtility.getCustomDisplayString(a.getDisplay(),c):c>0&&b>0?ResultRangeSelectionUtility.getDisplayString(b,c):ResultRangeSelectionUtility.getScopeString(d)},ResultRangeSelectionUtility.addCustomResultRangeSelectionItem=function(a,b){var c=a.getLookbackMenuItems()||[],d=null;b.setDisplay(ResultRangeSelectionUtility.getDisplayText(b)),c.length?(c.unshift(c.pop()),c.push(b)):(d=new ResultRangeSelection,0===a.getBrLookbackUnits()&&0===a.getBrLookbackUnitTypeFlag()?(d.setUnits(0),d.setScope(a.getScope()),d.setType(a.getScope())):(d.setUnits(a.getBrLookbackUnits()),d.setScope(a.getScope()),d.setType(a.getBrLookbackUnitTypeFlag())),d.setDisplay(ResultRangeSelectionUtility.getDisplayText(d)),c.push(d,b)),a.setLookbackMenuItems(c)},ResultRangeSelection.prototype.getType=function(){return this.type},ResultRangeSelection.prototype.setType=function(a){this.type=a},ResultRangeSelection.prototype.getUnits=function(){return this.units},ResultRangeSelection.prototype.setUnits=function(a){a>=0&&(this.units=a)},ResultRangeSelection.prototype.getDisplay=function(){return this.display},ResultRangeSelection.prototype.setDisplay=function(a){this.display=a},ResultRangeSelection.prototype.getScope=function(){return this.scope},ResultRangeSelection.prototype.setScope=function(a){this.scope=a},ResultRangeSelection.prototype.getDirection=function(){return this.direction},ResultRangeSelection.prototype.setDirection=function(a){this.direction=a},SummaryRenderStrategy.prototype=new RenderStrategy,SummaryRenderStrategy.prototype.constructor=RenderStrategy,SummaryRenderStrategy.prototype.createComponentHeader=function(){var a=$("<h2></h2>").addClass(this.componentStyle.getHeaderClass());return this.addComponentSection(a,this.createComponentToggleControl()),this.addComponentSection(a,this.createComponentOptionsMenu()),this.addComponentSection(a,this.createComponentTitle()),a[0]},SummaryRenderStrategy.prototype.createComponentSubHeader=function(){var a=this.component,b=a.getScope(),c=this.getComponentId();if(3===b)return a.getScopeHTML();if(b>0){var d=$("<div></div>").attr("id","lb"+c+"Mnu"),e=$("<div></div>").addClass("sub-title-disp").attr("id","stt"+c);return d.append(e),e.append(this.createComponentLookback()),d}},SummaryRenderStrategy.prototype.createComponentToggleControl=function(){if(this.component.isAlwaysExpanded())return null;var a=i18n.discernabu.render_strategy.HIDE_SECTION.replace("{0}",this.component.getLabel());return $("<span role='button'></span>").addClass(this.componentStyle.getHeaderToggle()).attr({title:a,"aria-label":a})[0]},SummaryRenderStrategy.prototype.createComponentOptionsMenu=function(){var a=i18n.discernabu.render_strategy.MENU.replace("{0}",this.component.getLabel());return $("<span role='button'></span>").addClass("opts-menu menu-hide").attr({id:"mainCompMenu"+this.componentId,"aria-label":a,title:a}).html("&nbsp")[0]},SummaryRenderStrategy.prototype.createComponentLookback=function(){function a(a,c){return function(){if(ResultRangeSelectionUtility.shouldComponentRefresh(b,c)){for(var e=m.getMenuItemArray(),f=0;f<e.length;f++)e[f].setIsSelected(!1);a.setIsSelected(!0),ResultRangeSelectionUtility.refreshComponentWithNewResultRangeSelection(b,c),$("#lookbackDisplay"+d).html(c.getDisplay())}}}var b=this.getComponentToRender(),c=b.getLookbackMenuItems(),d=this.getComponentId(),e=b.getScope(),f=b.getCriterion().static_content,g=!1,h=b.getLookbackDays(),i=h>0?h:b.getLookbackUnits(),j=h>0?2:b.getLookbackUnitTypeFlag(),k=ResultRangeSelectionUtility.getFullDisplayString(e,j,i),l=$("<div></div>").attr("id","lookbackContainer"+d);if(l.append($("<span></span>").attr("id","lookbackDisplay"+d).html(k)),!c||!c.length)return l.append(this.createFilterAppliedSection()),l;var m=new Menu("lookbackMenu"+d);m.setAnchorElementId("lookbackMenu"+d),m.setAnchorConnectionCorner(["bottom","left"]),m.setContentConnectionCorner(["top","left"]),m.setIsRootMenu(!0);for(var n=c.length,o=0;o<n;o++){var p=c[o],q=new MenuSelection("lookbackMenuItem"+d+"-"+o);q.setCloseOnClick(!0),g||p.getUnits()!==i||p.getType()!==j||(g=!0,q.setIsSelected(!0),ResultRangeSelectionUtility.captureResultRangeSelectionDetails(b,p,!0)),q.setLabel(p.getDisplay()),q.setClickFunction(a(q,p)),m.addMenuItem(q)}MP_MenuManager.updateMenuObject(m);var r=$("<a></a>").append($("<img>").attr({id:"lookbackMenu"+d,src:f+"/images/3943_16.gif"}));return r.click(function(){m.isActive()?MP_MenuManager.closeMenuStack(!0):MP_MenuManager.showMenu("lookbackMenu"+d)}),r.appendTo(l),l.append(this.createFilterAppliedSection()),l},WorkflowRenderStrategy.prototype=new RenderStrategy,WorkflowRenderStrategy.prototype.constructor=RenderStrategy,WorkflowRenderStrategy.prototype.createComponentHeader=function(){var a=$("<h2></h2>").addClass(this.componentStyle.getHeaderClass());this.component.getGapCheckCriteria()&&this.addComponentSection(a,this.createComponentRequiredIndicator()),this.addComponentSection(a,this.createComponentTitle());var b=$("<div></div>").addClass("header-elements-container");return this.addComponentSection(b,this.createComponentOptionsMenu()),this.addComponentSection(b,this.createComponentRefreshButton()),this.addComponentSection(b,this.createComponentContextualViewControl()),this.addComponentSection(b,this.createHeaderToggles()),this.addComponentSection(b,this.createComponentLookback()),this.addComponentSection(a,b),a[0]},WorkflowRenderStrategy.prototype.createComponentRequiredIndicator=function(){var a=null,b=this.component,c=b.getComponentId(),d=b.getGapCheckRequiredInd(),e=b.getGapCheckBannerDismiss()&&d?"component-required-ind":"component-required-ind hidden";a=$("<span class='"+e+"'></span>").attr("id","reqInd"+c).html("&nbsp;");var f=function(){a.off("click"),a.click(f),a.addClass("hidden");var c=b.getRootComponentNode();c&&(b.displayComponentDisclaimerContainer(),b.setGapCheckBannerDismiss(!1),b.savePreferences(!0))};return a.click(f),a[0]},WorkflowRenderStrategy.prototype.createHeaderToggles=function(){return this.component.createHeaderToggles()},WorkflowRenderStrategy.prototype.createComponentSubHeader=function(){var a=this.component;return 3===a.getScope()?a.getScopeHTML():null},WorkflowRenderStrategy.prototype.createComponentLookback=function(){function a(){f.isActive()?MP_MenuManager.closeMenuStack(!0):MP_MenuManager.showMenu("extraLookbackMenu"+h)}function b(a){return function(){ResultRangeSelectionUtility.shouldComponentRefresh(g,a)&&(ResultRangeSelectionUtility.refreshComponentWithNewResultRangeSelection(g,a),$("#lookbackContainer"+h).find(".lookback-button-active").removeClass("lookback-button-active"),$(this).addClass("lookback-button-active"))}}function c(c,d){return function(){ResultRangeSelectionUtility.shouldComponentRefresh(g,c)&&(ResultRangeSelectionUtility.refreshComponentWithNewResultRangeSelection(g,c),d.setDisplay(c.getDisplay()),d.setUnits(c.getUnits()),d.setType(c.getType()),i||($("#lookbackMoreOptions"+h).unbind("click",a),$("#lookbackMoreOptions"+h).click(b(d)),i=!0),$("#lookbackContainer"+h).find(".lookback-button-active").removeClass("lookback-button-active"),$("#lookbackMoreOptions"+h).html(c.getDisplay()).addClass("lookback-button-active"))}}function d(a){return $("<div></div>").addClass("lookback-button").html(a.getDisplay())}var e,f=null,g=this.getComponentToRender(),h=this.getComponentId(),i=!1,j=g.getScope(),k=3,l=g.getLookbackMenuItems(),m=0,n=$("<div></div>").attr("id","lookbackContainer"+h).addClass("lookback-container");if(!l||!l.length){var o=g.getLookbackDays(),p=o>0?o:g.getLookbackUnits(),q=o>0?2:g.getLookbackUnitTypeFlag();return n.append($("<div></div>").addClass("lookback-spec-period").attr("id","lookbackDisplay"+h).html(ResultRangeSelectionUtility.getFullDisplayString(j,q,p))),n}l=l.slice(0);var r=l.length;l.unshift(l.pop()),0!==l[0].getType()&&n.append($("<div></div>").addClass("lookback-spec-period").attr("id","lookbackDisplay"+h).html(ResultRangeSelectionUtility.getScopeString(j)+":"));var s=Math.min(k,r);for(m=0;m<s;m++){e=l[m];var t=d(e);t.addClass(0===m?"lookback-button-active":"lookback-button-no-left-border lookback-button-inactive"),t.click(b(e)),n.append(t)}if(r>k){f=new Menu("extraLookbackMenu"+h),f.setTypeClass("more-lookback-menu"),f.setAnchorElementId("extraLookbackMenu"+h),f.setAnchorConnectionCorner(["bottom","right"]),f.setContentConnectionCorner(["top","right"]),f.setIsRootMenu(!0);var u=new ResultRangeSelection;u.setDisplay(this.i18nCore.MORE);var v=d(u).attr("id","lookbackMoreOptions"+h).addClass("lookback-button-no-left-border lookback-button-more");v.on("click",a);var w=$("<div></div>").addClass("lookback-button lookback-button-arrow lookback-button-no-left-border").attr("id","extraLookbackMenu"+h),x=$("<span></span>").addClass("wrkflw-selectArrow");for(x.click(function(){a()}),w.append(x),n.append(v),n.append(w),m=k;m<r;m++){e=l[m];var y=new MenuSelection("extraLookbackMenuItem"+h+"-"+m);y.setCloseOnClick(!0),y.setLabel(e.getDisplay()),y.setClickFunction(c(e,u)),f.addMenuItem(y)}MP_MenuManager.updateMenuObject(f)}return ResultRangeSelectionUtility.captureResultRangeSelectionDetails(g,l[0],!0),n},WorkflowRenderStrategy.prototype.createComponentNotificationsSection=function(){var a=$("<div></div>").attr("id","notificationSection"+this.componentId).addClass("sec-notification"),b=$("<div></div>").attr("id","non-responsive-banner"+this.componentId).addClass("mpageui-u-show-for-sm-only"),c=$("<div></div>").attr("id","non-responsive-banner-sm"+this.componentId).addClass("mpageui-u-hide-for-sm");return this.addComponentSection(a,b),this.addComponentSection(a,c),a},WorkflowRenderStrategy.prototype.createComponentAccordion=function(){return null},WorkflowRenderStrategy.prototype.createComponentContextualViewControl=function(){var a=this.getComponentToRender(),b=a.getComponentId(),c=a.createComponentContextualViewControl();return c?(a.isAddedToContextualView()?c.setIcon(MPageUI.ICONS.ICON_MOVE_LEFT):c.setIcon(MPageUI.ICONS.ICON_MOVE_RIGHT),a.setContextualViewControl(c),"<div class = 'hdr-contextual-view-control-container' id = '"+b+"ContextualViewControl'>"+c.render()+"</div>"):""},WorkflowRenderStrategy.prototype.createComponentRefreshButton=function(){var a=this.getComponentToRender(),b=this,c=null,d=a.isRefreshEnabled()?"component-refresh-button":"component-refresh-button-dthr";if(c=$("<span class='"+d+"'></span>").attr("id","mainCompRefresh"+a.getComponentId()).attr("title",a.getAsOfDateString()).html("&nbsp;"),a.isRefreshEnabled()){var e=function(){c.off("click"),setTimeout(function(){c.click(e)},1e3);var d=new CapabilityTimer("CAP:MPG Component Refresh",a.getCriterion().category_mean);d.addMetaData("rtms.legacy.metadata.1",a.getReportMean()),d.capture();var f=a.getRootComponentNode();if(f){var g=Util.Style.g("sec-total",f,"span");$(g).removeClass("hidden"),g[0].innerHTML=b.i18nCore.LOADING_DATA+"..."}a.refreshComponent(),a.updateComponentAsOfDisplay()};c.click(e)}return c},function(){if(CERN_Platform.inMillenniumContext()){var a,b=750,c=CERN_Platform.getCriterion().CRITERION,d=new RegExp("(&|<|>|\"|'|/)","g"),e=CERN_Platform.htmlEncode||function(a){return"string"==typeof a?a.replace(d,function(a){return"&#"+a.charCodeAt(0)+";"}):""};a=CERN_Platform.inPatientChartContext()?c.CATEGORY_MEAN+" (PersonId: "+c.PERSON_ID+")":c.CATEGORY_MEAN+" (Organizer)";var f=HTMLElement.prototype.focus;HTMLElement.prototype.focus=function(){if(!document.hasFocus()){var c=[];try{for(var d=this,g=e(d.outerHTML);d&&e(d.outerHTML).length<b;)g=e(d.outerHTML),d=d.parentElement;c=g.match(/.{1,250}/g)}catch(a){c.push("An error occurred when attempting to pull HTML from the invocation source element")}logger.logWarning("A focus intercept has occurred.<br>A CAP timer will be logged to capture the following details<br>View and person Context: "+a+"<br>Invocation source: "+c.join(""));var h=new CapabilityTimer("CAP:MPG Focus Intercept",a);return h.addMetaData("1of3",c[0]),h.addMetaData("2of3",c[1]||""),h.addMetaData("3of3",c[2]||""),void h.capture()}f.apply(this,arguments)}}}();CERN_Platform.inMillenniumContext()&&!function(){function a(){return i18n.discernabu.chartFocusIntercept.ALERT.CONTEXT}function b(){var a=null,b="";try{a=CERN_Platform.getCriterion().CRITERION,a&&a.PERSON_INFO&&a.PERSON_INFO.PERSON_NAME?b=a.PERSON_INFO.PERSON_NAME:logger.logMessage("Could not retrieve the patient name. Defaulting the patient name to the empty string.")}catch(a){logger.logJSError(a,null,"@mpages/chart-focus-intercept/chart-alert-intercept.js","getPatientName()"),logger.logWarning("Could not retrieve the criterion object. Defaulting the patient name to the empty string.")}return b}function c(c){return a().PATIENT.replace("${PATIENT_NAME}",b())+"\n"+c}function d(){var a="";try{var b=MP_Viewpoint.getViewContainerById(MP_Viewpoint.getActiveViewId());a=b.getViewName()}catch(a){logger.logJSError(a,null,"@mpages/chart-focus-intercept/chart-alert-intercept.js","getViewName()"),logger.logWarning("Could not retrieve View Name. Defaulting the view name to the empty string.")}return a}function e(b){return a().ORGANIZER.replace("${VIEW_NAME}",d())+"\n"+b}function f(a){return function(b){var d=CERN_Platform.inPatientChartContext()?c:e;return logger.logWarning("Usage of window.alert is deprecated. Please use the standard logger."),logger.logMessage(b),a(d(b))}}window.alert=f(window.alert)}();MPageOO={inherits:function(a,b){var c=function(){};c.prototype=b.prototype,a.prototype=new c;for(var d=Object.keys(b),e=d.length;e--;){var f=d[e];a[f]=b[f]}},attribute:function(a,b){a.prototype["set"+b]=function(a){this["m_"+b]=a},a.prototype["get"+b]=function(){return this["m_"+b]}},each:function(a,b){return a.isArray?MPageOO.eachOverArray(a,b):MPageOO.eachOverObject(a,b)},eachOverArray:function(a,b){for(var c=0;c<a.length;c++)b(a[c],c,a);
return a},eachOverObject:function(a,b){for(var c=Object.keys(a),d=0;d<c.length;d++){var e=c[d];b(a[e],e,a)}return a},map:function(a,b){return a.isArray?MPageOO.mapOverArray(a,b):MPageOO.mapOverObject(a,b)},mapOverArray:function(a,b){for(var c=[],d=0;d<a.length;d++)c.push(b(a[d],d,a));return c},mapOverObject:function(a,b){for(var c=[],d=Object.keys(a),e=0;e<d.length;e++){var f=d[e];c.push(b(a[f],f,a))}return c},mapObject:function(a,b){for(var c={},d=Object.keys(a),e=0;e<d.length;e++){var f=d[e],g=b(f,a[f],a);c[g[0]]=g[1]}return c},reduce:function(a,b,c){var d=0;for("undefined"==typeof c&&(d=1,c=a[0]);d<a.length;d++)c=b(c,a[d]);return c},pairs:function(a){return MPageOO.map(a,function(a,b){return[b,a]})},values:function(a){return MPageOO.map(a,function(a){return a})},mergeObjects:function(a,b){return MPageOO.map(a,function(c,d){return"undefined"!=typeof b[d]?b[d]:a[d]})},shallowClone:function(a){var b=function(){};b.prototype=a;var c=new b;return MPageOO.each(a,function(a,b){c[b]=a}),c},objectFromList:function(a,b){return MPageOO.reduce(a,function(a,c){var d=b(c);return a[d[0]]=d[1],a},{})},filter:function(a,b){return MPageOO.reduce(a,function(a,c){return b(c)&&a.push(c),a},[])}},ComponentTable.prototype.getActiveRows=function(){return this.activeRows||(this.activeRows=[]),this.activeRows},ComponentTable.prototype.setActiveRows=function(a){if(!Array.isArray(a))throw new Error("Called setActiveRows on ComponentTable with non Array type for activeRows parameter");return this.activeRows=a,this},ComponentTable.prototype.addColumn=function(a){if(!TableColumn.prototype.isPrototypeOf(a))throw new Error("Called addColumn on ComponentTable with non TableColumn type for column parameter");if(this.hasColumn(a.getColumnId()))throw new Error("Column with id: "+a.getColumnId()+" already exists in the ComponentTable with namespace: "+this.namespace);a.getIsSortable()&&(this.sortable=!0),this.getColumnSequence().push(a.getColumnId()),this.getColumns().push(a),this.getColumnMap()[a.getColumnId()]=a},ComponentTable.prototype.getColumns=function(){return this.columns||(this.columns=[]),this.columns},ComponentTable.prototype.getColumnMap=function(){return this.columnMap||(this.columnMap={}),this.columnMap},ComponentTable.prototype.getColumnAtIndex=function(a){if(a<0||a>=this.getColumns().length)throw new Error("Index out of bounds when calling getColumnAtIndex on ComponentTable. Used index: "+a);return this.getColumns()[a]},ComponentTable.prototype.getColumnById=function(a){if(!this.hasColumn(a))throw new Error("In ComponentTable method getColumnById, TableColumn with columnId: "+a+" does not exist");return this.getColumnMap()[a]},ComponentTable.prototype.hasColumn=function(a){return"undefined"!=typeof this.getColumnMap()[a]&&null!==this.getColumnMap()[a]},ComponentTable.prototype.getColumnTag=function(){return this.columnTag},ComponentTable.prototype.setColumnTag=function(a){if("string"!=typeof a)throw new Error("Called setColumnTag on ComponentTable with non string type for columnTag parameter");return this.columnTag=a,this},ComponentTable.prototype.getCSSTemplate=function(){return this.cssTemplate},ComponentTable.prototype.setCSSTemplate=function(a){if("string"!=typeof a)throw new Error("Called setCSSTemplate on ComponentTable with non string type for cssTemplate parameter");return this.cssTemplate=a,this},ComponentTable.prototype.setBodyTag=function(a){if("string"!=typeof a)throw new Error("Called setBodyTag on ComponentTable with non string type for bodyTag parameter");return this.bodyTag=a,this},ComponentTable.prototype.getBodyTag=function(){return this.bodyTag},ComponentTable.prototype.setNoresultsString=function(a){if("string"!=typeof a)throw new Error("Called setNoresultsFound on ComponentTable with non string type for noResultsString parameter");return this.noResultsString=a,this},ComponentTable.prototype.getNoResultsString=function(){return this.noResultsString},ComponentTable.prototype.getRowTag=function(){return this.rowTag},ComponentTable.prototype.setRowTag=function(a){if("string"!=typeof a)throw new Error("Called setRowTag on ComponentTable with non string type for rowTag parameter");return this.rowTag=a,this},ComponentTable.prototype.setDataAttributeOnRow=function(a,b){if(!a||!b||"string"!=typeof a||"string"!=typeof b)throw new Error("Called setDataAttributeOnRow on ComponentTable with non string type for attrName and attrValue parameter");this.rowHash.name=a,this.rowHash.value=b},ComponentTable.prototype.getDataAttributeOnRow=function(){return this.rowHash},ComponentTable.prototype.getRowByHash=function(a,b){for(var c=null,d=this.getActiveRows().length,e=0;e<d;e++)if(c=this.getActiveRows()[e],c.resultData[a]===b)return c},ComponentTable.prototype.sortByColumnInDirection=function(a,b){if(!this.hasColumn(a))throw new Error("In ComponentTable method toggleColumnSort, TableColumn with columnId: "+a+" does not exist\nOptions are: "+this.getColumnSequence().join(","));if(!TableColumn.isValidSortDirection(b))throw new Error("Called sortByColumnInDirection on ComponentTable with invalid sort direction. Use enumeration TableColumn.SORT.ASCENDING or TableColumn.SORT.DESCENDING");var c=this.getColumnMap()[a];if(c.getIsSortable()){var d=ColumnSortFactory.getSortFunction(c,b);this.currentlySortedBy=d,this.updateSortIndicators(c,b),this.getRows().sort(d),this.getActiveRows().sort(d),this.sortGroups(d),this.refresh()}},ComponentTable.prototype.toggleColumnSort=function(a){if(!this.hasColumn(a))throw new Error("In ComponentTable method toggleColumnSort, TableColumn with columnId: "+a+" does not exist.\nOptions are: "+this.getColumnSequence().join(","));var b=this.getColumnMap()[a];if(b.getIsSortable()){var c=b.getColumnSortDirection()!==TableColumn.SORT.NONE?-1*b.getColumnSortDirection():b.getDefaultSort();this.sortByColumnInDirection(a,c)}},ComponentTable.prototype.updateSortIndicators=function(a,b){var c=this.namespace,d=this.getCurrentlySortedColumn();d&&($("#"+c+"columnHeader"+d.getColumnId()).removeClass(this.getSortClass(d.getColumnSortDirection())),d.setColumnSortDirection(TableColumn.SORT.NONE)),$("#"+c+"columnHeader"+a.getColumnId()).addClass(this.getSortClass(b)),a.setColumnSortDirection(b),this.currentlySortedColumn=a},ComponentTable.prototype.getSortClass=function(a){switch(a){case TableColumn.SORT.ASCENDING:return"sort-asc";case TableColumn.SORT.DESCENDING:return"sort-desc";default:return""}},ComponentTable.prototype.getCurrentlySortedBy=function(){return this.currentlySortedBy},ComponentTable.prototype.setCurrentlySortedBy=function(a){if("function"!=typeof a)throw new Error("Called setCurrentlySortedBy on ComponentTable with non function type for currentlySortedBy parameter");return this.currentlySortedBy=a,this},ComponentTable.prototype.getCurrentlySortedColumn=function(){return this.currentlySortedColumn},ComponentTable.prototype.setCurrentlySortedColumn=function(a){if(!TableColumn.prototype.isPrototypeOf(a))throw new Error("Called setCurrentlySortedColumn on ComponentTable with non TableColumn type for currentlySortedColumn parameter");return this.currentlySortedColumn=a,this},ComponentTable.prototype.getCustomClass=function(){return this.customClass},ComponentTable.prototype.setCustomClass=function(a){if("string"!=typeof a)throw new Error("Called setCustomClass on ComponentTable with non string type for customClass parameter");return this.customClass=a,this},ComponentTable.prototype.addExtension=function(a){if(!TableExtension.prototype.isPrototypeOf(a))throw new Error("Called addExtension on ComponentTable with non TableExtension type for extension parameter");return this.getExtensions().push(a),this},ComponentTable.prototype.getExtensions=function(){return this.extensions||(this.extensions=[]),this.extensions},ComponentTable.prototype.quickGroup=function(a,b,c){this.groupedBy=a,this.groupTemplate=TemplateBuilder.buildTemplate(b),this.showGroupCount=c;var d=this.getRows(),e=d.length;if(e){this.groupSequence=[],this.groupMap={};for(var f=0;f<e;f++)this.addRowToGroup(a,d[f],c)}},ComponentTable.prototype.addRowToGroup=function(a,b,c){var d=b.getResultData(),e=(d[a]||"UNKNOWN").replace(/[\s]/gi,"_").replace(/[\W]/gi,"").toUpperCase(),f=this.getGroupMap(),g=this.getGroupSequence();f[e]||(f[e]=(new TableGroup).setKey(a).setValue(e).setDisplay(this.groupTemplate.render(d)).setGroupId(e).setShowCount(c),g.push(e)),f[e].addRow(b)},ComponentTable.prototype.isGroupingApplied=function(){return this.getGroupSequence().length>0},ComponentTable.prototype.addGroup=function(a){if(!TableGroup.prototype.isPrototypeOf(a))throw new Error("Called addGroup on ComponentTable with non TableGroup type for group parameter");if(this.hasGroup(a.getGroupId()))throw new Error("In addGroup on ComponentTable, TableGroup with id: "+a.getGroupId()+" already exists");var b=this.getGroupMap(),c=this.getGroupSequence();return this.currentlySortedBy&&a.getRows().sort(this.currentlySortedBy),c.push(a.getGroupId()),b[a.getGroupId()]=a,this},ComponentTable.prototype.applyGroups=function(a){if(!Array.isArray(a))throw new Error("Called applyGroups on ComponentTable with non Array type for groups parameter");this.clearGroups();for(var b=0;b<a.length;b++)this.addGroup(a[b])},ComponentTable.prototype.sortGroups=function(a){for(var b=this.getGroupMap(),c=this.getGroupSequence(),d=c.length,e=0;e<d;e++)b[c[e]].getRows().sort(a)},ComponentTable.prototype.hasGroup=function(a){return"undefined"!=typeof this.getGroupMap()[a]&&null!==this.getGroupMap()[a]},ComponentTable.prototype.getGroupById=function(a){if(!this.hasGroup(a))throw new Error("In ComponentTable method getGroupById, TableGroup with groupId: "+a+" does not exist");return this.getGroupMap()[a]},ComponentTable.prototype.getGroupMap=function(){return this.groupMap||(this.groupMap={}),this.groupMap},ComponentTable.prototype.getGroupSequence=function(){return this.groupSequence||(this.groupSequence=[]),this.groupSequence},ComponentTable.prototype.openGroup=function(a){if(!this.hasGroup(a))throw new Error("In ComponentTable method toggleGroup, TableGroup with groupId: "+a+" does not exist");var b=this.getGroupMap()[a],c=$("#"+this.namespace+"\\:"+b.getGroupId());b.isExpanded()||(b.setIsExpanded(!0),c.removeClass("closed"),c.find(".sub-sec-hd-tgl").attr("title",i18n.discernabu.HIDE_SECTION).html("-"))},ComponentTable.prototype.openGroups=function(a){if(!Array.isArray(a))throw new Error("Called openGroups on ComponentTable with non Array type for groups parameter");for(var b=0;b<a.length;b++)this.openGroup(a[b])},ComponentTable.prototype.collapseGroup=function(a){if(!this.hasGroup(a))throw new Error("In ComponentTable method toggleGroup, TableGroup with groupId: "+a+" does not exist");var b=this.getGroupMap()[a],c=$("#"+this.namespace+"\\:"+b.getGroupId());b.isExpanded()&&(b.setIsExpanded(!1),c.addClass("closed"),c.find(".sub-sec-hd-tgl").attr("title",i18n.discernabu.SHOW_SECTION).html("+"))},ComponentTable.prototype.collapseGroups=function(a){if(!Array.isArray(a))throw new Error("Called closeGroups on ComponentTable with non Array type for groups parameter");for(var b=0;b<a.length;b++)this.collapseGroup(a[b])},ComponentTable.prototype.toggleGroup=function(a){var b=this.getGroupById(a);b.isExpanded()?this.collapseGroup(a):this.openGroup(a)},ComponentTable.prototype.clearGroups=function(){this.groupSequence=[],this.groupMap={},this.groupedBy=""},ComponentTable.prototype.renderGroup=function(a){var b=this.namespace+":"+a.getGroupId(),c=a.isExpanded()?i18n.discernabu.HIDE_SECTION:i18n.discernabu.SHOW_SECTION,d=a.isExpanded()?"-":"+",e=a.isExpanded()?"":"closed",f=a.getCanCollapse()?"can-collapse ":"",g=a.getShowCount()?"<span class='sub-sec-total'>&nbsp;("+a.getRows().length+")</span>":"",h=a.getCanCollapse()?"<span class='sub-sec-hd-tgl' title='"+c+"'>"+d+"</span>":"",i=a.getHideHeader()?"hidden":"";return"<div id='"+b+"' class='"+e+"'><h3 id='"+b+":header' class='sub-sec-hd "+f+i+"'>"+h+"<span class='sub-sec-title'><"+this.getRowTag()+"><"+this.getColumnTag()+"><span class='sub-sec-display'>"+a.getDisplay()+"</span>"+g+"</"+this.getColumnTag()+"></"+this.getRowTag()+"></span></h3><div id='"+b+":content' class='sub-sec-content'>"+(a.getRows().length?this.renderRows(a.getRows(),a.getGroupId()):this.renderNoResults())+"</div></div>"},ComponentTable.prototype.isHeaderEnabled=function(){return this.headerEnabled},ComponentTable.prototype.setIsHeaderEnabled=function(a){if("boolean"!=typeof a)throw new Error("Called setIsHeaderEnabled on ComponentTable with non boolean type for headerEnabled parameter");return this.headerEnabled=a,this},ComponentTable.prototype.getNamespace=function(){return this.namespace},ComponentTable.prototype.setNamespace=function(a){if("string"!=typeof a)throw new Error("Called setNamespace on ComponentTable with non string type for namespace parameter");return this.namespace=a,this},ComponentTable.prototype.addRow=function(a){if(!TableRow.prototype.isPrototypeOf(a))throw new Error("Called addRow on ComponentTable with non TableRow type for row parameter");return this.getRows().push(a),this},ComponentTable.prototype.getRows=function(){return this.rows||(this.rows=[]),this.rows},ComponentTable.prototype.getRowById=function(a){if(!this.hasRow(a))throw new Error("In ComponentTable method getRowById, TableRow with rowId: "+a+" does not exist");return this.getRowMap()[a]},ComponentTable.prototype.getRowMap=function(){return this.rowMap||(this.rowMap={}),this.rowMap},ComponentTable.prototype.hasRow=function(a){return"undefined"!=typeof this.getRowMap()[a]&&null!==this.getRowMap()[a]},ComponentTable.prototype.getColumnSequence=function(){return this.sequence||(this.sequence=[]),this.sequence},ComponentTable.prototype.getZebraStripe=function(){return this.zebraStripe},ComponentTable.prototype.setZebraStripe=function(a){return"boolean"==typeof a&&(this.zebraStripe=a),this},ComponentTable.prototype.getStripeClass=function(a){return this.zebraStripe?a%2===0?"odd":"even":""},ComponentTable.prototype.render=function(){var a=this.isGroupingApplied()?" grouping-applied":"",b=""!==a||this.getActiveRows().length>0?"content-body":"",c=this.getCustomClass()?" "+this.getCustomClass():"",d=this.getCSSTemplate()?" "+this.getCSSTemplate():"",e=this.getBodyTag()?"</"+this.getBodyTag()+">":"",f=this.getBodyTag()?"<"+this.getBodyTag()+">":"",g="<div id='"+this.namespace+"table' class='component-table"+d+c+a+"'>"+(this.isHeaderEnabled()?this.renderHeader():"")+"<div  id='"+this.namespace+"tableBody' class='"+b+"'>"+f+this.renderBody()+e+"</div></div>";return g},ComponentTable.prototype.refresh=function(){var a=$("#"+this.namespace+"table"),b=this.getBodyTag()?"<"+this.getBodyTag()+">":"",c=this.getBodyTag()?"</"+this.getBodyTag()+">":"";if(a&&a.length){this.isGroupingApplied()?a.addClass("grouping-applied"):a.removeClass("grouping-applied");var d=$("#"+this.namespace+"tableBody");d&&d.length&&(d[0].innerHTML=b+this.renderBody()+c,this.updateAfterResize())}},ComponentTable.prototype.renderHeader=function(){var a=this.namespace,b=this.getGroupSequence(),c=b.length;if(this.getActiveRows().length>0||c>0){for(var d="<"+this.getBodyTag()+" id='"+a+"headerWrapper' class='content-hdr'>",e="<"+this.getRowTag()+" id='"+a+"header' class='"+(this.sortable?"sort-control":"")+" hdr'>",f=this.getColumnSequence(),g=f.length,h="",i=null,j="",k=0;k<g;k++)h="header-item",i=this.getColumnMap()[f[k]],j=i.getWidth()?" style='width:"+i.getWidth()+"px;'":"",h+=i.getCustomClass()?" "+i.getCustomClass():"",h+=i.getIsSortable()?" sort-option":"",i.getColumnSortDirection()!==TableColumn.SORT.NONE&&(h+=" "+this.getSortClass(i.getColumnSortDirection())),e+="<"+this.getColumnTag()+" id='"+a+"columnHeader"+i.getColumnId()+"' class='"+h+"'"+j+"><span id='"+a+"headerItemDisplay"+i.getColumnId()+"' class='header-item-display'>"+i.getColumnDisplay()+"</span></"+this.getColumnTag()+">";return d+e+"</"+this.getRowTag()+"></"+this.getBodyTag()+">"}return""},ComponentTable.prototype.renderBody=function(){var a="",b=this.getGroupMap(),c=this.getGroupSequence(),d=c.length;if(!c.length)return this.getActiveRows().length>0?($("#"+this.namespace+"tableBody").addClass("content-body"),this.renderRows(this.getActiveRows(),null)):($("#"+this.namespace+"tableBody").removeClass("content-body"),this.renderNoResults());for(var e=0;e<d;e++)a+=this.renderGroup(b[c[e]]);return a},ComponentTable.prototype.renderRows=function(a,b){var c="",d=this.getColumnSequence(),e=d.length,f="";b=b?":"+b:"";for(var g="",h=0;h<a.length;h++){var i=a[h],j="result-info "+this.getStripeClass(h),k=this.namespace+b+":"+i.getId(),l=i.getRowAttributeHash().attrName,m=i.getResultData()[i.getRowAttributeHash().attrValue];c+=l&&m?"<"+this.getRowTag()+" id='"+k+"' class='"+j+"' "+l+"="+m+">":"<"+this.getRowTag()+" id='"+k+"' class='"+j+"'>";for(var n=0;n<e;n++){var o=this.getColumnMap()[d[n]],p="table-cell "+o.getCustomClass(),q=o.getColumnId();f=o.getWidth()?" style='width:"+o.getWidth()+"px;'":"",g=this.namespace+b+":"+i.getId()+":"+q,c+="<"+this.getColumnTag()+" id='"+g+"' class='"+p+"'"+f+">",c+=o.getRenderTemplate().render(i.getResultData())||"<span>&nbsp;</span>",c+="</"+this.getColumnTag()+">"}c+="</"+this.getRowTag()+">"}return c},ComponentTable.prototype.renderNoResults=function(){return"<span class='res-none'>"+this.getNoResultsString()+"</span>"},ComponentTable.prototype.finalize=function(){var a=this,b=this.getExtensions(),c=b.length;$("#"+this.namespace+"header").on("click",".sort-option",function(b){var c=$(this).attr("id"),d=(a.namespace+"columnHeader").length,e=c.substring(d,c.length);a.toggleColumnSort(e)});$("#"+this.namespace+"tableBody").find(".sub-sec-hd-tgl").each(function(){Util.removeEvent(this,"click",MP_Util.Doc.ExpandCollapse)}),$("#"+this.namespace+"tableBody").on("click",".sub-sec-hd.can-collapse",function(b){a.toggleGroup(TableGroup.parseGroupId($(this).attr("id"))),a.updateAfterResize()});for(var d=0;d<c;d++)b[d].finalize(this)},ComponentTable.prototype.updateAfterResize=function(){var a=$("#"+this.namespace+"tableBody");a&&a.length&&(a[0].scrollHeight>a.outerHeight()?$("#"+this.namespace+"header").addClass("shifted"):$("#"+this.namespace+"header").removeClass("shifted"))},ComponentTable.prototype.bindData=function(a){if(!this.getColumnSequence().length)throw new Error("Called bindData on ComponentTable with no columns defined.");if("object"!=typeof a||!Array.isArray(a))throw new Error("Called bindData on ComponentTable with non object Array type for data parameter. Please pass an Array of json results");this.clearData();var b=a.length,c=this.getRows(),d=this.getRowMap();if(b>0){for(var e=0;e<b;e++){var f=a[e],g=(new TableRow).setId("row"+e).setResultData(f);this.getDataAttributeOnRow().name&&this.getDataAttributeOnRow().value&&g.setRowAttributeHash(this.getDataAttributeOnRow().name,this.getDataAttributeOnRow().value),c.push(g),d[g.getId()]=g,this.groupedBy&&this.addRowToGroup(this.groupedBy,g,this.showGroupCount)}this.activeRows=c,this.currentlySortedBy&&(this.getActiveRows().sort(this.currentlySortedBy),c.sort(this.currentlySortedBy),this.sortGroups(this.currentlySortedBy))}else this.activeRows=[];return this},ComponentTable.prototype.clearData=function(){this.rows=[],this.rowMap={},this.activeRows=[]},ColumnSortFactory.getSortFunction=function(a,b){if(!TableColumn.isValidSortDirection(b))throw new Error("Called ColumnSortFactory.getSortFunction with invalid sort direction. Use enumeration TableColumn.SORT.ASCENDING or TableColumn.SORT.DESCENDING");return function(c,d){var e=c.getResultData(),f=d.getResultData(),g=e[a.getPrimarySortField()],h=f[a.getPrimarySortField()],i=ColumnSortFactory.compare(g,h);if(0!==i)return b*i;for(var j=a.getSecondarySortFields(),k=0;k<j.length;k++)if(g=e[j[k].FIELD],h=f[j[k].FIELD],i=ColumnSortFactory.compare(g,h),0!==i)return j[k].DIRECTION*i;return 0}},ColumnSortFactory.compare=function(a,b){try{return"number"==typeof a||"number"==typeof b?(a=a||0,b=b||0):"string"!=typeof a&&"string"!=typeof b||(a=(a||"").toUpperCase(),b=(b||"").toUpperCase()),a>b?-1:a<b?1:0}catch(a){return MP_Util.LogError("Called ColumnSortFactory.compare(a,b) with an invalid value for a or b"),0}},ComponentTableDataRetriever.getResultFromTable=function(a,b){var c=$(b).attr("id").split(":");return a.isGroupingApplied()?a.getGroupById(c[1]).getRowById(c[2]).getResultData():a.getRowById(c[1]).getResultData()},ComponentTableDataRetriever.getColumnIdFromElement=function(a,b){if(!ComponentTable.prototype.isPrototypeOf(a))throw new Error("Called getColumnIdFromElement on ComponentTableDataRetriever with non ComponentTable type for table parameter");var c=$(b).attr("id").split(":");return a.isGroupingApplied()?c.length>4?c.slice(3).join(":"):c[3]:c.length>3?c.slice(2).join(":"):c[2]},FlowsheetTable.prototype.setDisclaimer=function(a){this.m_disclaimer=a},FlowsheetTable.prototype.getDisclaimer=function(){return this.m_disclaimer},FlowsheetTable.prototype.render=function(){var a="<div id = '"+this.nameSpace+"flowsheetContainer' class='flowsheet-container'>"+this.labelColumnTable.render()+this.resultsTable.render();return a+="<div id = '"+this.nameSpace+"flowsheetScroll' class='flowsheet-vertical-scroll flowsheet-vertical-scroll-hidden'><span id='"+this.nameSpace+"flowsheetScrollContent' class='flowsheet-scroll-content'>&nbsp;</span></div>",this.m_disclaimer&&(a+="<div id='"+this.nameSpace+"Disclaimer' class='flowsheet-disclaimer'>"+this.m_disclaimer+"</div>"),a+="</div>"},FlowsheetTable.prototype.finalize=function(){var a=this;this.labelColumnTable.finalize(),this.resultsTable.finalize(),this.m_scrollController=this.m_scrollController||$("#"+this.nameSpace+"flowsheetScroll"),a.m_scrollController.scroll(function(b){a.scrollTables(b)})},FlowsheetTable.prototype.scrollTables=function(a){var b=0;if(this.m_scrollController.hasClass("flowsheet-vertical-scroll")){if(b=this.m_scrollController.scrollTop(),"mousewheel"===a.type){var c=a.originalEvent.wheelDeltaY||a.originalEvent.wheelDelta;b-=c,this.m_scrollController.scrollTop(b)}this.labelColumnTableBodyElement=this.labelColumnTableBodyElement||$("#"+this.labelColumnTable.getNamespace()+"tableBody"),this.resultsTableBodyElement=this.resultsTableBodyElement||$("#"+this.resultsTable.getNamespace()+"tableBody"),this.labelColumnTableBodyElement.scrollTop(b),this.resultsTableBodyElement.scrollTop(b)}},FlowsheetTable.prototype.bindData=function(a){this.labelColumnTable.bindData(a),this.resultsTable.bindData(a)},FlowsheetTable.prototype.addResultColumn=function(a){this.resultsTable.addColumn(a)},FlowsheetTable.prototype.addLabelColumn=function(a){this.labelColumnTable.addColumn(a)},FlowsheetTable.prototype.setCSSTemplate=function(a){this.labelColumnTable.setCSSTemplate(a),this.resultsTable.setCSSTemplate(a)},FlowsheetTable.prototype.setLabelTableCustomClass=function(a){this.labelColumnTable.setCustomClass(a)},FlowsheetTable.prototype.setResultTableCustomClass=function(a){this.resultsTable.setCustomClass(a)},FlowsheetTable.prototype.setNamespace=function(a){if("string"!=typeof a)throw new Error("Called setNamespace on ComponentTable with non string type for namespace parameter");return this.nameSpace=a,this.labelColumnTable.setNamespace(a+"labelTable"),this.resultsTable.setNamespace(a+"resultsTable"),this},FlowsheetTable.prototype.setSidePanelWidth=function(a){this.sidePanelWidth=a},FlowsheetTable.prototype.updateAfterResize=function(){this.labelColumnTableBodyElement=this.labelColumnTableBodyElement||$("#"+this.labelColumnTable.getNamespace()+"tableBody"),this.labelColumnTableElement=this.labelColumnTableElement||$("#"+this.labelColumnTable.getNamespace()+"table"),this.resultsTableBodyElement=this.resultsTableBodyElement||$("#"+this.resultsTable.getNamespace()+"tableBody"),this.resultsTableElement=this.resultsTableElement||$("#"+this.resultsTable.getNamespace()+"table"),this.headerTableElement=this.headerTableElement||$("#"+this.resultsTable.getNamespace()+"headerWrapper"),this.outerScrollDiv=this.outerScrollDiv||$("#"+this.nameSpace+"flowsheetScroll"),this.innerScrollContent=this.innerScrollContent||$("#"+this.nameSpace+"flowsheetScrollContent");var a=this.headerTableElement.height(),b=20,c=$("#vwpBody"),d=$(c).height(),e=$("#"+this.nameSpace);if(e.length){var f=$(e).find(".content-body"),g=$(e).find(".sec-content");if(f.length){var h=$(e).find(".sec-hd").outerHeight(),i=(f.height(),0);this.m_disclaimer&&(i=$("#"+this.nameSpace+"Disclaimer").outerHeight());var j=d-(h+a+b+i)+"px";$(f).css("max-height",j).css("overflow-y","hidden")}var k=2,l=g.width()-this.labelColumnTableElement.width()-k-this.sidePanelWidth;this.resultsTableElement.css({width:l});var m=this;this.headerTableElement[0].scrollWidth;this.resultsTableBodyElement.css({width:m.headerTableElement[0].scrollWidth+"px"});var n=this.resultsTableBodyElement[0].scrollHeight,o=this.resultsTableBodyElement.css("max-height"),p=parseInt(o,10),q=18;p<n?(this.outerScrollDiv.removeClass("flowsheet-vertical-scroll-hidden"),this.innerScrollContent.css("height",n),l<this.headerTableElement[0].scrollWidth?(this.resultsTableElement.css("height",p+a),this.labelColumnTableElement.css("height",p+a-q),this.outerScrollDiv.css("height",p-q),$(f).css("max-height",p-q)):(this.labelColumnTableElement.css("height",p+a),this.outerScrollDiv.css("height",p))):this.outerScrollDiv.hasClass("flowsheet-vertical-scroll-hidden")||(this.outerScrollDiv.addClass("flowsheet-vertical-scroll-hidden"),this.resultsTableElement.css("height","100%"),this.labelColumnTableElement.css("height","100%"))}},FlowsheetTable.prototype.addExtension=function(a,b){switch(HoverExtension.prototype.isPrototypeOf(a)&&"td.table-cell"!==a.target&&a.setTarget("td.table-cell"),b){case 1:this.labelColumnTable.addExtension(a);break;case 2:this.resultsTable.addExtension(a);break;default:this.labelColumnTable.addExtension(a),this.resultsTable.addExtension(a)}},MPageTooltip.prototype.getAnchor=function(){return this.anchor},MPageTooltip.prototype.setAnchor=function(a){return this.anchor=a,this},MPageTooltip.prototype.getContent=function(){return this.content},MPageTooltip.prototype.setContent=function(a){return this.content=$("<div class='mpage-tooltip'>").html(a).hide(),this},MPageTooltip.prototype.shouldFlipfit=function(){return this.flipfit},MPageTooltip.prototype.setShouldFlipfit=function(a){if("boolean"!=typeof a)throw new Error("Called setShouldFlipfit on DiscernTooltip with non boolean type for flipfit parameter");return this.flipfit=a,this},MPageTooltip.prototype.getHeight=function(){return this.height},MPageTooltip.prototype.setHeight=function(a){if("number"!=typeof a)throw new Error("Called setHeight on MPageTooltip with non number type for height parameter");return this.height=a,this},MPageTooltip.prototype.getOffsetX=function(){return this.offsetX},MPageTooltip.prototype.setOffsetX=function(a){if("number"!=typeof a)throw new Error("Called setOffsetX on MPageTooltip with non number type for offsetX parameter");return this.offsetX=a,this},MPageTooltip.prototype.getOffsetY=function(){return this.offsetY},MPageTooltip.prototype.setOffsetY=function(a){if("number"!=typeof a)throw new Error("Called setOffsetY on MPageTooltip with non number type for offsetY parameter");return this.offsetY=a,this},MPageTooltip.prototype.getShowDelay=function(){return this.showDelay},MPageTooltip.prototype.setShowDelay=function(a){if("number"!=typeof a)throw new Error("Called setShowDelay on DiscernTooltip with non number type for showDelay parameter");if(a<0)throw new Error("Called setShowDelay on DiscernTooltip with negative value, showDelay must be > 0");return this.showDelay=a,this},MPageTooltip.prototype.isStillHovered=function(){return this.stillHovered},MPageTooltip.prototype.setIsStillHovered=function(a){if("boolean"!=typeof a)throw new Error("Called setIsStillHovered on DiscernTooltip with non boolean type for stillHovered parameter");return this.stillHovered=a,this},MPageTooltip.prototype.getTolerance=function(){return this.tolerance},MPageTooltip.prototype.setTolerance=function(a){if("number"!=typeof a)throw new Error("Called setTolerance on MPageTooltip with non number type for tolerance parameter");this.tolerance=a},MPageTooltip.prototype.getWidth=function(){return this.width},MPageTooltip.prototype.setWidth=function(a){if("number"!=typeof a)throw new Error("Called setWidth on MPageTooltip with non number type for width parameter");return this.width=a,this},MPageTooltip.prototype.getX=function(){return this.x},MPageTooltip.prototype.setX=function(a){if("number"!=typeof a)throw new Error("Called setX on MPageTooltip with non number type for x parameter");return this.x=a,this},MPageTooltip.prototype.getY=function(){return this.y},MPageTooltip.prototype.setY=function(a){if("number"!=typeof a)throw new Error("Called setY on MPageTooltip with non number type for y parameter");return this.y=a,this},MPageTooltip.prototype.show=function(){var a=this;this.stillHovered=!0,$(".mpage-tooltip").remove(),$(this.getAnchor()).on("mouseleave.discernTooltip",function(b){a.setIsStillHovered(!1),a.getContent()&&a.getContent().remove(),$(a.getAnchor()).unbind(".discernTooltip")}),setTimeout(function(){a.checkAnchorStillExists(),a.isStillHovered()&&($(document.body).append(a.getContent()),a.setHeight(a.getContent().height()),a.setWidth(a.getContent().width()),a.getContent().css({left:a.calculatePosition(a.x,$(window).width()-a.getTolerance(),a.width,a.getOffsetX()),top:a.calculatePosition(a.y,$(window).height()-a.getTolerance(),a.height,a.getOffsetY())}),a.content.show(),$(a.getAnchor()).on("mousemove.discernTooltip",function(b){a.isStillHovered()&&(a.setX(b.pageX).setY(b.pageY),a.content.css("left",a.calculatePosition(b.pageX,$(window).width()-a.getTolerance(),a.width,a.getOffsetX())),a.content.css("top",a.calculatePosition(b.pageY,$(window).height()-a.getTolerance(),a.height,a.getOffsetY())))}))},this.getShowDelay())},MPageTooltip.prototype.calculatePosition=function(a,b,c,d){if(this.shouldFlipfit()&&a+d>b-c){var e=a-c-d;return e<0&&(e=b/2-c/2),e}return a+d},MPageTooltip.prototype.checkAnchorStillExists=function(){function a(){try{if(!$(b.getAnchor()).is(":hover")||!$(document.body).find(b.getAnchor()).length)return b.getContent()&&b.getContent().remove(),b.setIsStillHovered(!1),void($(b.getAnchor()).length>0&&$(b.getAnchor()).unbind(".discernTooltip"));if(!b.isStillHovered())return;setTimeout(a,5e3)}catch(a){return}}var b=this;a()},SidePanel=function(){this.m_uniqueId=null,this.m_panelId=null,this.m_containerElementId=null,this.m_expandOption=this.expandOption.NONE,this.m_fullPanelScrollOn=!0,this.m_regexHeightWidth=/^(\d+((px)|%){1})$/,this.m_height="175px",this.m_width="100%",this.m_maxHeight=null,this.m_minHeight="175px",this.m_previousMinHeight=null,this.m_mouseEnterFunc=null,this.m_mouseLeaveFunc=null,this.m_onExpandFunc=null,this.m_onCollapseFunc=null,this.m_parentContainer=null,this.m_sidePanelObj=null,this.m_sidePanelContents=null,this.m_sidePanelBodyContents=null,this.m_scrollContainer=null,this.m_expCollapseIconObj=null,this.m_expCollapseBarObj=null,this.m_sidePanelHeader=null,this.m_headerTitleObj=null,this.m_subtitleObj=null,this.m_closeButton=null,this.m_closeFunction=null,this.m_cornerCloseButton=null,this.m_cornerCloseFunction=null,this.m_usingUpdatedPanel=!1,this.m_applyBodyContentsPadding=!1},SidePanel.prototype.getUniqueId=function(){return this.m_uniqueId},SidePanel.prototype.setUniqueId=function(a){return!a||"string"!=typeof a&&"number"!=typeof a?void logger.logError("Parameter uniqueId must be of type string or number for the SidePanel.setUniqueId function."):(this.m_uniqueId=a,this.m_panelId="sidePanel"+a,this)},SidePanel.prototype.getContainerElementId=function(){return this.m_containerElementId},SidePanel.prototype.setContainerElementId=function(a){return a&&"string"==typeof a?(this.m_containerElementId=a,this):void logger.logError("Parameter containerElementId must be of type string for the SidePanel.setContainerElementId function.")},SidePanel.prototype.getExpandOption=function(){return this.m_expandOption},SidePanel.prototype.setExpandOption=function(a){
var b=!1;for(key in this.expandOption){var c=this.expandOption[key];if(a===c){b=!0;break}}return b?(this.m_expandOption=a,this):void logger.logError("Parameter expandOption must be of type SidePanel.expandOption for the SidePanel.setExpandOption function.")},SidePanel.prototype.getFullPanelScrollOn=function(){return this.m_fullPanelScrollOn},SidePanel.prototype.setFullPanelScrollOn=function(a){return"boolean"!=typeof a?void logger.logError("Parameter scrollOn must be of type boolean for the SidePanel.setFullPanelScrollOn function."):(this.m_fullPanelScrollOn=a,this)},SidePanel.prototype.getWidth=function(){return this.m_width},SidePanel.prototype.setWidth=function(a){return this.m_regexHeightWidth.test(a)?(this.m_width=a,this.m_sidePanelObj&&this.m_sidePanelObj.length&&this.m_sidePanelObj.css({width:this.m_width}),this):void logger.logError("Parameter newWidth must match the regex /^(d+((px)|%){1})$/ for the SidePanel.setWidth function.")},SidePanel.prototype.getHeight=function(){return this.m_height},SidePanel.prototype.setHeight=function(a){return this.m_regexHeightWidth.test(a)?(this.m_height=a,this.m_sidePanelObj&&this.m_sidePanelObj.length&&this.m_sidePanelObj.css({height:this.m_height}),this):void logger.logError("Parameter newHeight must match the regex /^(d+((px)|%){1})$/ for the SidePanel.setHeight function.")},SidePanel.prototype.getMaxHeight=function(){return this.m_maxHeight},SidePanel.prototype.setMaxHeight=function(a){return this.m_regexHeightWidth.test(a)?(this.m_maxHeight=a,this.m_sidePanelObj&&this.m_sidePanelObj.length&&this.m_sidePanelObj.css({"max-height":this.m_maxHeight}),this):void logger.logError("Parameter newMaxHeight must match the regex /^(d+((px)|%){1})$/ for the SidePanel.setMaxHeight function.")},SidePanel.prototype.getMinHeight=function(){return this.m_minHeight},SidePanel.prototype.setMinHeight=function(a){return this.m_regexHeightWidth.test(a)?(this.m_minHeight=a,this.m_sidePanelObj&&this.m_sidePanelObj.length&&this.m_sidePanelObj.css({"min-height":this.m_minHeight}),this):void logger.logError("Parameter newMinHeight must match the regex /^(d+((px)|%){1})$/ for the SidePanel.setMinHeight function.")},SidePanel.prototype.getOnExpandFunction=function(){return this.m_onExpandFunc},SidePanel.prototype.setOnExpandFunction=function(a){return"function"!=typeof a?void logger.logError("Parameter func must be of type function for the SidePanel.setOnExpandFunction."):(this.m_onExpandFunc=a,this)},SidePanel.prototype.getOnCollapseFunction=function(){return this.m_onCollapseFunc},SidePanel.prototype.setOnCollapseFunction=function(a){return"function"!=typeof a?void logger.logError("Parameter func must be of type function for the SidePanel.setOnCollapseFunction."):(this.m_onCollapseFunc=a,this)},SidePanel.prototype.renderSidePanel=function(){if(!this.m_sidePanelContents){if(!this.m_containerElementId)return void logger.logError("Container element id for side panel has not been set to use in the SidePanel.renderSidePanel function.");if(this.m_parentContainer=$("#"+this.m_containerElementId),!this.m_parentContainer.length)return void logger.logError("Container element object for side panel not found to use in the SidePanel.renderSidePanel function.");if(!this.m_uniqueId)return void logger.logError("Unique id for side panel has not been set to use in the SidePanel.renderSidePanel function.");var a=this.m_uniqueId,b="<div id='"+this.m_panelId+"' class='side-panel'><div id='closeButton"+a+"' class='sp-close-btn'>&nbsp;</div><div id='sidePanelContents"+a+"' class='sp-all-contents'>&nbsp;</div><div id='sidePanelExpandCollapse"+a+"' class='sp-expand-collapse hidden'><div id='sidePanelExpandCollapseIcon"+a+"'>&nbsp;</div></div></div>";this.m_parentContainer.html(b),this.m_sidePanelObj=$("#"+this.m_panelId),this.m_sidePanelContents=$("#sidePanelContents"+a),this.m_sidePanelBodyContents=$("#sidePanelContents"+a),this.m_closeButton=$("#closeButton"+a),this.setHeight(this.m_height),this.setWidth(this.m_width),this.m_minHeight&&this.m_sidePanelObj.css("min-height",this.m_minHeight),this.m_closeButton.hide()}},SidePanel.prototype.setContents=function(a){if(this.m_sidePanelContents||this.renderSidePanel(),"string"==typeof a&&a.length)this.m_sidePanelContents.html(a);else{if(!(a instanceof jQuery))return void logger.logError("Parameter contents must be of type string or jQuery Object for the SidePanel.setContents function.");this.m_sidePanelContents.empty(),this.m_sidePanelContents.append(a)}if(this.m_scrollContainer=$("#sidePanelScrollContainer"+this.m_uniqueId),this.m_expandOption===this.expandOption.EXPAND_DOWN){if(!this.m_maxHeight)return void logger.logError("Max height must be set for use in SidePanel.setContents when an expand option is used.");this.setMaxHeight(this.m_maxHeight),this.m_expandOption.call(this)}else if(this.m_sidePanelObj.css("height","auto"),this.m_fullPanelScrollOn){if(!this.m_maxHeight)return void logger.logError("Max height must be set for use in SidePanel.setContents when full panel scrolling is turned on.");this.setMaxHeight(this.m_maxHeight),this.fullPanelScroll()}},SidePanel.prototype.renderPreBuiltSidePanel=function(){if(!this.m_sidePanelContents){if(!this.m_containerElementId)return void logger.logError("Container element id for side panel has not been set to use in the SidePanel.renderSidePanel function.");if(this.m_parentContainer=$("#"+this.m_containerElementId),!this.m_parentContainer.length)return void logger.logError("Container element object for side panel not found to use in the SidePanel.renderSidePanel function.");if(!this.m_uniqueId)return void logger.logError("Unique id for side panel has not been set to use in the SidePanel.renderSidePanel function.");this.m_usingUpdatedPanel=!0;var a=this.m_uniqueId,b="<div id='"+this.m_panelId+"' class='side-panel'><div id='sidePanelContents"+a+"'><div id='sidePanelHeader"+a+"' class='sp-header2'><div id='sidePanelActionBar"+a+"' class='sp-action-bar'><div id='sidePanelActions"+a+"' class='sp-actions'>&nbsp;</div><div id='cornerCloseButton"+a+"' class='sp-close-btn2'>&nbsp;</div></div><div id='sidePanelHeaderText"+a+"' class='sp-header-text'>&nbsp;</div><div id='sidePanelSubtitle"+a+"' class='sp-subtitle secondary-text'>&nbsp;</div><div id='sidePanelAlertBanner"+a+"' class='sp-alert-banner'>&nbsp;</div></div><div class='sp-separator2'>&nbsp;</div><div id='sidePanelBodyContents"+a+"' class=''>&nbsp;</div></div><div id='sidePanelExpandCollapse"+a+"' class='sp-expand-collapse2 hidden'><div id='sidePanelExpandCollapseIcon"+a+"' class='sp-expand'>&nbsp;</div></div></div>";this.m_parentContainer.html(b),this.m_sidePanelObj=$("#"+this.m_panelId),this.m_sidePanelBodyContents=$("#sidePanelBodyContents"+a),this.m_sidePanelContents=$("#sidePanelContents"+a),this.m_sidePanelHeader=$("#sidePanelHeader"+a),this.m_cornerCloseButton=$("#cornerCloseButton"+a),this.m_headerTitleObj=$("#sidePanelHeaderText"+a),this.m_subtitleObj=$("#sidePanelSubtitle"+a),this.m_sidePanelActionsObj=$("#sidePanelActions"+a),this.m_sidePanelAlertBanner=$("#sidePanelAlertBanner"+a),this.setHeight(this.m_height),this.setWidth(this.m_width),this.m_minHeight&&this.m_sidePanelObj.css("min-height",this.m_minHeight),this.m_cornerCloseButton.hide(),this.m_subtitleObj.addClass("hidden"),this.m_sidePanelAlertBanner.addClass("hidden")}},SidePanel.prototype.setTitleText=function(a){return this.m_headerTitleObj?void this.m_headerTitleObj.text(a):void logger.logError("Side panel title object cannot be found.")},SidePanel.prototype.setSubtitleText=function(a){return this.m_subtitleObj?(this.m_subtitleObj.text(a),void this.m_subtitleObj.removeClass("hidden")):void logger.logError("Side panel subtitle object cannot be found.")},SidePanel.prototype.setSubtitleAsHTML=function(a){return this.m_subtitleObj?(this.m_subtitleObj.html(a),void this.m_subtitleObj.removeClass("hidden")):void logger.logError("Side panel subtitle object cannot be found.")},SidePanel.prototype.removeSubtitle=function(){return this.m_subtitleObj?void this.m_subtitleObj.addClass("hidden"):void logger.logError("Side panel subtitle object cannot be found.")},SidePanel.prototype.setActionsAsHTML=function(a){return this.m_sidePanelActionsObj?void this.m_sidePanelActionsObj.html(a):void logger.logError("Side panel action bar object cannot be found.")},SidePanel.prototype.setAlertBannerAsHTML=function(a){return this.m_sidePanelAlertBanner?(this.m_sidePanelAlertBanner.html(a),this.m_sidePanelAlertBanner.removeClass("hidden"),void this.m_sidePanelObj.addClass("sp-alert-banner-showing")):void logger.logError("Side panel alert banner object cannot be found.")},SidePanel.prototype.removeAlertBanner=function(){return this.m_sidePanelAlertBanner?(this.m_sidePanelAlertBanner.addClass("hidden"),void this.m_sidePanelObj.removeClass("sp-alert-banner-showing")):void logger.logError("Side panel alert banner object cannot be found.")},SidePanel.prototype.showCornerCloseButton=function(){return this.m_cornerCloseButton?void this.m_cornerCloseButton.removeAttr("style"):void logger.logError("Corner close button is not defined")},SidePanel.prototype.getCornerCloseFunction=function(){return this.m_cornerCloseFunction},SidePanel.prototype.setCornerCloseFunction=function(a){return a instanceof Function?void(this.m_cornerCloseFunction=a):void logger.logError("Corner close function must be of type 'Function'.")},SidePanel.prototype.showHideExpandBar=function(){if(this.m_usingUpdatedPanel&&this.m_sidePanelObj[0].offsetHeight){var a=document.getElementById("sidePanelBodyContents"+this.m_uniqueId),b=this.m_sidePanelObj[0].offsetHeight,c=this.m_sidePanelHeader[0].offsetHeight,d=0;c<b?d=b-c:this.m_expCollapseBarObj.removeClass("hidden"),d&&a.scrollHeight>d?this.m_expCollapseBarObj.removeClass("hidden"):d&&d>=a.scrollHeight&&this.m_expCollapseBarObj.addClass("hidden")}},SidePanel.prototype.getApplyBodyContentsPadding=function(){return this.m_applyBodyContentsPadding},SidePanel.prototype.setApplyBodyContentsPadding=function(a){return"boolean"!=typeof a?void logger.logError("applyBodyContentsPadding must be of type 'Boolean'."):void(this.m_applyBodyContentsPadding=a)},SidePanel.prototype.resizePanel=function(a){return this.m_regexHeightWidth.test(a)?(this.m_maxHeight=a,void(this.m_expandOption===this.expandOption.EXPAND_DOWN?(this.setMaxHeight(this.m_maxHeight),this.showHideExpandBar(),this.collapseSidePanel()):this.m_fullPanelScrollOn&&(this.setMaxHeight(this.m_maxHeight),this.fullPanelScroll()))):void logger.logError("Parameter maxHeight must match the regex /^(d+((px)|%){1})$/ for the SidePanel.resizePanel function.")},SidePanel.prototype.fullPanelScroll=function(){if(!this.m_scrollContainer.length)return void logger.logError("Scroll container object for side panel not found for use in SidePanel.fullPanelScroll.");if(!this.m_maxHeight)return void logger.logError("Max height for side panel not set for use in SidePanel.fullPanelScroll.");"none"!==this.m_scrollContainer.css("max-height")&&this.m_scrollContainer.css("max-height","none");var a=null;if(this.m_usingUpdatedPanel){var b=this.m_sidePanelBodyContents[0].offsetHeight;a=this.m_sidePanelContents.height()-b}else{var c=this.m_sidePanelContents[0].offsetHeight;a=c-this.m_scrollContainer.height()}this.m_sidePanelObj.css({height:"auto"});var d=this.m_sidePanelObj.height()-a+1;this.m_scrollContainer.css("max-height",d+"px"),d===this.m_scrollContainer.height()?this.m_scrollContainer.addClass("sp-add-scroll"):this.m_scrollContainer.removeClass("sp-add-scroll")},SidePanel.prototype.expandDownListeners=function(){if(null!==this.m_sidePanelObj){var a=this.m_uniqueId,b=this,c="#sidePanelExpandCollapse"+a;this.m_expCollapseIconObj=$("#sidePanelExpandCollapseIcon"+a),this.m_expCollapseBarObj=$(c);var d=null;"#"+this.m_panelId;this.m_sidePanelObj.off(),this.m_sidePanelObj.hasClass("sp-focusin")||this.showHideExpandBar(),this.m_usingUpdatedPanel||(this.m_sidePanelObj.on("mouseenter",function(){b.m_expCollapseBarObj.hasClass("hidden")&&(d=$("#sidePanelScrollContainer"+a),(this.scrollHeight>this.offsetHeight||d.hasClass("sp-add-scroll"))&&(b.m_expCollapseIconObj.addClass("sp-expand").removeClass("sp-collapse"),b.m_expCollapseBarObj.removeClass("hidden")),b.m_mouseEnterFunc&&b.m_mouseEnterFunc())}),this.m_sidePanelObj.on("mouseleave",function(){b.m_expCollapseIconObj.hasClass("sp-expand")&&b.m_expCollapseBarObj.addClass("hidden"),b.m_mouseLeaveFunc&&b.m_mouseLeaveFunc()})),this.m_sidePanelObj.on("click",c,function(a){b.expandCollapseSidePanel()}),this.m_expCollapseIconObj.hasClass("sp-collapse")&&this.expandSidePanel()}},SidePanel.prototype.expandCollapseSidePanel=function(){this.m_sidePanelObj.length&&(this.m_expCollapseIconObj.hasClass("sp-expand")?this.expandSidePanel():this.collapseSidePanel())},SidePanel.prototype.expandSidePanel=function(){this.m_sidePanelObj.hasClass("sp-focusin")||(this.m_expCollapseBarObj.removeClass("hidden"),this.m_parentContainer.css({position:"absolute"}),this.m_sidePanelObj.addClass("sp-focusin"),this.m_expCollapseIconObj.addClass("sp-collapse").removeClass("sp-expand")),this.m_previousMinHeight=this.m_minHeight;var a=parseInt(this.m_height,10),b=parseInt(this.m_minHeight,10);a>b&&this.setMinHeight(this.m_height);var c=$("#sidePanelScrollContainer"+this.m_uniqueId),d=0;c.length&&(d=$("#sidePanelScrollContainer"+this.m_uniqueId).scrollTop()),this.m_scrollContainer.css("max-height","");var e=null;if(this.m_usingUpdatedPanel){var f=this.m_sidePanelBodyContents[0].offsetHeight;e=this.m_sidePanelContents.height()-f}else{var g=this.m_sidePanelContents[0].offsetHeight;e=g-this.m_scrollContainer.height()}this.m_sidePanelObj.css({height:"auto"});var h=this.m_sidePanelObj.height()-e+1;this.m_scrollContainer.css("max-height",h+"px"),Math.round(h)===Math.round(this.m_scrollContainer.outerHeight())&&this.m_scrollContainer.addClass("sp-add-scroll"),c.length&&c.scrollTop(d),this.m_onExpandFunc&&this.m_onExpandFunc()},SidePanel.prototype.collapseSidePanel=function(){this.m_expCollapseIconObj.hasClass("sp-collapse")&&(this.m_parentContainer.css({position:"relative"}),this.m_sidePanelObj.css("height",this.m_height),this.m_scrollContainer.css("max-height","none"),this.m_scrollContainer.removeClass("sp-add-scroll"),this.m_usingUpdatedPanel?this.m_expCollapseIconObj.removeClass("sp-collapse").addClass("sp-expand"):(this.m_expCollapseIconObj.removeClass("sp-collapse"),this.m_expCollapseBarObj.addClass("hidden")),this.m_sidePanelObj.removeClass("sp-focusin"),this.showHideExpandBar(),this.setMinHeight(this.m_previousMinHeight),this.m_onCollapseFunc&&this.m_onCollapseFunc())},SidePanel.prototype.expandOption={NONE:null,EXPAND_DOWN:SidePanel.prototype.expandDownListeners},SidePanel.prototype.showPanel=function(){this.m_sidePanelObj.show()},SidePanel.prototype.hidePanel=function(){this.m_sidePanelObj.hide()},SidePanel.prototype.showCloseButton=function(){return this.m_closeButton?void this.m_closeButton.show():void logger.logError("Close button is not defined")},SidePanel.prototype.getCloseFunction=function(){return this.m_closeFunction},SidePanel.prototype.setCloseFunction=function(a){a instanceof Function&&(this.m_closeFunction=a)},CompSidePanel=function(a,b){this.setUniqueId(a),this.setContainerElementId(b),this.m_compBodyId=null,this.m_compBodyObj=null,this.m_removeOffsetFromHeight=0},CompSidePanel.prototype=new SidePanel,CompSidePanel.prototype.constructor=SidePanel,CompSidePanel.prototype.setOffsetHeight=function(a){return isNaN(a)?void logger.logError("Value passed to setOffsetHeight must be a number"):void(this.m_removeOffsetFromHeight=a)},CompSidePanel.prototype.setContents=function(a,b){if(this.m_sidePanelBodyContents?this.getApplyBodyContentsPadding()?this.m_sidePanelBodyContents.addClass("sp-body-contents-padding"):this.m_sidePanelBodyContents.removeClass("sp-body-contents-padding"):this.renderSidePanel(),"string"==typeof a&&a.length)this.m_sidePanelBodyContents.html(a);else{if(!(a instanceof jQuery))return void logger.logError("Parameter contents must be of type string or jQuery Object for the SidePanel.setContents function.");this.m_sidePanelBodyContents.empty(),this.m_sidePanelBodyContents.append(a)}if(this.m_compBodyId=b,this.m_scrollContainer=$("#sidePanelScrollContainer"+this.m_uniqueId),this.m_maxHeight||this.createDefaultMaxHeight(),this.m_expandOption){if(!b)return void logger.logError("Parameter componentBodyId must be specified for the CompSidePanel.setContents function.");this.m_compBodyObj=$("#"+b),this.setMaxHeight(this.m_maxHeight),this.m_expandOption.call(this)}else this.m_sidePanelObj.css("height","auto"),this.m_fullPanelScrollOn&&(this.setMaxHeight(this.m_maxHeight),this.fullPanelScroll())},CompSidePanel.prototype.expandDownListeners=function(){var a=this.m_uniqueId,b=this.m_compBodyObj,c=this,d="#sidePanelExpandCollapse"+a,e="#closeButton"+a,f="#cornerCloseButton"+a;this.m_expCollapseIconObj=$("#sidePanelExpandCollapseIcon"+a),this.m_expCollapseBarObj=$(d);var g=null;"#"+this.m_panelId;this.m_sidePanelObj.off(),b.off(),this.m_sidePanelObj.hasClass("sp-focusin")||this.showHideExpandBar(),this.m_usingUpdatedPanel||(this.m_sidePanelObj.on("mouseenter",function(){c.m_expCollapseBarObj.hasClass("hidden")&&(g=$("#sidePanelScrollContainer"+a),(this.scrollHeight>this.offsetHeight||g.hasClass("sp-add-scroll"))&&(c.m_expCollapseIconObj.addClass("sp-expand"),c.m_expCollapseIconObj.removeClass("sp-collapse"),c.m_expCollapseBarObj.removeClass("hidden")),c.m_mouseEnterFunc&&c.m_mouseEnterFunc())}),this.m_sidePanelObj.on("mouseleave",function(){c.m_expCollapseIconObj.hasClass("sp-expand")&&c.m_expCollapseBarObj.addClass("hidden"),c.m_mouseLeaveFunc&&c.m_mouseLeaveFunc()})),this.m_sidePanelObj.on("click",d,function(a){c.expandCollapseSidePanel()}),this.m_usingUpdatedPanel?this.m_sidePanelObj.on("click",f,function(a){return c.m_cornerCloseFunction?(c.collapseSidePanel(),c.m_sidePanelObj.hide(),void c.getCornerCloseFunction()()):void logger.logError("You must set the SidePanel.cornerCloseFunction.")}):this.m_sidePanelObj.on("click",e,function(a){return c.m_closeFunction?(c.collapseSidePanel(),c.m_sidePanelObj.hide(),void c.getCloseFunction()()):void logger.logError("You must set the SidePanel.closeFunction.")}),this.m_expCollapseIconObj.hasClass("sp-collapse")&&this.expandSidePanel()},CompSidePanel.prototype.expandSidePanel=function(){SidePanel.prototype.expandSidePanel.call(this,null)},CompSidePanel.prototype.collapseSidePanel=function(){SidePanel.prototype.collapseSidePanel.call(this,null)},CompSidePanel.prototype.createDefaultMaxHeight=function(){var a=$("#vwpBody"),b=70;if(a.length){var c=a.height()-b-this.m_removeOffsetFromHeight+"px";this.m_maxHeight=c}},CompSidePanel.prototype.resizePanel=function(a){return this.m_maxHeight=null,a&&this.m_regexHeightWidth.test(a)?this.m_maxHeight=a:this.m_maxHeight||this.createDefaultMaxHeight(),this.m_maxHeight?void(this.m_expandOption===this.expandOption.EXPAND_DOWN?(this.setMaxHeight(this.m_maxHeight),this.showHideExpandBar(),this.collapseSidePanel()):this.m_fullPanelScrollOn&&(this.setMaxHeight(this.m_maxHeight),this.fullPanelScroll())):void logger.logError("Parameter maxHeight must match the regex /^(d+((px)|%){1})$/ for the CompSidePanel.resizePanel function.")},CompSidePanel.prototype.expandOption={NONE:null,EXPAND_DOWN:CompSidePanel.prototype.expandDownListeners},StandardTemplates={},StandardTemplates.CLINICAL_LINK=['<span>${ ((EVENT_CD_DISP) ? MP_Util.CreateClinNoteLink(PERSON_ID+".0",ENCNTR_ID+".0",EVENT_ID+".0",EVENT_CD_DISP,VIEWER_TYPE,PARENT_EVENT_ID+".0") : "--") }</span>'].join(""),TableCellClickCallbackExtension.prototype=new TableExtension,TableCellClickCallbackExtension.prototype.constructor=TableExtension,TableCellClickCallbackExtension.prototype.setCellClickCallback=function(a){if("function"!=typeof a)throw new Error("In TableCellCallbackExtension, attempted to setCallback() with non function type");return this.callback=a,this},TableCellClickCallbackExtension.prototype.finalize=function(a){var b=this,c=a.getNamespace(),d=null,e="",f={};$("#"+c+"tableBody").on("mouseup",".table-cell",function(c){d=ComponentTableDataRetriever.getResultFromTable(a,this),e=ComponentTableDataRetriever.getColumnIdFromElement(a,this),f={COLUMN_ID:e,RESULT_DATA:d,SOURCE:"TableCellClickCallbackExtension:CELL_CLICK"},b.callback(c,f)})},TableColumn.prototype.getColumnDisplay=function(){return this.columnDisplay},TableColumn.prototype.setColumnDisplay=function(a){if("string"!=typeof a)throw new Error("Called setColumnDisplay on TableColumn with non string type for columnDisplay parameter");return this.columnDisplay=a,this},TableColumn.prototype.getColumnId=function(){return this.columnId},TableColumn.prototype.setColumnId=function(a){if("string"!=typeof a)throw new Error("Called setColumnId on TableColumn with non string type for columnId parameter");return this.columnId=a,this},TableColumn.prototype.getCustomClass=function(){return this.customClass},TableColumn.prototype.setCustomClass=function(a){if("string"!=typeof a)throw new Error("Called setCustomClass on TableColumn with non string type for customClass parameter");return this.customClass=a,this},TableColumn.prototype.getDefaultSort=function(){return this.defaultSort},TableColumn.prototype.setDefaultSort=function(a){return TableColumn.isValidSortDirection(a)&&(this.defaultSort=a),this},TableColumn.prototype.getPrimarySortField=function(){return this.primarySortField},TableColumn.prototype.setPrimarySortField=function(a){if("string"!=typeof a)throw new Error("Invalid data field parameter for column, must be a string");return this.primarySortField=a,this},TableColumn.prototype.addSecondarySortField=function(a,b){if("number"!=typeof b)throw new Error("Called addSecondarySortField on TableColumn with non number type for direction parameter");if(!TableColumn.isValidSortDirection(b))throw new Error("Called addSecondarySortField on TableColumn with invalid direction. Please use TableColumn.SORT.ASCENDING or TableColumn.SORT.DESCENDING");if("string"!=typeof a)throw new Error("Called addSecondarySortField on TableColumn with non string type for field parameter.");this.secondarySortFields.push({FIELD:a,DIRECTION:b})},TableColumn.prototype.getSecondarySortFields=function(){return this.secondarySortFields},TableColumn.prototype.getIsSortable=function(){return this.isSortable},TableColumn.prototype.setIsSortable=function(a){if("boolean"!=typeof a)throw new Error("Called setIsSortable on TableColumn with non boolean type for isSortable parameter");return this.isSortable=a,this};TableColumn.prototype.setColumnSortDirection=function(a){if("number"!=typeof a)throw new Error("Called setColumnSortDirection on TableColumn with non number type for sortDirection parameter");if(a<-1||a>1)throw new Error("Called setColumnSortDirection on TableColumn with invalid sortDirection: "+a+" the value must be 0, -1, or 1. It is recommended that you use TableColumn.SORT.NONE, TableColumn.SORT.ASCENDING, or TableColumn.SORT.DESCENDING");return this.sortDirection=a,this};TableColumn.prototype.getColumnSortDirection=function(){return this.sortDirection},TableColumn.prototype.getRenderTemplate=function(){return this.template},TableColumn.prototype.setRenderTemplate=function(a){return this.template=TemplateBuilder.buildTemplate(a),this},TableColumn.prototype.getWidth=function(){return this.width},TableColumn.prototype.setWidth=function(a){if("number"!=typeof a)throw new Error("Called setWidth on TableColumn with non number type for width parameter");if(a<0)throw new Error("Cannot call setWidth on TableColumn with a negative number");return this.width=a,this},TableColumn.isValidSortDirection=function(a){if("number"!=typeof a)throw new Error("Called isValidSortDirection on TableColumn with non number type for sortDirection parameter");return 1===Math.abs(a)},TableColumn.SORT={ASCENDING:-1,DESCENDING:1,NONE:0},TableExtension.prototype.finalize=function(a){throw new Error("Error, finalize method not implemented in a base TableExtension class")},TableGroup.prototype.bindData=function(a){for(var b=0;b<a.length;b++){var c=(new TableRow).setResultData(a[b]).setId("row"+b);this.rows.push(c),this.rowMap[c.getId()]=c}return this},TableGroup.prototype.clearData=function(){this.rows=[],this.rowMap={}},TableGroup.prototype.getCanCollapse=function(){return this.canCollapse},TableGroup.prototype.setCanCollapse=function(a){if("boolean"!=typeof a)throw new Error("Called setCanCollapse on TableGroup with non boolean type for parameter canCollapse");return this.canCollapse=a,this},TableGroup.prototype.getDisplay=function(){return this.display},TableGroup.prototype.setDisplay=function(a){if("string"!=typeof a)throw new Error("Called setDisplay on TableGroup with non string type for parameter display");return this.display=a,this},TableGroup.prototype.isExpanded=function(){return this.expanded},TableGroup.prototype.setIsExpanded=function(a){if("boolean"!=typeof a)throw new Error("Called setIsExpanded on TableGroup with non boolean type for isExpanded parameter");return this.expanded=a,this},TableGroup.prototype.getGroupId=function(){return this.groupId},TableGroup.prototype.setGroupId=function(a){if("string"!=typeof a&&"number"!=typeof a)throw new Error("Called setGroupId on TableGroup with non string type for groupId parameter");return this.groupId=a,this},TableGroup.prototype.getKey=function(){return this.key},TableGroup.prototype.setKey=function(a){if("string"!=typeof a&&"number"!=typeof a)throw new Error("Called setKey on TableGroup with non string/number type for parameter key");return this.key=a,this},TableGroup.prototype.addRow=function(a){if(!TableRow.prototype.isPrototypeOf(a))throw new Error("Called addRow on TableGroup with non TableRow type for row parameter");return this.rows.push(a),this.rowMap[a.getId()]=a,this},TableGroup.prototype.getRows=function(){return this.rows},TableGroup.prototype.getRowById=function(a){if(!this.hasRow(a))throw new Error("In getRowById on TableGroup, TableRow with id: "+a+" does not exist");return this.rowMap[a]},TableGroup.prototype.hasRow=function(a){return"undefined"!=typeof this.rowMap[a]&&null!==this.rowMap[a]},TableGroup.prototype.setRows=function(a){if(!Array.isArray(a))throw new Error("Called setRows on TableGroup with non Array type for rows parameter");return this.rows=a,this},TableGroup.prototype.getShowCount=function(){return this.showCount},TableGroup.prototype.setShowCount=function(a){if("boolean"!=typeof a)throw new Error("Called setShowCount on TableGroup with non boolean type for showCount parameter");return this.showCount=a,this},TableGroup.prototype.getValue=function(){return this.groupValue},TableGroup.prototype.setValue=function(a){if("string"!=typeof a&&"number"!=typeof a)throw new Error("Called setValue on TableGroup with non string type for parameter value");return this.groupValue=a,this},TableGroup.prototype.getHideHeader=function(){return this.hideHeader},TableGroup.prototype.setHideHeader=function(a){if("boolean"!=typeof a)throw new Error("Called setShowHeader on TableGroup with non-boolean type for showHeader parameter value");return this.hideHeader=a,this},TableGroup.parseGroupId=function(a){return a.split(":")[1]},TableGroupToggleCallbackExtension.prototype=new TableExtension,TableGroupToggleCallbackExtension.prototype.constructor=TableExtension,TableGroupToggleCallbackExtension.prototype.setGroupToggleCallback=function(a){if("function"!=typeof a)throw new Error("Called setGroupToggleCallback on TableGroupToggleCallbackExtension with non function type for callback parameter");return this.callback=a,this},TableGroupToggleCallbackExtension.prototype.finalize=function(a){var b=this,c=a.getNamespace(),d={};$("#"+c+"tableBody").on("click",".sub-sec-hd",function(c){var e=a.getGroupById(TableGroup.parseGroupId($(this).attr("id")));d={GROUP_DATA:{KEY:e.getKey(),VALUE:e.getValue(),EXPANDED:e.isExpanded(),GROUP_ID:e.getGroupId()},SOURCE:"TableGroupToggleCallbackExtension:GROUP_CLICK"},b.callback(c,d)})},HoverExtension.prototype=new TableExtension,HoverExtension.prototype.constructor=TableExtension,HoverExtension.prototype.getHoverClass=function(){return this.hoverClass},HoverExtension.prototype.setHoverClass=function(a){if("string"!=typeof a)throw new Error("Called setHoverClass on HoverExtension with non string type for hoverClass parameter");return this.hoverClass=a,this},HoverExtension.prototype.setOnHoverCallback=function(a){if("function"!=typeof a)throw new Error("Called setOnHoverCallback on HoverExtension with non function type for onHover parameter");return this.onHover=a,this},HoverExtension.prototype.setOnLeaveCallback=function(a){if("function"!=typeof a)throw new Error("Called setOnLeaveCallback on HoverExtension with non function type for onLeave parameter");return this.onLeave=a,this},HoverExtension.prototype.getTarget=function(){return this.target},HoverExtension.prototype.setTarget=function(a){if("string"!=typeof a)throw new Error("Called setTarget on HoverExtension with non string type for target parameter");return this.target=a,this},HoverExtension.prototype.getTooltip=function(){return this.tooltip},HoverExtension.prototype.setTooltip=function(a){if(!MPageTooltip.prototype.isPrototypeOf(a))throw new Error("Called setTooltip on HoverExtension with non MPageTooltip type for tooltip parameter");return this.tooltip=a,this},HoverExtension.prototype.finalize=function(a){var b=this,c="#"+a.getNamespace()+"tableBody",d={};$(c).on("mouseenter",this.getTarget(),function(c){var e=this,f=$(this).attr("id");""!==b.getHoverClass()&&$(this).addClass(b.getHoverClass()),d[f]||(d[f]={}),b.onHover(c),d[f].TIMEOUT=setTimeout(function(){b.showHover(c,a,e)},500)}),$(c).on("mouseleave",this.getTarget(),function(a){$(this).removeClass("mpage-tooltip-hover"),d[$(this).attr("id")]&&d[$(this).attr("id")].TIMEOUT&&clearTimeout(d[$(this).attr("id")].TIMEOUT),b.onLeave(a)})},HoverExtension.prototype.showHover=function(a,b,c){throw new Error("showHover has not been overwritten for a HoverExtension base class")},TableRowHoverExtension.prototype=new HoverExtension,TableRowHoverExtension.prototype.constructor=HoverExtension,TableRowHoverExtension.prototype.getHoverRenderer=function(){return this.hoverRenderer},TableRowHoverExtension.prototype.setHoverRenderer=function(a){return this.hoverRenderer=HoverRenderFactory.getHoverRenderer(a),this},TableRowHoverExtension.prototype.showHover=function(a,b,c){if(this.hoverRenderer){var d={};d.RESULT_DATA=ComponentTableDataRetriever.getResultFromTable(b,c),d.SOURCE="TableRowHoverExtension:ROW_HOVER";var e=this.hoverRenderer.render(d);if(e){var f=this.getTooltip();f.setX(a.pageX).setY(a.pageY).setAnchor(c).setContent(this.hoverRenderer.render(d)),f.show()}}},TableCellHoverExtension.prototype=new HoverExtension,TableCellHoverExtension.prototype.constructor=HoverExtension,TableCellHoverExtension.prototype.addHoverForColumn=function(a,b){if(!TableColumn.prototype.isPrototypeOf(a))throw new Error("Called addTemplateForColumn on TableCellHoverExtension with non TableColumn type for column parameter");this.templateMap[a.getColumnId()]=HoverRenderFactory.getHoverRenderer(b)},TableCellHoverExtension.prototype.showHover=function(a,b,c){var d={},e=ComponentTableDataRetriever.getColumnIdFromElement(b,c),f=this.templateMap[e];if(f){d.RESULT_DATA=ComponentTableDataRetriever.getResultFromTable(b,c),d.COLUMN_ID=e,d.SOURCE="TableCellHoverExtension:CELL_HOVER",d.EVENT=a;var g=f.render(d);if(g){var h=this.getTooltip();h.setX(a.pageX).setY(a.pageY).setAnchor(c).setContent(g),h.show()}}},HoverRenderFactory.getHoverRenderer=function(a){var b=null;if("string"==typeof a)b=new StringTemplateRenderer;else{if("function"!=typeof a)throw new Error("Called getHoverRenderer on HoverRenderFactory with invalid type for renderObject, use string or function");b=new FunctionRenderer}return b.init(a),b},HoverRenderer.prototype.init=function(a){throw new Error("HoverRenderer init method not implemented")},HoverRenderer.prototype.render=function(a){throw new Error("HoverRenderer render method not implemented");
},StringTemplateRenderer.prototype=new HoverRenderer,StringTemplateRenderer.prototype.constructor=HoverRenderer,StringTemplateRenderer.prototype.getTemplate=function(){return this.template},StringTemplateRenderer.prototype.setTemplate=function(a){return this.template=a,this},StringTemplateRenderer.prototype.init=function(a){return this.setTemplate(TemplateBuilder.buildTemplate(a))},StringTemplateRenderer.prototype.render=function(a){return this.template.render(a)},FunctionRenderer.prototype=new HoverRenderer,FunctionRenderer.prototype.constructor=HoverRenderer,FunctionRenderer.prototype.getRenderFunction=function(){return this.renderFunction},FunctionRenderer.prototype.setRenderFunction=function(a){if("function"!=typeof a)throw new Error("Called setRenderFunction on FunctionRenderer with non function type for renderFunction parameter");return this.renderFunction=a,this},FunctionRenderer.prototype.init=function(a){return this.setRenderFunction(a)},FunctionRenderer.prototype.render=function(a){return this.renderFunction(a)},TableRow.prototype.setResultData=function(a){if("object"!=typeof a)throw new Error("Called setResultData on TableRow with non object type for the resultData parameter");return this.resultData=a,this},TableRow.prototype.getResultData=function(){return this.resultData},TableRow.prototype.getId=function(){return this.rowId},TableRow.prototype.setId=function(a){return this.rowId=a,this},TableRow.prototype.getTableCells=function(){return this.tableCells},TableRow.prototype.setTableCells=function(a){if(!Array.isArray(a))throw new Error("Called setTableCells on TableRow with type other than Array");return this.tableCells=a,this},TableRow.prototype.addTableCell=function(a,b){if("string"!=typeof a)throw new Error("Called addTableCell on TableRow and passed non string type for columnId parameter");if(!TableCell.prototype.isPrototypeOf(b))throw new Error("Called addTableCell on TableRow and passed non TableCell type for tableCell parameter");this.tableCells[a]=b},TableRow.prototype.getTableCellInColumn=function(a){if("string"!=typeof a)throw new Error("Called getTableCellInColumn on TableRow and passed non string type for columnId parameter");if("undefined"==typeof this.tableCells[a]||null===this.tableCells[a])throw new Error("In method getTableCellInColumn, the columnId: "+a+" returned undefined or null");return this.tableCells[a]},TableRow.prototype.setRowAttributeHash=function(a,b){if("string"!=typeof a||"string"!=typeof b)throw new Error("Called setRowAttributeHash on TableRow and passed non string type for attributeName or attributeValue parameter");return this.rowAttributeHash.attrName=a,this.rowAttributeHash.attrValue=b,this},TableRow.prototype.getRowAttributeHash=function(){return this.rowAttributeHash},Template.prototype.setId=function(a){this.id=a},Template.prototype.getId=function(){return this.id},Template.prototype.setTemplateFunction=function(a){this.templateFunction=a},Template.prototype.getTemplateFunction=function(){return this.templateFunction},Template.prototype.render=function(a){a=a||{};try{return this.templateFunction(a)}catch(a){throw new Error("There was an error rendering the template: "+a.message)}},TemplateBuilder.buildTemplate=function(a){if("string"!=typeof a)throw new Error("Called buildTemplate on TemplateBuilder with non string type for template parameter");a=a.replace(/"/g,'\\"');var b=new Template,c=new Function("data",'var params=[];params.push("'+a.split("${").join('");params.push(data.').split("}").join(');params.push("')+'");return params.join("");');return b.setTemplateFunction(c),b},TemplateBuilder.buildAndCacheTemplate=function(a,b){var c=TemplateBuilder.buildTemplate(b);return TemplateCache.cacheTemplate(a,c),c},TemplateCache.templates={},TemplateCache.loadStandardTemplates=function(){for(var a in StandardTemplates){var b=StandardTemplates[a];b&&"string"==typeof b&&TemplateCache.cacheTemplate(a,TemplateBuilder.buildTemplate(b))}},TemplateCache.cacheTemplate=function(a,b){if("string"!=typeof a)throw new Error("Called cacheTemplate on TemplateCache with non string type for id parameter");if(!Template.prototype.isPrototypeOf(b))throw new Error("Called cacheTemplate on TemplateCache with non Template type for template parameter");if(TemplateCache.hasTemplate(a))throw new Error("Called cacheTemplate on TemplateCache. Template with id: "+a+" already exists. Please use a different identifier.");TemplateCache.templates[a]=b},TemplateCache.getTemplate=function(a){if(!TemplateCache.hasTemplate(a))throw new Error("Template with id: "+a+" does not exist");return TemplateCache.templates[a]},TemplateCache.hasTemplate=function(a){return"undefined"!=typeof TemplateCache.templates[a]&&null!==TemplateCache.templates[a]},/*! URI.js v1.18.0 http://medialize.github.io/URI.js/ */
function(a,b){"object"==typeof exports?module.exports=b(require("./punycode"),require("./IPv6"),require("./SecondLevelDomains")):"function"==typeof define&&define.amd?define(["./punycode","./IPv6","./SecondLevelDomains"],b):a.URI=b(a.punycode,a.IPv6,a.SecondLevelDomains,a)}(this,function(a,b,c,d){function e(a,b){var c=1<=arguments.length,d=2<=arguments.length;if(!(this instanceof e))return c?d?new e(a,b):new e(a):new e;if(void 0===a){if(c)throw new TypeError("undefined is not a valid argument for URI");a="undefined"!=typeof location?location.href+"":""}return this.href(a),void 0!==b?this.absoluteTo(b):this}function f(a){return a.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function g(a){return void 0===a?"Undefined":String(Object.prototype.toString.call(a)).slice(8,-1)}function h(a){return"Array"===g(a)}function i(a,b){var c,d,e={};if("RegExp"===g(b))e=null;else if(h(b))for(c=0,d=b.length;c<d;c++)e[b[c]]=!0;else e[b]=!0;for(c=0,d=a.length;c<d;c++)(e&&void 0!==e[a[c]]||!e&&b.test(a[c]))&&(a.splice(c,1),d--,c--);return a}function j(a,b){var c,d;if(h(b)){for(c=0,d=b.length;c<d;c++)if(!j(a,b[c]))return!1;return!0}var e=g(b);for(c=0,d=a.length;c<d;c++)if("RegExp"===e){if("string"==typeof a[c]&&a[c].match(b))return!0}else if(a[c]===b)return!0;return!1}function k(a,b){if(!h(a)||!h(b)||a.length!==b.length)return!1;a.sort(),b.sort();for(var c=0,d=a.length;c<d;c++)if(a[c]!==b[c])return!1;return!0}function l(a){return a.replace(/^\/+|\/+$/g,"")}function m(a){return escape(a)}function n(a){return encodeURIComponent(a).replace(/[!'()*]/g,m).replace(/\*/g,"%2A")}function o(a){return function(b,c){return void 0===b?this._parts[a]||"":(this._parts[a]=b||null,this.build(!c),this)}}function p(a,b){return function(c,d){return void 0===c?this._parts[a]||"":(null!==c&&(c+="",c.charAt(0)===b&&(c=c.substring(1))),this._parts[a]=c,this.build(!d),this)}}var q=d&&d.URI;e.version="1.18.0";var r=e.prototype,s=Object.prototype.hasOwnProperty;e._parts=function(){return{protocol:null,username:null,password:null,hostname:null,urn:null,port:null,path:null,query:null,fragment:null,duplicateQueryParameters:e.duplicateQueryParameters,escapeQuerySpace:e.escapeQuerySpace}},e.duplicateQueryParameters=!1,e.escapeQuerySpace=!0,e.protocol_expression=/^[a-z][a-z0-9.+-]*$/i,e.idn_expression=/[^a-z0-9\.-]/i,e.punycode_expression=/(xn--)/i,e.ip4_expression=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,e.ip6_expression=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,e.find_uri_expression=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?\u00ab\u00bb\u201c\u201d\u2018\u2019]))/gi,e.findUri={start:/\b(?:([a-z][a-z0-9.+-]*:\/\/)|www\.)/gi,end:/[\s\r\n]|$/,trim:/[`!()\[\]{};:'".,<>?\u00ab\u00bb\u201c\u201d\u201e\u2018\u2019]+$/},e.defaultPorts={http:"80",https:"443",ftp:"21",gopher:"70",ws:"80",wss:"443"},e.invalid_hostname_characters=/[^a-zA-Z0-9\.-]/,e.domAttributes={a:"href",blockquote:"cite",link:"href",base:"href",script:"src",form:"action",img:"src",area:"href",iframe:"src",embed:"src",source:"src",track:"src",input:"src",audio:"src",video:"src"},e.getDomAttribute=function(a){if(a&&a.nodeName){var b=a.nodeName.toLowerCase();return"input"===b&&"image"!==a.type?void 0:e.domAttributes[b]}},e.encode=n,e.decode=decodeURIComponent,e.iso8859=function(){e.encode=escape,e.decode=unescape},e.unicode=function(){e.encode=n,e.decode=decodeURIComponent},e.characters={pathname:{encode:{expression:/%(24|26|2B|2C|3B|3D|3A|40)/gi,map:{"%24":"$","%26":"&","%2B":"+","%2C":",","%3B":";","%3D":"=","%3A":":","%40":"@"}},decode:{expression:/[\/\?#]/g,map:{"/":"%2F","?":"%3F","#":"%23"}}},reserved:{encode:{expression:/%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/gi,map:{"%3A":":","%2F":"/","%3F":"?","%23":"#","%5B":"[","%5D":"]","%40":"@","%21":"!","%24":"$","%26":"&","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"="}}},urnpath:{encode:{expression:/%(21|24|27|28|29|2A|2B|2C|3B|3D|40)/gi,map:{"%21":"!","%24":"$","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"=","%40":"@"}},decode:{expression:/[\/\?#:]/g,map:{"/":"%2F","?":"%3F","#":"%23",":":"%3A"}}}},e.encodeQuery=function(a,b){var c=e.encode(a+"");return void 0===b&&(b=e.escapeQuerySpace),b?c.replace(/%20/g,"+"):c},e.decodeQuery=function(a,b){a+="",void 0===b&&(b=e.escapeQuerySpace);try{return e.decode(b?a.replace(/\+/g,"%20"):a)}catch(b){return a}};var t,u={encode:"encode",decode:"decode"},v=function(a,b){return function(c){try{return e[b](c+"").replace(e.characters[a][b].expression,function(c){return e.characters[a][b].map[c]})}catch(a){return c}}};for(t in u)e[t+"PathSegment"]=v("pathname",u[t]),e[t+"UrnPathSegment"]=v("urnpath",u[t]);u=function(a,b,c){return function(d){var f;f=c?function(a){return e[b](e[c](a))}:e[b],d=(d+"").split(a);for(var g=0,h=d.length;g<h;g++)d[g]=f(d[g]);return d.join(a)}},e.decodePath=u("/","decodePathSegment"),e.decodeUrnPath=u(":","decodeUrnPathSegment"),e.recodePath=u("/","encodePathSegment","decode"),e.recodeUrnPath=u(":","encodeUrnPathSegment","decode"),e.encodeReserved=v("reserved","encode"),e.parse=function(a,b){var c;return b||(b={}),c=a.indexOf("#"),-1<c&&(b.fragment=a.substring(c+1)||null,a=a.substring(0,c)),c=a.indexOf("?"),-1<c&&(b.query=a.substring(c+1)||null,a=a.substring(0,c)),"//"===a.substring(0,2)?(b.protocol=null,a=a.substring(2),a=e.parseAuthority(a,b)):(c=a.indexOf(":"),-1<c&&(b.protocol=a.substring(0,c)||null,b.protocol&&!b.protocol.match(e.protocol_expression)?b.protocol=void 0:"//"===a.substring(c+1,c+3)?(a=a.substring(c+3),a=e.parseAuthority(a,b)):(a=a.substring(c+1),b.urn=!0))),b.path=a,b},e.parseHost=function(a,b){a=a.replace(/\\/g,"/");var c,d=a.indexOf("/");if(-1===d&&(d=a.length),"["===a.charAt(0))c=a.indexOf("]"),b.hostname=a.substring(1,c)||null,b.port=a.substring(c+2,d)||null,"/"===b.port&&(b.port=null);else{var e=a.indexOf(":");c=a.indexOf("/"),e=a.indexOf(":",e+1),-1!==e&&(-1===c||e<c)?(b.hostname=a.substring(0,d)||null,b.port=null):(c=a.substring(0,d).split(":"),b.hostname=c[0]||null,b.port=c[1]||null)}return b.hostname&&"/"!==a.substring(d).charAt(0)&&(d++,a="/"+a),a.substring(d)||"/"},e.parseAuthority=function(a,b){return a=e.parseUserinfo(a,b),e.parseHost(a,b)},e.parseUserinfo=function(a,b){var c=a.indexOf("/"),d=a.lastIndexOf("@",-1<c?c:a.length-1);return-1<d&&(-1===c||d<c)?(c=a.substring(0,d).split(":"),b.username=c[0]?e.decode(c[0]):null,c.shift(),b.password=c[0]?e.decode(c.join(":")):null,a=a.substring(d+1)):(b.username=null,b.password=null),a},e.parseQuery=function(a,b){if(!a)return{};if(a=a.replace(/&+/g,"&").replace(/^\?*&*|&+$/g,""),!a)return{};for(var c,d,f={},g=a.split("&"),h=g.length,i=0;i<h;i++)c=g[i].split("="),d=e.decodeQuery(c.shift(),b),c=c.length?e.decodeQuery(c.join("="),b):null,s.call(f,d)?("string"!=typeof f[d]&&null!==f[d]||(f[d]=[f[d]]),f[d].push(c)):f[d]=c;return f},e.build=function(a){var b="";return a.protocol&&(b+=a.protocol+":"),a.urn||!b&&!a.hostname||(b+="//"),b+=e.buildAuthority(a)||"","string"==typeof a.path&&("/"!==a.path.charAt(0)&&"string"==typeof a.hostname&&(b+="/"),b+=a.path),"string"==typeof a.query&&a.query&&(b+="?"+a.query),"string"==typeof a.fragment&&a.fragment&&(b+="#"+a.fragment),b},e.buildHost=function(a){var b="";return a.hostname?(b=e.ip6_expression.test(a.hostname)?b+("["+a.hostname+"]"):b+a.hostname,a.port&&(b+=":"+a.port),b):""},e.buildAuthority=function(a){return e.buildUserinfo(a)+e.buildHost(a)},e.buildUserinfo=function(a){var b="";return a.username&&(b+=e.encode(a.username)),a.password&&(b+=":"+e.encode(a.password)),b&&(b+="@"),b},e.buildQuery=function(a,b,c){var d,f,g,i,j="";for(f in a)if(s.call(a,f)&&f)if(h(a[f]))for(d={},g=0,i=a[f].length;g<i;g++)void 0!==a[f][g]&&void 0===d[a[f][g]+""]&&(j+="&"+e.buildQueryParameter(f,a[f][g],c),!0!==b&&(d[a[f][g]+""]=!0));else void 0!==a[f]&&(j+="&"+e.buildQueryParameter(f,a[f],c));return j.substring(1)},e.buildQueryParameter=function(a,b,c){return e.encodeQuery(a,c)+(null!==b?"="+e.encodeQuery(b,c):"")},e.addQuery=function(a,b,c){if("object"==typeof b)for(var d in b)s.call(b,d)&&e.addQuery(a,d,b[d]);else{if("string"!=typeof b)throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");void 0===a[b]?a[b]=c:("string"==typeof a[b]&&(a[b]=[a[b]]),h(c)||(c=[c]),a[b]=(a[b]||[]).concat(c))}},e.removeQuery=function(a,b,c){var d;if(h(b))for(c=0,d=b.length;c<d;c++)a[b[c]]=void 0;else if("RegExp"===g(b))for(d in a)b.test(d)&&(a[d]=void 0);else if("object"==typeof b)for(d in b)s.call(b,d)&&e.removeQuery(a,d,b[d]);else{if("string"!=typeof b)throw new TypeError("URI.removeQuery() accepts an object, string, RegExp as the first parameter");void 0!==c?"RegExp"===g(c)?!h(a[b])&&c.test(a[b])?a[b]=void 0:a[b]=i(a[b],c):a[b]!==String(c)||h(c)&&1!==c.length?h(a[b])&&(a[b]=i(a[b],c)):a[b]=void 0:a[b]=void 0}},e.hasQuery=function(a,b,c,d){switch(g(b)){case"String":break;case"RegExp":for(var f in a)if(s.call(a,f)&&b.test(f)&&(void 0===c||e.hasQuery(a,f,c)))return!0;return!1;case"Object":for(var i in b)if(s.call(b,i)&&!e.hasQuery(a,i,b[i]))return!1;return!0;default:throw new TypeError("URI.hasQuery() accepts a string, regular expression or object as the name parameter")}switch(g(c)){case"Undefined":return b in a;case"Boolean":return a=!(h(a[b])?!a[b].length:!a[b]),c===a;case"Function":return!!c(a[b],b,a);case"Array":return!!h(a[b])&&(d?j:k)(a[b],c);case"RegExp":return h(a[b])?!!d&&j(a[b],c):!(!a[b]||!a[b].match(c));case"Number":c=String(c);case"String":return h(a[b])?!!d&&j(a[b],c):a[b]===c;default:throw new TypeError("URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter")}},e.joinPaths=function(){for(var a=[],b=[],c=0,d=0;d<arguments.length;d++){var f=new e(arguments[d]);a.push(f);for(var f=f.segment(),g=0;g<f.length;g++)"string"==typeof f[g]&&b.push(f[g]),f[g]&&c++}return b.length&&c?(b=new e("").segment(b),""!==a[0].path()&&"/"!==a[0].path().slice(0,1)||b.path("/"+b.path()),b.normalize()):new e("")},e.commonPath=function(a,b){var c,d=Math.min(a.length,b.length);for(c=0;c<d;c++)if(a.charAt(c)!==b.charAt(c)){c--;break}return 1>c?a.charAt(0)===b.charAt(0)&&"/"===a.charAt(0)?"/":"":("/"===a.charAt(c)&&"/"===b.charAt(c)||(c=a.substring(0,c).lastIndexOf("/")),a.substring(0,c+1))},e.withinString=function(a,b,c){c||(c={});var d=c.start||e.findUri.start,f=c.end||e.findUri.end,g=c.trim||e.findUri.trim,h=/[a-z0-9-]=["']?$/i;for(d.lastIndex=0;;){var i=d.exec(a);if(!i)break;if(i=i.index,c.ignoreHtml){var j=a.slice(Math.max(i-3,0),i);if(j&&h.test(j))continue}var j=i+a.slice(i).search(f),k=a.slice(i,j).replace(g,"");c.ignore&&c.ignore.test(k)||(j=i+k.length,k=b(k,i,j,a),a=a.slice(0,i)+k+a.slice(j),d.lastIndex=i+k.length)}return d.lastIndex=0,a},e.ensureValidHostname=function(b){if(b.match(e.invalid_hostname_characters)){if(!a)throw new TypeError('Hostname "'+b+'" contains characters other than [A-Z0-9.-] and Punycode.js is not available');if(a.toASCII(b).match(e.invalid_hostname_characters))throw new TypeError('Hostname "'+b+'" contains characters other than [A-Z0-9.-]')}},e.noConflict=function(a){return a?(a={URI:this.noConflict()},d.URITemplate&&"function"==typeof d.URITemplate.noConflict&&(a.URITemplate=d.URITemplate.noConflict()),d.IPv6&&"function"==typeof d.IPv6.noConflict&&(a.IPv6=d.IPv6.noConflict()),d.SecondLevelDomains&&"function"==typeof d.SecondLevelDomains.noConflict&&(a.SecondLevelDomains=d.SecondLevelDomains.noConflict()),a):(d.URI===this&&(d.URI=q),this)},r.build=function(a){return!0===a?this._deferred_build=!0:(void 0===a||this._deferred_build)&&(this._string=e.build(this._parts),this._deferred_build=!1),this},r.clone=function(){return new e(this)},r.valueOf=r.toString=function(){return this.build(!1)._string},r.protocol=o("protocol"),r.username=o("username"),r.password=o("password"),r.hostname=o("hostname"),r.port=o("port"),r.query=p("query","?"),r.fragment=p("fragment","#"),r.search=function(a,b){var c=this.query(a,b);return"string"==typeof c&&c.length?"?"+c:c},r.hash=function(a,b){var c=this.fragment(a,b);return"string"==typeof c&&c.length?"#"+c:c},r.pathname=function(a,b){if(void 0===a||!0===a){var c=this._parts.path||(this._parts.hostname?"/":"");return a?(this._parts.urn?e.decodeUrnPath:e.decodePath)(c):c}return this._parts.path=this._parts.urn?a?e.recodeUrnPath(a):"":a?e.recodePath(a):"/",this.build(!b),this},r.path=r.pathname,r.href=function(a,b){var c;if(void 0===a)return this.toString();this._string="",this._parts=e._parts();var d=a instanceof e,f="object"==typeof a&&(a.hostname||a.path||a.pathname);if(a.nodeName&&(f=e.getDomAttribute(a),a=a[f]||"",f=!1),!d&&f&&void 0!==a.pathname&&(a=a.toString()),"string"==typeof a||a instanceof String)this._parts=e.parse(String(a),this._parts);else{if(!d&&!f)throw new TypeError("invalid input");for(c in d=d?a._parts:a)s.call(this._parts,c)&&(this._parts[c]=d[c])}return this.build(!b),this},r.is=function(a){var b=!1,d=!1,f=!1,g=!1,h=!1,i=!1,j=!1,k=!this._parts.urn;switch(this._parts.hostname&&(k=!1,d=e.ip4_expression.test(this._parts.hostname),f=e.ip6_expression.test(this._parts.hostname),b=d||f,h=(g=!b)&&c&&c.has(this._parts.hostname),i=g&&e.idn_expression.test(this._parts.hostname),j=g&&e.punycode_expression.test(this._parts.hostname)),a.toLowerCase()){case"relative":return k;case"absolute":return!k;case"domain":case"name":return g;case"sld":return h;case"ip":return b;case"ip4":case"ipv4":case"inet4":return d;case"ip6":case"ipv6":case"inet6":return f;case"idn":return i;case"url":return!this._parts.urn;case"urn":return!!this._parts.urn;case"punycode":return j}return null};var w=r.protocol,x=r.port,y=r.hostname;r.protocol=function(a,b){if(void 0!==a&&a&&(a=a.replace(/:(\/\/)?$/,""),!a.match(e.protocol_expression)))throw new TypeError('Protocol "'+a+"\" contains characters other than [A-Z0-9.+-] or doesn't start with [A-Z]");return w.call(this,a,b)},r.scheme=r.protocol,r.port=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0!==a&&(0===a&&(a=null),a&&(a+="",":"===a.charAt(0)&&(a=a.substring(1)),a.match(/[^0-9]/))))throw new TypeError('Port "'+a+'" contains characters other than [0-9]');return x.call(this,a,b)},r.hostname=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0!==a){var c={};if("/"!==e.parseHost(a,c))throw new TypeError('Hostname "'+a+'" contains characters other than [A-Z0-9.-]');a=c.hostname}return y.call(this,a,b)},r.origin=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0===a){var c=this.protocol();return this.authority()?(c?c+"://":"")+this.authority():""}return c=e(a),this.protocol(c.protocol()).authority(c.authority()).build(!b),this},r.host=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0===a)return this._parts.hostname?e.buildHost(this._parts):"";if("/"!==e.parseHost(a,this._parts))throw new TypeError('Hostname "'+a+'" contains characters other than [A-Z0-9.-]');return this.build(!b),this},r.authority=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0===a)return this._parts.hostname?e.buildAuthority(this._parts):"";if("/"!==e.parseAuthority(a,this._parts))throw new TypeError('Hostname "'+a+'" contains characters other than [A-Z0-9.-]');return this.build(!b),this},r.userinfo=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0===a){var c=e.buildUserinfo(this._parts);return c?c.substring(0,c.length-1):c}return"@"!==a[a.length-1]&&(a+="@"),e.parseUserinfo(a,this._parts),this.build(!b),this},r.resource=function(a,b){var c;return void 0===a?this.path()+this.search()+this.hash():(c=e.parse(a),this._parts.path=c.path,this._parts.query=c.query,this._parts.fragment=c.fragment,this.build(!b),this)},r.subdomain=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0===a){if(!this._parts.hostname||this.is("IP"))return"";var c=this._parts.hostname.length-this.domain().length-1;return this._parts.hostname.substring(0,c)||""}return c=this._parts.hostname.length-this.domain().length,c=this._parts.hostname.substring(0,c),c=new RegExp("^"+f(c)),a&&"."!==a.charAt(a.length-1)&&(a+="."),a&&e.ensureValidHostname(a),this._parts.hostname=this._parts.hostname.replace(c,a),this.build(!b),this},r.domain=function(a,b){if(this._parts.urn)return void 0===a?"":this;if("boolean"==typeof a&&(b=a,a=void 0),void 0===a){if(!this._parts.hostname||this.is("IP"))return"";var c=this._parts.hostname.match(/\./g);return c&&2>c.length?this._parts.hostname:(c=this._parts.hostname.length-this.tld(b).length-1,c=this._parts.hostname.lastIndexOf(".",c-1)+1,this._parts.hostname.substring(c)||"")}if(!a)throw new TypeError("cannot set domain empty");return e.ensureValidHostname(a),!this._parts.hostname||this.is("IP")?this._parts.hostname=a:(c=new RegExp(f(this.domain())+"$"),this._parts.hostname=this._parts.hostname.replace(c,a)),this.build(!b),this},r.tld=function(a,b){if(this._parts.urn)return void 0===a?"":this;if("boolean"==typeof a&&(b=a,a=void 0),void 0===a){if(!this._parts.hostname||this.is("IP"))return"";var d=this._parts.hostname.lastIndexOf("."),d=this._parts.hostname.substring(d+1);return!0!==b&&c&&c.list[d.toLowerCase()]?c.get(this._parts.hostname)||d:d}if(!a)throw new TypeError("cannot set TLD empty");if(a.match(/[^a-zA-Z0-9-]/)){if(!c||!c.is(a))throw new TypeError('TLD "'+a+'" contains characters other than [A-Z0-9]');d=new RegExp(f(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(d,a)}else{if(!this._parts.hostname||this.is("IP"))throw new ReferenceError("cannot set TLD on non-domain host");d=new RegExp(f(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(d,a)}return this.build(!b),this},r.directory=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0===a||!0===a){if(!this._parts.path&&!this._parts.hostname)return"";if("/"===this._parts.path)return"/";var c=this._parts.path.length-this.filename().length-1,c=this._parts.path.substring(0,c)||(this._parts.hostname?"/":"");return a?e.decodePath(c):c}return c=this._parts.path.length-this.filename().length,c=this._parts.path.substring(0,c),c=new RegExp("^"+f(c)),this.is("relative")||(a||(a="/"),"/"!==a.charAt(0)&&(a="/"+a)),a&&"/"!==a.charAt(a.length-1)&&(a+="/"),a=e.recodePath(a),this._parts.path=this._parts.path.replace(c,a),this.build(!b),this},r.filename=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0===a||!0===a){if(!this._parts.path||"/"===this._parts.path)return"";var c=this._parts.path.lastIndexOf("/"),c=this._parts.path.substring(c+1);return a?e.decodePathSegment(c):c}c=!1,"/"===a.charAt(0)&&(a=a.substring(1)),a.match(/\.?\//)&&(c=!0);var d=new RegExp(f(this.filename())+"$");return a=e.recodePath(a),this._parts.path=this._parts.path.replace(d,a),c?this.normalizePath(b):this.build(!b),this},r.suffix=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0===a||!0===a){if(!this._parts.path||"/"===this._parts.path)return"";var c=this.filename(),d=c.lastIndexOf(".");return-1===d?"":(c=c.substring(d+1),c=/^[a-z0-9%]+$/i.test(c)?c:"",a?e.decodePathSegment(c):c)}if("."===a.charAt(0)&&(a=a.substring(1)),c=this.suffix())d=a?new RegExp(f(c)+"$"):new RegExp(f("."+c)+"$");else{if(!a)return this;this._parts.path+="."+e.recodePath(a)}return d&&(a=e.recodePath(a),this._parts.path=this._parts.path.replace(d,a)),this.build(!b),this},r.segment=function(a,b,c){var d=this._parts.urn?":":"/",e=this.path(),f="/"===e.substring(0,1),e=e.split(d);if(void 0!==a&&"number"!=typeof a&&(c=b,b=a,a=void 0),void 0!==a&&"number"!=typeof a)throw Error('Bad segment "'+a+'", must be 0-based integer');if(f&&e.shift(),0>a&&(a=Math.max(e.length+a,0)),void 0===b)return void 0===a?e:e[a];if(null===a||void 0===e[a])if(h(b)){e=[],a=0;for(var g=b.length;a<g;a++)(b[a].length||e.length&&e[e.length-1].length)&&(e.length&&!e[e.length-1].length&&e.pop(),e.push(l(b[a])))}else(b||"string"==typeof b)&&(b=l(b),""===e[e.length-1]?e[e.length-1]=b:e.push(b));else b?e[a]=l(b):e.splice(a,1);return f&&e.unshift(""),this.path(e.join(d),c)},r.segmentCoded=function(a,b,c){var d,f;if("number"!=typeof a&&(c=b,b=a,a=void 0),void 0===b){if(a=this.segment(a,b,c),h(a))for(d=0,f=a.length;d<f;d++)a[d]=e.decode(a[d]);else a=void 0!==a?e.decode(a):void 0;return a}if(h(b))for(d=0,f=b.length;d<f;d++)b[d]=e.encode(b[d]);else b="string"==typeof b||b instanceof String?e.encode(b):b;return this.segment(a,b,c)};var z=r.query;return r.query=function(a,b){if(!0===a)return e.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("function"==typeof a){var c=e.parseQuery(this._parts.query,this._parts.escapeQuerySpace),d=a.call(this,c);return this._parts.query=e.buildQuery(d||c,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!b),this}return void 0!==a&&"string"!=typeof a?(this._parts.query=e.buildQuery(a,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!b),this):z.call(this,a,b)},r.setQuery=function(a,b,c){var d=e.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("string"==typeof a||a instanceof String)d[a]=void 0!==b?b:null;else{if("object"!=typeof a)throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");for(var f in a)s.call(a,f)&&(d[f]=a[f])}return this._parts.query=e.buildQuery(d,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof a&&(c=b),this.build(!c),this},r.addQuery=function(a,b,c){var d=e.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return e.addQuery(d,a,void 0===b?null:b),this._parts.query=e.buildQuery(d,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof a&&(c=b),this.build(!c),this},r.removeQuery=function(a,b,c){var d=e.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return e.removeQuery(d,a,b),this._parts.query=e.buildQuery(d,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof a&&(c=b),this.build(!c),this},r.hasQuery=function(a,b,c){var d=e.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return e.hasQuery(d,a,b,c)},r.setSearch=r.setQuery,r.addSearch=r.addQuery,r.removeSearch=r.removeQuery,r.hasSearch=r.hasQuery,r.normalize=function(){return this._parts.urn?this.normalizeProtocol(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build():this.normalizeProtocol(!1).normalizeHostname(!1).normalizePort(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build()},r.normalizeProtocol=function(a){return"string"==typeof this._parts.protocol&&(this._parts.protocol=this._parts.protocol.toLowerCase(),this.build(!a)),this},r.normalizeHostname=function(c){return this._parts.hostname&&(this.is("IDN")&&a?this._parts.hostname=a.toASCII(this._parts.hostname):this.is("IPv6")&&b&&(this._parts.hostname=b.best(this._parts.hostname)),this._parts.hostname=this._parts.hostname.toLowerCase(),this.build(!c)),this},r.normalizePort=function(a){return"string"==typeof this._parts.protocol&&this._parts.port===e.defaultPorts[this._parts.protocol]&&(this._parts.port=null,this.build(!a)),this},r.normalizePath=function(a){var b=this._parts.path;if(!b)return this;if(this._parts.urn)return this._parts.path=e.recodeUrnPath(this._parts.path),this.build(!a),this;if("/"===this._parts.path)return this;var c,d,f,b=e.recodePath(b),g="";for("/"!==b.charAt(0)&&(c=!0,b="/"+b),"/.."!==b.slice(-3)&&"/."!==b.slice(-2)||(b+="/"),b=b.replace(/(\/(\.\/)+)|(\/\.$)/g,"/").replace(/\/{2,}/g,"/"),c&&(g=b.substring(1).match(/^(\.\.\/)+/)||"")&&(g=g[0]);d=b.search(/\/\.\.(\/|$)/),-1!==d;)0!==d?(f=b.substring(0,d).lastIndexOf("/"),-1===f&&(f=d),b=b.substring(0,f)+b.substring(d+3)):b=b.substring(3);return c&&this.is("relative")&&(b=g+b.substring(1)),this._parts.path=b,this.build(!a),this},r.normalizePathname=r.normalizePath,r.normalizeQuery=function(a){return"string"==typeof this._parts.query&&(this._parts.query.length?this.query(e.parseQuery(this._parts.query,this._parts.escapeQuerySpace)):this._parts.query=null,this.build(!a)),this},r.normalizeFragment=function(a){return this._parts.fragment||(this._parts.fragment=null,this.build(!a)),this},r.normalizeSearch=r.normalizeQuery,r.normalizeHash=r.normalizeFragment,r.iso8859=function(){var a=e.encode,b=e.decode;e.encode=escape,e.decode=decodeURIComponent;try{this.normalize()}finally{e.encode=a,e.decode=b}return this},r.unicode=function(){var a=e.encode,b=e.decode;e.encode=n,e.decode=unescape;try{this.normalize()}finally{e.encode=a,e.decode=b}return this},r.readable=function(){var b=this.clone();b.username("").password("").normalize();var c="";if(b._parts.protocol&&(c+=b._parts.protocol+"://"),b._parts.hostname&&(b.is("punycode")&&a?(c+=a.toUnicode(b._parts.hostname),b._parts.port&&(c+=":"+b._parts.port)):c+=b.host()),b._parts.hostname&&b._parts.path&&"/"!==b._parts.path.charAt(0)&&(c+="/"),c+=b.path(!0),b._parts.query){for(var d="",f=0,g=b._parts.query.split("&"),h=g.length;f<h;f++){var i=(g[f]||"").split("="),d=d+("&"+e.decodeQuery(i[0],this._parts.escapeQuerySpace).replace(/&/g,"%26"));void 0!==i[1]&&(d+="="+e.decodeQuery(i[1],this._parts.escapeQuerySpace).replace(/&/g,"%26"))}c+="?"+d.substring(1)}return c+=e.decodeQuery(b.hash(),!0)},r.absoluteTo=function(a){var b,c,d=this.clone(),f=["protocol","username","password","hostname","port"];if(this._parts.urn)throw Error("URNs do not have any generally defined hierarchical components");if(a instanceof e||(a=new e(a)),d._parts.protocol||(d._parts.protocol=a._parts.protocol),this._parts.hostname)return d;for(b=0;c=f[b];b++)d._parts[c]=a._parts[c];return d._parts.path?".."===d._parts.path.substring(-2)&&(d._parts.path+="/"):(d._parts.path=a._parts.path,d._parts.query||(d._parts.query=a._parts.query)),"/"!==d.path().charAt(0)&&(f=(f=a.directory())?f:0===a.path().indexOf("/")?"/":"",d._parts.path=(f?f+"/":"")+d._parts.path,d.normalizePath()),d.build(),d},r.relativeTo=function(a){var b,c,d,f=this.clone().normalize();if(f._parts.urn)throw Error("URNs do not have any generally defined hierarchical components");if(a=new e(a).normalize(),b=f._parts,c=a._parts,d=f.path(),a=a.path(),"/"!==d.charAt(0))throw Error("URI is already relative");if("/"!==a.charAt(0))throw Error("Cannot calculate a URI relative to another relative URI");return b.protocol===c.protocol&&(b.protocol=null),b.username!==c.username||b.password!==c.password||null!==b.protocol||null!==b.username||null!==b.password||b.hostname!==c.hostname||b.port!==c.port?f.build():(b.hostname=null,b.port=null,d===a?(b.path="",f.build()):(d=e.commonPath(d,a))?(c=c.path.substring(d.length).replace(/[^\/]*$/,"").replace(/.*?\//g,"../"),b.path=c+b.path.substring(d.length)||"./",f.build()):f.build())},r.equals=function(a){var b=this.clone();a=new e(a);var c,d={},f={},g={};if(b.normalize(),a.normalize(),b.toString()===a.toString())return!0;if(d=b.query(),f=a.query(),b.query(""),a.query(""),b.toString()!==a.toString()||d.length!==f.length)return!1;d=e.parseQuery(d,this._parts.escapeQuerySpace),f=e.parseQuery(f,this._parts.escapeQuerySpace);for(c in d)if(s.call(d,c)){if(h(d[c])){if(!k(d[c],f[c]))return!1}else if(d[c]!==f[c])return!1;g[c]=!0}for(c in f)if(s.call(f,c)&&!g[c])return!1;return!0},r.duplicateQueryParameters=function(a){return this._parts.duplicateQueryParameters=!!a,this},r.escapeQuerySpace=function(a){return this._parts.escapeQuerySpace=!!a,this},e}),AutoSuggestControl.prototype.autosuggest=function(a,b){this.layer.style.width=this.textbox.offsetWidth,this.objArray=a,a&&a.length>0?this.showSuggestions(a,b):this.hideSuggestions()},AutoSuggestControl.prototype.createDropDown=function(){var a=this;this.layer=document.createElement("div"),this.layer.className="suggestions",this.layer.style.display="none",this.layer.style.zIndex="9999",this.layer.onmousedown=this.layer.onmouseup=this.layer.onmouseover=function(b){b=b||window.event,oTarget=b.target||b.srcElement;var c;"mousedown"==b.type?(c=AutoSuggestControl.prototype.indexOf(this,oTarget),a.selectionHandler(a.objArray[c],a.textbox,a.component),a.hideSuggestions()):"mouseover"==b.type?(c=AutoSuggestControl.prototype.indexOf(this,oTarget),a.cur=c,a.highlightSuggestion(oTarget)):a.textbox.focus()},Util.ia(this.layer,Util.gp(this.textbox))},AutoSuggestControl.prototype.handleKeyDown=function(a){if("none"!=this.layer.style.display)switch(a.keyCode){case 38:this.previousSuggestion();break;case 40:this.nextSuggestion();break;case 13:this.selectionHandler(this.objArray[this.cur],this.textbox,this.component),this.hideSuggestions()}},AutoSuggestControl.prototype.handleKeyUp=function(a){var b=a.keyCode;8==b||46==b?this.textbox.value.length>0?this.queryHandler(this,this.textbox,this.component):this.hideSuggestions():b<32||b>=33&&b<46||b>=112&&b<=123||this.queryHandler(this,this.textbox,this.component)},AutoSuggestControl.prototype.hideSuggestions=function(){for(var a=this.textbox;a&&!Util.Style.ccss(a,"section");)a=Util.gp(a);a&&(a.style.position="relative",a.style.zIndex="1"),this.layer.style.zIndex="9999",this.layer.style.display="none"},AutoSuggestControl.prototype.highlightSuggestion=function(a){for(var b=0;b<this.layer.childNodes.length;b++){var c=this.layer.childNodes[b];c==a||c==a.parentNode?c.className="current":"current"==c.className&&(c.className="")}},AutoSuggestControl.prototype.init=function(){var a=this;this.textbox.onkeyup=function(b){b||(b=window.event),a.handleKeyUp(b)},this.textbox.onkeydown=function(b){b||(b=window.event),a.handleKeyDown(b)},this.textbox.onblur=function(){a.hideSuggestions()},this.createDropDown()},AutoSuggestControl.prototype.nextSuggestion=function(){var a=this.layer.childNodes;if(a.length>0&&this.cur<a.length-1){var b=a[++this.cur];this.highlightSuggestion(b)}},AutoSuggestControl.prototype.previousSuggestion=function(){var a=this.layer.childNodes;if(a.length>0&&this.cur>0){var b=a[--this.cur];this.highlightSuggestion(b)}},AutoSuggestControl.prototype.showSuggestions=function(a,b){var c=null;this.layer.innerHTML="";for(var d=0;d<a.length;d++){c=document.createElement("div"),0!==d||b||(c.className="current"),b?this.cur=-1:this.cur=0;var e=this.suggestionDisplayHandler(a[d],this.textbox.value);c.innerHTML=e,c.appendChild(document.createTextNode("")),this.layer.appendChild(c)}for(var f=this.textbox;f&&!Util.Style.ccss(f,"section");)f=Util.gp(f);f&&(f.style.position="relative",f.style.zIndex="2"),this.layer.style.zIndex="100000",this.layer.style.display="block"},AutoSuggestControl.prototype.indexOf=function(a,b){for(var c=a.childNodes,d=0;d<c.length;d++){var e=c[d];if(e==b||e==b.parentNode)return d}return-1},AutoSuggestControl.prototype.highlight=function(a,b){return"<strong>"+a.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)("+b.replace(/([\^\$\(\)\[\]\{\}\*\.\+\?\|\\])/gi,"\\$1").split(" ").join("|")+")(?![^<>]*>)(?![^&;]+;)","gi"),"</strong>$1<strong>")+"</strong>"};/*
 * Date Format 1.2.3
 * (c) 2007-2009 Steven Levithan <stevenlevithan.com>
 * MIT license
 *
 * Includes enhancements by Scott Trenda <scott.trenda.net>
 * and Kris Kowal <cixar.com/~kris.kowal/>
 *
 * Accepts a date, a mask, or a date and a mask.
 * Returns a formatted version of the given date.
 * The date defaults to the current date/time.
 * The mask defaults to dateFormat.masks.default.
 *
 * dateFormat.masks and dateFormat.i18n are derived from m_dateformatJSON which is returned from mp_unified_driver.
 */
var dateFormat=function(){var a=/d{1,4}e?|w{1,9}|m{1,4}|MAC|M{1,12}|Y{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,b=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,c=/[^-+\dA-Z]/g,d=function(a,b){for(a=String(a),b=b||2;a.length<b;)a="0"+a;return a};return function(e,f,g){var h=dateFormat;if(1!==arguments.length||"[object String]"!==Object.prototype.toString.call(e)||/\d/.test(e)||(f=e,e=void 0),e=e?new Date(e):new Date,isNaN(e))throw new SyntaxError("invalid date");f&&(f=f.replace("HH:MM","HH:mm")),f=String(h.masks[f]||f||h.masks.default),"UTC:"===f.slice(0,4)&&(f=f.slice(4),g=!0);var i=g?"getUTC":"get",j=e[i+"Date"](),k=e[i+"Day"](),l=e[i+"Month"](),m=e[i+"FullYear"](),n=e[i+"Hours"](),o=e[i+"Minutes"](),p=e[i+"Seconds"](),q=e[i+"Milliseconds"](),r=g?0:e.getTimezoneOffset(),s=h.i18n.monthNames[l].slice(0,1).toLocaleUpperCase()+h.i18n.monthNames[l].slice(-2).toLocaleLowerCase(),t={d:j,dd:d(j),de:"de",ddd:h.i18n.dayNames[k],dddd:h.i18n.dayNames[k+7],ww:d(k),www:h.i18n.dayNames[k],wwwwwwwww:h.i18n.dayNames[k+7],m:l+1,MM:d(l+1),mmm:h.i18n.monthNames[l],mmmm:h.i18n.monthNames[l+12],yy:String(m).slice(2),yyyy:m,YYYY:m,h:n%12||12,hh:d(n%12||12),H:n,HH:d(n),MAC:s,MMM:h.i18n.monthNames[l],MMMM:h.i18n.monthNames[l],MMMMMMMMM:h.i18n.monthNames[l+12],MMMMMMMMMMMM:h.i18n.monthNames[l+12],M:o,mm:d(o),s:p,ss:d(p),l:d(q,3),L:d(q>99?Math.round(q/10):q),t:n<12?"a":"p",tt:n<12?"am":"pm",T:n<12?"A":"P",TT:n<12?"AM":"PM",Z:g?"UTC":(String(e).match(b)||[""]).pop().replace(c,""),o:(r>0?"-":"+")+d(100*Math.floor(Math.abs(r)/60)+Math.abs(r)%60,4),S:["th","st","nd","rd"][j%10>3?0:(j%100-j%10!==10)*j%10]};return f.replace(a,function(a){return a in t?t[a]:a.slice(1,a.length-1)})}}();dateFormat.masks={},dateFormat.i18n={dayNames:[],monthNames:[]},Date.prototype.format=function(a,b){var c=MP_Timezone.getTimeZone(this,a);return dateFormat(this,a,b)+(c?" "+c:"")},Date.prototype.setISO8601=function(a){var b="([0-9]{4})(-([0-9]{2})(-([0-9]{2})(T([0-9]{2}):([0-9]{2})(:([0-9]{2})(\\.([0-9]+))?)?Z?)?)?)?",c=a.match(new RegExp(b)),d=new Date(c[1],0,1);c[7]?d.setUTCHours(c[7]):d.setUTCHours(0),c[8]?d.setUTCMinutes(c[8]):d.setUTCMinutes(0),c[10]?d.setUTCSeconds(c[10]):d.setUTCSeconds(0),c[12]?d.setUTCMilliseconds(1e3*Number("0."+c[12])):d.setUTCMilliseconds(0),c[1]&&d.setUTCFullYear(c[1]),c[5]&&d.setUTCDate(c[5]),c[3]&&d.setUTCMonth(c[3]-1),this.setTime(d.getTime())},mp_formatter={},mp_formatter.Locale=function(a){if(this._className="mp_formatter.Locale",this._parseList=function(a,b){var c=[];if(null===a)throw"Names not defined";if("object"==typeof a)c=a;else{if("string"!=typeof a)throw"Names must be an array or a string";c=a.split(";",b);for(var d=0;d<c.length;d++){if('"'!=c[d][0]||'"'!=c[d][c[d].length-1])throw"Missing double quotes";c[d]=c[d].slice(1,-1)}}if(c.length!=b)throw"Expected "+b+" items, got "+c.length;return c},this._validateFormatString=function(a){if("string"==typeof a&&a.length>0)return a;throw"Empty or no string"},null===a||"object"!=typeof a)throw"Error: Invalid/missing locale properties";if("string"!=typeof a.decimalPoint)throw"Error: Invalid/missing decimalPoint property";if(this.decimalPoint=a.decimalPoint,"string"!=typeof a.thousandsSep)throw"Error: Invalid/missing thousandsSep property";if(this.thousandsSep=a.thousandsSep,"string"!=typeof a.grouping)throw"Error: Invalid/missing grouping property";if(this.grouping=a.grouping,null===a||"object"!=typeof a)throw"Error: Invalid/missing time locale properties";try{this.time24hr=this._validateFormatString(a.time24hr)}catch(a){throw"Error: Invalid time24hr property: "+a}try{this.time24hrnosec=this._validateFormatString(a.time24hrnosec)}catch(a){throw"Error: Invalid time24hrnosec property: "+a}try{this.shortdate2yr=this._validateFormatString(a.shortdate2yr)}catch(a){throw"Error: Invalid shortdate2yr property: "+a}try{this.fulldate4yr=this._validateFormatString(a.fulldate4yr)}catch(a){throw"Error: Invalid fulldate4yr property: "+a}try{this.fulldate2yr=this._validateFormatString(a.fulldate2yr)}catch(a){throw"Error: Invalid fulldate2yr property: "+a}try{this.fullmonth4yrnodate=this._validateFormatString(a.fullmonth4yrnodate)}catch(a){throw"Error: Invalid fullmonth4yrnodate property: "+a}try{this.full4yr=this._validateFormatString(a.full4yr)}catch(a){throw"Error: Invalid full4yr property: "+a}try{this.fulldatetime2yr=this._validateFormatString(a.fulldatetime2yr)}catch(a){throw"Error: Invalid fulldatetime2yr property: "+a}try{this.fulldatetime4yr=this._validateFormatString(a.fulldatetime4yr)}catch(a){throw"Error: Invalid fulldatetime4yr property: "+a}},mp_formatter._getPrecision=function(a){if("string"!=typeof a)return-1;var b=a.match(/\.(\d)/);return b?parseInt(b[1],10):-1},mp_formatter._isNumber=function(a){if("number"==typeof a)return!0;if("string"!=typeof a)return!1;var b=a+"";return/^-?(\d+|\d*\.\d+)$/.test(b)},mp_formatter._isDate=function(a){return!!a.getDate},mp_formatter._trim=function(a){for(var b=" \n\r\t\f\v            ​\u2028\u2029　",c=0;c<a.length;c++)if(b.indexOf(a.charAt(c))===-1){a=a.substring(c);break}for(c=a.length-1;c>=0;c--)if(b.indexOf(a.charAt(c))===-1){a=a.substring(0,c+1);break}return b.indexOf(a.charAt(0))===-1?a:""},mp_formatter._splitNumber=function(a){"number"==typeof a&&(a+="");var b={};"-"==a.charAt(0)&&(a=a.substring(1));var c=a.split(".");return c[1]||(c[1]=""),b.integer=c[0],b.fraction=c[1],b},mp_formatter._formatIntegerPart=function(a,b,c){if(""===c||"-1"==b)return a;for(var d,e=b.split(";"),f="",g=a.length;g>0;){if(e.length>0&&(d=parseInt(e.shift(),10)),isNaN(d))throw"Error: Invalid grouping";if(d==-1){f=a.substring(0,g)+f;break}if(g-=d,g<1){f=a.substring(0,g+d)+f;break}f=c+a.substring(g,g+d)+f}return f},mp_formatter._formatFractionPart=function(a,b){for(var c=0;a.length<b;c++)a+="0";return a},mp_formatter._hasOption=function(a,b){return"string"==typeof a&&"string"==typeof b&&b.indexOf(a)!=-1},mp_formatter._validateFormatString=function(a){return"string"==typeof a&&a.length>0},mp_formatter.NumericFormatter=function(a){if("object"!=typeof a||"mp_formatter.Locale"!=a._className)throw"Constructor error: You must provide a valid mp_formatter.Locale instance";this.lc=a,this.format=function(a,b){if("string"==typeof a&&(a=mp_formatter._trim(a)),!mp_formatter._isNumber(a))throw"Error: The input is not a number";var c=parseFloat(a,10),d=mp_formatter._getPrecision(b);d!=-1&&(c=Math.round(c*Math.pow(10,d))/Math.pow(10,d));var e,f=mp_formatter._splitNumber(String(c));e=0===c?"0":mp_formatter._hasOption("^",b)?f.integer:mp_formatter._formatIntegerPart(f.integer,this.lc.grouping,this.lc.thousandsSep);var g=d!=-1?mp_formatter._formatFractionPart(f.fraction,d):f.fraction,h=g.length?e+this.lc.decimalPoint+g:e;return mp_formatter._hasOption("~",b)||0===c?h:mp_formatter._hasOption("+",b)||c<0?c>0?"+"+h:c<0?"-"+h:h:h}},mp_formatter.DateTimeFormatter=function(a){if("object"!=typeof a||"mp_formatter.Locale"!=a._className)throw"Constructor error: You must provide a valid mp_formatter.Locale instance";this.lc=a,this.formatISO8601=function(a,b){if(!mp_formatter._validateFormatString(a))throw"Error: The input is either empty or no string";var c=new Date;return c.setISO8601(a),this.format(c,b)},this.format=function(a,b){if(!mp_formatter._isDate(a))throw"Error: The input is not a date object";switch(b){case mp_formatter.DateTimeFormatter.TIME_24HOUR:return a.format(this.lc.time24hr);case mp_formatter.DateTimeFormatter.TIME_24HOUR_NO_SECONDS:return a.format(this.lc.time24hrnosec);case mp_formatter.DateTimeFormatter.SHORT_DATE_2YEAR:return a.format(this.lc.shortdate2yr);case mp_formatter.DateTimeFormatter.FULL_DATE_4YEAR:return a.format(this.lc.fulldate4yr);case mp_formatter.DateTimeFormatter.FULL_DATE_2YEAR:return a.format(this.lc.fulldate2yr);case mp_formatter.DateTimeFormatter.FULL_MONTH_4YEAR_NO_DATE:return a.format(this.lc.fullmonth4yrnodate);case mp_formatter.DateTimeFormatter.FULL_4YEAR:return a.format(this.lc.full4yr);case mp_formatter.DateTimeFormatter.FULL_DATE_TIME_2YEAR:return a.format(this.lc.fulldatetime2yr);case mp_formatter.DateTimeFormatter.FULL_DATE_TIME_4YEAR:return a.format(this.lc.fulldatetime4yr);default:alert("Unhandled date time formatting option")}}},mp_formatter.DateTimeFormatter.TIME_24HOUR=1,mp_formatter.DateTimeFormatter.TIME_24HOUR_NO_SECONDS=2,mp_formatter.DateTimeFormatter.SHORT_DATE_2YEAR=3,mp_formatter.DateTimeFormatter.FULL_DATE_4YEAR=4,mp_formatter.DateTimeFormatter.FULL_DATE_2YEAR=5,mp_formatter.DateTimeFormatter.FULL_MONTH_4YEAR_NO_DATE=6,mp_formatter.DateTimeFormatter.FULL_4YEAR=7,mp_formatter.DateTimeFormatter.FULL_DATE_TIME_2YEAR=8,mp_formatter.DateTimeFormatter.FULL_DATE_TIME_4YEAR=9;var GapCheck=function(a){this.m_auditEventsList=[],this.m_currentAuditEventsList=[],this.m_encounterType=0,this.m_isOrderPlaced=null,this.m_criterion=a,this.m_synonymArr=[],this.m_encntrTypeFlag=0};GapCheck.CRITERIA={ALL:1,DISCHARGE:2,ADMIT:3},GapCheck.prototype.setEncounterType=function(a){this.m_encounterType=a},GapCheck.prototype.getEncounterType=function(){return this.m_encounterType},GapCheck.prototype.AuditEventElementsJSON=function(){return{tracking_audit_element_id:0,audit_element_name:"",audit_element_txt:"",audit_value:0,audit_string:"",audit_flag:0,audit_dt_tm:"",update_flag:0,component_Id:0}},GapCheck.prototype.UpdateAuditEventElementsJSON=function(){return{tracking_audit_element_id:0,audit_element_name:"",audit_element_txt:"",audit_value:0,audit_string:"",audit_flag:0,audit_dt_tm:"",audit_element_string:""}},GapCheck.prototype.NewAuditEventElementsJSON=function(){return{audit_element_name:"",audit_element_txt:"",audit_value:0,audit_string:"",audit_flag:0,audit_dt_tm:"",audit_element_string:""}},GapCheck.prototype.AuditEventsRequestJSON=function(){this.tracking_audit_id=0,this.encntr_id=0,this.tracking_group_cd=0,this.audit_type_cd=0,this.updt_id=0,this.clear_audit_elements_ind=0,this.audit_elements=[],this.upd_audit_elements=[]},GapCheck.prototype.triggerInitializationTimer=function(a){for(var b="",c="",d=null,e=null,f=new CapabilityTimer("CAP:MPG.GAPCHECK_Initialize_GapCheck",this.m_criterion.category_mean),g=a.length,h=0;h<g;h++)d=a[h].getGapCheckCriteria(),e=a[h].getGapCheckOverrideInd(),null!==d&&(b+=JSON.stringify(new this.MapObject(a[h].getReportMean(),d)),null!==e&&(c+=JSON.stringify(new this.MapObject(a[h].getReportMean(),e))));f.addMetaData("gapCheckDetails",b),f.addMetaData("overrideDetails",c),f.capture()},GapCheck.prototype.addUpdateAuditEventsList=function(a){try{var b=this.m_criterion.encntr_id,c=this,d=[],e=new ScriptRequest;e.setArtifactInfo({artifactId:"gap-check",functionName:"addUpdateAuditEventsList"});var f="",g=this.m_currentAuditEventsList,h=g.length,i=0,j=null;for(c.m_auditEventsList=new c.AuditEventsRequestJSON,c.m_auditEventsList.encntr_id=b,j=MP_Util.CreateTimer("ENG:MPG.GAP-CHECK-ADD UPDATE AUDIT EVENTS"),i=0;i<h;i++){var k=g[i].value;if(0===k.update_flag){var l=new c.NewAuditEventElementsJSON;l.audit_element_name=k.audit_element_name,l.audit_element_txt=k.audit_element_txt,l.audit_value=parseInt(k.audit_value,10),l.audit_string=k.audit_string,l.audit_flag=k.audit_flag,c.m_auditEventsList.audit_elements.push(l)}else if(1===k.update_flag){var m=new c.UpdateAuditEventElementsJSON;m.tracking_audit_element_id=k.tracking_audit_element_id,m.audit_element_name=k.audit_element_name,m.audit_element_txt=k.audit_element_txt,m.audit_value=parseInt(k.audit_value,10),m.audit_string=k.audit_string,m.audit_flag=k.audit_flag,c.m_auditEventsList.upd_audit_elements.push(m)}}f="{'AUDIT_LIST_REQ':"+MP_Util.enhancedStringify(c.m_auditEventsList,0,0,1,["audit_value"])+"}",d.push("^MINE^",b+".0"),e.setParameterArray(d),e.setProgramName("MP_ADD_UPD_AUDIT_EVENTS"),e.setDataBlob(f),e.setResponseHandler(function(b){"S"===b.getStatus()&&a()}),e.performRequest()}catch(a){throw logger.logJSError(a,null,"gap-check.js","addUpdateAuditEventsList"),j&&(j.Abort(),j=null),a}finally{j&&j.Stop()}},GapCheck.prototype.MapObject=function(a,b){this.name=a,this.value=b},GapCheck.prototype.getAuditEventsList=function(a){try{var b=this.m_criterion.encntr_id,c=[],d=this,e=new ScriptRequest;e.setArtifactInfo({artifactId:"gap-check",functionName:"getAuditEventsList"});var f=0,g=MP_Util.CreateTimer("ENG:MPG.GAP-CHECK-RETRIEVE AUDIT EVENTS DETAILS");c.push("^MINE^",b+".0",!this.m_encntrTypeFlag),e.setParameterArray(c),e.setProgramName("MP_RETRIEVE_AUDIT_EVENTS"),e.setResponseHandler(function(b){if("S"===b.getStatus()||"Z"===b.getStatus()){var c=b.getResponse(),e=c.ENCNTR_LIST,g=e.length;if(d.m_encntrTypeFlag||(d.setEncounterType(c.ENCNTR_TYPE),d.m_encntrTypeFlag=1),d.m_currentAuditEventsList=[],g){var h=e[0].AUDIT_EVENTS,i=h.length;if(i)for(f=0;f<i;f++){var j=h[f].AUDIT_ELEMENTS,k=j.length,l=0;for(l=0;l<k;l++){var m=new d.AuditEventElementsJSON;m.tracking_audit_element_id=j[l].TRACKING_AUDIT_ELEMENT_ID,m.audit_element_name=j[l].AUDIT_ELEMENT_NAME,m.audit_element_txt=j[l].AUDIT_ELEMENT_TXT,m.audit_value=j[l].AUDIT_VALUE_DOUBLE,m.audit_string=j[l].AUDIT_STRING,m.audit_flag=j[l].AUDIT_FLAG,m.update_flag=1;var n=new d.MapObject(m.audit_element_name,m);d.m_currentAuditEventsList.push(n)}}}}a()}),e.performRequest()}catch(a){throw logger.logJSError(a,null,"gap-check.js","getAuditEventsList"),g&&(g.Abort(),g=null),a}finally{g&&g.Stop()}},GapCheck.prototype.handleComboboxSelection=function(a){var b=this.m_criterion.category_mean,c=$("#overrideContainer"+b),d="#"+a,e=$(d).val();if("-1"!==e){$(d+" option[value='-1']").remove(),$(d).removeClass("gc-none-option");var f=c.find(".gc-none-option");if(!f.length){var g=MP_ModalDialog.retrieveModalDialogObject("gapCheckOverrideDialog"+b);g&&g.setFooterButtonDither("saveOverrideModal"+b,!1)}}},GapCheck.prototype.gatherComponentsToBeOverridden=function(a,b){var c=a.length,d=[],e=null,f=[GapCheck.CRITERIA.ALL],g=[GapCheck.CRITERIA.ALL];b?(f.push(GapCheck.CRITERIA.ADMIT),g.push(GapCheck.CRITERIA.ADMIT)):(f.push(GapCheck.CRITERIA.DISCHARGE),g.push(GapCheck.CRITERIA.DISCHARGE));for(var h=c-1;h>=0;h--)e=a[h],e.getSatisfiedInd()||f.indexOf(e.getGapCheckCriteria())===-1||g.indexOf(e.getGapCheckOverrideInd())===-1||d.push(e);return d},GapCheck.prototype.attachListener=function(a){var b,c=a.length,d=this;for(b=0;b<c;b++){var e=a[b],f=e.getComponentId(),g=$("#overrideReason"+f),h=function(){var a=$(this).attr("id");d.handleComboboxSelection(a)};g.change(h),g.change()}},GapCheck.prototype.createOverrideReasonCombo=function(a,b,c){var d,e=b.length,f=[];for(f.push("<select id='overrideReason"+a+"' data-lookup='"+a+"' class='gc-select gc-none-option'><option value='-1'></option>"),d=0;d<e;d++){var g=b[d],h=g.name,i=c===h?"selected=selected":"";f.push("<option value='"+h+"' "+i+">"+g.value.display+"</option>")}return f.push("</select>"),f.join("")},GapCheck.prototype.updateAuditEventDetails=function(){var a=this.m_currentAuditEventsList,b=a.length,c=null,d=null,e=0,f="";for(e=0;e<b;e++)f=a[e].value.component_Id,c=$("#overrideReason"+f).val(),d=this.m_currentAuditEventsList[e].value,c&&d.audit_value!==c&&(d.audit_value=c)},GapCheck.prototype.getMappedOrderSynonyms=function(){var a=null,b=null,c=[],d=[],e=this.m_criterion.category_mean+"pageLevelFilters",f=MP_Resources.getSharedResource(e);if(f&&f.isResourceAvailable()){var g=f.getResourceData();if(g){var h=g.length;for(a=0;a<h;a++)if(b=g[a],"WF_GC_ADMT_ORDER"===b.F_MN){c=b.VALS;break}for(a=0;a<c.length;a++)d[a]=c[a].PE_ID+".0"}}return this.m_synonymArr=d,d},GapCheck.prototype.checkForOrder=function(a,b){var c=this,d=["^MINE^",this.m_criterion.encntr_id+".0"],e={synArr:this.m_synonymArr};b=b||!1;var f=new ScriptRequest;f.setArtifactInfo({artifactId:"gap-check",functionName:"checkForOrder"}),f.setProgramName("MP_CHECK_FOR_ADMT_ORDER"),f.setParameterArray(d),f.setDataBlob("{'REQ':"+MP_Util.enhancedStringify(e)+"}"),f.setResponseHandler(function(a){if("S"===a.getStatus()){var d=a.getResponse();c.fireAdmitOrderEvent(b,d.ISPLACED)}else logger.logScriptCallError(c,f,"gap-check.js","checkForOrder")}),f.performRequest()},GapCheck.prototype.fireAdmitOrderEvent=function(a,b){(this.m_isOrderPlaced!==b||a)&&(this.m_isOrderPlaced=b,CERN_EventListener.fireEvent(this,this,EventListener.EVENT_ADMT_ORDER_PLACED+this.m_criterion.category_mean,this.m_isOrderPlaced))},GapCheck.prototype.performGapCheck=function(a,b,c){var d=this,e=[],f=0,g=new CapabilityTimer("CAP:MPG.GAPCHECK-Render Override Reasons",this.m_criterion.category_mean);e=this.gatherComponentsToBeOverridden(a,b),f=e.length,f>0?(e.sort(function(a,b){var c=a.getSequence(),d=b.getSequence();return c<d?-1:1}),this.getAuditEventsList(function(){d.createOverrideDialog(e,b,c),g.addMetaData("gapcheck.workflow.deviation",b===d.m_isOrderPlaced),g.capture()})):c()},GapCheck.prototype.createOverrideDialog=function(a,b,c){var d=this;return MP_Util.GetCodeSetP(20318).then(function(e){var f=d.m_criterion.category_mean,g=MP_ModalDialog.retrieveModalDialogObject("gapCheckOverrideDialog"+f),h="saveOverrideModal"+f,i=null,j=null,k=i18n.discernabu.gap_check,l=a.length;g?(i=g.getFooterButton(h),g.setFooterButtonDither(h,!0)):(g=new ModalDialog("gapCheckOverrideDialog"+f).setLeftMarginPercentage(35).setTopMarginPercentage(20).setRightMarginPercentage(35).setIsBodySizeFixed(!1).setIsFooterAlwaysShown(!0),g.setShowCloseIcon(!0),i=new ModalButton(h),i.setFocusInd(!0).setCloseOnClick(!0).setText(k.SUBMIT),i.setIsDithered(!0),g.addFooterButton(i),j=new ModalButton("cancelOverrideModal"+f),j.setText(k.CANCEL),g.addFooterButton(j)),i.setOnClickFunction(function(){d.updateAuditEventDetails(),d.addUpdateAuditEventsList(c)}),g.setBodyDataFunction(function(c){var h=[],i=d.getEncounterType(),j=k.DISCHARGE_HEADER;2===i&&(j=k.AMBULATORY_HEADER);var m=d.createWarningBanner(b);g.setHeaderTitle(j),h.push(m+"<div class='gc-override-container'><div class='gc-override-note'>"+k.TITLE+"</div><div class='gc-override-subtitle'>"+k.SUB_TITLE+"</div><div class='gc-override-content' id='overrideContainer"+f+"'>");for(var n=d.m_currentAuditEventsList,o=0;o<l;o++){for(var p=a[o],q=p.getComponentId(),r=p.getReportMean(),s=!1,t="",u=0;u<n.length;u++)if(n[u].name===r){s=!0,t=n[u].value.audit_value,d.m_currentAuditEventsList[u].value.component_Id=q,d.m_currentAuditEventsList[u].value.update_flag=1;break}if(!s){var v=new d.AuditEventElementsJSON;v.audit_element_name=r,v.component_Id=q,v.update_flag=0;var w=new d.MapObject(r,v);d.m_currentAuditEventsList.push(w)}h.push("<dl class='gc-override-comp'><dt id='overrideCompInfo-"+q+"'><span class='gc-required-field-label'>*</span>"+p.getLabel()+"</dt>"),h.push("<dd>"+d.createOverrideReasonCombo(q,MP_Util.LoadCodeListJSON(e),t)+"</dd></dl>")}h.push("</div>"),c.setBodyHTML(h.join(""))}),MP_ModalDialog.updateModalDialogObject(g),MP_ModalDialog.showModalDialog("gapCheckOverrideDialog"+f),$("#gapCheckOverrideDialog"+f+"body").css("margin","0"),$("#gapCheckOverrideDialog"+f+"body .alert-msg").css("padding","0"),$("#gapCheckOverrideDialog"+f+"body .warning-msg").css("font-weight","normal"),d.attachListener(a)}).catch(function(a){logger.logJSError(a,null,"gap-check.js","createOverrideDialog")})},GapCheck.prototype.createWarningBanner=function(a){if(this.m_isOrderPlaced!==a){var b=i18n.discernabu.gap_check,c=new MPageUI.AlertBanner;c.setType(MPageUI.ALERT_OPTIONS.TYPE.WARNING);var d=this.m_isOrderPlaced?b.ORDER_FOUND_WARNING:b.NO_ORDER_FOUND_WARNING;return c.setPrimaryText(d),c.render()}return""},/**
MIT License 

Copyright (c) 2012 Jon Nylander, project maintained at 
https://bitbucket.org/pellepim/jstimezonedetect

Permission is hereby granted, free of charge, to any person obtaining a copy 
of this software and associated documentation files (the "Software"), to deal 
in the Software without restriction, including without limitation the rights to 
use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies 
of the Software, and to permit persons to whom the Software is furnished to 
do so, subject to the following conditions: 

The above copyright notice and this permission notice shall be included in 
all copies or substantial portions of the Software. 

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR 
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, 
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE 
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER 
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, 
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN 
THE SOFTWARE.
*/
!function(a){var b=function(){"use strict";var a="s",c={DAY:864e5,HOUR:36e5,MINUTE:6e4,SECOND:1e3,BASELINE_YEAR:2014,MAX_SCORE:864e6,AMBIGUITIES:{"America/Denver":["America/Mazatlan"],"America/Chicago":["America/Mexico_City"],"America/Santiago":["America/Asuncion","America/Campo_Grande"],"America/Montevideo":["America/Sao_Paulo"],"Asia/Beirut":["Asia/Amman","Asia/Jerusalem","Europe/Helsinki","Asia/Damascus","Africa/Cairo","Asia/Gaza","Europe/Minsk"],"Pacific/Auckland":["Pacific/Fiji"],"America/Los_Angeles":["America/Santa_Isabel"],"America/New_York":["America/Havana"],"America/Halifax":["America/Goose_Bay"],"America/Godthab":["America/Miquelon"],"Asia/Dubai":["Asia/Yerevan"],"Asia/Jakarta":["Asia/Krasnoyarsk"],"Asia/Shanghai":["Asia/Irkutsk","Australia/Perth"],"Australia/Sydney":["Australia/Lord_Howe"],"Asia/Tokyo":["Asia/Yakutsk"],"Asia/Dhaka":["Asia/Omsk"],"Asia/Baku":["Asia/Yerevan"],"Australia/Brisbane":["Asia/Vladivostok"],"Pacific/Noumea":["Asia/Vladivostok"],"Pacific/Majuro":["Asia/Kamchatka","Pacific/Fiji"],"Pacific/Tongatapu":["Pacific/Apia"],"Asia/Baghdad":["Europe/Minsk","Europe/Moscow"],"Asia/Karachi":["Asia/Yekaterinburg"],"Africa/Johannesburg":["Asia/Gaza","Africa/Cairo"]}},d=function(a){var b=-a.getTimezoneOffset();return null!==b?b:0},e=function(){var b=d(new Date(c.BASELINE_YEAR,0,2)),e=d(new Date(c.BASELINE_YEAR,5,2)),f=b-e;return 0>f?b+",1":f>0?e+",1,"+a:b+",0"},f=function(a){for(var b=new Date(a,0,1,0,0,1,0).getTime(),c=new Date(a,12,31,23,59,59).getTime(),d=b,e=new Date(d).getTimezoneOffset(),f=null,h=null;c-864e5>d;){var i=new Date(d),j=i.getTimezoneOffset();j!==e&&(e>j&&(f=i),j>e&&(h=i),e=j),d+=864e5}return!(!f||!h)&&{s:g(f).getTime(),e:g(h).getTime()}},g=function a(b,d,e){"undefined"==typeof d&&(d=c.DAY,e=c.HOUR);for(var f=new Date(b.getTime()-d).getTime(),g=b.getTime()+d,h=new Date(f).getTimezoneOffset(),i=f,j=null;g-e>i;){var k=new Date(i),l=k.getTimezoneOffset();if(l!==h){j=k;break}i+=e}return d===c.DAY?a(j,c.HOUR,c.MINUTE):d===c.HOUR?a(j,c.MINUTE,c.SECOND):j},h=function(a,b,c,d){if("N/A"!==c)return c;if("Asia/Beirut"===b){if("Africa/Cairo"===d.name&&13983768e5===a[6].s&&14116788e5===a[6].e)return 0;if("Asia/Jerusalem"===d.name&&13959648e5===a[6].s&&14118588e5===a[6].e)return 0}else if("America/Santiago"===b){if("America/Asuncion"===d.name&&14124816e5===a[6].s&&1397358e6===a[6].e)return 0;if("America/Campo_Grande"===d.name&&14136912e5===a[6].s&&13925196e5===a[6].e)return 0}else if("America/Montevideo"===b){if("America/Sao_Paulo"===d.name&&14136876e5===a[6].s&&1392516e6===a[6].e)return 0}else if("Pacific/Auckland"===b&&"Pacific/Fiji"===d.name&&14142456e5===a[6].s&&13961016e5===a[6].e)return 0;return c},i=function(a,d){for(var e=function(b){for(var e=0,f=0;f<a.length;f++)if(b.rules[f]&&a[f]){if(!(a[f].s>=b.rules[f].s&&a[f].e<=b.rules[f].e)){e="N/A";break}if(e=0,e+=Math.abs(a[f].s-b.rules[f].s),e+=Math.abs(b.rules[f].e-a[f].e),e>c.MAX_SCORE){e="N/A";break}}return e=h(a,d,e,b)},f={},g=b.olson.dst_rules.zones,i=g.length,j=c.AMBIGUITIES[d],k=0;i>k;k++){var l=g[k],m=e(g[k]);"N/A"!==m&&(f[l.name]=m)}for(var n in f)if(f.hasOwnProperty(n)&&-1!=j.indexOf(n))return n;return d},j=function(a){var c=function(){for(var a=[],c=0;c<b.olson.dst_rules.years.length;c++){var d=f(b.olson.dst_rules.years[c]);a.push(d)}return a},d=function(a){for(var b=0;b<a.length;b++)if(a[b]!==!1)return!0;return!1},e=c(),g=d(e);return g?i(e,a):a},k=function(){var a=null;return a||(a=b.olson.timezones[e()],"undefined"!=typeof c.AMBIGUITIES[a]&&(a=j(a))),{name:function(){return a}}};return{determine:k}}();b.olson=b.olson||{},b.olson.timezones={"-720,0":"Etc/GMT+12","-660,0":"Pacific/Pago_Pago","-660,1,s":"Pacific/Apia","-600,1":"America/Adak","-600,0":"Pacific/Honolulu","-570,0":"Pacific/Marquesas","-540,0":"Pacific/Gambier","-540,1":"America/Anchorage","-480,1":"America/Los_Angeles","-480,0":"Pacific/Pitcairn","-420,0":"America/Phoenix","-420,1":"America/Denver","-360,0":"America/Guatemala","-360,1":"America/Chicago","-360,1,s":"Pacific/Easter","-300,0":"America/Bogota","-300,1":"America/New_York","-270,0":"America/Caracas","-240,1":"America/Halifax","-240,0":"America/Santo_Domingo","-240,1,s":"America/Santiago","-210,1":"America/St_Johns","-180,1":"America/Godthab","-180,0":"America/Argentina/Buenos_Aires","-180,1,s":"America/Montevideo","-120,0":"America/Noronha","-120,1":"America/Noronha","-60,1":"Atlantic/Azores","-60,0":"Atlantic/Cape_Verde","0,0":"UTC","0,1":"Europe/London","60,1":"Europe/Berlin","60,0":"Africa/Lagos","60,1,s":"Africa/Windhoek","120,1":"Asia/Beirut","120,0":"Africa/Johannesburg","180,0":"Asia/Baghdad","180,1":"Europe/Moscow","210,1":"Asia/Tehran","240,0":"Asia/Dubai","240,1":"Asia/Baku","270,0":"Asia/Kabul","300,1":"Asia/Yekaterinburg","300,0":"Asia/Karachi","330,0":"Asia/Kolkata","345,0":"Asia/Kathmandu","360,0":"Asia/Dhaka","360,1":"Asia/Omsk","390,0":"Asia/Rangoon","420,1":"Asia/Krasnoyarsk","420,0":"Asia/Jakarta","480,0":"Asia/Shanghai","480,1":"Asia/Irkutsk","525,0":"Australia/Eucla","525,1,s":"Australia/Eucla","540,1":"Asia/Yakutsk","540,0":"Asia/Tokyo","570,0":"Australia/Darwin","570,1,s":"Australia/Adelaide","600,0":"Australia/Brisbane","600,1":"Asia/Vladivostok","600,1,s":"Australia/Sydney","630,1,s":"Australia/Lord_Howe","660,1":"Asia/Kamchatka","660,0":"Pacific/Noumea","690,0":"Pacific/Norfolk","720,1,s":"Pacific/Auckland","720,0":"Pacific/Majuro","765,1,s":"Pacific/Chatham","780,0":"Pacific/Tongatapu","780,1,s":"Pacific/Apia","840,0":"Pacific/Kiritimati"},b.olson.dst_rules={years:[2008,2009,2010,2011,2012,2013,2014],zones:[{name:"Africa/Cairo",rules:[{e:12199572e5,s:12090744e5},{e:1250802e6,s:1240524e6},{e:12858804e5,s:12840696e5},!1,!1,!1,{e:14116788e5,s:1406844e6}]},{name:"America/Asuncion",rules:[{e:12050316e5,s:12243888e5},{e:12364812e5,s:12558384e5},{e:12709548e5,s:12860784e5},{e:13024044e5,s:1317528e6},{e:1333854e6,s:13495824e5},{e:1364094e6,s:1381032e6},{e:13955436e5,s:14124816e5}]},{name:"America/Campo_Grande",rules:[{e:12032172e5,s:12243888e5},{e:12346668e5,s:12558384e5},{e:12667212e5,s:1287288e6},{e:12981708e5,s:13187376e5},{e:13302252e5,s:1350792e6},{e:136107e7,s:13822416e5},{e:13925196e5,s:14136912e5}]},{name:"America/Goose_Bay",rules:[{e:122559486e4,s:120503526e4},{e:125704446e4,s:123648486e4},{e:128909886e4,s:126853926e4},{e:13205556e5,s:129998886e4},{e:13520052e5,s:13314456e5},{e:13834548e5,s:13628952e5},{e:14149044e5,s:13943448e5}]},{name:"America/Havana",rules:[{e:12249972e5,s:12056436e5},{e:12564468e5,s:12364884e5},{e:12885012e5,s:12685428e5},{e:13211604e5,s:13005972e5},{e:13520052e5,s:13332564e5},{e:13834548e5,s:13628916e5},{e:14149044e5,s:13943412e5}]},{name:"America/Mazatlan",rules:[{e:1225008e6,s:12074724e5},{e:12564576e5,s:1238922e6},{e:1288512e6,s:12703716e5},{e:13199616e5,s:13018212e5},{e:13514112e5,s:13332708e5},{e:13828608e5,s:13653252e5},{e:14143104e5,s:13967748e5}]},{name:"America/Mexico_City",rules:[{e:12250044e5,s:12074688e5},{e:1256454e6,s:12389184e5},{e:12885084e5,s:1270368e6},{e:1319958e6,s:13018176e5},{e:13514076e5,s:13332672e5},{e:13828572e5,s:13653216e5},{e:14143068e5,s:13967712e5}]},{name:"America/Miquelon",rules:[{e:12255984e5,s:12050388e5},{e:1257048e6,s:12364884e5},{e:12891024e5,s:12685428e5},{e:1320552e6,s:12999924e5},{e:13520016e5,s:1331442e6},{e:13834512e5,s:13628916e5},{e:14149008e5,s:13943412e5}]},{name:"America/Santa_Isabel",rules:[{e:12250116e5,s:1207476e6},{e:12564612e5,s:12389256e5},{e:12885156e5,s:12703752e5},{e:13199652e5,s:13018248e5},{e:13514148e5,s:13332744e5},{e:13828644e5,s:13653288e5},{e:1414314e6,s:13967784e5}]},{name:"America/Sao_Paulo",rules:[{e:12032136e5,s:12243852e5},{e:12346632e5,s:12558348e5},{e:12667176e5,s:12872844e5},{e:12981672e5,s:1318734e6},{e:13302216e5,s:13507884e5},{e:13610664e5,s:1382238e6},{e:1392516e6,s:14136876e5}]},{name:"Asia/Amman",rules:[{e:1225404e6,s:12066552e5},{e:12568536e5,s:12381048e5},{e:12883032e5,s:12695544e5},{e:13197528e5,s:13016088e5},!1,!1,{e:14147064e5,s:13959576e5}]},{name:"Asia/Damascus",rules:[{e:12254868e5,s:120726e7},{e:125685e7,s:12381048e5},{e:12882996e5,s:12701592e5},{e:13197492e5,s:13016088e5},{e:13511988e5,s:13330584e5},{e:13826484e5,s:1364508e6},{e:14147028e5,s:13959576e5}]},{name:"Asia/Dubai",rules:[!1,!1,!1,!1,!1,!1,!1]},{name:"Asia/Gaza",rules:[{e:12199572e5,s:12066552e5},{e:12520152e5,s:12381048e5},{e:1281474e6,s:126964086e4},{e:1312146e6,s:130160886e4},{e:13481784e5,s:13330584e5},{e:13802292e5,s:1364508e6},{e:14116788e5,s:13959576e5}]},{name:"Asia/Irkutsk",rules:[{e:12249576e5,s:12068136e5},{e:12564072e5,s:12382632e5},{e:12884616e5,s:12697128e5},!1,!1,!1,!1]},{name:"Asia/Jerusalem",rules:[{e:12231612e5,s:12066624e5},{e:1254006e6,s:1238112e6},{e:1284246e6,s:12695616e5},{e:131751e7,s:1301616e6},{e:13483548e5,s:13330656e5},{e:13828284e5,s:13645152e5},{e:1414278e6,s:13959648e5}]},{name:"Asia/Kamchatka",rules:[{e:12249432e5,s:12067992e5},{e:12563928e5,s:12382488e5},{e:12884508e5,s:12696984e5},!1,!1,!1,!1]},{name:"Asia/Krasnoyarsk",rules:[{e:12249612e5,s:12068172e5},{e:12564108e5,s:12382668e5},{e:12884652e5,s:12697164e5},!1,!1,!1,!1]},{name:"Asia/Omsk",rules:[{e:12249648e5,s:12068208e5},{e:12564144e5,s:12382704e5},{e:12884688e5,s:126972e7},!1,!1,!1,!1]},{name:"Asia/Vladivostok",rules:[{e:12249504e5,s:12068064e5},{e:12564e8,s:1238256e6},{e:12884544e5,s:12697056e5},!1,!1,!1,!1]},{name:"Asia/Yakutsk",rules:[{e:1224954e6,s:120681e7},{e:12564036e5,s:12382596e5},{e:1288458e6,s:12697092e5},!1,!1,!1,!1]},{name:"Asia/Yekaterinburg",rules:[{e:12249684e5,s:12068244e5},{e:1256418e6,s:1238274e6},{e:12884724e5,s:12697236e5},!1,!1,!1,!1]},{name:"Asia/Yerevan",rules:[{e:1224972e6,s:1206828e6},{e:12564216e5,s:12382776e5},{e:1288476e6,s:12697272e5},{e:13199256e5,s:13011768e5},!1,!1,!1]},{name:"Australia/Lord_Howe",rules:[{e:12074076e5,s:12231342e5},{e:12388572e5,s:12545838e5},{e:12703068e5,s:12860334e5},{e:13017564e5,s:1317483e6},{e:1333206e6,s:13495374e5},{e:13652604e5,s:1380987e6},{e:139671e7,s:14124366e5}]},{name:"Australia/Perth",rules:[{e:12068136e5,s:12249576e5},!1,!1,!1,!1,!1,!1]},{name:"Europe/Helsinki",rules:[{e:12249828e5,s:12068388e5},{e:12564324e5,s:12382884e5},{e:12884868e5,s:1269738e6},{e:13199364e5,s:13011876e5},{e:1351386e6,s:13326372e5},{e:13828356e5,s:13646916e5},{e:14142852e5,s:13961412e5}]},{name:"Europe/Minsk",rules:[{e:12249792e5,s:12068352e5},{e:12564288e5,s:12382848e5},{e:12884832e5,s:12697344e5},!1,!1,!1,!1]},{name:"Europe/Moscow",rules:[{e:12249756e5,s:12068316e5},{e:12564252e5,s:12382812e5},{e:12884796e5,s:12697308e5},!1,!1,!1,!1]},{name:"Pacific/Apia",rules:[!1,!1,!1,{e:13017528e5,s:13168728e5},{e:13332024e5,s:13489272e5},{e:13652568e5,s:13803768e5},{e:13967064e5,s:14118264e5}]},{name:"Pacific/Fiji",rules:[!1,!1,{e:12696984e5,s:12878424e5},{e:13271544e5,s:1319292e6},{e:1358604e6,s:13507416e5},{e:139005e7,s:1382796e6},{e:14215032e5,s:14148504e5}]}]},"undefined"!=typeof exports?exports.jstz=b:a.jstz=b}(this);var MP_ModalDialog={};MP_ModalDialog.modalDialogObjects={},MP_ModalDialog.whiteSpacePixels=26,MP_ModalDialog.addModalDialogObject=function(a){var b="";return a instanceof ModalDialog?(b=a.getId())?this.modalDialogObjects[b]?(logger.logError("MP_ModalDialog.addModalDialogObject: modal dialog id "+b+" is already in use"),!1):(this.modalDialogObjects[b]=a,!0):(logger.logError("MP_ModalDialog.addModalDialogObject: no/invalid ModalDialog id given"),!1):(logger.logError("MP_ModalDialog.addModalDialogObject only accepts objects of type ModalDialog"),!1)},MP_ModalDialog.addModalDialogOptionToViewpoint=function(a,b){var c=null;return c=this.modalDialogObjects[a],!!c&&("undefined"!=typeof MP_Viewpoint&&"undefined"!=typeof MP_Viewpoint.addModalDialogUtility?(MP_Viewpoint.addModalDialogUtility(c,b),!0):void 0)},MP_ModalDialog.closeModalDialog=function(a){var b=null;return!!(b=this.modalDialogObjects[a])&&($("#vwpModalDialog"+b.getId()).remove(),$("#vwpModalBackground"+b.getId()).remove(),b.setIsActive(!1),$("body").css("overflow","auto"),!0)},MP_ModalDialog.deleteModalDialogObject=function(a){return!!this.modalDialogObjects[a]&&(delete this.modalDialogObjects[a],!0)},MP_ModalDialog.retrieveModalDialogObject=function(a){return this.modalDialogObjects[a]?this.modalDialogObjects[a]:null},MP_ModalDialog.resizeAllModalDialogs=function(){var a=null,b="";for(b in MP_ModalDialog.modalDialogObjects)MP_ModalDialog.modalDialogObjects.hasOwnProperty(b)&&(a=MP_ModalDialog.modalDialogObjects[b],a.isActive()&&MP_ModalDialog.resizeModalDialog(a.getId()))},MP_ModalDialog.resizeModalDialog=function(a){var b=0,c=0,d=0,e=0,f=0,g=0,h="",i="",j=null;return(j=this.modalDialogObjects[a])?j.isActive()?(b=$(window).height(),c=$(document.body).width(),d=Math.floor(b*(j.getTopMarginPercentage()/100)),e=Math.floor(c*(j.getLeftMarginPercentage()/100)),f=Math.floor(b*(j.getBottomMarginPercentage()/100)),g=Math.floor(c*(j.getRightMarginPercentage()/100)),h=c-e-g,i=b-d-f,$("#vwpModalDialog"+j.getId()).css({top:d,left:e,width:h+"px"}),j.isBodySizeFixed()?($("#vwpModalDialog"+j.getId()).css("height",i+"px"),$("#"+j.getBodyElementId()).height(i-$("#"+j.getHeaderElementId()).height()-$("#"+j.getFooterElementId()).height()-this.whiteSpacePixels)):($("#vwpModalDialog"+j.getId()).css("max-height",i+"px"),$("#"+j.getBodyElementId()).css("max-height",i-$("#"+j.getHeaderElementId()).height()-$("#"+j.getFooterElementId()).height()-this.whiteSpacePixels+"px")),void $("#vwpModalBackground"+j.getId()).css({height:"100%",width:"100%"})):void logger.logError("MP_ModalDialog.resizeModalDialog: this modal dialog is not active it cannot be resized"):void logger.logError("MP_ModalDialog.resizeModalDialog: No modal dialog with the id "+a+" exists")},MP_ModalDialog.showModalDialog=function(a){function b(a,b){var c=a.getOnClickFunction(),d=a.closeOnClick();return c||(c=function(){}),function(){c(),d&&MP_ModalDialog.closeModalDialog(b)}}var c=null,d=null,e=0,f=null,g=null,h=0,i=0,j="",k=null,l=[],m=0,n=null,o=null,p=0,q=null,r=null,s="",t="",u=0,v=0,w=0,x=null,y="";if(r=this.modalDialogObjects[a],!r)return void logger.logError("MP_ModalDialog.showModalDialog: No modal dialog with the id "+a+" exists");if(!r.isActive()){if(o=$("<div id='"+r.getHeaderElementId()+"' class='dyn-modal-hdr-container'><span class='dyn-modal-hdr-title'>"+(r.getHeaderTitle()||"&nbsp;")+"</span></div>"),r.showCloseIcon()&&o.append($("<span class='dyn-modal-hdr-close'></span>").click(function(){var a=null,b=!0;a=r.getHeaderCloseFunction(),a&&(b=a()),r.verifyCloseFunctionResponse()?b&&MP_ModalDialog.closeModalDialog(r.getId()):MP_ModalDialog.closeModalDialog(r.getId())})),c=$("<div id='"+r.getBodyElementId()+"' class='dyn-modal-body-container'></div>"),l=r.getFooterButtons(),m=l.length,x=r.getFooterCheckbox(),y=r.getFooterText(),m||x.enabled||""!==y){if(k=$("<div id='"+r.getFooterElementId()+"' class='dyn-modal-footer-container'></div>"),x.enabled){var z=$("<label class='dyn-modal-checkbox-container' id='"+x.elementId+"'></label>"),A=$("<input type='checkbox' class='dyn-modal-checkbox'"+(x.isChecked?" checked":"")+">");A.click(x.onClick),z.append(A),z.append("<span class='dyn-modal-checkbox-label'>"+x.label+"</span>"),k.append(z)}if(m){for(n=$("<div id='"+r.getFooterElementId()+"btnCont' class='dyn-modal-button-container'></div>"),w=0;w<m;w++)f=l[w],n.append($("<button id='"+f.getId()+"' class='dyn-modal-button'"+(f.isDithered()?" disabled":"")+">"+f.getText()+"</button>").click(b(f,r.getId()))),f.getSeparatorInd()&&n.append("<span class='dyn-modal-button-separator'></span>"),j||(j=f.getFocusInd()?f.getId():"");k.append(n)}""!==y&&k.append("<span id='"+r.getFooterTextElementId()+"' class='dyn-modal-footer-text'>"+y+"</span>")}else r.isFooterAlwaysShown()&&(k=$("<div id='"+r.getFooterElementId()+"' class='dyn-modal-footer-container'></div>"));h=$(window).height(),i=$(document.body).width(),v=Math.floor(h*(r.getTopMarginPercentage()/100)),p=Math.floor(i*(r.getLeftMarginPercentage()/100)),e=Math.floor(h*(r.getBottomMarginPercentage()/100)),u=Math.floor(i*(r.getRightMarginPercentage()/100)),t=i-p-u,s=h-v-e,g=$("<div id='vwpModalDialog"+r.getId()+"' class='dyn-modal-dialog'></div>").css({top:v,left:p,width:t+"px"}),g.append(o).append(c).append(k),q=$("<div id='vwpModalBackground"+r.getId()+"' class='"+(r.hasGrayBackground()?"dyn-modal-div":"dyn-modal-div-clear")+"'></div>").height($(document).height()),r.hasGrayBackground()||q.click(function(){var a=$("#vwpModalDialog"+r.getId());a.fadeOut(100),a.fadeIn(100)}),$(document.body).append(q).append(g),j&&$("#"+j).focus(),$("body").css("overflow","hidden"),r.isBodySizeFixed()?($(g).css("height",s+"px"),$(c).height(s-$(o).height()-$(k).height()-this.whiteSpacePixels)):($(g).css("max-height",s+"px"),$(c).css("max-height",s-$(o).height()-$(k).height()-this.whiteSpacePixels+"px")),r.setIsActive(!0),d=r.getBodyDataFunction(),d&&d(r),$(window).resize(this.resizeAllModalDialogs)}},MP_ModalDialog.updateModalDialogObject=function(a){var b="";return a&&a instanceof ModalDialog?(b=a.getId(),void(this.modalDialogObjects[b]=a)):void logger.logError("MP_ModalDialog.updateModalDialogObject only accepts objects of type ModalDialog")},ModalButton.prototype.closeOnClick=function(){return this.m_closeOnClick},ModalButton.prototype.isDithered=function(){return this.m_dithered},ModalButton.prototype.getId=function(){return this.m_buttonId},ModalButton.prototype.getCloseOnClick=function(){return this.m_closeOnClick},ModalButton.prototype.getFocusInd=function(){return this.m_focusInd},ModalButton.prototype.getText=function(){return this.m_buttonText},ModalButton.prototype.getOnClickFunction=function(){return this.m_onClickFunction},ModalButton.prototype.getSeparatorInd=function(){return this.m_separatorInd},ModalButton.prototype.setId=function(a){return a&&"string"==typeof a&&(this.m_buttonId=a),this},ModalButton.prototype.setCloseOnClick=function(a){return"boolean"==typeof a&&(this.m_closeOnClick=a),this},ModalButton.prototype.setFocusInd=function(a){return"boolean"==typeof a&&(this.m_focusInd=a),this},ModalButton.prototype.setText=function(a){return a&&"string"==typeof a&&(this.m_buttonText=a),this},ModalButton.prototype.setIsDithered=function(a){return"boolean"==typeof a&&(this.m_dithered=a),this},ModalButton.prototype.setOnClickFunction=function(a){return"function"==typeof a&&(this.m_onClickFunction=a),this},ModalButton.prototype.setSeparatorInd=function(a){return"boolean"==typeof a&&(this.m_separatorInd=a),this},ModalDialog.prototype.addFooterButton=function(a){return a instanceof ModalButton?a.getId()?(this.m_footer.buttons.push(a),this):(logger.logError("ModalDialog.addFooterButton: All ModalButton objects must have an id assigned"),this):(logger.logError("ModalDialog.addFooterButton: Cannot add footer button which isnt a ModalButton object.\nModalButtons can be created using the ModalDialog.createModalButton function."),this)},ModalDialog.prototype.hasGrayBackground=function(){return this.m_hasGrayBackground},ModalDialog.prototype.isActive=function(){return this.m_isModalActive},ModalDialog.prototype.isBodySizeFixed=function(){return this.m_body.isBodySizeFixed},ModalDialog.prototype.isFooterAlwaysShown=function(){return this.m_footer.isAlwaysShown},ModalDialog.prototype.isFixedToIcon=function(){return this.m_isFixedToIcon},ModalDialog.prototype.isIconActive=function(){return this.m_icon.isActive},ModalDialog.prototype.showCloseIcon=function(){return this.m_showCloseIcon},ModalDialog.prototype.verifyCloseFunctionResponse=function(){return this.m_header.verifyCloseFunctionResponse},ModalDialog.prototype.getBodyDataFunction=function(){return this.m_body.dataFunction},ModalDialog.prototype.getBodyElementId=function(){return this.m_body.elementId},ModalDialog.prototype.getBottomMarginPercentage=function(){return this.m_margins.bottom},ModalDialog.prototype.getFooterButton=function(a){var b=0,c=null,d=this.getFooterButtons(),e=d.length;for(b=e;b--;)if(c=d[b],c.getId()===a)return d[b];return null},ModalDialog.prototype.getFooterButtons=function(){return this.m_footer.buttons},ModalDialog.prototype.getFooterElementId=function(){return this.m_footer.elementId},ModalDialog.prototype.getFooterCheckbox=function(){return this.m_footer.checkbox},ModalDialog.prototype.getIsFooterCheckboxEnabled=function(){return this.m_footer.checkbox.enabled},ModalDialog.prototype.getFooterCheckboxIsChecked=function(){return this.m_footer.checkbox.isChecked},ModalDialog.prototype.getFooterCheckboxLabel=function(){return this.m_footer.checkbox.label},ModalDialog.prototype.getFooterCheckboxElementId=function(){return this.m_footer.checkbox.elementId},ModalDialog.prototype.getHasGrayBackground=function(){return this.m_hasGrayBackground},ModalDialog.prototype.getHeaderCloseFunction=function(){return this.m_header.closeFunction},ModalDialog.prototype.getHeaderElementId=function(){return this.m_header.elementId},ModalDialog.prototype.getHeaderTitle=function(){return this.m_header.title},ModalDialog.prototype.getIconClass=function(){return this.m_icon.cssClass},ModalDialog.prototype.getIconElementId=function(){return this.m_icon.elementId},ModalDialog.prototype.getIconHoverText=function(){return this.m_icon.hoverText},ModalDialog.prototype.getIconText=function(){return this.m_icon.text},ModalDialog.prototype.getId=function(){return this.m_modalId},ModalDialog.prototype.getIsActive=function(){return this.m_isModalActive},ModalDialog.prototype.getIsBodySizeFixed=function(){return this.m_body.isBodySizeFixed},ModalDialog.prototype.getIsFixedToIcon=function(){return this.m_isFixedToIcon},ModalDialog.prototype.getIsFooterAlwaysShown=function(){return this.m_footer.isAlwaysShown},ModalDialog.prototype.getIsIconActive=function(){return this.m_icon.isActive},ModalDialog.prototype.getLeftMarginPercentage=function(){return this.m_margins.left},ModalDialog.prototype.getRightMarginPercentage=function(){return this.m_margins.right},ModalDialog.prototype.getShowCloseIcon=function(){return this.m_showCloseIcon},ModalDialog.prototype.getTopMarginPercentage=function(){return this.m_margins.top},ModalDialog.prototype.getFooterText=function(){return this.m_footer.footerText.text},ModalDialog.prototype.getFooterTextElementId=function(){return this.m_footer.footerText.elementId},ModalDialog.prototype.setBodyDataFunction=function(a){return"function"!=typeof a&&null!==a?(logger.logError("ModalDialog.setBodyDataFunction: dataFunc param must be a function or null"),this):(this.m_body.dataFunction=a,this)},ModalDialog.prototype.setBodyElementId=function(a){return a&&"string"==typeof a&&(this.isActive()&&$("#"+this.getBodyElementId()).attr("id",a),this.m_body.elementId=a),this},ModalDialog.prototype.setBodyHTML=function(a){return a&&"string"==typeof a&&this.isActive()&&$("#"+this.getBodyElementId()).html(a),this},ModalDialog.prototype.setBottomMarginPercentage=function(a){return"number"==typeof a&&(this.m_margins.bottom=a<=0?1:a,this.isActive()&&MP_ModalDialog.resizeModalDialog(this.getId())),this},ModalDialog.prototype.setFooterButtonCloseOnClick=function(a,b){var c=null,d=null,e=null,f=this;return"boolean"!=typeof b?(logger.logError("ModalDialog.setFooterButtonCloseOnClick: closeOnClick param must be of type boolean"),this):(c=this.getFooterButton(a),c?(c.setCloseOnClick(b),this.isActive()&&(d=$("#"+a),d.click(function(){e=c.getOnClickFunction(),e&&"function"==typeof e&&e(),b&&MP_ModalDialog.closeModalDialog(f.getId())}))):logger.logError("ModalDialog.setFooterButtonCloseOnClick: No button with the id of "+a+" exists for this ModalDialog"),this)},ModalDialog.prototype.setFooterButtonDither=function(a,b){var c=null,d=null;return"boolean"!=typeof b?(logger.logError("ModalDialog.setFooterButtonDither: Dithered param must be of type boolean"),this):(c=this.getFooterButton(a),c?(c.setIsDithered(b),this.isActive()&&(d=$("#"+a),b?d.attr("disabled",!0):d.attr("disabled",!1))):logger.logError("ModalDialog.setFooterButtonDither: No button with the id of "+a+" exists for this ModalDialog"),this)},ModalDialog.prototype.setFooterButtonOnClickFunction=function(a,b){var c=null,d=this;return"function"!=typeof b&&null!==b?(logger.logError("ModalDialog.setFooterButtonOnClickFunction: clickFunc param must be a function or null"),this):(c=this.getFooterButton(a),c?(c.setOnClickFunction(b),this.isActive()&&$("#"+a).unbind("click").click(function(){b&&b(),c.closeOnClick()&&MP_ModalDialog.closeModalDialog(d.getId())})):logger.logError("ModalDialog.setFooterButtonOnClickFunction: No button with the id of "+a+" exists for this ModalDialog"),this)},ModalDialog.prototype.setFooterButtonText=function(a,b){var c=null;return"string"!=typeof b?(logger.logError("ModalDialog.setFooterButtonText: buttonText param must be a string"),this):b?(c=this.getFooterButton(a),c?(c.setText(b),this.isActive()&&$("#"+a).html(b)):logger.logError("ModalDialog.setFooterButtonText: No button with the id of "+a+" exists for this ModalDialog"),this):(logger.logError("ModalDialog.setFooterButtonText: buttonText param must not be empty or null"),this)},ModalDialog.prototype.setFooterElementId=function(a){return a&&"string"==typeof a&&(this.isActive()&&$("#"+this.getFooterElementId()).attr("id",a),this.m_footer.elementId=a),this},ModalDialog.prototype.setFooterCheckboxLabel=function(a){return"string"==typeof a&&""!==a&&(this.m_footer.checkbox.label=a),this},ModalDialog.prototype.setFooterCheckboxEnabled=function(a){return"boolean"==typeof a&&(this.m_footer.checkbox.enabled=a),this},ModalDialog.prototype.setFooterCheckboxIsChecked=function(a){return"boolean"==typeof a&&(this.m_footer.checkbox.isChecked=a),this},ModalDialog.prototype.setFooterCheckboxClickFunction=function(a){return a&&"function"==typeof a&&(this.setFooterCheckboxEnabled(!0),this.m_footer.checkbox.onClick=a),this},ModalDialog.prototype.setVerifyCloseFunctionResponse=function(a){return"boolean"==typeof a&&(this.m_header.verifyCloseFunctionResponse=a),this},ModalDialog.prototype.activeIconClickEventHandler=function(){return MP_ModalDialog.showModalDialog(this.getId()),this},ModalDialog.prototype.setIsIconActive=function(a){var b=this;if("boolean"==typeof a){this.m_icon.isActive=a;var c=$("#"+this.getIconElementId());c&&(c.unbind("click"),a&&c.click(function(){b.activeIconClickEventHandler()}))}return this},ModalDialog.prototype.setHasGrayBackground=function(a){return"boolean"==typeof a&&(this.m_hasGrayBackground=a),this},ModalDialog.prototype.setHeaderCloseFunction=function(a){var b=this;return"function"!=typeof a&&null!==a?(logger.logError("ModalDialog.setHeaderCloseFunction: closeFunc param must be a function or null"),this):(this.m_header.closeFunction=a,this.isActive()&&$(".dyn-modal-hdr-close").click(function(){var c=!0;a&&(c=a()),b.verifyCloseFunctionResponse()?c&&MP_ModalDialog.closeModalDialog(b.getId()):MP_ModalDialog.closeModalDialog(b.getId())}),this)},ModalDialog.prototype.setHeaderElementId=function(a){return a&&"string"==typeof a&&(this.isActive()&&$("#"+this.getHeaderElementId()).attr("id",a),this.m_header.elementId=a),this},ModalDialog.prototype.setHeaderTitle=function(a){return a&&"string"==typeof a&&(this.isActive()&&$("#"+this.getHeaderElementId()+" .dyn-modal-hdr-title").html(a),this.m_header.title=a),this},ModalDialog.prototype.setIconClass=function(a){return a&&"string"==typeof a&&($("#"+this.getIconElementId()).removeClass(this.m_icon.cssClass).addClass(a),this.m_icon.cssClass=a),this},ModalDialog.prototype.setIconElementId=function(a){return a&&"string"==typeof a&&($("#"+this.getIconElementId()).attr("id",a),this.m_icon.elementId=a),this},ModalDialog.prototype.setIconHoverText=function(a){return null!==a&&"string"==typeof a&&(this.m_icon.hoverText=a,$("#"+this.getIconElementId()).attr("title",a)),this},ModalDialog.prototype.setIconText=function(a){return null!==a&&"string"==typeof a&&(this.m_icon.text=a,$("#"+this.getIconElementId()).html(a)),this},ModalDialog.prototype.setId=function(a){return a&&"string"==typeof a&&(this.m_modalId=a),this},ModalDialog.prototype.setIsActive=function(a){return"boolean"==typeof a&&(this.m_isModalActive=a),this},ModalDialog.prototype.setIsBodySizeFixed=function(a){return"boolean"==typeof a&&(this.m_body.isBodySizeFixed=a),this},ModalDialog.prototype.setIsFixedToIcon=function(a){return"boolean"==typeof a&&(this.m_isFixedToIcon=a),this},ModalDialog.prototype.setIsFooterAlwaysShown=function(a){return"boolean"==typeof a&&(this.m_footer.isAlwaysShown=a),this},ModalDialog.prototype.setLeftMarginPercentage=function(a){return"number"==typeof a&&(this.m_margins.left=a<=0?1:a,this.isActive()&&MP_ModalDialog.resizeModalDialog(this.getId())),this},ModalDialog.prototype.setRightMarginPercentage=function(a){return"number"==typeof a&&(this.m_margins.right=a<=0?1:a,this.isActive()&&MP_ModalDialog.resizeModalDialog(this.getId())),this},ModalDialog.prototype.setShowCloseIcon=function(a){return"boolean"==typeof a&&(this.m_showCloseIcon=a),this},ModalDialog.prototype.setTopMarginPercentage=function(a){return"number"==typeof a&&(this.m_margins.top=a<=0?1:a,this.isActive()&&MP_ModalDialog.resizeModalDialog(this.getId())),this},ModalDialog.prototype.setFooterText=function(a){return"string"==typeof a&&""!==a&&(this.m_footer.footerText.text=a,this.isActive()&&$("#"+this.getFooterTextElementId()).html(a)),this},MessageModal.prototype=new ModalDialog,MessageModal.prototype.setLine1=function(a){this.m_line1=a},MessageModal.prototype.getLine1=function(){return this.m_line1||""},MessageModal.prototype.setLine2=function(a){this.m_line2=a},MessageModal.prototype.getLine2=function(){return this.m_line2||""},MessageModal.prototype.setCustomClass=function(a){this.m_customClass=a},MessageModal.prototype.getCustomClass=function(){return this.m_customClass||""},MessageModal.prototype.getModalTextHTML=function(){return"<div class='default-container "+this.getCustomClass()+"'><span class='message-info-text'>"+this.getLine1()+"</span>"+this.getLine2()+"</div>"},MessageModal.prototype.setMessage=function(a,b){var c="";this.m_line1=a||"",this.m_line2=b||"",this.setLeftMarginPercentage(35).setRightMarginPercentage(35).setTopMarginPercentage(20).setIsBodySizeFixed(!1).setIsFooterAlwaysShown(!0),c=this.getModalTextHTML(),this.isActive()?this.setBodyHTML(c):this.setBodyDataFunction(function(a){a.setBodyHTML(c)})},ErrorModal.prototype=new MessageModal,ErrorModal.prototype.getModalTextHTML=function(){return"<div class='error-container "+this.getCustomClass()+"'><span class='error-text message-info-text'>"+this.getLine1()+"</span>"+this.getLine2()+"</div>"},WarningModal.prototype=new MessageModal,WarningModal.prototype.getModalTextHTML=function(){return"<div class='warning-container "+this.getCustomClass()+"'><span class='message-info-text'>"+this.getLine1()+"</span>"+this.getLine2()+"</div>"},InfoModal.prototype=new MessageModal,InfoModal.prototype.getModalTextHTML=function(){return"<div class='information-container "+this.getCustomClass()+"'><span class='message-info-text'>"+this.getLine1()+"</span>"+this.getLine2()+"</div>"},BusyModal.prototype=new MessageModal,BusyModal.prototype.getModalTextHTML=function(){return"<div class='busy-container "+this.getCustomClass()+"'><span class='message-info-text'>"+this.getLine1()+"</span>"+this.getLine2()+"</div>"};var MPageControls=MPageControls||{};MPageObjectOriented={},MPageObjectOriented.inherits=function(a,b){$.each(b.prototype,function(b,c){a.prototype[b]=c}),$.each(b,function(b,c){a[b]=c})},MPageObjectOriented.createAttribute=function(a,b){a.prototype["set"+b]=function(a){this["m_"+b]=a},a.prototype["get"+b]=function(){return this["m_"+b]}},MPageControls.getId=function(a){if(a instanceof String||"string"==typeof a)return a;if(null===a)return"";var b=void 0;if(a instanceof jQuery&&(b=a.attr("id")),a&&a.getAttribute&&(b=a.getAttribute("id")),!b)throw new Error("You have tried to pass an object to MPageControls.getId that does not have a valid ID attribute.");return b},MPageControls.getDefaultTemplates=function(){return new TemplateEngine.TemplateFactory(MPageControls.defaultTemplates())},MPageControls.fromId=function(a){var b=$("#"+a);return 0===b.length?null:b},MPageControls.setMaxHeight=function(a){this.m_maxHeight=a;
},MPageControls.getMaxHeight=function(){return this.m_maxHeight},function(){var a=MPageControls,b=MPageObjectOriented.createAttribute;a.Control=function(b){this.setControlId(a.Control.idCounter),a.Control.idCounter++,b?(this.setElement(b),this.init()):this.setElement(a.Control.ID_PREFIX+this.getControlId())},a.Control.idCounter=0,a.Control.ID_PREFIX="mpage_controls_control_",b(a.Control,"ControlId"),b(a.Control,"Parent"),a.Control.prototype.init=function(){},a.Control.prototype.setElement=function(a){this.m_element=MPageControls.getId(a)},a.Control.prototype.getElement=function(){return MPageControls.fromId(this.m_element)},a.Control.prototype.setContents=function(a){this.m_contents=MPageControls.getId(a)},a.Control.prototype.getContents=function(){return MPageControls.fromId(this.m_contents)},a.Control.prototype.getElementId=function(){return this.m_element},a.Control.prototype.renderTemplate=function(a,b){b||(b={}),b.controlId||(b.controlId=this.getControlId());var c=a(b);this.getElement().html(c)},a.Control.prototype.fire=function(a,b){var c=this.getParent();c&&c[a]&&(void 0!=b||null!=b?c[a].apply(c,b):c[a].apply(c,[]))},a.Control.prototype.bind=function(a,b,c){b.bind(a+".control"+this.getControlId(),c)},a.Control.prototype.destroyEvents=function(){this.getElement()&&this.getElement().unbind(".control"+this.getControlId())},a.Control.prototype.focus=function(){this.getElement().focus()},a.Control.prototype.trigger=function(a,b){if(this[a])return b||(b=[]),this[a].apply(this,b)}}(),MPageControls.defaultTemplates=function(){var a=TemplateEngine,b=a.tag("div"),c=a.tag("input"),d=a.tag("span");return{list:function(a){return b({class:"list",tabindex:"0",id:a.listId},a.items)},listItem:function(a){return b({class:"list-item",id:a._elementId},a.content)},ddListItem:function(a){return b({class:"list-item",id:a._elementId},a[a.displayKey])},autoSuggest:function(a){return b({class:"auto-suggest input"},b({id:a.closebtnId,class:"close-btn"},"&nbsp;"),b({class:"auto-suggest-input-wrapper"},c({type:"text",class:"search-box",id:a.textboxId})))},autoSuggestList:function(a){return b({class:"auto-suggest suggestions",style:"position: relative",tabindex:"0",id:a.listId},a.items)},emptyList:function(){return b({class:"auto-suggest suggestions res-none",style:"position: relative",tabindex:"0"},i18n.NO_RESULTS_FOUND)},cclSearch:function(a){return b({class:"auto-suggest"},b({class:"auto-suggest-search-box"},c({type:"text",id:a.textboxId})),b({class:"clear-search",id:a.closebtnId},d({class:"clear-button",style:"display: inline-block"})))},personnelSearchItem:function(a){return b({id:a._elementId},a.NAME_FULL_FORMATTED)},providerSuggestList:function(a){var c={class:"auto-suggest suggestions",style:"position: relative;",tabindex:"0",id:a.listId},d=MPageControls.getMaxHeight();return d&&(c.style="position: relative; max-height: "+d+"px;"),b(c,a.items,b({id:"newProviderAssignment"},i18n.ASSIGN_NEW_PROVIDER))},orderSearch:function(a){return b({class:"auto-suggest"},b({class:"order-search-box"},c({type:"text",class:"search-box noe2-search",id:a.textboxId})),b({class:"clear-search",id:a.closebtnId},d({class:"clear-button",style:"display: inline-block"})))},orderSearchItem:function(a){return b({id:a._elementId},d({class:a.iconClass},"&nbsp;"),a.content,d({class:"order-sentence"},a.SENTENCE))},documentedSearchItem:function(a){return b({id:a._elementId},d({class:a.iconClass},"&nbsp;"),a.content)},nomenSearchItem:function(a){return b({id:a._elementId},a.m_Data.SOURCESTRING)},messageBar:function(a){return b({class:a.msgDivClass},d("&nbsp;"),a.message,d({class:"close-btn hidden",id:a.closeBtnId},"&nbsp;"))},venueTemplate:function(a){return b({id:a._elementId},b({class:"venue-item"},a.VENUE_DISPLAY))}}},function(a){var b=MPageControls,c=MPageObjectOriented.inherits,d=MPageObjectOriented.createAttribute;b.AlertMessage=function(a,c,d){this.setTemplate(c),this.setCssClass(d),this.setIsClosable(!1),b.Control.call(this,a)},c(b.AlertMessage,b.Control),b.AlertMessage.MessageTypes={WARNING:"msg-warning",INFORMATION:"msg-info",ERROR:"msg-error"},d(b.AlertMessage,"Template"),d(b.AlertMessage,"CssClass"),d(b.AlertMessage,"IsClosable");var e=b.AlertMessage.prototype;e.getCloseBtnId=function(){return"control_"+this.getControlId()+"_closebtn"},e.render=function(b){var c={msgDivClass:this.getCssClass(),message:b,closeBtnId:this.getCloseBtnId()},d=this;this.getElement().html(this.getTemplate().render(c)),this.getIsClosable()&&(a("#"+this.getCloseBtnId()).removeClass("hidden"),a("#"+this.getCloseBtnId()).click(function(){d.close()}))},e.close=function(){a(this.getElement()).hide()}}(jQuery),function(a){var b=MPageControls,c=MPageObjectOriented.inherits,d=MPageObjectOriented.createAttribute;b.AutoSuggest=function(a){this.setCaptionClass("caption"),this.setTemplate(MPageControls.getDefaultTemplates().autoSuggest),this.setCaption(""),this.setAutoHideCloseButton(!0),this.setDelay(50),this.setDetailDialog(null),this.setHighlightEnabled(!0),this.setSynchSuggestionsWidth(!0),this.setBackgroundClass("search-box-image"),this.mBlurEnabled=!0,this.setOnChange(function(){}),this.setOnClose(function(){}),this.setOnEnter(function(){}),this.setOnDelay(function(){}),this.setRequestItemValueCallback(function(a){return a.content}),b.Control.call(this,a)},c(b.AutoSuggest,b.Control),d(b.AutoSuggest,"List"),d(b.AutoSuggest,"CaptionClass"),d(b.AutoSuggest,"DetailDialog"),d(b.AutoSuggest,"Delay"),d(b.AutoSuggest,"Template"),d(b.AutoSuggest,"Caption"),d(b.AutoSuggest,"OnChange"),d(b.AutoSuggest,"OnClose"),d(b.AutoSuggest,"OnDelay"),d(b.AutoSuggest,"OnEnter"),d(b.AutoSuggest,"Timer"),d(b.AutoSuggest,"RequestItemValueCallback"),d(b.AutoSuggest,"HighlightEnabled"),d(b.AutoSuggest,"SynchSuggestionsWidth"),d(b.AutoSuggest,"AutoHideCloseButton"),d(b.AutoSuggest,"Items"),d(b.AutoSuggest,"BackgroundClass");var e=b.AutoSuggest.prototype;e.init=function(){var b=this,c=null;this.getElement().empty(),this.getElement().append(this.getTemplate().render({textboxId:this.getTextboxId(),closebtnId:this.getClosebtnId()})),c=this.getTextbox(),this.activateCaption(),this.createDialog(),this.setListTemplate(MPageControls.getDefaultTemplates().autoSuggestList),c.click(function(){b.deactivateCaption()}),c.blur(function(){0===b.getValue().length&&b.activateCaption(),setTimeout(function(){var c=a("#control_"+b.getControlId()+"_content .suggestions");c.is(":focus")||b.close()},300)}),c.keyup(function(a){b.processTextboxKeyDown(a)}),a("#"+this.getClosebtnId()).click(function(){b.close(),b.getTextbox()[0].value="",b.getOnClose()(),b.activateCaption()}),this.getAutoHideCloseButton()&&this.hideCloseButton()},e.processTextboxKeyDown=function(b){var c=this,d=this.getDetailDialog();if(c.getTimer()&&clearTimeout(c.getTimer()),this.getTextbox().hasClass(this.getCaptionClass())&&this.getTextbox().removeClass(this.getCaptionClass()),0===this.getValue().length)return this.hideCloseButton(),void(d&&d.getVisible()&&this.close());if(a("#"+this.getClosebtnId()).css("display","inline-block"),13==b.keyCode)return d&&d.getVisible()&&this.getList().getSelectedIndex()>=0?(this.getList().getOnEnter()(),void this.close()):(this.close(),void this.getOnEnter()());c.getList()&&c.getList().processKeyEvent(b);var e=[38,40];if(a.inArray(b.keyCode,e)!=-1)return void this.moveCaretToEnd();this.getOnChange()();var f=setTimeout(function(){c.getOnDelay()(),c.getValue()&&0===c.getValue().length&&c.close()},c.getDelay());c.setTimer(f)},e.activateCaption=function(){0!==this.getCaption().length&&(this.getTextbox().addClass(this.getCaptionClass()),this.getTextbox()[0].value=this.getCaption(),this.getAutoHideCloseButton()&&this.hideCloseButton())},e.moveCaretToEnd=function(){var a=this.getTextbox().get(0),b=this.getValue().length;if(a.setSelectionRange)return void a.setSelectionRange(b,b);if(a.createTextRange){var c=a.createTextRange();c.moveEnd("character",b),c.moveStart("character",b),c.select()}},e.hideCloseButton=function(){a("#"+this.getClosebtnId()).css("display","none")},e.showCloseButton=function(){a("#"+this.getClosebtnId()).css("display","inline-block")},e.deactivateCaption=function(){this.getTextbox().hasClass(this.getCaptionClass())&&(this.getTextbox().removeClass(this.getCaptionClass()),this.getTextbox()[0].value="")},e.getTextbox=function(){return this.getElement().find("#"+this.getTextboxId())},e.getTextboxId=function(){return"control_"+this.getControlId()+"_textbox"},e.getClosebtnId=function(){return"control_"+this.getControlId()+"_closebtn"},e.close=function(){this.getDetailDialog()&&this.getDetailDialog().hide(),this.mBlurEnabled=!0},e.setSuggestions=function(c){if(this.setItems(c),0===c.length||0===this.getValue().length||this.getTextbox().hasClass(this.getCaptionClass()))return void this.close();if(this.getSynchSuggestionsWidth()&&a("#control_"+this.getControlId()+"_content").css("min-width",this.getElement().width()+"px"),this.getList().renderItems(c),this.getDetailDialog().show(),this.getDetailDialog().updatePosition(),this.getHighlightEnabled()){var d=new b.TextHighlighter(this.getList().getElement());d.highlight(this.getValue())}var e=this,f="#control_"+e.getControlId()+"_content .suggestions";a(f).attr("tabindex",0),a(f).on("blur",function(){setTimeout(function(){e.getElement()&&!e.getTextbox().is(":focus")&&e.close()},300)})},e.createDialog=function(){var c=this,d=a("<div></div>");d.appendTo(this.getElement().offsetParent()),d.attr("id","control_"+this.getControlId()+"_content");var e=new b.DetailDialog(this.getElement(),d);e.setElementCorner(["bottom","left"]),e.setAlwaysOnTop(!0);var f=new b.List(d);f.setOnSelect(function(a){c.setValue(c.getRequestItemValueCallback()(a)),c.getOnEnter()(),c.close()}),this.setList(f),this.setDetailDialog(e)},e.getValue=function(){return this.getElement()&&this.getTextbox().length?this.getTextbox()[0].value:null},e.setValue=function(a){this.getTextbox()[0].value=a,this.showCloseButton()},e.destroy=function(){this.getList()&&this.getList().destroy(),this.getDetailDialog()&&this.getDetailDialog().destroy()},e.setListItemTemplate=function(a){this.getList().setItemTemplate(a)},e.setListTemplate=function(a){this.getList().setListTemplate(a)},e.activateBackground=function(){this.getTextbox().addClass(this.getBackgroundClass())}}(jQuery),function(a){var b=MPageControls,c=MPageObjectOriented,d=c.inherits,e=c.createAttribute;b.DetailDialog=function(a,c){var d=function(a){a.slideUp(150)},e=function(a){a.slideDown(150)};this.setAlwaysOnTop(!1),this.setElementCorner(["bottom","left"]),this.setContentsCorner(["top","left"]),this.setBeforeShow(function(){}),this.setAutoFlipVertical(!0),this.setAutoFlipHorizontal(!0),this.setContents(c),this.setShowEffect(e),this.setHideEffect(d),this.setVisible(!1),this.setOnShow(function(){}),this.setOnHide(function(){}),b.Control.call(this,a)},d(b.DetailDialog,b.Control),e(b.DetailDialog,"ShowEffect"),e(b.DetailDialog,"HideEffect"),e(b.DetailDialog,"Visible"),e(b.DetailDialog,"OnShow"),e(b.DetailDialog,"OnHide"),e(b.DetailDialog,"Created"),e(b.DetailDialog,"ElementCorner"),e(b.DetailDialog,"ContentsCorner"),e(b.DetailDialog,"ElementFlippedCorner"),e(b.DetailDialog,"ContentsFlippedCorner"),e(b.DetailDialog,"BeforeShow"),e(b.DetailDialog,"AutoFlipVertical"),e(b.DetailDialog,"AutoFlipHorizontal"),e(b.DetailDialog,"AlwaysOnTop");var f=b.DetailDialog.prototype;f.init=function(){},f.setFlipReference=function(a){this.m_flipReference=MPageControls.getId(a)},f.getFlipReference=function(){return MPageControls.fromId(this.m_flipReference)},f.toggle=function(){this.getVisible()?this.hide():this.show()},f.updatePosition=function(b,c){var d=this.getElement(),e=this.getContents(),f=0,g=0,h=d.offset();switch(b||(b=this.getElementCorner()),c||(c=this.getContentsCorner()),b[0]){case"top":g=h.top;break;case"bottom":g=h.top+d.outerHeight()}switch(b[1]){case"left":f=h.left;break;case"right":f=h.left+d.outerWidth()}"bottom"==c[0]&&(g-=e.outerHeight()),"right"==c[1]&&(f-=e.outerWidth());var i=e.offsetParent();i.length&&"HTML"===i.prop("tagName")&&(i=a(document.body));var j=f-i.offset().left,k=0;k="windowTop"==c[0]?i.offset().top:g-i.offset().top,this.getAlwaysOnTop()&&this.getContents().css("z-index","100"),this.getContents().css("position","absolute"),this.getContents().css({left:j,top:k}).show()},f.show=function(){if(!this.getVisible()){this.beforeShow(),this.getContents().css("display","block"),this.updatePosition(this.getElementCorner(),this.getContentsCorner()),this.setElementFlippedCorner(this.getElementCorner()),this.setContentsFlippedCorner(this.getContentsCorner()),this.autoFlipVertical(),this.autoFlipHorizontal(),this.autoSizeStatic(),this.m_OnShow(this),this.setVisible(!0)}},f.autoFlipUp=function(){this.autoFlipVertical()},f.autoFlipVertical=function(){var b="";if(this.getAutoFlipVertical()){var c=a(window).scrollTop()+a(window).height(),d=this.getContents();this.getFlipReference()&&(c=this.getFlipReference().offset().top+parseInt(this.getFlipReference().outerHeight(),10));var e=parseInt(d.outerHeight(),10),f=d.offset().top,g=f+e;g>=c&&(b=this.getElementFlippedCorner()[1]==this.getContentsFlippedCorner()[1]?"top":"bottom",f<=e?(e>=c&&(d.outerHeight(c-10),d.outerWidth(d.outerWidth()+17),d.css("overflow-y","auto")),this.setElementFlippedCorner([b,this.getElementFlippedCorner()[1]]),this.setContentsFlippedCorner(["windowTop",this.getContentsFlippedCorner()[1]]),this.updatePosition(this.getElementFlippedCorner(),this.getContentsFlippedCorner())):(this.setElementFlippedCorner([b,this.getElementFlippedCorner()[1]]),this.setContentsFlippedCorner(["bottom",this.getContentsFlippedCorner()[1]]),this.updatePosition(this.getElementFlippedCorner(),this.getContentsFlippedCorner())))}},f.autoFlipHorizontal=function(){if(this.getAutoFlipHorizontal()){var b=a(window).width(),c=0,d=this.getFlipReference();d&&(c=d.offset().left,b=c+parseInt(d.outerWidth(),10));var e=this.getContents().offset().left,f=e+parseInt(this.getContents().outerWidth(),10);e<c?this.updatePosition([this.getElementFlippedCorner()[0],"right"],[this.getContentsFlippedCorner()[0],"left"]):f>b&&this.updatePosition([this.getElementFlippedCorner()[0],"left"],[this.getContentsFlippedCorner()[0],"right"])}},f.autoSizeStatic=function(){if(!this.getAutoFlipVertical()){var a=this.getContents(),b=a[0].getBoundingClientRect(),c=window.innerHeight;b.bottom>c&&a.css({overflow:"auto",height:c-b.top+"px"})}},f.hide=function(){this.getVisible()&&(this.getContents().css("display","none"),this.setVisible(!1),this.m_OnHide(this))},f.beforeShow=function(){this.getBeforeShow()(this)},f.destroy=function(){this.getContents()&&this.getContents().remove(),this.setVisible(!1),this.setCreated(!1)}}(jQuery),function(a){var b=MPageControls,c=MPageObjectOriented.inherits,d=MPageObjectOriented.createAttribute;b.DropDown=function(a,c,d){a&&this.setSelector(new b.Selector(a,"selected","unselected")),c&&this.setContents(c),this.setOnShow(function(){}),this.setOnHide(function(){}),this.setOnSelect(function(){}),this.setDisabledCssClass("disabled"),this.m_value=d,b.Control.call(this,a)},c(b.DropDown,b.Control),d(b.DropDown,"DetailDialog"),d(b.DropDown,"Selector"),d(b.DropDown,"OnShow"),d(b.DropDown,"OnHide"),d(b.DropDown,"OnSelect"),d(b.DropDown,"Enabled"),d(b.DropDown,"DisabledCssClass");var e=b.DropDown.prototype;e.init=function(){this.setDetailDialog(new b.DetailDialog(this.getElement(),this.getContents())),this.getSelector()||this.setSelector(new b.Selector(this.getElement(),"selected","unselected"));var a=this;this.getSelector().setOnSelect(function(){a.getDetailDialog().show()}),this.getSelector().setOnUnselect(function(){a.getDetailDialog().hide()}),this.getDetailDialog().setOnShow(function(){a.getDetailDialog().getContents().css("z-index","7000"),a.onShow()}),this.getDetailDialog().setOnHide(function(){a.m_OnHide(a)}),this.setValue(this.getValue())},e.setValue=function(a){this.m_value=a,this.getElement()&&this.getElement().html(a)},e.onShow=function(){this.m_OnShow(this)},e.getValue=function(){return this.getDetailDialog()?this.m_value:""},e.show=function(){this.getDetailDialog()&&this.getDetailDialog().show()},e.hide=function(){this.getDetailDialog()&&(this.getDetailDialog().hide(),this.getSelector().unselect())},e.destroy=function(){this.getDetailDialog()&&this.getElement()&&(this.getDetailDialog().destroy(),this.getElement().remove())},e.disable=function(){this.m_Enabled=!1,this.hide(),this.getSelector().setEnabled(!1),this.getSelector().getElement().addClass(this.getDisabledCssClass())},e.enable=function(){this.m_Enabled=!0,this.getSelector().setEnabled(!0),this.getSelector().getElement().removeClass(this.getDisabledCssClass())},e.setEnabled=function(a){a?this.enable():this.disable()}}(jQuery),function(a){var b=MPageControls,c=MPageObjectOriented.createAttribute,d=MPageObjectOriented.inherits;b.DropDownNested=function(a,c){this.setSelector(new b.Selector(a,"selected","unselected")),this.setOnShow(function(){}),this.setOnHide(function(){}),this.setOnSelect(function(){}),this.setTree(c),b.Control.call(this,a)},d(b.DropDownNested,b.Control);var e=b.DropDownNested.prototype;c(b.DropDownNested,"DetailDialog"),c(b.DropDownNested,"Selector"),c(b.DropDownNested,"Tree"),c(b.DropDownNested,"RootNode"),c(b.DropDownNested,"OnShow"),c(b.DropDownNested,"OnHide"),c(b.DropDownNested,"OnSelect"),c(b.DropDownNested,"SelectedNode"),b.DropDownNested.Node=function(c,d,e){this.children=[],this.parent=d,this.dropDown=e;var f=this;a.each(c,function(c,d){"children"==c?a.each(d,function(){f.children.push(new b.DropDownNested.Node(this,f,e))}):f[c]=d})},b.DropDownNested.Node.prototype.makeElement=function(b){var c=a("<li></li>").html(this.name),d=this;a(c).click(function(){d.dropDown.select(d)}),b.append(c);var e="";return this.children.length>0&&(e=a("<ul></ul>"),a.each(this.children,function(){this.makeElement(e)})),b.append(e),c},e.init=function(){this.setRootNode(new b.DropDownNested.Node(this.getTree(),null,this));var c="controlContents"+this.getControlId(),d=a("<ul></ul>");this.getRootNode().makeElement(d);var e=a("<div></div>");e.attr("id",c),e.append(d.children("ul")),e.appendTo(a("body")),this.setDetailDialog(new b.DetailDialog(this.getElement(),e));var f=this;this.getSelector().setOnSelect(function(){f.getDetailDialog().show()}),this.getSelector().setOnUnselect(function(){f.getDetailDialog().hide()}),this.getDetailDialog().setOnShow(function(){f.getDetailDialog().getContents().css("z-index","7000"),f.m_OnShow(f)}),this.getDetailDialog().setOnHide(function(){f.m_OnHide(f)})},e.select=function(a){this.getElement().html(a.name),this.setSelectedNode(a),this.getSelector().unselect(),this.m_OnSelect(a)},e.show=function(){this.getDetailDialog().show()},e.hide=function(){this.getDetailDialog().hide()},e.destroy=function(){this.getDetailDialog().destroy(),this.getElement().remove()}}(jQuery),function(a){var b=MPageControls,c=MPageControls.DropDown,d=MPageObjectOriented.inherits,e=MPageObjectOriented.createAttribute;MPageControls.Tree;b.DropDownTree=function(a){this.setTreeCreated(!1),this.setOnSelect(function(){}),this.setOnCreate(function(){}),c.call(this,a,null)},d(b.DropDownTree,c),e(b.DropDownTree,"Tree"),e(b.DropDownTree,"TreeCreated"),e(b.DropDownTree,"OnLazyRead"),e(b.DropDownTree,"OnCreate"),e(b.DropDownTree,"OnSelect");var f=b.DropDownTree.prototype;f.init=function(){var b=a("<div></div>");b.appendTo(this.getElement().offsetParent()),b.attr("id","content"+this.getControlId()),this.setContents(b),c.prototype.init.call(this);var d=this;this.getDetailDialog().setBeforeShow(function(){d.beforeShow()})},f.setTreeElement=function(a){this.mTreeElement=MPageControls.getId(a)},f.getTreeElement=function(){return MPageControls.fromId(this.mTreeElement)},f.create=function(){var b=this,c=a("<div class='dynatree'></div>").appendTo(this.getContents()),d="treeElement"+this.getControlId();c.attr("id",d),this.setTreeElement(c),this.setTree(new MPageControls.Tree(this.getTreeElement())),this.getTree().setOnSelect(function(a){b.onSelect(a)}),this.getOnCreate()(),this.setTreeCreated(!0)},f.onSelect=function(a){this.setValue(a.data.title),this.getSelector().unselect()},f.getSelectedNode=function(){return null===this.getTree()||void 0===this.getTree()?null:this.getTree().getSelectedNode()},f.beforeShow=function(){this.getTreeCreated()||(this.create(),this.getOnLazyRead()&&this.getTree().setOnLazyRead(this.getOnLazyRead()))}}(jQuery),function(a){var b=MPageControls,c=(MPageObjectOriented.inherits,MPageObjectOriented.createAttribute);b.Group=function(){this.setControls([]),this.setCurrent(null)},c(b.Group,"Controls"),c(b.Group,"Current");var d=b.Group.prototype;d.add=function(a){this.getControls().push(a)},d.selectSingle=function(a){this.unselectAllExcept(a),a.select()},d.unselectAllExcept=function(a){for(var b=this.getControls(),c=b.length;c--;)b[c].unselect&&b[c]!=a&&b[c].unselect();this.setCurrent(a)},d.each=function(a){for(var b=this.getControls(),c=b.length;c--;)a(b[c])}}(jQuery),function(a){var b=MPageControls,c=MPageObjectOriented.inherits,d=MPageObjectOriented.createAttribute;b.List=function(a){var c=this;b.Control.call(this,a),this.setSelectedIndex(-1),this.setSelectedOption(0),this.setListTemplate(MPageControls.getDefaultTemplates().list),this.setItemTemplate(MPageControls.getDefaultTemplates().listItem),this.setHighlightClass("current"),this.setSelectedOptionClass("selected-option"),this.setOnSelect(function(){}),this.setOnMoveUp(function(){}),this.setOnMoveDown(function(){}),this.setOnKeyDown(function(){}),this.setOnDblClick(function(){}),this.setOnEnter(function(){c.select(c.getSelectedIndex())})},c(b.List,b.Control),d(b.List,"SelectedIndex"),d(b.List,"ListTemplate"),d(b.List,"ItemTemplate"),d(b.List,"Items"),d(b.List,"OnSelect"),d(b.List,"OnMoveUp"),d(b.List,"OnMoveDown"),d(b.List,"OnEnter"),d(b.List,"OnKeyDown"),d(b.List,"OnDblClick"),d(b.List,"HighlightClass"),d(b.List,"DisplayKey"),d(b.List,"SelectedOption"),d(b.List,"SelectedOptionClass");var e=b.List.prototype;e.init=function(){},e.makeItem=function(a){return a.content||(a.content=a[this.getDisplayKey()]),a},e.moveUp=function(){this.getSelectedIndex()<=0?this.setSelectedIndex(0):this.setSelectedIndex(this.getSelectedIndex()-1);var b=a(this.getElement()).children(),c=this.getSelectedIndex(),d=b.children().eq(c),e=d.position().top;e<0&&b.scrollTop(b.scrollTop()+e),this.highlight(c),this.getOnMoveUp()(this.getSelectedItem())},e.moveDown=function(){this.getSelectedIndex()>=this.getItems().length-1?this.setSelectedIndex(this.getItems().length-1):this.setSelectedIndex(this.getSelectedIndex()+1);var b=a(this.getElement()).children(),c=this.getSelectedIndex(),d=b.children().eq(c),e=d.position().top+d.outerHeight(!0)-b.height();e>0&&b.scrollTop(b.scrollTop()+e),this.highlight(c),this.getOnMoveDown()(this.getSelectedItem())},e.highlight=function(a){this.getElement().find("."+this.getHighlightClass()).removeClass(this.getHighlightClass()),this.getElement().find("#"+this.getIdByIndex(a)).addClass(this.getHighlightClass())},e.highlightSelectedOption=function(a){var b=this.getSelectedOption();a<0&&0===b&&(this.getElement().find("#"+this.getIdByIndex(b)).addClass(this.getSelectedOptionClass()),this.getElement().find("#"+this.getIdByIndex(a)).removeClass(this.getSelectedOptionClass())),(a>0||b>0)&&(this.getElement().find(".selected-item").removeClass(this.getSelectedOptionClass()),this.getElement().find("#"+this.getIdByIndex(b)).addClass(this.getSelectedOptionClass()))},e.getSelectedItem=function(){if(this.getSelectedIndex()<=-1)return null;var a=this.getItems();return a[this.getSelectedIndex()]},e.setSelectedItem=function(a){var b=this.getItemIndex(a);this.setSelectedIndex(b),this.highlight(b)},e.getItemIndex=function(a){for(var b=this.getItems(),c=b.length;c--;)if(b[c]==a)return c;return-1},e.renderItems=function(b){var c=this;this.setItems(b),this.setSelectedIndex(-1);var d=[];a.each(b,function(a,b){b=c.makeItem(b),b._elementId=c.getIdByIndex(a);var e=c.getItemTemplate().render(b);d.push(e),e.click(function(){!function(a){c.select(a)}(a)}),e.dblclick(function(){!function(a){c.doubleClick(a)}(a)})});var e=this.getListTemplate().render({items:d,listId:this.getListId()});this.getElement().empty(),this.getElement().append(e),e.keydown(function(a){c.processKeyEvent(a)})},e.processKeyEvent=function(a){switch(this.getOnKeyDown()(a),a.keyCode){case 40:a.preventDefault(),this.moveDown();break;case 38:a.preventDefault(),this.moveUp();break;case 13:this.getOnEnter()()}},e.select=function(a){"undefined"!=typeof a&&null!==a||(a=this.getSelectedIndex()),this.setSelectedIndex(a),this.highlight(a),this.getOnSelect()(this.getSelectedItem()),this.setSelectedOption(a)},e.doubleClick=function(a){this.getOnDblClick()(this.getSelectedItem())},e.getIdByIndex=function(a){return"controls_"+this.getControlId()+"_"+a},e.getListId=function(){return"controls_"+this.getControlId()+"_list"},e.focus=function(){a("#"+this.getListId()).focus()},e.destroy=function(){this.getElement().remove()}}(jQuery),function(a){var b=MPageControls,c=MPageObjectOriented,d=c.inherits,e=c.createAttribute;b.Modeless=function(a,c){this.setOnForceHide(function(){}),b.DetailDialog.call(this,a,c)},b.Modeless.hide=function(){b.Modeless.visibleInstance&&b.Modeless.visibleInstance.getVisible()&&(b.Modeless.visibleInstance.hide(),b.Modeless.visibleInstance.getOnForceHide()())},b.Modeless.visibleInstance=null,d(b.Modeless,b.DetailDialog),e(b.Modeless,"OnForceHide");var f=b.Modeless.prototype;f.show=function(){b.Modeless.hide(),b.DetailDialog.prototype.show.call(this),b.Modeless.visibleInstance=this}}(jQuery),function(a){var b=MPageControls,c=MPageObjectOriented.inherits,d=MPageObjectOriented.createAttribute;b.Selector=function(a,c,d){this.setIsSelected(!1),this.setEnabled(!0),this.setSelectedClass(c),this.setUnselectedClass(d),this.setUnselectOnClickEnabled(!0),this.setOnSelect(function(){}),this.setOnUnselect(function(){}),this.setDisabledClass("dithered"),b.Control.call(this,a)},d(b.Selector,"SelectedClass"),d(b.Selector,"UnselectedClass"),d(b.Selector,"IsSelected"),d(b.Selector,"OnSelect"),d(b.Selector,"OnUnselect"),d(b.Selector,"Enabled"),d(b.Selector,"DisabledClass"),d(b.Selector,"UnselectOnClickEnabled"),c(b.Selector,b.Control);var e=b.Selector.prototype;e.init=function(){var a=this;this.getElement().addClass(this.getUnselectedClass()),this.bind("click",this.getElement(),function(){a.getIsSelected()&&!a.getUnselectOnClickEnabled()||a.getEnabled()&&a.toggle()}),this.getIsSelected()?this.performSelection():this.performUnselection()},e.toggle=function(){this.getIsSelected()?this.unselect():this.select()},e.select=function(){this.getIsSelected()||(this.performSelection(),this.m_OnSelect(this))},e.performSelection=function(){void 0!==this.getUnselectedClass()&&this.getElement().removeClass(this.getUnselectedClass()),this.getElement().addClass(this.getSelectedClass()),this.setIsSelected(!0)},e.unselect=function(){this.getIsSelected()&&(this.performUnselection(),this.m_OnUnselect(this))},e.performUnselection=function(){this.getElement()&&(void 0!==this.getSelectedClass()&&this.getElement().removeClass(this.getSelectedClass()),this.getElement().addClass(this.getUnselectedClass()),this.setIsSelected(!1))},e.destroy=function(){this.destroyEvents()},e.setEnabled=function(a){this.m_Enabled=a,this.getElement()&&(a?this.getElement().removeClass(this.getDisabledClass()):this.getElement().addClass(this.getDisabledClass()))}}(jQuery),function(a){var b=MPageControls,c=MPageObjectOriented.inherits,d=MPageObjectOriented.createAttribute;b.Tab=function(){this.setButtonTemplate(null),this.setButtonSelectedClass("selected"),this.setContentUnselectedClass("hidden"),this.setOnSelect(function(){}),this.setOnUnselect(function(){}),this.setOnRender(function(){}),this.setEnabled(!0),b.Control.call(this,null)},c(b.Tab,b.Control),d(b.Tab,"Title"),d(b.Tab,"Button"),d(b.Tab,"Content"),d(b.Tab,"ButtonTemplate"),d(b.Tab,"ButtonSelectedClass"),d(b.Tab,"ContentUnselectedClass"),d(b.Tab,"OnSelect"),d(b.Tab,"OnUnselect"),d(b.Tab,"Enabled"),d(b.Tab,"OnRender"),d(b.Tab,"TabGroup");var e=b.Tab.prototype;e.getButtonId=function(){return"control_"+this.getControlId()+"_button"},e.getContentId=function(){return"control_"+this.getControlId()+"_content"},e.setEnabled=function(a){this.m_Enabled=a,this.getButton()&&this.getButton().setEnabled(a)},e.renderButton=function(c){var d=TemplateBuilder.buildTemplate(this.getButtonTemplate()),e=this,f=d.render({tab:this,tabButtonId:this.getButtonId()});a("#"+c).append(f);var g=a("#"+this.getButtonId());if(!g.length)return void this.setButton(void 0);var h=new b.Selector(g);h.setSelectedClass(this.getButtonSelectedClass()),h.setUnselectOnClickEnabled(!1),h.setOnSelect(function(){e.select()}),h.performUnselection(),this.setButton(h)},e.renderContent=function(c){var d=a("<div id='"+this.getContentId()+"'></div>");a("#"+c).append(d),this.setElement(d);var e=new b.Selector(d);e.setUnselectedClass(this.getContentUnselectedClass()),e.setEnabled(!1),e.performUnselection(),this.setContent(e)},e.render=function(a,b){this.renderButton(a),this.renderContent(b),this.getOnRender()()},e.select=function(){var a=this.getButton();void 0!==a&&a.performSelection(),this.getTabGroup()&&this.getTabGroup().unselectAllExcept(this),this.getContent().performSelection(),this.getOnSelect()()},e.unselect=function(){var a=this.getButton();void 0!==a&&a.unselect(),this.getContent().unselect(),this.getOnUnselect()()}}(jQuery),function(a){var b=MPageControls,c=MPageObjectOriented.inherits,d=MPageObjectOriented.createAttribute;b.TabGroup=function(){b.Group.call(this),this.setFirstTabCSSClass("first"),this.setLastTabCSSClass("last")},c(b.TabGroup,b.Group),d(b.TabGroup,"ButtonsContainerId"),d(b.TabGroup,"ContentsContainerId"),d(b.TabGroup,"DefaultButtonTemplate"),d(b.TabGroup,"FirstTabCSSClass"),d(b.TabGroup,"LastTabCSSClass");var e=b.TabGroup.prototype;e.render=function(){for(var a=this.getControls(),b=null,c=null,d=0;d<a.length;d++){var e=a[d];if(null===e.getButtonTemplate()&&e.setButtonTemplate(this.getDefaultButtonTemplate()),e.render(this.getButtonsContainerId(),this.getContentsContainerId()),void 0!==e.getButton()){var f=e.getButton().getElement();null===b&&(b=f),c=f,e.setTabGroup(this)}}var g=this.getFirstTabCSSClass(),h=this.getLastTabCSSClass();null!==b&&null!==g&&b.addClass(g),null!==c&&null!==h&&c.addClass(h)},e.eachControl=function(a){for(var b=this.getControls(),c=b.length;c--;)a(b[c])},e.disableAll=function(){this.eachControl(function(a){a.setEnabled&&a.setEnabled(!1)})},e.enableAll=function(){this.eachControl(function(a){a.setEnabled&&a.setEnabled(!0)})},e.addTab=function(a){this.getControls().push(a)}}(jQuery),function(a){var b=MPageControls,c=MPageObjectOriented.inherits,d=MPageObjectOriented.createAttribute;b.TextHighlighter=function(a){this.setClass("highlight"),this.setTag("span"),b.Control.call(this,a)},c(b.TextHighlighter,b.Control),d(b.TextHighlighter,"Tag"),d(b.TextHighlighter,"Class"),d(b.TextHighlighter,"OnHighlightWord"),b.TextHighlighter.prototype.highlight=function(b){var c,d,e=new RegExp("(?![^&;]+;)(?!<[^<>]*)("+b.replace(/([\^\$\(\)\[\]\{\}\*\.\+\?\|\\])/gi,"\\$1").split(/[, ]/).join("|")+")(?![^<>]*>)(?![^&;]+;)","gi"),f="<"+this.getTag()+" class='"+this.getClass()+"'>",g="</"+this.getTag()+">",h=this.getElement().find("*").contents().filter(function(){return 3===this.nodeType});a.each(h,function(b,h){c=a(h),d=c.text().replace(e,f+"$1"+g),c.replaceWith(d)})}}(jQuery),function(a){var b=MPageControls,c=MPageObjectOriented.createAttribute,d=MPageObjectOriented.inherits;b.Tree=function(a){this.setDynatreeOptions({}),this.setOnSelect(function(){}),b.Control.call(this,a)},d(b.Tree,b.Control),c(b.Tree,"DynatreeOptions"),c(b.Tree,"OnSelect"),c(b.Tree,"SelectedNode");var e=b.Tree.prototype;e.init=function(){var a=this,b=this.getDynatreeOptions();b.onLazyRead=function(b){a.lazyRead(b)},b.onActivate=function(b){a.onSelect(b)},b.OnPostInit=this.treeInit,b.autoFocus=!1,b.initAjax={},this.getElement().dynatree(b)},e.setOnLazyRead=function(a){this.m_OnLazyRead=a,this.lazyRead(this.getElement().dynatree("getRoot"));
},e.getOnLazyRead=function(){return this.m_OnLazyRead},e.lazyRead=function(a){this.m_OnLazyRead(a)},e.onSelect=function(a){this.getOnSelect()(a),this.setSelectedNode(a)}}(jQuery),function(){var a=MPageControls,b=MPageObjectOriented.inherits,c=MPageObjectOriented.createAttribute,d=MPageControls.List;a.DropDownList=function(b){this.setList(new d),this.setHighlightClass("current"),this.setIsMouseOverContents(!1),a.DropDown.call(this,b)},c(a.DropDownList,"List"),c(a.DropDownList,"DisplayKey"),c(a.DropDownList,"HighlightClass"),c(a.DropDownList,"IsMouseOverContents"),b(a.DropDownList,a.DropDown);var e=a.DropDownList.prototype;e.init=function(){var b=this,c=$("<div tabindex='0' id='control_"+this.getControlId()+"_selector' class='selector'></div>"),d=$("<div style='display: none' id='control_"+this.getControlId()+"_contents' class ='contents' ></div>"),e=this.getList();e.setElement(d),e.setListTemplate(MPageControls.getDefaultTemplates().list),e.setItemTemplate(MPageControls.getDefaultTemplates().ddListItem),e.setHighlightClass(this.getHighlightClass()),e.setOnSelect(function(){b.selectItem()}),e.bind("mouseover",d,function(){b.setIsMouseOverContents(!0)}),e.bind("mouseout",d,function(){b.setIsMouseOverContents(!1)}),e.bind("blur",c,function(){b.getIsMouseOverContents()||b.hide()}),this.getElement().append(c),this.getElement().append(d),this.setContents(d),this.setElement(c),this.getSelector()&&(this.getSelector().destroyEvents(),this.getSelector().setElement(c),this.getSelector().init()),this.getList().makeItem=function(a){return a.displayKey=b.getDisplayKey(),a},a.DropDown.prototype.init.call(this),this.getDetailDialog().setVisible(!1)},e.onShow=function(){var b=this.getList().getSelectedIndex();a.DropDown.prototype.onShow.call(this),this.getList().setSelectedIndex(b),this.getList().highlight(b)},e.selectItem=function(){this.hide(),this.setValue(this.getList().getSelectedItem()[this.getDisplayKey()]),this.getOnSelect()(this.getList().getSelectedItem())},e.getSelectedItem=function(){return this.getList().getSelectedItem()},e.setSelectedItem=function(a){this.setValue(a[this.getDisplayKey()]),this.getList().setSelectedItem(a)},e.renderItems=function(a){return this.getList().renderItems(a)},e.setItemTemplate=function(a){this.getList().setItemTemplate(a)},e.setItems=function(a){this.getList().setItems(a)},e.selectByIndex=function(a){this.getList().select(a)}}(),function(a){var b=MPageObjectOriented.inherits,c=MPageObjectOriented.createAttribute,d=MPageControls;MPageControls.CclSearch=function(a){this.setRequestCount(0),this.setSynchSuggestionsWidth(!0),this.setInBrowserDir("../../mpages/reports/"),d.AutoSuggest.call(this,a)},b(d.CclSearch,d.AutoSuggest),c(d.CclSearch,"ProgramName"),c(d.CclSearch,"RequestCount"),c(d.CclSearch,"InBrowserDir");var e=d.CclSearch.prototype;e.init=function(){MPageControls.AutoSuggest.prototype.init.call(this);var a=this;this.setTemplate(MPageControls.getDefaultTemplates().cclSearch),this.setOnDelay(function(){a.callProgram()}),this.setRequestItemValueCallback(function(a){return a.content})},e.callProgram=function(){var a=(this.getValue(),this);this.setRequestCount(this.getRequestCount()+1);var b=this.getRequestCount();(new ScriptRequest).setRawDataIndicator(!0).setProgramName(this.getProgramName()).setArtifactInfo({artifactId:"mpages-controls",functionName:"callProgram"}).setParameterArray(this.buildParameters().split(",")).setResponseHandler(function(c){MP_Util.LogScriptCallInfo(null,this,"script_search.js","callProgram"),a.handleSuccess(b,c.getResponse())}).performRequest()},e.handleSuccess=function(a,b){if(a==this.getRequestCount()&&b){var c=JSON.parse(b);if("F"===c.RECORD_DATA.STATUS_DATA.STATUS)return MP_Util.LogScriptCallError(null,b,"program_search.js","handleSuccess"),void MP_Util.LogError(this.getProgramName()+" failed: "+b);if(c){var d=this.makeContext(c);this.setSuggestions(d)}}},e.buildParameters=function(){throw"buildParameters() is abstract."},e.makeContext=function(a){return a}}(jQuery),function(a){var b=MPageObjectOriented.inherits,c=MPageObjectOriented.createAttribute,d=MPageControls;MPageControls.OrderSearch=function(a){this.setRequestCount(0),this.setSynchSuggestionsWidth(!0),d.AutoSuggest.call(this,a)},b(d.OrderSearch,d.AutoSuggest),c(d.OrderSearch,"Criterion"),c(d.OrderSearch,"SuggestionLimit"),c(d.OrderSearch,"EncounterTypeCd"),c(d.OrderSearch,"FacilityId"),c(d.OrderSearch,"SearchIndicators"),c(d.OrderSearch,"VenueType"),c(d.OrderSearch,"RequestCount"),c(d.OrderSearch,"BirthDate"),c(d.OrderSearch,"BirthDateTimeZone"),c(d.OrderSearch,"ClinicalWeight"),c(d.OrderSearch,"ClinicalWeightUnit"),c(d.OrderSearch,"PMAInDays");var e=MPageControls.OrderSearch.prototype;e.init=function(){MPageControls.AutoSuggest.prototype.init.call(this);var a=this;this.setListItemTemplate(MPageControls.getDefaultTemplates().orderSearchItem),this.setTemplate(MPageControls.getDefaultTemplates().orderSearch),this.setOnDelay(function(){var b=a.m_SearchIndicators;a.m_SearchIndicators&=-1025,a.searchOrders(),a.m_SearchIndicators=b}),this.setRequestItemValueCallback(function(a){return a.content})},e.searchOrders=function(a){var b=this.getValue(),c=this;this.setRequestCount(this.getRequestCount()+1);var d=this.getRequestCount(),e=CERN_BrowserDevInd?new XMLHttpRequest:new XMLCclRequest;if(e.onreadystatechange=function(){4==e.readyState&&200==e.status&&(MP_Util.LogScriptCallInfo(null,this,"order_search.js","handleSearchOrderSuccess"),c.handleSearchOrdersSuccess(d,e.responseText,a))},null===this.getSearchIndicators())throw"OrderSearch: no search indicators specified";var f=this.getBirthDate()?this.getBirthDate():"",g=this.getBirthDateTimeZone()?this.getBirthDateTimeZone():0,h=this.getClinicalWeight()?this.getClinicalWeight():0,i=this.getClinicalWeightUnit()?this.getClinicalWeightUnit():0,j=this.getPMAInDays()?this.getPMAInDays():0,k=this.getSuggestionLimit();this.getSuggestionLimit()<=0&&(k=50);var l="^MINE^,^"+b+"^,"+k+","+this.getEncounterTypeCd()+".0,"+this.getFacilityId()+".0,"+this.getCriterion().provider_id+".0,"+this.getCriterion().ppr_cd+".0,"+this.getVenueType()+","+this.getSearchIndicators()+",1,"+this.getCriterion().person_id+".0,^"+f+"^,"+g+","+h+","+i+","+j;if(CERN_BrowserDevInd){var m="mp_search_orders?parameters="+l;e.open("GET",m),e.send(null)}else e.open("GET","mp_search_orders"),e.send(l)},e.handleSearchOrdersSuccess=function(a,b,c){if(a==this.getRequestCount()&&b){var d="";if(d=JSON.parse(b)){if("F"===d.RESULTS.STATUS_DATA.STATUS)return MP_Util.LogScriptCallError(null,b,"order_search.js","handleSearchOrderSuccess"),void MP_Util.LogError("mp_search_orders failed: "+b);if(d.RESULTS.BIRTH_DATE&&this.setBirthDate(d.RESULTS.BIRTH_DATE),d.RESULTS.BIRTH_DATE_TZ&&this.setBirthDateTimeZone(d.RESULTS.BIRTH_DATE_TZ),d.RESULTS.WEIGHT_VALUE&&this.setClinicalWeight(d.RESULTS.WEIGHT_VALUE),d.RESULTS.WEIGHT_CODE&&this.setClinicalWeightUnit(d.RESULTS.WEIGHT_CODE),d.RESULTS.PMA_VALUE&&this.setPMAInDays(d.RESULTS.PMA_VALUE),c)c(b);else{var e=d.RESULTS.ORDERS.concat(d.RESULTS.PLANS);this.renderJson(e)}}}},e.renderJson=function(b){a.each(b,function(a,b){b.SYNONYM?b.content=b.SYNONYM:b.PW_CAT_SYN_NAME&&(b.content=b.PW_CAT_SYN_NAME),6==b.ORDERABLE_TYPE_FLAG?b.iconClass="careset-icon":0===b.ORDERABLE_TYPE_FLAG?b.iconClass="":b.PATH_CAT_ID&&(b.iconClass="powerplan-icon",b.PATH_CAT_SYN_ID=0)}),this.setSuggestions(b)}}(jQuery),function(a){var b=MPageControls,c=MPageObjectOriented.inherits,d=MPageObjectOriented.createAttribute;b.OrderVenueGroup=function(a,c,d,e){b.DropDownList.call(this,a),this.setValue(c),this.setVenueList(d),this.getList().setSelectedOption(e),this.getList().setItemTemplate(MPageControls.getDefaultTemplates().venueTemplate)},d(b.OrderVenueGroup,"VenueList"),c(b.OrderVenueGroup,b.DropDownList);var e=b.OrderVenueGroup.prototype;e.init=function(){var a=this;this.setOnShow(function(){a.getList().setDisplayKey("VENUE_DISPLAY"),a.getList().renderItems(a.getVenueList()),a.getList().highlightSelectedOption(a.getList().getSelectedIndex())}),b.DropDownList.prototype.init.call(this)}}(jQuery),function(a){var b=MPageObjectOriented.inherits,c=MPageObjectOriented.createAttribute,d=MPageControls;MPageControls.PersonnelSearch=function(a){d.CclSearch.call(this,a),this.orgSecurityInd=0,this.organizationInd=0,this.specialtyInd=0,this.physicianInd=0,this.setProgramName("MP_GET_PRSNL_JSON"),this.setSuggestionLimit(10),this.setListItemTemplate(MPageControls.getDefaultTemplates().personnelSearchItem)},b(d.PersonnelSearch,MPageControls.CclSearch),c(d.PersonnelSearch,"UserId"),c(d.PersonnelSearch,"SuggestionLimit");var e=d.PersonnelSearch.prototype;e.setOrgSecurityInd=function(a){this.orgSecurityInd=a},e.getOrgSecurityInd=function(){return this.orgSecurityInd},e.setOrganizationInd=function(a){this.organizationInd=a},e.getOrganizationInd=function(){return this.organizationInd},e.setSpecialtyInd=function(a){this.specialtyInd=a},e.getSpecialtyInd=function(){return this.specialtyInd},e.setPhysicianInd=function(a){this.physicianInd=a},e.getPhysicianInd=function(){return this.physicianInd},e.buildParameters=function(){var a="",b="",c=(this.getValue()||"").split(",");return c.length>1?(a=c[0],b=c[1]):(a=c[0],b=""),"^MINE^,"+this.getUserId()+".00,^"+a+"^,^"+b+"^,"+this.getSuggestionLimit()+","+this.getOrgSecurityInd()+","+this.getOrganizationInd()+","+this.getSpecialtyInd()+","+this.getPhysicianInd()},e.makeContext=function(a){return a.RECORD_DATA.PRSNL},e.setTemplateMaxHeight=function(a){d.setMaxHeight(a)}}(jQuery);var MPageEntity={protocol:{},generators:{},entities:{}};MPageEntity.configurations=[],MPageEntity.configure=function(a){MPageEntity.configurations.push(a)},MPageEntity.startup=function(){if(!MPageEntity.isConfigured){for(var a=MPageEntity.configurations.length;a--;)MPageEntity.configurations[a]();MPageEntity.isConfigured=!0}},MPageEntity.isConfigured=!1,function(){var a=MPageOO.attribute;MPageEntity.protocol.EntityProtocol=function(){};var b=MPageEntity.protocol.EntityProtocol,c=b.prototype;a(b,"UseBlob"),c.generateRequestStr=function(a,b,c){throw"generateRequestStr is abstract and needs to be implemented."},c.handleResponseStr=function(a,b,c){throw"handleResponseStr is abstract and needs to be implemented."},c.sanitizeJson=function(a){var b=this;if(null==a)return null;if("string"==typeof a){var c=new MPageEntity.String;return a=c.toCcl(a)}if(a.mEntityClass)return a.getCclJson();if(a.toFixed){var d=new MPageEntity.Number;return a=d.toCcl(a)}return $.each(a,function(c,d){a[c]=b.sanitizeJson(d)}),a},c.serializeJson=function(a){var b=[],c=this;return null===a||"undefined"==typeof a?"''":"string"==typeof a?a=a.replace("'","'"):a.push?($.each(a,function(a,d){b.push(c.serializeJson(d))}),"["+b.join(",")+"]"):a.toFixed?"'"+a+"'":($.each(a,function(a,d){var e="'"+a+"':";e+=c.serializeJson(d),b.push(e)}),"{"+b.join(",")+"}")}}(),function(){var a=(MPageOO.attribute,MPageEntity.protocol);MPageEntity.protocol.EntityProtocolError=function(a){Error.call(this,a),this.name="Entity Protocol Error",this.message=a},a.EntityProtocolError.prototype=new Error}(),function(){var a=MPageEntity.protocol;a.EntityProtocolV1=function(){a.EntityProtocol.call(this)},a.EntityProtocolV1.prototype=new a.EntityProtocol;var b=a.EntityProtocolV1.prototype;b.generateRequestStr=function(a,b,c){var d={jsonRequest:{action:"'"+b+"'",meta:a.getMeta(),values:c}};return'"mine","'+this.serializeJson(d)+'"'},b.generateRequestJsonStr=function(a,b,c){var d={jsonRequest:{action:"'"+b+"'",meta:a.getMeta(),values:c}};return this.serializeJson(d)},b.handleResponseStr=function(b,c,d){var e=JSON.parse(d);if(null==e||void 0==e.RECORD_DATA||void 0==e.RECORD_DATA.VALUES)throw new a.EntityProtocolError("Response from the service does not match the entity protocol version 1");if("error"==e.RECORD_DATA.META.STATUS)throw new a.EntityProtocolError(e.RECORD_DATA.META.STATUSMESSAGE);if("empty"==e.RECORD_DATA.META.STATUS||0==e.RECORD_DATA.VALUES.length)return{values:[],meta:e.RECORD_DATA.META};var f=e.RECORD_DATA.VALUES;return $.isArray(f)||(f=[f]),{values:f,meta:e.RECORD_DATA.META}}}(),function(){var a=MPageEntity.protocol;a.EntityProtocolV2=function(){a.EntityProtocol.call(this),this.setUseBlob(!0)},a.EntityProtocolV2.prototype=new a.EntityProtocol;var b=a.EntityProtocolV2.prototype;b.generateRequestStr=function(a,b,c){var d=this.generateRequestJsonStr(a,b,c);return this.getUseBlob()?d:'"mine","'+d+'"'},b.generateRequestJsonStr=function(a,b,c){c.push||(c=[c]);var d={request:{protocolVersion:2,action:"'"+b+"'",meta:a.getMeta(),valueCount:c.length,values:c}};return this.serializeJson(d)},b.handleResponseStr=function(b,c,d){var e=JSON.parse(d);if(e=null!=e&&e.RECORD_DATA?e.RECORD_DATA:e.REPLY,null==e||void 0==e||void 0==e.VALUES)throw new a.EntityProtocolError("Response from the service does not match the entity protocol version 2");if("error"==e.META.STATUS)throw new a.EntityProtocolError(e.META.STATUSMESSAGE);var f=e.VALUES;return{values:f,meta:e.META}}}(),MPageEntity.CodeSets={ACTIVITYTYPE:106,CATALOGTYPE:6e3,CONTRIBUTORSYSTEM:89,DCPCLINICALCATEGORY:16389,LANGUAGE:36,MEDORDERTYPE:18309,NOMENCLATUREIDENTIFIERSOURCE:12100,ORDERCATALOG:200,ORDERSOURCETYPES:6500,ORDERSTATUS:6004,PHARMACYDISCONTINUETYPES:4038,PHASTOPTYPE:4009,POSITNCODE:88,PRINCIPLETYPE:401,SOURCEVOCABULARY:400,STRINGSTATUS:12103,SOURCEVOCABULARYAXIS:15849},function(){function a(a){var b=MPageEntity.Config&&MPageEntity.Config.cclGroup;return b?a+":"+b:a}var b=MPageOO.attribute,c=(MPageOO.map,MPageOO.mapObject),d=MPageOO.each,e=MPageOO.reduce,f=MPageOO.values,g=MPageOO.mergeObjects,h=MPageEntity.protocol.EntityProtocolError;MPageEntity.Entity=function(){MPageEntity.startup(),this.id=null,i.meta.userId=MPageEntity.Config.user,i.meta.positionCd=MPageEntity.Config.position,this.setMeta(i.meta),this.setChangeObservers([]),this.setData({}),this.setCachedEntityRelations({}),this.setIsLocked(!1)},MPageEntity.Config={};var i=MPageEntity.Entity,j=i.prototype;b(i,"EntityClass"),b(i,"EntityName"),b(i,"Meta"),b(i,"ResponseMeta"),b(i,"Data"),b(i,"CachedEntityRelations"),b(i,"ChangeObservers"),b(i,"IsLocked");var k=function(a,b){return c(b,function(b,c){return c.setName(b),c.initialize(a,b),[b.toUpperCase(),c]})},l=function(a,b,c){var d=this.getProtocol(),e=null;try{e=d.handleResponseStr(this,a,b)}catch(b){c&&c(b),c&&(!i.throwRequestErrors||b instanceof h)||this.throwException(a,b)}return e},m=function(a,b,c){if(null===c||"undefined"==typeof c||"undefined"==typeof c.length){var d=this.getEntityName()+"."+a+": could not generate valid values";d+=" from the provided JSON response\r\n",d+="Response: "+b,this.throwException(a,d)}return c};i.initialize=function(a,b){a.fields=k(a,b.fields),a.entityJson=b,a.fieldsJson=b.fields,a.listQuals=b.listQuals,a.actions=b.actions,a.list=i.list,a.supportsAction=i.supportsAction,a.defaultEntityListClass=MPageEntity.EntityList,b.doNotRegister||i.allEntities.push(a)},i.protocol=new MPageEntity.protocol.EntityProtocolV1,i.throwRequestErrors=!0,i.currentTransaction=null,i.allEntities=[],i.debug=!1,i.CCL_ERROR_STATUS="error",i.CCL_EMPTY_STATUS="empty",i.ACT_CREATE="create",i.ACT_READ="read",i.ACT_LIST="list",i.ACT_UPDATE="update",i.ACT_REMOVE="remove",i.meta={},i.log=function(a){"undefined"!=typeof logger&&logger&&logger.logMessage?logger.logMessage(a):"undefined"!=typeof console&&console&&console.log&&console.log(a)},i.create=function(a,b,c){2==arguments.length&&(c=b,b=a,a={}),a[b]=function(){i.call(this),this.init(a[b])};var d=a[b];return MPageOO.inherits(d,i),d.entityName=b,i.initialize(d,c),d},i.extend=function(a,b,c,d){b[c]=function(){a.call(this),this.init(b[c])};var e=b[c];return MPageOO.inherits(e,a),e.entityName=c,d.fields=$.extend({},a.entityJson.fields,d.fields),i.initialize(e,d),e},i.createInstanceFromValues=function(a,b){var c={},e={};d(b,function(b,d){a.fields[d]?c[d]=a.fields[d]:c[d]=new MPageEntity.String,e[d.toUpperCase()]=b}),a.fields=c;var f={};i.create(f,"TempEntity",a);var g=new f.TempEntity;return g.setData(e),g};var n=j.setData;j.setData=function(a){this.mEntityClass&&this.clearFieldCaches(),n.call(this,a)},i.serializeJson=function(a){var b=new MPageEntity.protocol.EntityProtocol;return b.serializeJson(a)},i.supportsAction=function(a){if(!this.actions)return!1;for(var b=this.actions.length;b--;)if(this.actions[b]==a)return!0;return!1},i.makeEmptyList=function(){return new this.defaultEntityListClass(this)},i.sanitizeJson=function(a){var b=new MPageEntity.protocol.EntityProtocol;return b.sanitizeJson(a)},i.list=function(a,b){var c=new this;return c.list(a,b)},i.action=function(a,b,c){var d=new this;return d.action(a,b,c)},j.create=function(a){return this.action(i.ACT_CREATE,this,a)},j.read=function(a,b){return this.clearFieldCaches(),this.action(i.ACT_READ,{id:a},b)},j.update=function(a){return this.action(i.ACT_UPDATE,this,a)},j.remove=function(a){return this.action(i.ACT_REMOVE,{id:this.getId()},a)},j.list=function(a,b){return this.action(i.ACT_LIST,a,b)},j.init=function(a,b){var c=this;return this.setEntityClass(a),this.mEntityClass=a,!b&&a.entityName?this.setEntityName(a.entityName):this.setEntityName(b),d(this.getEntityClass().fields,function(a,b){c.getData()[a.getName().toUpperCase()]=null}),this},j.refresh=function(){return this.read(this.getId()),this},j.throwException=function(a,b){var c="Entity name: "+this.getEntityName()+"\r\n";if(c+="Action: "+a,b.message)throw b.message=b.message+"\r\n"+c,b;throw i.debug&&(console.log("!!!!!!!!!!!!!!!!!!!!!!!!!!!!!"),console.log("EXCEPTION"),console.log(b),console.log(c),console.log("!!!!!!!!!!!!!!!!!!!!!!!!!!!!!")),b+"\r\n"+c},j.getProtocol=function(){return this.getEntityClass().protocol?this.getEntityClass().protocol:i.protocol},j.clearFieldCaches=function(){for(var a=Object.keys(this.getEntityClass().fields),b=a.length;b--;){var c=this.getEntityClass().fields[a[b]];c.emptyCache(this)}return this},j.getFieldNames=function(){var a=[];return d(this.getEntityClass().fields,function(b){a.push(b.getName())}),a},j.getCclJson=function(a){return a=a?k(this.getEntityClass(),a):{},e(g(this.getEntityClass().fields,a),function(a,b){var c=b.getName();return a[c]=b.toCcl(this.getProperty(c),this),a}.bind(this),{})},j.getCclValue=function(a){var b=this.getEntityClass().fields[a.toUpperCase()];return b.toCcl(this[a],this)},j.getFieldValue=function(a,b){var c=this.getEntityClass().fields[a.toUpperCase()];return c.get(this,b)},j.setFieldValue=function(a,b){var c=this.getEntityClass().fields[a.toUpperCase()];return c.set(this,b),this},j.setProperty=function(a,b){var c=this;return d(c.getData(),function(d,e){var f=e.toUpperCase();if(f==a.toUpperCase())return c.getData()[f]=b,!0}),this},j.getProperty=function(a){var b=this.getData()[a.toUpperCase()];return void 0===b?this.getData()[a]:b},j.getField=function(a){return this.getEntityClass().fields[a.toUpperCase()]},j.updateEntity=function(a){this.clearFieldCaches();var b=this,c=this.getData();return d(a,function(a,d){var e=b.getEntityClass().fields[d.toUpperCase()];"undefined"!=typeof e?c[d.toUpperCase()]=e.toJs(a,b):i.debug&&(i.log("WARNING: Could not find field "+d+" in "+b.getEntityClass().entityName+"."),i.log("This means that the server and client entities are out of synch."))}),this},j.handleCclResponse=function(a){return this.handleResponse("unknown",JSON.stringify(a))},j.handleResponse=function(a,b,c){this.unlock(),i.debug&&(i.log(""),i.log("RESPONSE:"),i.log(b));var d=l.call(this,a,b,c);if(d){var e=m.call(this,a,b,d.values);e.length&&(this.updateEntity(e[0]),this.setResponseMeta(d.meta),this.broadcastChanges());var f=this.getEntityClass(),g=f.defaultEntityListClass,h=new g(f);h.setResponseMeta(d.meta);for(var j=0;j<e.length;j++){var k=new f;k.updateEntity(e[j]),k.setResponseMeta(d.meta),h.push(k)}return h}},j.request=function(b,c,d,e){this.lock();var f=this,g=new ScriptRequest,h=void 0,i="mp_ent_"+this.getEntityName().toLowerCase(),j=this.getProtocol().generateRequestJsonStr(this,b,c),k=this.getProtocol().getUseBlob(),l=['"mine"'];return k?g.setDataBlob(j):l.push('"'+j+'"'),g.setProgramName(a(i)),e||g.setAsyncIndicator(!1),g.setParameterArray(l),g.setRawDataIndicator(!0),g.setErrorStatusHandler(function(a,b){throw new Error("Entity request failed. HTTP status: "+b+". Response: "+a)}),g.setResponseHandler(function(a){var c=a.getResponse(),e=null;h=f.handleResponse(b,c,function(a){e=a}),d&&d(h,c,e)}),g.performRequest(),h},j.setEntityName=function(a){return this.mEntityName=a,this},j.getEntityName=function(){return this.mEntityName},j.action=function(a,b,c,d){return this.getEntityClass().actions&&this.getEntityClass().actions[a]&&(b=i.createInstanceFromValues({doNotRegister:!0,fields:this.getEntityClass().actions[a]},b)),b=i.sanitizeJson(b),null!==i.currentTransaction?void i.currentTransaction.add({actionName:a,params:b,callback:c,entity:this}):void 0===d&&c||d?this.request(a,b,c,!0):this.request(a,b,c,!1)},j.save=function(a){return this.getId&&null!==this.getId()?this.update(a):this.create(a),this},j.copyTo=function(a){for(var b=this.getData(),c=Object.keys(b),d=c.length;d--;)a.getData()[c[d]]=b[c[d]];return this},j.clearEntityCache=function(){this.setCachedEntityRelations({})},j.watchForChanges=function(a){return this.getChangeObservers().push(a),this},j.broadcastChanges=function(){return d(this.getChangeObservers(),function(a){a(this)}.bind(this)),this},j.validateFields=function(){this.getProtocol().generateRequestStr("define");if(0===f.length)return[];for(var a=this.getFieldNames(),b=f.slice(0),c=f.length;c--;){for(var d=f[c],e=!1,g=a.length;g--;){var h=a[g];if(e=h.toUpperCase()==d.toUpperCase())break}e||b.push(d)}return b},j.lock=function(){return this.getIsLocked()?(this.throwException("","Cannot lock an entity while another action is in progress."),this):(this.setIsLocked(!0),this)},j.unlock=function(){this.setIsLocked(!1)}}(),function(){var a=MPageEntity,b=MPageOO.attribute;a.EntityList=function(b){b&&this.setEntityClass(b),this.setMeta(null),this.setEntityListClass(a.EntityList)},a.EntityList.prototype=new Array,a.EntityList.SORTING={ASC:1,DESC:2},b(a.EntityList,"EntityListClass"),b(a.EntityList,"EntityClass"),b(a.EntityList,"Meta"),b(a.EntityList,"ResponseMeta");var c=a.EntityList.prototype;c.isArray=!0,c.makeEmptyList=function(){var a=new(this.getEntityListClass());return a.setEntityClass(this.getEntityClass()),a},c.action=function(a,b){null!=this.getMeta()&&this.runMethodOnChildren("setMeta",getMeta());var c=this.getEntityClass(),d=new c;return d.action(a,this,b)},c.runMethod=function(a){for(var b=[].splice.call(arguments,1,arguments.length-1),c=this.length;c--;){var d=this[c];d[a].apply(d,b)}},c.fromArray=function(a){var b=this;$.each(a,function(a,c){b.push(c)})},c.filter=function(a,b){if(a.call)return this.filterFunction(a);for(var c=this.makeEmptyList(),d=0;d<this.length;d++){var e=this[d].getData()[a.toUpperCase()];e=e&&e.id?e.id:e&&e.ID?e.ID:e,e==b&&c.push(this[d])}return c},c.filterFunction=function(a){for(var b=this.makeEmptyList(),c=0;c<this.length;c++)a(this[c])&&b.push(this[c]);return b},c.intersect=function(a,b,c){var d=this.makeEmptyList();b||(b="id"),c||(c="id");var e=b.toUpperCase();c.toUpperCase();return this.each(function(b){a.filter(c,b.getData()[e]).length>0&&d.push(b)}),d},c.splice=function(a,b){var c=this.makeEmptyList();return c.fromArray(Array.prototype.splice.call(this,a,b)),c},c.concat=function(a){var b=this.makeEmptyList();return b.fromArray(this),b.fromArray(a),b},c.each=function(a){for(var b=0;b<this.length;b++)a(this[b])},c.subtract=function(a,b,c){var d=this.makeEmptyList();b||(b="id"),c||(c="id");var e=b.toUpperCase();c.toUpperCase();return this.each(function(b){0==a.filter(c,b.getData()[e]).length&&d.push(b)}),d},c.save=function(a){for(var b=this.makeEmptyList(),c=this.makeEmptyList(),d=this.length;d--;){var e=this[d];null===e.id?c.push(e):b.push(e)}b.length&&b.action("update",a),c.length&&c.action("create",a)},c.sortBy=function(b,c){c||(c=a.EntityList.SORTING.ASC);var d=this.getEntityClass(),e=b.toUpperCase(),f=d.fields[e];if(!f)throw new Error("sortBy(): Cannot find entity field '"+b+"'");var g=function(b,d){return c==a.EntityList.SORTING.ASC?f.compareValues(b.getData()[e],d.getData()[e]):-1*f.compareValues(b.getData()[e],d.getData()[e])};return this.sort(g)},c.map=function(a,b){var c=a.defaultEntityListClass;b||(b=a,a=this.getEntityClass(),c=this.getEntityListClass());var d=new c;return d.setEntityClass(a),this.each(function(a){d.push(b(a))}),d}}(),function(){var a=MPageOO.attribute;MPageOO.mergeObjects;MPageEntity.Field=function(){},a(MPageEntity.Field,"Name");var b=MPageEntity.Field.prototype;b.toCcl=function(a,b){return a},b.toJs=function(a,b){return a},b.get=function(a,b){return a.getData()[this.getName().toUpperCase()]},b.set=function(a,b){return a.getData()[this.getName().toUpperCase()]=b,this},b.makeGetter=function(){var a=this;return function(b){return a.get(this,b)}},b.makeSetter=function(){var a=this;return function(b){return a.set(this,b)}},b.generateGetterAndSetter=function(a){var b=this.getName().charAt(0).toUpperCase()+this.getName().slice(1);a.prototype["get"+b]=this.makeGetter(),a.prototype["set"+b]=this.makeSetter()},b.initialize=function(a,b){this.setName(b),this.generateGetterAndSetter(a)},b.emptyCache=function(a){},b.compareValues=function(a,b){return a==b?0:a>b?1:a<b?-1:void 0}}(),function(){var a=MPageOO.attribute;MPageEntity.Request=function(a){var b=this;this.setRequestInstance(a),this.getRequestInstance().onreadystatechange=function(){b.handleStateChange()},this.setOnReadyStateChange(function(){}),this.setOnSuccess(function(){})};var b=MPageEntity.Request;b.onOpen=function(a){},b.onSuccess=function(a){},b.userId=0,b.pprCd=0,b.positionCd=0,b.encounterId=0,b.personId=0,b.cclGroup=null,b.LOG_AS_FILE_NAME="mpage_entity/core/request.js",b.LOG_AS_FUNCTION="open",a(b,"RequestInstance"),a(b,"OnReadyStateChange"),a(b,"OnSuccess"),a(b,"Data"),a(b,"Asynch"),a(b,"Url");var c=MPageEntity.Request.prototype;c.open=function(a,c,d){this.setUrl(a),this.setData(c),this.setAsynch(d),this.logRequestOpen(),b.onOpen(this)},c.getJsonResponse=function(){return JSON.parse(this.getResponseStr())},c.getResponseStr=function(){return this.getRequestInstance().responseText},c.handleStateChange=function(){var a=this.getRequestInstance();if(this.getOnReadyStateChange()(),4==a.readyState&&200==a.status)this.logSuccess(),this.handleSuccess();else if(4==a.readyState)throw this.logError(),new Error("Entity request failed. HTTP status: "+a.status+". Response: "+a.responseText)},c.logError=function(){var a=this.getRequestInstance();"undefined"!=typeof logger&&logger.logErrors&&logger.logErrors(["Entity Request Error: ","Script: "+this.getUrl(),"Request: "+this.getData(),"Status: "+a.status,"Response: "+a.responseText])},c.logRequestOpen=function(){this.getRequestInstance();"undefined"!=typeof logger&&logger.logMessages&&logger.logMessages(["Entity Request Start: ","Script: "+this.getUrl(),"Request: "+this.getData()])},c.logSuccess=function(){var a=this.getRequestInstance();"undefined"!=typeof logger&&logger.logMessages&&logger.logMessages(["Entity Request Success: ","Script: "+this.getUrl(),"Request: "+this.getData(),"ReadyState: "+a.readyState,"Status: "+a.status,"Response: "+a.responseText])},c.handleSuccess=function(){b.onSuccess(this),this.getOnSuccess()()}}();var MPageScriptRunner=MPageScriptRunner?MPageScriptRunner:{};!function(){var a=MPageOO.attribute;MPageScriptRunner.ScriptRunner=function(){var a=TemplateEngine,b=a.tag("div"),c=a.tag("li"),d=a.tag("a");this.templates=new TemplateEngine.TemplateFactory({message:function(a){return c({class:"message "+a.loadingClass,id:a._elementId},b({class:"ccl-script-name"},a.url),b({class:"ccl-action"},a.action),b({class:"ccl-request"},a.request),b({class:"ccl-response"},"&nbsp;"))},listItem:function(a){return c({class:"script-item",id:a._elementId},d({class:"ccl-script-name"},a.name))}}),this.setFailClass("fail"),this.setLoadingClass("loading"),this.setSuccessClass("success")};var b=MPageScriptRunner.ScriptRunner;b.msgCount=0,a(b,"ElScriptList"),a(b,"ElLoadedScriptName"),a(b,"ElLoadedScriptDesc"),a(b,"ElRunScriptBtn"),a(b,"ElMessagesContainer"),a(b,"DefaultMessageTemplate"),a(b,"FailClass"),a(b,"LoadingClass"),a(b,"SuccessClass"),a(b,"ScriptListCtrl");var c=MPageScriptRunner.ScriptRunner.prototype;c.init=function(){var a=this;MPageEntity.Request.onOpen=function(b){a.onRequestOpen(b)},MPageEntity.Request.onSuccess=function(b){a.onRequestSuccess(b)};var b=new MPageControls.List(this.getElScriptList());b.setItemTemplate(this.templates.listItem),b.setOnSelect(function(){a.loadScript(b.getSelectedItem())}),this.setScriptListCtrl(b)},c.readScripts=function(a){this.getScriptListCtrl().renderItems(a)},c.loadScript=function(a){var b=this;this.getElLoadedScriptName().html(a.name),this.getElLoadedScriptDesc().html(a.description),this.getElRunScriptBtn().click(function(){b.run(a)})},c.run=function(a){this.clearMessages(),a.action(this)},c.clearMessages=function(){this.getElMessagesContainer().empty()},c.onRequestOpen=function(a){var c="script_runner_msg_"+b.msgCount;b.msgCount++,a._elementId=c},c.onRequestSuccess=function(a){},c.message=function(a,b){var c=this.getElMessagesContainer();c.append(b.render(a))}}(),function(){var a=MPageEntity.Entity;MPageEntity.Transaction=function(){this.queue={},this.mActionsLength=0,this.isEmpty=!0},MPageEntity.Transaction.Action=function(a,b,c,d){this.actionName=a,this.params=b,this.callback=c,this.entity=d};var b=MPageEntity.Transaction.prototype;b.track=function(b){var c=a.currentTransaction;MPageEntity.Entity.currentTransaction=this,b(),MPageEntity.Entity.currentTransaction=c},b.add=function(a){var b=a.entity.mEntityName,c=a.actionName;this.isEmpty=!1,void 0===this.queue[b]&&(this.queue[b]={});var d=this.queue[b][c];void 0===d&&(d={},this.queue[b][c]=d,d.params=[],d.callbacks=[],d.entities=[],this.mActionsLength++),d.params.push(a.params),d.callbacks.push(a.callback),d.entities.push(a.entity)},b.commit=function(a,b){var c=[],d=this.mActionsLength;this.isEmpty&&a(c);for(var e=function(b,e,f){d--,null!=f&&c.push(f),0==d&&a&&a(c)},f=Object.keys(this.queue),g=f.length;g--;)for(var h=f[g],i=Object.keys(this.queue[h]),j=i.length;j--;){var k=i[j];b=void 0===b&&a||b,this.commitSingle(h,k,e,b)}},b.commitSingle=function(a,b,c,d){var e=this.queue[a][b].entities[0].mEntityClass,f=new e,g=this,h=function(d,e,h){for(var i=f.getProtocol().handleResponseStr(f,b,e),j=i.values,k=null,l=null,m=j.length;m--;)l=g.queue[a][b].entities[m],l.updateEntity(j[m]),k=g.queue[a][b].callbacks[m],k&&k(l);c&&c(g.queue[a][b].entities,j,h)},i=this.queue[a][b].params;return d=void 0===d&&c||d,f.request(b,i,h,d)}}(),function(){var a=(MPageOO.attribute,MPageOO.inherits);MPageEntity.XmlCclRequest=function(){MPageEntity.Request.call(this,new XMLCclRequest)},a(MPageEntity.XmlCclRequest,MPageEntity.Request);var b=MPageEntity.XmlCclRequest.prototype,c=function(a){return MPageEntity.Request.cclGroup?a+":"+MPageEntity.Request.cclGroup:a},d=function(a,b){b||4!=a.readyState||200!=a.status||this.handleSuccess()};b.open=function(a,b,c,d){return d?this.openWithBlob(a,b,c):this.openWithParams(a,b,c)},b.openWithParams=function(a,b,e){MPageEntity.Request.prototype.open.call(this,a,b,e);var f=this.getRequestInstance();f.open("GET",c(a),e),f.send(b),d.call(this,f,e)},b.openWithBlob=function(a,b,e){MPageEntity.Request.prototype.open.call(this,a,b,e);var f=this.getRequestInstance();f.open("GET",c(a),e),f.setBlobIn(b),f.send(e?"":"MINE"),d.call(this,f,e)}}(),function(){var a=(MPageOO.attribute,MPageOO.inherits);MPageEntity.XmlHttpRequest=function(){MPageEntity.Request.call(this,new XMLHttpRequest)},a(MPageEntity.XmlHttpRequest,MPageEntity.Request),MPageEntity.XmlHttpRequest.baseUrl="";var b=MPageEntity.XmlHttpRequest.prototype,c=function(a,b){return b?"^mine^,^"+a+"^":a};b.open=function(a,b,d,e){MPageEntity.Request.prototype.open.call(this,a,b,d);var f=this.getRequestInstance(),g=MPageEntity.XmlHttpRequest.baseUrl+a+"?parameters="+c(b,e);f.open("GET",g,d),f.send(null),d||4!=f.readyState||200!=f.status||this.handleSuccess()}}(),
function(){var a=MPageOO.inherits,b=MPageOO.attribute,c=MPageOO.map,d=MPageOO.objectFromList,e=MPageOO.shallowClone;MPageEntity.ForeignField=function(){};var f=MPageEntity.ForeignField;a(f,MPageEntity.Field);var g=f.prototype;b(f,"SendFullObject"),b(f,"ExpandChildren"),g.initialize=function(a,b){MPageEntity.Field.prototype.initialize.call(this,a,b),this.generateGetterAndSetterForValues(a)},g.getEntityClass=function(){if("string"!=typeof this.m_EntityClass)return this.m_EntityClass;var a=this.m_EntityClass,b=this.m_EntityClass.split("."),c=window[b[0]];if(!c)throw new Error("Could not find '"+a+"' in the global scope.");for(var d=1;d<b.length;d++)c=c[b[d]];if(this.m_EntityClass=c,void 0==c||null==c)throw new Error("The following class could not be resolved: "+a);return c},g.setEntityClass=function(a){if(null===a||void 0===a)throw"The entity class for this field is undefined. If you want to associate to a class that has not yet been loaded, use a string to declare it, such as 'MPageEntity.Person'";this.m_EntityClass=a},g.generateGetterAndSetterForValues=function(a){var b=this.getName(),c=b.charAt(0).toUpperCase()+b.slice(1);a.prototype["get"+c+"Value"]=this.makeValueGetter(),a.prototype["set"+c+"Value"]=this.makeValueSetter()},g.loadOptionsFromJson=function(a){a.sendFullObject&&this.setSendFullObject(a.sendFullObject),a.expandChildren&&this.setExpandChildren(a.expandChildren)},g.makeClonedFields=function(a){return c(this.getExpandChildren(),function(b){var c=e(a.fields[b.toUpperCase()]);return c.setSendFullObject(!0),c})},g.makeOverridenFields=function(a){return this.getExpandChildren()?d(this.makeClonedFields(a),function(a){return[a.getName(),a]}):[]},g.getForeignJson=function(a){return a.getCclJson(this.makeOverridenFields(a.getEntityClass()))},g.setValue=function(a,b){return MPageEntity.Field.prototype.set.call(this,a,b)},g.getValue=function(a,b){return MPageEntity.Field.prototype.get.call(this,a,b)},g.makeValueSetter=function(){var a=this;return function(b){return a.setValue(this,b)}},g.makeValueGetter=function(){var a=this;return function(b){return a.getValue(this,b)}}}(),function(){var a=MPageOO.inherits,b=MPageOO.attribute,c=function(a){if(a&&a.toFixed)return a;var b=a&&a.id?a.id:a&&a.ID?a.ID:null;if(b&&"string"==typeof b){var c=new MPageEntity.Number;return c.toJs(b)}return b};MPageEntity.OneToOne=function(a,b){this.setEntityClass(a),this.setDefaultValue(0),this.setSendFullObject(!1),!b||b.toFixed||b.substr?b&&this.setDefaultValue(b):this.loadOptionsFromJson(b)},a(MPageEntity.OneToOne,MPageEntity.ForeignField),b(MPageEntity.OneToOne,"DefaultValue");var d=MPageEntity.OneToOne.prototype;d.loadOptionsFromJson=function(a){MPageEntity.ForeignField.prototype.loadOptionsFromJson.call(this,a),a.defaultValue&&this.setDefaultValue(a.defaultValue)},d.toCcl=function(a,b){if(this.getSendFullObject())return this.getForeignJson(this.getForeignEntity(b));if(void 0===a||null===a)return"'"+this.getDefaultValue().toFixed()+"'";if(a.toFixed){var d=new MPageEntity.Number;return d.toCcl(a)}if("string"==typeof a){var e=new MPageEntity.String;return e.toCcl(a)}var f=c(a);if(null!==f){var d=new MPageEntity.Number;return d.toCcl(f)}return"'"+this.getDefaultValue().toFixed()+"'"},d.createCachedInstance=function(a,b){var c=new(this.getEntityClass());return c.updateEntity(a),b.getCachedEntityRelations()[this.getName()+"_entity"]=c,c},d.createCachedCopy=function(a,b){var c=new(this.getEntityClass());return c.setData(a),b.getCachedEntityRelations()[this.getName()+"_entity"]=c,c},d.toJs=function(a,b){if(!a)return null;if("string"==typeof a){var c=new MPageEntity.Number;return c.toJs(a)}var d=this.createCachedInstance(a,b);return d.getData()},d.get=function(a,b){var c=this.getName(),d=a.getData(),e=a.getCachedEntityRelations(),f=d[c.toUpperCase()],g=this;if(e[c+"_entity"])return b?(b(null,null,e[c+"_entity"]),e[c+"_entity"]):e[c+"_entity"];if(f&&!f.toFixed)return this.createCachedCopy(f,a);if(null===f)return f;var h=new(this.getEntityClass());return MPageEntity.Entity.currentTransaction||b?void h.read(a.getData()[c.toUpperCase()],function(c,d){g.set(a,h),b&&b(c,d,h)}):(h.read(a.getData()[c.toUpperCase()],b),this.set(a,h),h)},d.set=function(a,b){if(!b)return void this.empty(a);var c=this.getName(),d=a.getCachedEntityRelations(),e=a.getData();return d[c+"_entity"]=b,e[c.toUpperCase()]=b.getData(),a},d.empty=function(a){var b=this.getName().toUpperCase();this.emptyCache(a),a.getData()[b]=null},d.getValue=function(a,b){var d=a.getData()[this.getName().toUpperCase()];return c(d)},d.setValue=function(a,b){return a.getData()[this.getName().toUpperCase()]=b,this.emptyCache(a),this},d.emptyCache=function(a){a.getCachedEntityRelations()[this.getName()+"_entity"]=null},d.getForeignEntity=function(a){var b=a.getCachedEntityRelations()[this.getName()+"_entity"];if(!b)throw new Error("The "+a.getEntityName()+" entity requires the '"+this.getName()+"' field to be filled with an instance of '"+this.getEntityClass().entityName+"'");return b}}(),function(){var a=MPageOO.inherits;MPageEntity.CclBool=function(){},a(MPageEntity.CclBool,MPageEntity.Field);var b=MPageEntity.CclBool.prototype;b.toCcl=function(a){return a===!0?"'1'":"'0'"},b.toJs=function(a){return"1"===a}}(),function(){var a=MPageOO.inherits;MPageOO.attribute;MPageEntity.CodeValueField=function(a){MPageEntity.OneToOne.call(this,"MPageEntity.CodeValue"),this.codeSetId=a,this.codeSet=null},MPageEntity.cachedCodeValues={},a(MPageEntity.CodeValueField,MPageEntity.OneToOne);var b=MPageEntity.CodeValueField.prototype;b.getCodeSet=function(){return null!=this.codeSet?this.codeSet:(this.codeSet=new MPageEntity.CodeSet,void this.codeSet.read(this.codeSetId))},b.listCodeValues=function(){return this.getCodeSet().getCodeValues()}}(),function(){var a=MPageOO.inherits,b=MPageOO.attribute,c=MPageEntity;c.Composite=function(a){this.setFieldNames(a)},a(c.Composite,c.Field),b(c.Composite,"FieldNames");var d=c.Composite.prototype;d.toCcl=function(a,b){var c={};return null==a?c:($.each(this.getFieldNames(),function(d,e){var f=b.mEntityClass.fields[e.toUpperCase()];c[e]=f.toCcl(a[e],b)}),c)},d.toJs=function(a,b){var c={};return $.each(this.getFieldNames(),function(d,e){var f=b.mEntityClass.fields[e.toUpperCase()];c[e]=f.toJs(a[e],b)}),c}}(),function(){var a=MPageOO.inherits,b=MPageOO.attribute;MPageEntity.DateTime=function(a){a?this.setFormat(a):this.setFormat("DD-MMM-YYYY HH:mm:ss")};var c=MPageEntity.DateTime;a(c,MPageEntity.Field),b(c,"Format");var d=c.prototype;d.toCcl=function(a){return void 0===a||null===a||""==a?"'0'":("string"==typeof a&&(a=this.toJs(a)),"'"+moment(a).format(this.getFormat()).toUpperCase()+"'")},d.toJs=function(a){var b=moment(a,this.getFormat());return null===b?null:b.toDate()}}(),function(){var a=MPageOO.inherits;MPageEntity.EncodedString=function(){},a(MPageEntity.EncodedString,MPageEntity.Field);var b=MPageEntity.EncodedString.prototype;b.toCcl=function(a){null!==a&&void 0!==a||(a=""),a=a.replace(/%/g,"%25");var b=a.replace(/[\/\\~'"<^&#\r\n]/g,function(a){var b=a.charCodeAt(0).toString(16).toUpperCase();return b.length<2&&(b="0"+b),"%"+b});return"'"+b+"'"},b.toJs=function(a){var b=a;try{b=a.replace(/%([0-9A-F]{2})/g,function(a,b){var c=parseInt(b,16);return String.fromCharCode(c)})}catch(a){return b}return b}}(),function(){var a=MPageOO.inherits,b=(MPageOO.attribute,function(a,b){if(!b)return null;var c="([0-9]{4})(-([0-9]{2})(-([0-9]{2})(T([0-9]{2}):([0-9]{2})(:([0-9]{2})(\\.([0-9]+))?)?Z?)?)?)?",d=b.match(new RegExp(c)),e=new Date(d[1],0,1);d[7]?e.setUTCHours(d[7]):e.setUTCHours(0),d[8]?e.setUTCMinutes(d[8]):e.setUTCMinutes(0),d[10]?e.setUTCSeconds(d[10]):e.setUTCSeconds(0),d[12]?e.setUTCMilliseconds(1e3*Number("0."+d[12])):e.setUTCMilliseconds(0),d[1]&&e.setUTCFullYear(d[1]),d[5]&&e.setUTCDate(d[5]),d[3]&&e.setUTCMonth(d[3]-1),a.setTime(e.getTime())});MPageEntity.Iso8601DateTime=function(){};var c=MPageEntity.Iso8601DateTime;a(c,MPageEntity.Field);var d=c.prototype;d.toCcl=function(a){return void 0===a||null===a||""==a?"'0'":("string"==typeof a&&(a=this.toJs(a)),a.toISOString||!function(){function a(a){return a<10?"0"+a:a}Date.prototype.toISOString=function(){return this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+"Z"}}(),"'"+a.toISOString()+"'")},d.toJs=function(a){if(""==a||"0"==a)return null;var c=new Date;return b(c,a),c}}(),function(){var a=MPageOO.inherits;MPageEntity.Number=function(a,b){a||(a=4),this.precision=a,this.defaultValue=b,this.defaultValue||(this.defaultValue=0)},a(MPageEntity.Number,MPageEntity.Field);var b=MPageEntity.Number.prototype;b.toCcl=function(a){return null!==a&&void 0!==a||(a=void 0!==this.defaultValue?this.defaultValue:0),a.toFixed?"'"+a.toFixed(this.precision)+"'":"'"+a+"'"},b.toJs=function(a){var b=parseFloat(a);return isNaN(b)?null:b}}(),function(){var a=MPageOO.inherits,b=MPageOO.attribute,c=MPageOO.map,d=MPageOO.each;MPageEntity.OneToMany=function(a,b,c){this.setEntityClass(a),this.setListField(b),c&&this.loadOptionsFromJson(c)},a(MPageEntity.OneToMany,MPageEntity.ForeignField),b(MPageEntity.OneToMany,"ListField");var e=MPageEntity.OneToMany.prototype;e.toCcl=function(a,b){return this.getSendFullObject()?c(this.getForeignEntities(b),function(a){return this.getForeignJson(a)}.bind(this)):null!==a&&a.push?c(a,function(a){return a.getCclValue?a.getCclValue("id"):a.id?a.id:void 0}.bind(this)):"''"},e.toJs=function(a,b){var c=[];if(!a||0===a.length)return c;var d=this.makeEntitiesFromArray(a);return b?(this.set(b,d),this.getFieldData(b)):getDataArray(d)},e.makeEntitiesFromArray=function(a){var b=this.getEntityClass();if(void 0==b||null==b)throw'The field "'+this.getName()+'" for the '+origEntity.mEntityName+" entity is invalid: could not find the many to many class";var c=new MPageEntity.EntityList(b);return a?(d(a,function(a){var d=new b;d.updateEntity(a),c.push(d)}),c):c},e.makeEntitiesFromDataArray=function(a){var b=this.getEntityClass();if(void 0==b||null==b)throw'The field "'+this.getName()+'" for the '+origEntity.mEntityName+" entity is invalid: could not find the many to many class";var c=new MPageEntity.EntityList(b);return a?(d(a,function(a){var d=new b;d.setData(a),c.push(d)}),c):c},e.get=function(a,b){var c=this,d=a.getData(),e=a.getCachedEntityRelations(),f=this.getName();if(e[f+"_entities"])return b?(b(e[f+"_entities"]),e[f+"_entities"]):e[f+"_entities"];var g=this.getName().toUpperCase();if(d[g]&&d[g].push){var h=this.makeEntitiesFromDataArray(d[g]);return this.set(a,h),h}var i=new(this.getEntityClass()),j={};if(j[this.getListField()]=a.getId(),MPageEntity.Entity.currentTransaction||b)return void i.list(j,function(d,e){c.set(a,d),b&&b(d,e)});var k=i.list(j);return c.set(a,k),k},e.set=function(a,b){b||this.empty(a),this.updateEntityCache(a,b),this.updateDataArray(a,b)},e.empty=function(a){this.emptyCache(a),this.setFieldData(a,null)},e.getFieldData=function(a){var b=a.getData(),c=this.getName().toUpperCase();return b[c]},e.setFieldData=function(a,b){var c=a.getData(),d=this.getName().toUpperCase();c[d]=b},e.updateEntityCache=function(a,b){var c=a.getCachedEntityRelations();c[this.getName()+"_entities"]=b},e.updateDataArray=function(a,b){this.setFieldData(a,this.getDataArray(b))},e.getDataArray=function(a){var b=null;return a&&a.push&&(b=Array.prototype.map.call(a,function(a){return a.getData?a.getData():{}})),b},e.emptyCache=function(a){a.getCachedEntityRelations()[this.getName()+"_entities"]=null},e.getForeignEntities=function(a){var b=a.getCachedEntityRelations()[this.getName()+"_entities"];return"undefined"!=typeof b&&b||(b=this.makeEntitiesFromDataArray(this.getFieldData(a))),b||[]}}(),function(){var a=MPageOO.inherits;MPageEntity.SelfOneToMany=function(a){this.setListField(a)},a(MPageEntity.SelfOneToMany,MPageEntity.OneToMany);var b=MPageEntity.SelfOneToMany.prototype;b.initialize=function(a,b){this.setEntityClass(a),OneToMany.prototype.initialize.call(this,a,b)}}(),function(){var a=MPageOO.inherits,b=MPageOO.OneToOne;MPageEntity.SelfOneToOne=function(){this.setEntityClass(entityClass)},a(MPageEntity.SelfOneToOne,MPageEntity.OneToOne);var c=MPageEntity.SelfOneToOne.prototype;c.initialize=function(a,c){this.setEntityClass(a),b.prototype.initialize.call(this,a,c)}}(),function(){var a=MPageOO.inherits;MPageEntity.String=function(){},a(MPageEntity.String,MPageEntity.Field);var b=MPageEntity.String.prototype;b.toCcl=function(a){return null!==a&&void 0!==a||(a=""),"'"+a+"'"},b.toJs=function(a){return a}}(),function(){MPageEntity.BedrockConfig=function(){var a=0,b=0,c=[],d=[],e=[],f=0,g=0,h=0,i=0,j=0,k=0,l=0,m=2,n=0;this.getProblemListFlag=function(){return m},this.setProblemListFlag=function(a){m=a},this.getSearchVocabCodeValues=function(){return c},this.setSearchVocabCodeValues=function(a){c=a},this.getFilteredSearchVocabCodeValues=function(){return d},this.setFilteredSearchVocabCodeValues=function(a){d=a},this.getNomenclatureSearchVocabularies=function(){return e},this.setNomenclatureSearchVocabularies=function(a){e=a},this.getThisVisitVocab=function(){return a},this.setThisVisitVocab=function(b){a=b},this.getChronicVocab=function(){return b},this.setChronicVocab=function(a){b=a},this.getDiagnosisClassification=function(){return f},this.setDiagnosisClassification=function(a){f=a},this.getDiagnosisConfirmation=function(){return g},this.setDiagnosisConfirmation=function(a){g=a},this.getProblemClassification=function(){return h},this.setProblemClassification=function(a){h=a},this.getProblemConfirmation=function(){return i},this.setProblemConfirmation=function(a){i=a},this.getDiagnosisType=function(){return j},this.setDiagnosisType=function(a){j=a},this.getInfoButtonInd=function(){return k},this.setInfoButtonInd=function(a){k=a},this.setModifyInd=function(a){l=a},this.getModifyInd=function(){return l},this.setDuplicateAllowedInd=function(a){n=a},this.getDuplicateAllowedInd=function(){return n}}}(),function(){var a=MPageEntity.String,b=MPageEntity.Number,c=MPageEntity.Entity,d=(MPageEntity.OneToOne,MPageEntity.OneToMany);c.create(MPageEntity,"CodeSet",{fields:{id:new b,display:new b,description:new a,displayKey:new a,codeValues:new d("MPageEntity.CodeValue","codeSet")},listQuals:["display","displayKey"],actions:["read","list"]})}(),function(){var a=(MPageEntity.entities,MPageEntity.String),b=MPageEntity.Number,c=MPageEntity.Entity,d=MPageEntity.OneToOne,e=(MPageEntity.SelfOneToOne,MPageEntity.SelfOneToMany,MPageOO.attribute),f=MPageEntity.protocol.EntityProtocolV2;c.create(MPageEntity,"CodeValue",{fields:{id:new b,codeSet:new d("MPageEntity.CodeSet"),meaning:new a,display:new a,description:new a,definition:new a,cki:new a},listQuals:["meaning","displayKey","display","codeSet"],actions:["read","list"]});var g=MPageEntity.CodeValue;g.protocol=new f,g.setUseFastRead=function(a){MPageEntity.CodeValue.m_useFastRead=a},g.getUseFastRead=function(){return MPageEntity.CodeValue.m_useFastRead},e(g,"UseFastRead"),MPageEntity.CodeValue.prototype.read=function(a,b){var c=g.getUseFastRead(),d=this.getUseFastRead();return void 0!==d&&null!==d&&(c=this.getUseFastRead()),c?(this.clearFieldCaches(),this.action("fastRead",{id:a},b)):MPageEntity.Entity.prototype.read.call(this,a,b)}}(),function(){function a(a,b){for(var c=b.length,d=0;d<c;d++)if(a===b[d].VOCAB_CD)return!0;return!1}var b=MPageEntity.entities,c=MPageEntity.EncodedString,d=MPageEntity.Number,e=MPageEntity.CclBool,f=MPageEntity.Iso8601DateTime,g=MPageEntity.Entity,h=MPageEntity.OneToOne,i=MPageEntity.OneToMany,j=MPageEntity.CodeValueField,k=MPageEntity.protocol.EntityProtocolV2,l="MPageEntity.entities.Problem",m="MPageEntity.entities.Diagnosis",n="MPageEntity.entities.Nomenclature",o="MPageEntity.entities.HccInfo",p="MPageEntity.entities.HccCategory",q="MPageEntity.entities.RelatedRecords";g.create(b,"HccCategory",{fields:{description:new c,code:new d}}),g.create(b,"HccInfo",{fields:{hccStatus:new c,lastServiceDateTime:new f,icd10code:new c}}),g.create(b,"RelatedRecords",{fields:{related_rec_dt_tm:new f,related_rec_role:new c,related_rec_author_display:new c,related_rec_tranmitter_display:new c,doc_id:new c,doc_status:new c}}),g.create(b,"Condition",{fields:{id:new d,lastUpdate:new f,problemDriver:new h(l),diagnosisDriver:new h(m),display:new c,nomenclature:new h(n),targetNomenclature:new h(n),transitionNomenclature:new h(n),descriptionFreeText:new c,encounter:new h("MPageEntity.Encounter"),onset:new f,onsetPrecision:new d,person:new h("MPageEntity.Person"),problems:new i(l,"problemId",{sendFullObject:!0}),diagnoses:new i(m,"diagnosisId",{sendFullObject:!0}),lifeCycleStatus:new j(12030),isThisVisit:new e,isChronic:new e,isHistorical:new e,isInactive:new e,isCernerNKP:new e,diagnosisType:new j(17),classification:new j(12033),confirmationStatus:new j(12031),clinicalPriority:new d,contributorSystem:new j(89),clinicalService:new j(29741),laterality:new j(4002375),responsibleProvider:new h("MPageEntity.Person"),responsibleProviderName:new c,activeInd:new e,hccInd:new e,hccLastAddressed:new f,hccInfo:new h(o),hccCategories:new i(p),comments:new i("MPageEntity.entities.ConditionComment"),areCommentsStale:new e,isSpecific:new e,externalDataOriginatingAuthor:new c,externalDataOriginatingSource:new c,externalDataOriginatingDate:new c,externalDataOriginatingDtPrecision:new d,externalDataTransmittingSource:new c,externalDataDocId:new c,externalDataDocStatus:new c,pprCd:new d(1,MPageEntity.Config.ppr),relatedRecords:new i(q),iAdvInteropInd:new c,iPendingExtDataInd:new c,bypassDuplicateCheckInd:new e,createTvAndChronicInd:new e},listQuals:["personId","encounterId","nomenclatureId","origNomenId"],actions:["list","insert"]}),b.Condition.protocol=new k,b.Condition.TYPES={THIS_VISIT:0,THIS_VISIT_AND_CHRONIC:1,NKP:2,CHRONIC:3,HISTORICAL:4,INACTIVE:5,THIS_VISIT_AND_INACTIVE:6};var r=function(a,b){return function(){a.setAreCommentsStale(!0),b&&b.apply(a,arguments)}},s=function(a,b,c,d){var e=this.action(a,b);return u.call(this,c,d),e},t=function(a,b,c,d,e){var f=this;return this.action(a,b,function(){var a=arguments;f.updateWin32(function(){u.call(f,c,d),e.apply(f,a)})})},u=function(a,b){v.call(this,b),w.call(this,a)},v=function(a){var b=this.getResponseMeta();Object.keys(a).forEach(function(c){b[c]=a[c]})},w=function(a){var b=this;Object.keys(a).forEach(function(c){b["set"+c](a[c])})},x=function(a,b,c,d){var e=["ICD10_VOCAB_CDS","VALID_SOURCE_VOCAB_CDS","BEDROCK_VOCAB_CDS"],f={},g={},h=this.getResponseMeta();return h&&e.forEach(function(a){g[a]=h[a]}),y.call(this,f),c||d?t.call(this,a,b,f,g,c):(this.updateWin32(),s.call(this,a,b,f,g))},y=function(a){var b=this.getCommentsValue()?this.getComments():[];a.Comments=b};MPageEntity.entities.Condition.listByNomen=function(a,b){var c="byNomen",d=new MPageEntity.entities.Condition,e=CERN_Platform.inEdgeContext();return e?d.action(c,a,b,!0):d.action(c,a,b,!1)};var z=b.Condition.prototype;z.getNomenConverter=function(){return this.nomenConverter?this.nomenConverter:(MPageEntity.Win32NomenclatureConverter&&(this.nomenConverter=new MPageEntity.Win32NomenclatureConverter(MPageEntity.Config.ppr,g.meta.positionCd)),this.nomenConverter)},z.setNomenConverter=function(a){this.nomenConverter=a},z.createTvAndChronic=function(a,b){var c=this;this.getNomenConverter().convertTvAndChronic(this,a,function(d){return d?(c.setIsChronic(!1),c.setTargetNomenclatureValue(d.thisVisit),void c.create(function(e,f,g){return g?void b(e,f,g):(c.setTargetNomenclatureValue(d.chronic),c.setIsChronic(!0),void c.moveToChronic(a,b))})):void b(null,null,{crossMappingError:!0})})},z.create=function(a){this.setPprCd(MPageEntity.Config.ppr);var b=this;return a?g.prototype.create.call(b,function(c,d,e){e?a(c,d,e):b.updateWin32(function(){b.retrieveSpecificity(function(){a(c,d,e)})})}):(g.prototype.create.call(b,a),b.updateWin32(),b.retrieveSpecificity(),b)},z.getProblemDriverFromArray=function(){return this.getProblems().filter("id",this.getProblemDriverValue())[0]},z.getDiagnosisDriverFromArray=function(){return this.getDiagnoses().filter("id",this.getDiagnosisDriverValue())[0]},z.canModify=function(){return this.getProblemDriverValue()>0&&this.getDiagnosisDriverValue()>0?this.canModifyChronic()&&this.canModifyThisVisit():this.getProblemDriverValue()>0?this.canModifyChronic():this.getDiagnosisDriverValue()>0&&this.canModifyThisVisit()},z.isResolved=function(){return!this.getIsChronic()&&!this.getIsInactive()&&this.getIsHistorical()&&this.getProblemDriverValue()},z.canModifyChronic=function(){return this.getProblemDriverValue()>0&&this.getProblemDriverFromArray().getCanCondModify()},z.canModifyThisVisit=function(){return this.getDiagnosisDriverValue()>0&&this.getDiagnosisDriverFromArray().getCanCondModify()},z.getCrossMapping=function(a,b){var c=this;try{var d=this.getNomenConverter();b?d.convert(this,a,function(a,d,e){return e?(logger.logError("Condition.js (getCrossMapping) with callback - "+e),b(a,null,e)):(c.setTargetNomenclatureValue(d),void b(a,d,e))}):this.setTargetNomenclatureValue(d.convert(this,a))}catch(a){throw new Error("Condition.js (getCrossMapping) - "+a)}},z.getCrossMappingTV=function(a,b){var c=this;try{var d=this.getNomenConverter();b?d.convertTv(this,a,function(a,d,e){return e?(logger.logError("Condition.js (getCrossMappingTV) with callback - "+e),b(a,null,e)):(c.setTargetNomenclatureValue(d),void b(a,d,e))}):this.setTargetNomenclatureValue(d.convertTv(this,a))}catch(a){throw new Error("Condition.js (getCrossMappingTV) - "+a)}},z.getCrossMappingChronic=function(a,b){var c=this;try{var d=this.getNomenConverter();b?d.convertChronic(this,a,function(a,d,e){e&&(logger.logError("Condition.js (getCrossMappingChronic) with callback - "+e),b(a,null,e)),c.setTargetNomenclatureValue(d),b(a,d,e)}):this.setTargetNomenclatureValue(d.convertChronic(this,a))}catch(a){throw new Error("Condition.js (getCrossMappingChronic) - "+a)}},z.retrieveSpecificity=function(a){var c=this.getDiagnoses(),d=this;if(a){if(d.getIsThisVisit()&&c&&c.length){var e=new b.ConditionList;return e.push(d),e.retrieveSpecificities(function(b){return a(d,b),d}),d}return a(d),d}if(this.getIsThisVisit()&&c&&c.length){var e=new b.ConditionList;e.push(this),e.retrieveSpecificities()}return this},z.onThisVisitNomenclatureUpdate=function(a,b,c,d){d?this.retrieveSpecificity(function(){d(a,b,c)}):this.retrieveSpecificity()},z.moveToThisVisit=function(a,b,c){if(!this.getEncounterValue())throw new Error("Encounter is required for moveToThisVisit.");var d=this;this.setIsThisVisit(!0);var e=function(a,c,e){d.onThisVisitNomenclatureUpdate(a,c,e,b)},f=!!c||!!b;return x.call(this,"moveToThisVisit",this,e,f)},z.removeFromThisVisit=function(a){var b=this,c=r(this,function(c,d,e){b.getIsThisVisit()||b.setIsSpecific(null),b.onThisVisitNomenclatureUpdate(c,d,e,a)}),d=!!a;return x.call(this,"removeFromThisVisit",this,c,d)},z.activate=function(a){return x.call(this,"activate",this,a)},z.inactivate=function(a){return x.call(this,"inactivate",this,a)},z.moveToChronic=function(a,b){return this.setIsChronic(!0),x.call(this,"moveToChronic",this,b)};var A={MATCHING_SEARCH_VOCAB:1,NONE:2,VALID_VOCAB:3};z.isFlagged=function(b){var c,d=this.getResponseMeta(),e=2,f=parseInt(b.getProblemListFlag(),10),g=b.getSearchVocabCodeValues().map(function(a){return parseInt(a,10)}),h=d.VALID_SOURCE_VOCAB_CDS,i=function(b){return a(b,d.ICD10_VOCAB_CDS)},j=function(a,b){return i(a)?i(b):a===b},k=this,l=k.getProblemDriverFromArray();if(l&&(c=l.getProblemTypeFlag()),!k.getProblemDriverValue()||g.length<=0||c===e)return!1;switch(f){case A.NONE:return!1;case A.MATCHING_SEARCH_VOCAB:var m=k.getNomenclature().getSourceVocabularyValue();return!g.some(function(a){return j(a,m)});case A.VALID_VOCAB:var n=l.getNomenclature().getSourceVocabularyValue(),o=k.getNomenclature().getSourceVocabularyValue();if(!h)return!1;var p=a(n,h),q=a(o,h);return!(p||q);default:return!1}},z.moveToHistorical=function(a){return x.call(this,"moveToHistorical",this,a)},z.cancel=function(a){return x.call(this,"cancel",this,r(this,a))},z.unresolve=function(a){return x.call(this,"unresolve",this,a)},z.update=function(a){return x.call(this,"update",this,a)},z.updatePriority=function(a){return x.call(this,"updatePriority",this,a)},z.isFreeText=function(){return 0===this.getNomenclatureValue()||null===this.getNomenclatureValue()},z.updateWin32=function(a){var b,c=this;return a?(b=MPageEntity.getProbDxUtils(a),b.isAvailable().then(function(d){if(d)return Promise.all([b.invoke("RefreshDiagnosisCollection",[c.getPersonValue(),c.getEncounterValue()]),b.invoke("RefreshProblemCollection",[c.getPersonValue()])]).then(function(){a()});throw new Error("PROBDXUTILS COM object is not available")}).catch(function(b){logger.logJSError(b,null,"condition.js","updateWin32"),a(b)})):(b=MPageEntity.getProbDxUtils())?(b.RefreshDiagnosisCollection(this.getPersonValue(),this.getEncounterValue()),void b.RefreshProblemCollection(this.getPersonValue())):void logger.logError("Unable to create the PROBDXUTILS COM object")},z.list=function(a,b){if("undefined"!=typeof RTMSTimer){var c=new RTMSTimer("ENG:MPG.CONDITION_ENTITY - list");c.addMetaData("key"),c.start()}var d=this;return b?g.prototype.list.call(this,a,function(a){try{var e=arguments;d.m_Meta.isDxAssistantEnabled?a.retrieveSpecificities(function(){b.apply(window,e)}):b.apply(window,e)}catch(a){throw c&&c.fail(),a}finally{c&&c.stop()}}):g.prototype.list.call(this,a,b)},z.getCommentsWithAssociation=function(a){var b=this;if(!a){var c=this.getComments();return b.associateComments(c),c}b.getComments(function(c){b.associateComments(c),a.apply(this,arguments)})},z.associateComments=function(a){var b=this;a.each(function(a){a.setCondition(b)})},z.isMapped=function(){return!!this.getTargetNomenclatureValue()},z.isTargetICD10=function(){if(!this.getResponseMeta()||!this.getResponseMeta().ICD10_VOCAB_CDS)throw new Error("Condition instance does not have an associated ICD10 vocabulary list.");for(var a=this.getResponseMeta().ICD10_VOCAB_CDS,b=a.length;b--;){var c=this.getTargetNomenclature().getSourceVocabularyValue();if(a[b].VOCAB_CD==c)return!0}return!1},z.isEmpty=function(){return!this.getDiagnosisDriverValue()&&!this.getProblemDriverValue()},z.hasDxAssistant=function(){return!(!this.getDiagnosisDriverValue()||!this.isMapped()||this.isFreeText()||null===this.getIsSpecific()||void 0===this.getIsSpecific())};var B=function(a,b){return a.setIsChronic(!0),a.getIsHistorical()&&a.setIsHistorical(!1),a.setClassificationValue(b.getProblemClassification()),a.setConfirmationStatusValue(b.getProblemConfirmation()),a.setOnset(new Date),a};z.crossmapToChronic=function(a,b){var c=CERN_Platform.inEdgeContext();if(!c){var d=this;if(d.isResolved())d.activate(function(a,c){b(d,c)});else{var e=d.getTargetNomenclatureValue();if(d.getCrossMappingChronic(a),!d.getTargetNomenclatureValue())return d.setTargetNomenclatureValue(e),!1;B.call(self,d,a).moveToChronic(a,function(a,c,e){b(d,c,e)})}return!0}var d=this;if(d.isResolved())d.activate(function(a,c){b(d,c)});else{var e=d.getTargetNomenclatureValue();d.getCrossMappingChronic(a,function(){return d.getTargetNomenclatureValue()?void B.call(self,d,a).moveToChronic(a,function(a,c,e){b(d,c,e)}):(d.setTargetNomenclatureValue(e),b(d,null))})}};var C=function(a,b,c){return a.setIsThisVisit(!0),a.getIsHistorical()&&a.setIsHistorical(!1),a.setDiagnosisTypeValue(c.getDiagnosisType()),a.setClassificationValue(c.getDiagnosisClassification()),a.setConfirmationStatusValue(c.getDiagnosisConfirmation()),b&&a.setClinicalPriority(b),a};z.crossmapToThisVisit=function(a,b,c){var d=this,e=CERN_Platform.inEdgeContext();if(!e){var f=d.getTargetNomenclatureValue();return d.getCrossMappingTV(a,function(){return d.getTargetNomenclatureValue()?void C(d,b,a).moveToThisVisit(a,function(a,b,e){c(d,b,e)}):(d.setTargetNomenclatureValue(f),!1)}),!0}var f=d.getTargetNomenclatureValue();d.getCrossMappingTV(a,function(){return d.getTargetNomenclatureValue()?void C(d,b,a).moveToThisVisit(a,function(a,b,e){c(d,b,e)}):(d.setTargetNomenclatureValue(f),c(d,null))})},z.getHccStatus=function(){var a=this,b=a.getIsInactive(),c=a.getIsHistorical(),d=a.getHccInd(),e=a.getHccLastAddressed(),f=a.getIsThisVisit(),g=new Date(e).getFullYear(),h=(new Date).getFullYear(),i=!1;e&&(i=h-g>0);var j={NOT_HCC:"NOT HCC",HCC_SATISFIED:"HCC SATISFIED",HCC_NOT_SATISFIED:"HCC NOT SATISFIED"};return d?f||b||!f&&!a.getIsChronic()&&c||!f&&e&&!i?j.HCC_SATISFIED:j.HCC_NOT_SATISFIED:j.NOT_HCC}}(),function(a,b,c){function d(a){if(!a){var b=CERN_Platform.getDiscernObject("DIAGNOSISASSISTANT");return!!(b&&"GetNomenclatureSpecificityInfo"in b)}var b=CERN_Platform.getWrappedDiscernObject("DIAGNOSISASSISTANT");Promise.all([b.isAvailable(),b.supports("GetNomenclatureSpecificityInfo")]).then(function(b){var c=b[0],d=b[1];a(c&&d)})}function e(a){return CERN_Platform&&CERN_Platform.inMillenniumContext()&&a?new MPageEntity.entities.Condition.Win32DxAssistant:(logger.logWarning("DIAGNOSISASSISTANT or GetNomenclatureSpecificityInfo not available in environment, continuing without dx assistant"),{launch:function(){},populateSpecificities:function(){}})}var f=MPageEntity.EntityList,g=MPageEntity.EntityList.SORTING;a.ConditionList=function(){f.call(this,a.Condition),this.setEntityListClass(a.ConditionList)},MPageEntity.entities.Condition.defaultEntityListClass=a.ConditionList,b(a.ConditionList,f);var h=a.ConditionList.prototype;h.moveToHistoric=function(){this.action("moveToHistoric")},h.cancel=function(){this.action("cancel")},h.getHighestPriority=function(){for(var a=this,b=0,c=this.length,d=0,e=null,f=0;f<c;f++)e=a[f],d=e.getClinicalPriority()||0,e.getIsThisVisit()&&d>b&&(b=d);return b},h.sortByType=function(a,b){for(var c=this.makeEmptyList(),d=MPageEntity.entities.Condition.TYPES,e=0;e<a.length;e++){var f;switch(a[e]){case d.THIS_VISIT:f=this.filter("isThisVisit",!0);break;case d.CHRONIC:f=this.filter("isChronic",!0).filter("isThisVisit",!1).filter("isCernerNKP",!1);break;case d.HISTORICAL:f=this.filter("isHistorical",!0).filter("isThisVisit",!1).filter("isChronic",!1).filter("isCernerNKP",!1);break;case d.NKP:f=this.filter("isCernerNKP",!0).filter("isThisVisit",!1);break;default:throw new Error("Invalid Condition type provided in sortByType()")}b=b?b:MPageEntity.EntityList.SORTING.ASC,f.sortBy("display",b),c=c.concat(f)}return c},h.sortByPriority=function(a){a||(a=g.ASC);var b=this.filter("isThisVisit",!0),c=b.filter(function(a){return a.getClinicalPriority()<=0||!a.getClinicalPriority()}),d=b.getPrioritizedOnly();return d.sortBy("clinicalPriority",a),d.concat(c)},h.getPrioritizedOnly=function(){return this.filter(function(a){return a.getClinicalPriority()>0&&a.getIsThisVisit()})},h.getPrioritizedOverN=function(a){return this.filter(function(b){return b.getClinicalPriority()>a&&b.getIsThisVisit()})},h.updatePriorityAndResequence=function(a,b,c){var d=this.makeEmptyList(),e=null,f=a.getClinicalPriority();if(0===b||c?e=this.filter(function(a){return a.getClinicalPriority()>=f&&a.getIsThisVisit()}):f<b&&f?e=this.filter(function(a){return a.getClinicalPriority()>=f&&a.getClinicalPriority()<=b&&a.getIsThisVisit()}):f>b?e=this.filter(function(a){return a.getClinicalPriority()<=f&&a.getClinicalPriority()>=b&&a.getIsThisVisit()}):0===f&&b<=this.getHighestPriority()?e=this.filter(function(c){return c.getClinicalPriority()>=b&&c.getIsThisVisit()||c==a}):0===f&&b>this.getHighestPriority()&&(a.setClinicalPriority(b),d.push(a)),!d.length){e=e.sortBy("clinicalPriority",g.ASC);var h=e[0].getClinicalPriority(),i=(h?h:e[1].getClinicalPriority())-c;e.each(function(c){if(c.canModify()){if(d.push(c),c==a)return void c.setClinicalPriority(b);i>=b&&b>0?c.setClinicalPriority(i+1):c.setClinicalPriority(i),i++}})}return d},h.removeAndResequence=function(a,b){var c=1;if(0===b||b===this.getHighestPriority())return this.removeIfEmpty(a),this.makeEmptyList();var d=this.getPrioritizedOverN(b).sortBy("clinicalPriority",g.ASC),e=d[0];return this.removeIfEmpty(a),e?this.updatePriorityAndResequence(e,e.getClinicalPriority()-1,c):this.makeEmptyList()},
h.remove=function(a){var b=this.indexOf(a);return this.splice(b,1)},h.removeIfEmpty=function(a){return a.isEmpty()&&this.remove(a),this},h.update=function(a){return this.action("update",a)},h.updatePriority=function(a){return this.action("updatePriority",a)},h.getUnspecified=function(){return this.filter("isThisVisit",!0).filter("isSpecific",!1)},h.createDxAssistant=function(a){return a?void d(function(b){a(e(b))}):e(d())},h.launchDxAssistant=function(a){var b=this;this.createDxAssistant(function(c){c.launch(b,a)})},h.retrieveSpecificities=function(a){if(a){var b=this;this.createDxAssistant(function(c){c.populateSpecificities(b,null,a)})}else{var c=this.createDxAssistant();c.populateSpecificities(this)}},h.resolveUnspecified=function(a){this.filter("isSpecific",!1).filter(function(a){return a.hasDxAssistant()}).launchDxAssistant(a)},h.getICD10CodeValuesFromMeta=function(){for(var a=this.getResponseMeta().ICD10_VOCAB_CDS,b=[],c=a.length;c--;)b.push(a[c].VOCAB_CD);return b},h.filterDiagnoses=function(a){var b=this,c=a.getDiagnoses(),d=b[0].getDiagnoses();if(c.length)for(var e=d.length,f=0;f<e;f++)if(c[0].getEncounterValue()===d[f].getEncounterValue()){d.splice(f,1);break}$.merge(c,d),a.setDiagnoses(c.sortBy("DIAGDTTM",g.DESC));var h=a.getComments(),i=h.length,j=b[0].getComments();if(i)for(var k=j.length,l=null,m=null,n=null,o=null,p=0;p<k;p++){l=j[p].getCreatedDateTime().getTime(),m=j[p].getAuthorValue();for(var q=0;q<i;q++)if(n=h[q].getCreatedDateTime()?h[q].getCreatedDateTime().getTime():null,o=h[q].getAuthorValue(),n===l&&o===m){j.splice(p,1),k--,p--;break}}$.merge(h,j),a.setComments(h.sortBy("CREATEDDATETIME",g.DESC))},h.hasHccCondition=function(){for(var a=this,b=a.length,c=0;c<b;c++)if(a[c].getHccInd())return!0;return!1},h.hasOverdueHccCondition=function(){for(var a=this,b=a.length,c=0;c<b;c++)if("HCC NOT SATISFIED"==a[c].getHccStatus())return!0;return!1}}(MPageEntity.entities,MPageOO.inherits,MPageOO.attribute),function(){var a=MPageEntity.entities,b=MPageEntity.EncodedString,c=MPageEntity.Number,d=(MPageEntity.CclBool,MPageEntity.Iso8601DateTime),e=MPageEntity.Entity,f=MPageEntity.protocol.EntityProtocolV2,g=MPageEntity.OneToOne,h=MPageOO.attribute;e.create(a,"ConditionComment",{fields:{id:new c,author:new g("MPageEntity.entities.Prsnl"),text:new b,createdDateTime:new d,condition:new g("MPageEntity.entities.Condition",{sendFullObject:!0}),originalCreatedDateTime:new MPageEntity.String}}),a.ConditionComment.protocol=new f,h(a.ConditionComment,"Header"),a.ConditionComment.protocol=new f;var i=function(a){return a.replace(/^\s+|\s+$/g,"")};a.ConditionComment.splitDxComments=function(a){var b=this.makeEmptyList(),c=this;return a.each(function(a){var d,e,f,g;if(!a.startsWithDate())return void b.push(a);for(var h=a.getText().split(/\n\s*\r?\n/gm),j=0;j<h.length;j++)d=h[j],g=d.indexOf("\n"),f=d.substr(0,g),e=new c,a.copyTo(e),e.setText(i(d.substr(g+1))),e.setHeader(i(f)),b.push(e)}),b},a.ConditionComment.prototype.getFormattedHeader=function(){if(this.getHeader())return this.getHeader();var a=this.getCreatedDateTime(),b="";if(a){var c=dateFormat.masks.shortDate2+" "+dateFormat.masks.shortTime;b=a.format(c)}return b+" - "+this.getAuthor().getPerson().getNameFullFormatted()},a.ConditionComment.prototype.startsWithDate=function(){var a=this.getText();if(!a)return!1;var b=a.substr(0,a.indexOf(" ")),c=Date.parse(b);return!!c},a.ConditionComment.prototype.create=function(a){var b=this.getCondition();if(!b.getDiagnoses().length||!b.getDiagnosisDriverValue()||b.getProblemDriverValue())return void MPageEntity.Entity.prototype.create.call(this,a);var c=b.getDiagnoses().sortBy("diagDtTm",MPageEntity.EntityList.SORTING.DESC)[0],d=new MPageEntity.entities.Condition;b.copyTo(d),d.setDiagnosisDriver(c),this.setCondition(d),MPageEntity.Entity.prototype.create.call(this,a)}}(),function(){var a=MPageEntity.EncodedString,b=MPageEntity.Number,c=MPageEntity.CclBool,d=MPageEntity.Iso8601DateTime,e=MPageEntity.Entity,f=MPageEntity.OneToOne,g=(MPageEntity.OneToMany,MPageEntity.CodeValueField);e.create(MPageEntity.entities,"Diagnosis",{fields:{id:new b,display:new a,attestation:new d,certainty:new g(12035),classification:new g(12033),clinicalDiagPriority:new b,clinicalService:new g(29741),conditionalQual:new g(29740),confidLevel:new g(87),confirmationStatus:new g(12031),contributorSystem:new g(89),diagnosticCategory:new g(1314),diagClass:new g(12033),diagDtTm:new d,ftdesc:new a,note:new a,encounter:new f("MPageEntity.Encounter"),hac:new c,laterality:new g(4002375),person:new f("MPageEntity.Person"),priority:new b,originatingNomen:new f("MPageEntity.Nomenclature"),nomenclature:new f("MPageEntity.Nomenclature"),presentOnAdmit:new g(4002009),probability:new b,ranking:new g(12034),referenceNbr:new a,severity:new g(12022),severityClass:new g(29743),severityFtDesc:new a,type:new g(17),updateDtTm:new d,isHistorical:new c,canCondModify:new c,begEffectiveDtTm:new d},listQuals:["personId","encounterId","nomenclatureId","originatingNomenId"],actions:["insert","read","update","list"]}),MPageEntity.entities.Diagnosis.protocol=new MPageEntity.protocol.EntityProtocolV2}(),function(){var a=MPageEntity.String,b=MPageEntity.Number,c=MPageEntity.DateTime,d=MPageEntity.Entity,e=MPageEntity.OneToOne,f="MPageEntity.CodeValue",g="MPageEntity.Person",h=MPageEntity.CodeValueField;d.create(MPageEntity,"Encounter",{fields:{id:new b,financialId:new b,person:new e(g),personnel:new e(g),type:new h(71),typeClass:new h(69),status:new h(261),arrive:new c,depart:new c,begEffective:new c,admitType:new h(3),admitMode:new h(68),dataStatus:new h(8),admitSrc:new h(2),referringComment:new a,organization:new b,facility:new e("MPageEntity.Facility"),location:new b,class:new h(321),reasonForVisit:new e(f)},listQuals:["personId"],actions:["insert","read","update","list"]})}(),function(){var a=MPageEntity.EncodedString,b=MPageEntity.Number,c=(MPageEntity.DateTime,MPageEntity.Entity),d=(MPageEntity.OneToOne,MPageEntity.OneToMany),e=MPageEntity.CodeValueField,f=MPageEntity.CodeSets,g=MPageEntity.CclBool,h=MPageEntity.EncodedString,i="MPageEntity.entities.RiskIndicatorTypes";c.create(MPageEntity.entities,"RiskIndicatorTypes",{fields:{type:new a}}),c.create(MPageEntity.entities,"Nomenclature",{fields:{id:new b,cmti:new a,conceptCki:new a,conceptIdentifier:new a,conceptSource:new e(f.NOMENCLATUREIDENTIFIERSOURCE),contributorSystem:new e(f.CONTRIBUTORSYSTEM),language:new e(f.LANGUAGE),mnemonic:new a,primaryCTerm:new g,primaryVTerm:new g,principleType:new e(f.PRINCIPLETYPE),shortString:new a,riskIndicatorTypes:new d(i),sourceIdentifier:new a,sourceIdentifierKeycap:new a,sourceString:new a,sourceStringKeycap:new a,sourceVocabulary:new e(f.SOURCEVOCABULARY),stringIdentifier:new a,stringSource:new e(f.NOMENCLATUREIDENTIFIERSOURCE),stringStatus:new e(f.STRINGSTATUS),vocabAxis:new e(f.SOURCEVOCABULARYAXIS),vocabAxisDisplay:new a,vocabAxisMeaning:new a,isSpecific:new g},actions:{search:{searchTerm:new h,sourceFlag:new b,resultLimit:new b,searchVocab:new h},list:{sourceStringEquals:new a,sourceStringContains:new a,mnemonicContains:new a,languageId:new b,idGreaterThan:new b}}}),MPageEntity.entities.Nomenclature.protocol=new MPageEntity.protocol.EntityProtocolV2,MPageEntity.Nomenclature=MPageEntity.entities.Nomenclature,MPageEntity.entities.Nomenclature.search=function(a,b,c){return MPageEntity.entities.Nomenclature.action("search",a,b,c)}}(),function(){var a=MPageEntity.entities,b=MPageEntity.EncodedString,c=MPageEntity.Number,d=MPageEntity.Iso8601DateTime,e=MPageEntity.Entity,f=MPageEntity.OneToOne,g=MPageEntity.OneToMany,h="MPageEntity.entities.Problem",i=MPageEntity.protocol.EntityProtocolV2,j="MPageEntity.CodeValue",k="MPageEntity.Person",h=(MPageEntity.CodeValueField,"MPageEntity.entities.Problem"),l="MPageEntity.entities.Nomenclature",m="MPageEntity.entities.PatientRequestModifyField";e.create(a,"PatientRequestComment",{fields:{comment:new b}}),e.create(a,"PatientRequestModifyField",{fields:{id:new c,display:new b,modifiedDisplay:new b,modifyStatus:new f(j)}}),e.create(a,"PatientProblemRequest",{fields:{id:new c,healthIssue:new b,problem:new f(h),person:new f(k),managingProvider:new f(m),nomenclature:new f(l),requestType:new f(j),submissionDate:new d,submittedBy:new b,submittedByType:new f(j),onsetDate:new f(m),comments:new g("MPageEntity.entities.PatientRequestComment")},listQuals:["personId"],actions:["insert","acknowledge","list"]}),a.PatientProblemRequest.protocol=new i}(),function(){var a=MPageEntity.String,b=MPageEntity.Number,c=MPageEntity.DateTime,d=MPageEntity.Entity,e=(MPageEntity.OneToOne,MPageEntity.OneToMany),f=MPageEntity.CodeValueField;d.create(MPageEntity,"Person",{fields:{id:new b,nameFirst:new a,nameLast:new a,updateDateTime:new c,nameFullFormatted:new a,sex:new f(57),mrn:new a,organization:new b,encounters:new e("MPageEntity.Encounter","personId"),privileges:new e("MPageEntity.Privilege","person"),dob:new c},listQuals:["nameFirstKey","nameLastKey"],actions:["insert","update","read","list"]})}(),function(){var a=MPageEntity.EncodedString,b=MPageEntity.Number,c=MPageEntity.CclBool,d=(MPageEntity.DateTime,MPageEntity.Entity),e=MPageEntity.OneToOne,f=(MPageEntity.OneToMany,MPageEntity.Iso8601DateTime),g=MPageEntity.CodeValueField,h="MPageEntity.entities.Nomenclature",i="MPageEntity.Person";d.create(MPageEntity.entities,"Problem",{fields:{id:new b,annotatedDisplay:new a,begEffectiveDateTime:new f,classificationCd:new g(12033),confirmationStatus:new g(12031),endEffectiveDateTime:new f,lifeCycleStatusCd:new g(12030),onsetDateTime:new f,onsetPrecision:new b,problemTypeFlag:new b,showInPMHxInd:new c,originatingNome:new e(h),person:new e(i),nomenclature:new e(h),severity:new g(12022),severityClass:new g(29743),laterality:new g(4002375),severityFtDesc:new a,descriptionFtDesc:new a,sourceVocabularyCd:new b,sourceIdentifier:new a,problemFtDesc:new a,qualifierCd:new b,persistenceCd:new b,certainityCd:new b,rankingCd:new b,contributorSystemCd:new b,updateDtTm:new f,organization:new b,isHistorical:new c,externalDataOriginatingAuthor:new a,externalDataOriginatingSource:new a,externalDataOriginatingDate:new a,externalDataOriginatingDtPrecision:new b,canCondModify:new c},listQuals:["personId","nomenclatureId","originatingNomenId"],actions:["insert","read","update","list"]})}(),function(){var a=MPageEntity.entities,b=MPageEntity.EncodedString,c=MPageEntity.Number,d=MPageEntity.Iso8601DateTime,e=MPageEntity.Entity,f=MPageEntity.OneToOne,g=MPageEntity.OneToMany,h="MPageEntity.entities.Problem",i="MPageEntity.entities.Encounter",j="MPageEntity.entities.DateWithPresion",k="MPageEntity.entities.ModifiableDateField",l="MPageEntity.entities.ModifiableTextField",m="MPageEntity.entities.ExternalRequestComment",n="MPageEntity.entities.ExternalRequest",o=MPageEntity.protocol.EntityProtocolV2,p="MPageEntity.CodeValue",q=(MPageEntity.CodeValueField,"MPageEntity.entities.Nomenclature");e.create(a,"DateWithPresion",{fields:{dateTime:new d,precision:new c}}),e.create(a,"ModifiableTextField",{fields:{display:new b,modifiedDisplay:new b,modifyStatus:new f(p)}}),e.create(a,"ModifiableDateField",{fields:{originalDate:new f(j),modifiedDate:new f(j),modifyStatus:new f(p)}}),e.create(a,"ExternalRequestComment",{fields:{comment:new b}}),e.create(a,"ExternalRequest",{fields:{id:new c,encounter:new f(i),problem:new f(h),requestType:new f(p),sourceType:new f(p),onsetDate:new f(k),lastModifiedDate:new f(k),resolutionDate:new f(k),comments:new g(m),managingProviders:new g(l),extContribSource:new f(p),authors:new g(l),authorInstitutions:new g(l),authorInstitutionsString:new b,duplicateInd:new c,extReqStatusCd:new b,cammDataMediaId:new b,cammDataMediaVersion:new b,classification:new f(p)}}),e.create(a,"ProblemExternalRecord",{fields:{nomenclature:new f(q),freetextInd:new c,updatePrivsGrantedInd:new c,groupOnsetDate:new f(j),externalRequests:new g(n)},listQuals:["personId","pprCd"],actions:["list"]}),a.ProblemExternalRecord.protocol=new o}(),function(){var a=MPageEntity.String,b=MPageEntity.Number,c=MPageEntity.OneToOne,d=MPageEntity.CodeValueField,e=MPageEntity.CodeSets;MPageEntity.Entity.create(MPageEntity.entities,"Prsnl",{fields:{id:new b,person:new c("MPageEntity.Person",{sendFullObject:!0}),userName:new a,email:new a,title:new a,posCd:new d(e.POSITNCODE)},listQuals:["userName"],actions:["read","insert","update","list"]}),MPageEntity.entities.Prsnl.protocol=new MPageEntity.protocol.EntityProtocolV2}(),function(){var a;MPageEntity.getProbDxUtils=function(b){return b?a||CERN_Platform.getWrappedDiscernObject("PROBDXUTILS"):a||CERN_Platform.getDiscernObject("PROBDXUTILS")},MPageEntity.Win32ConditionModifier=function(a,b,c,d){var e,f=a,g=f.getEncounterValue(),h=f.getPersonValue(),i=f.getDiagnosisDriverValue(),j=f.getProblemDriverValue(),k=new CapabilityTimer("CAP:MPG Condition Entity Modify",c);if(k&&k.capture(),b)return e=MPageEntity.getProbDxUtils(b),e.isAvailable().then(function(a){if(a){if(i&&f.getIsThisVisit()&&f.canModifyThisVisit()&&!d)return e.invoke("LoadDiagnosisAndInvokeModify",[i,h,g,!0]);if(j&&f.canModifyChronic())return e.invoke("LoadProblemAndInvokeModify",[j,h,!0]);throw new Error("Condition has no valid diagnosis or problem")}throw new Error("PROBDXUTILS COM object is not available")}).then(function(){b()}).catch(function(a){b(a)});if(e=MPageEntity.getProbDxUtils(),i&&f.getIsThisVisit()&&f.canModifyThisVisit()&&!d)e.LoadDiagnosisAndInvokeModify(i,h,g,!0);else{if(!j||!f.canModifyChronic())throw new Error("Condition has no valid diagnosis or problem");e.LoadProblemAndInvokeModify(j,h,!0)}b()}}(),function(){MPageEntity.entities.Condition.Win32DxAssistant=function(){};var a=MPageEntity.entities.Condition.Win32DxAssistant,b=a.prototype,c=function(a,b){if("undefined"!=typeof logger&&logger)return void logger.logError(a+": "+b);throw a},d=function(a,b){if(b)return a?(c=CERN_Platform.getWrappedDiscernObject("CLINICALDIAGNOSIS"),c.isAvailable().then(function(d){if(!d)return b();var e=a.getDiagnosisDriverFromArray();c.set("DiagnosisID",a.getDiagnosisDriverValue()),c.set("DiagnosisGroupID",a.getDiagnosisDriverValue()),c.set("EncounterID",a.getEncounterValue()),c.set("DiagnosisDisplay",a.getDisplay()),c.set("NomenclatureID",a.getDiagnosisDriverFromArray().getNomenclatureValue());var f=new Date(1899,11,30,0,0,0),g=new Date,h=null,i=null;return void 0!=e.getBegEffectiveDtTm()&&(g=e.getBegEffectiveDtTm(),i=g.getTime()-f.getTime(),h=i/864e5),Promise.all([c.get("BegEffectiveDtTm"),c.get("ClinicalPriority"),c.get("OriginatingSourceString"),c.get("OriginatingNomenclatureID")]).then(function(d){return void 0!=d[0]&&c.set("BegEffectiveDtTm",h),void 0!=d[1]&&a.getClinicalPriority()&&c.set("ClinicalPriority",a.getClinicalPriority()),void 0!=d[2]&&c.set("OriginatingSourceString",a.getDisplay()),void 0!=d[3]&&0===d[3]&&c.set("OriginatingNomenclatureID",a.getNomenclatureValue()),b(c)})})):b();if(!a)return null;var c=CERN_Platform.getDiscernObject("CLINICALDIAGNOSIS"),d=a.getDiagnosisDriverFromArray();if(!c)return null;c.DiagnosisID=a.getDiagnosisDriverValue(),c.DiagnosisGroupID=a.getDiagnosisDriverValue(),c.EncounterID=a.getEncounterValue(),c.DiagnosisDisplay=a.getDisplay(),c.NomenclatureID=a.getDiagnosisDriverFromArray().getNomenclatureValue();var e=new Date(1899,11,30,0,0,0),f=new Date,g=null,h=null;return void 0!=d.getBegEffectiveDtTm()&&(f=d.getBegEffectiveDtTm(),h=f.getTime()-e.getTime(),g=h/864e5),void 0!=c.BegEffectiveDtTm&&(c.BegEffectiveDtTm=g),void 0!=c.ClinicalPriority&&a.getClinicalPriority()&&(c.ClinicalPriority=a.getClinicalPriority()),void 0!=c.OriginatingSourceString&&(c.OriginatingSourceString=a.getDisplay()),void 0!=c.OriginatingNomenclatureID&&0===c.OriginatingNomenclatureID&&(c.OriginatingNomenclatureID=a.getNomenclatureValue()),c},e=function(a,b,c){if(!c)return b.each(function(b){if(b.getIsThisVisit()&&!b.isFreeText()){var c=d(b);c&&c.NomenclatureID>0&&a.Add(c)}}),a;var e=b.reduce(function(b,c){return b.then(function(){if(c.getIsThisVisit()&&!c.isFreeText())return d(c,function(b){return Promise.all([b.isAvailable(),b.get("NomenclatureID")]).then(function(c){if(c[1]>0)return a.invoke("Add",[b])})})})},Promise.resolve());e.then(function(){c(a)})},f=function(){var a=CERN_Platform.getDiscernObject("DIAGNOSISASSISTANT");return a||c("Could not instantiate dx assistant"),a},g=function(){return CERN_Platform.getWrappedDiscernObject("DIAGNOSISASSISTANT")},h=function(a,b){if(!b){var d=CERN_Platform.getDiscernObject("DISPATCHCOLLECTION");return d||c("Could not create the dx assistant collection"),e(d,a),d}var d=CERN_Platform.getWrappedDiscernObject("DISPATCHCOLLECTION");e(d,a,function(a){b(a)})},i=function(a,b,c){return b.filter("diagnosisDriver",c).reduce(function(b,c){if(!c.isTargetICD10())return c.setIsSpecific(null),b.then(Promise.resolve);var d=c.getTargetNomenclatureValue();return b.then(function(){return a.get("NomenclatureId").then(function(a){d!==a&&(c.getDiagnosisDriverFromArray().setNomenclatureValue(a),c.setTargetNomenclatureValue(a))})}).then(function(){return a.get("NomenclatureSpecific").then(function(a){a>=0&&c.setIsSpecific(!!a)})})},Promise.resolve())},j=function(a,b,c){var d=g();d.isAvailable().then(function(a){if(a)return d.invoke("GetNomenclatureSpecificityInfo",[b])}).then(function(a){if(a)return b.invoke("GetCount")}).then(function(c){if(c)return Array.from({length:c}).reduce(function(c,d,e){return c.then(function(){b.invoke("GetAt",[e]).then(function(b){return b.get("DiagnosisGroupID").then(function(c){return i(b,a,c)})})})},Promise.resolve())}).then(function(){c()})};b.launch=function(a,b){if(!a.length)return void c("Tried to launch Dx assistant, but no conditions were passed.");a=a.filter(function(a){return a.isTargetICD10()});var d=this,e=a[0],f=e.getMeta(),i=f.userId,j=e.getPprCd(),k=f.positionCd,l=e.getPersonValue(),m=e.getEncounterValue(),n=new CapabilityTimer("CAP:MPG Condition Entity Launch Dx Assistant","condition entity");n.capture();var o=g();o.isAvailable().then(function(e){e&&h(a,function(e){o.invoke("IsDxAssistantNeeded",[i,j,k,e]).then(function(f){Promise.all([f.isAvailable(),f.invoke("GetCount")]).then(function(g){if(g[0]&&f&&!(g[1]<1)){var h=CERN_Platform.getWrappedDiscernObject("DXASSISTANTCRITERIA");return Promise.all([h.invoke("SetParentWnd",[0]),h.invoke("SetUserID",[i]),h.invoke("SetPPRCD",[j]),h.invoke("SetPatientID",[l]),h.invoke("SetEncounterID",[m]),h.invoke("SetCrossMapModeByEnum",[0]),h.invoke("SetDialogType",[0]),h.invoke("SetReturnEffectiveDtTmByEnum",[0]),h.invoke("SetEnableEarlyTransitionDx",[!1])]).then(function(){return o.invoke("LaunchDiagnosisAssistantByCriteria",[h,e]).then(function(c){c&&d.populateSpecificities(a,e,b)})}).catch(function(f){return c("Failed to create DXASSISTANTCRITERIA. Reverting back to old API.",f),o.invoke("LaunchDiagnosisAssistant",[0,i,j,l,m,e]).then(function(c){c&&d.populateSpecificities(a,e,b)})})}})})})})},b.populateSpecificities=function(a,b,c){if(c)b?j(a,b,c):h(a,function(b){j(a,b,c)});else{var d=f();b||(b=h(a));var e=d.GetNomenclatureSpecificityInfo(b);if(!e)return;for(var g=null,i=0;i<b.GetCount();i++)g=b.GetAt(i),a.filter("diagnosisDriver",g.DiagnosisGroupID).each(function(a){if(!a.isTargetICD10())return void a.setIsSpecific(null);var b=a.getTargetNomenclatureValue();b!==g.NomenclatureId&&(a.getDiagnosisDriverFromArray().setNomenclatureValue(g.NomenclatureID),a.setTargetNomenclatureValue(g.NomenclatureID)),g.NomenclatureSpecific>=0&&a.setIsSpecific(!!g.NomenclatureSpecific)})}}}(),function(){var a=9,b=5,c=6,d="This Visit",e="Active",f="Historical";MPageEntity.Win32NomenclatureConverter=function(a,b){this.pprCd=a,this.positionCd=b};var g=MPageEntity.Win32NomenclatureConverter.prototype;g.getMapping=function(a,b,c,g,h){return h?void a.isAvailable().then(function(h){if(!h)throw new Error("Win32NomenclatureConverter : An error occured when trying to get the cross mapping Async object"+error);return a.invoke("GetDxProbMapping",[b.getPersonValue(),b.getEncounterValue(),c,b.getNomenclatureValue(),g,this.pprCd,this.positionCd,d,e,f])}).then(function(a){h(b,a)}).catch(function(a){h(b,null,a)}):a.GetDxProbMapping(b.getPersonValue(),b.getEncounterValue(),c,b.getNomenclatureValue(),g,this.pprCd,this.positionCd,d,e,f)},g.createMapper=function(){var a=CERN_Platform.getDiscernObject("KIACROSSMAPPING");if(!a)throw new Error("Win32NomenclatureConverter : An error occured when trying to get the cross mapping object");return a},g.createMapperAsync=function(){return CERN_Platform.getWrappedDiscernObject("KIACROSSMAPPING")},g.mapThisVisit=function(b,c,d,e){return this.getMapping(b,d,a,c.getThisVisitVocab(),e)},g.mapChronic=function(a,c,d,e){return this.getMapping(a,d,b,c.getChronicVocab(),e)},g.mapHistoric=function(a,b,d,e){return this.getMapping(a,d,c,b.getChronicVocab(),e)},g.convertTvAndChronic=function(a,b,c){var d=this,e=c?this.createMapperAsync():this.createMapper();if(!c){var f={thisVisit:this.mapThisVisit(e,b,a),chronic:this.mapChronic(e,b,a)};return f.thisVisit&&f.chronic?f:null}d.mapThisVisit(e,b,a,function(a,f){d.mapChronic(e,b,a,function(a,b){var d={thisVisit:f,chronic:b},e=d.thisVisit&&d.chronic?d:null;c(e)})})},g.convert=function(a,b,c){if(!a)return c?c(a,null):null;var d=c?this.createMapperAsync():this.createMapper();if(a.getIsThisVisit())return this.mapThisVisit(d,b,a,c);if(a.getIsChronic())return this.mapChronic(d,b,a,c);if(a.getIsHistorical())return this.mapHistoric(d,b,a,c);throw new Error("Win32NomenclatureConverter: cannot convert a condition with no flags.")},g.convertTv=function(a,b,c){if(!a)return c?c(a,null):null;var d=c?this.createMapperAsync():this.createMapper();return this.mapThisVisit(d,b,a,c)},g.convertChronic=function(a,b,c){if(!a)return c?c(a,null):null;var d=c?this.createMapperAsync():this.createMapper();return this.mapChronic(d,b,a,c)}}(),MPageEntity.configure(function(){if("undefined"!=typeof m_criterionJSON&&m_criterionJSON){"undefined"==typeof MPageEntity.Config&&(MPageEntity.Config={});var a=JSON.parse(m_criterionJSON).CRITERION;MPageEntity.Config.user=a.PRSNL_ID,MPageEntity.Config.ppr=a.PPR_CD,MPageEntity.Config.position=a.POSITION_CD,MPageEntity.Entity.throwRequestErrors=!1}});var MenuManager=function(){this.menuCollection={},this.menuStack=[],this.offsetParent=null};MenuManager.prototype.addMenuObject=function(a){var b="";return Menu.prototype.isPrototypeOf(a)?(b=a.getId())?this.menuCollection[b]?(logger.logError("MenuManager.addMenuObject: menu id"+b+" is already in use"),!1):(this.menuCollection[b]=a,!0):(logger.logError("MenuManager.addMenuObject: no/invalid menu id given"),!1):(logger.logError("MenuManager.addMenuObject only accepts objects of type Menu or any object that uses Menu.prototype"),!1)},MenuManager.prototype.closeMenuStack=function(a){var b="",c=null;try{return(c=this.menuStack.pop())?!a&&c.isMouseOverMenu()?(this.menuStack.push(c),!0):($("#"+c.getContentElementId()).remove(),c.setContentElementId(""),b=c.getAnchorActiveClass(),b&&$("#"+c.getAnchorElementId()).removeClass(b),c.setIsActive(!1),c.setIsVisible(!1),c.setIsMouseOverMenu(!1),c.clearHoverTimeout(),this.closeMenuStack(a)):(this.offsetParent=null,!0)}catch(a){return logger.logJSError(a,null,"MenuManager","closeMenu"),!1}},MenuManager.prototype.deleteMenuObject=function(a){return delete this.menuCollection[a]},MenuManager.prototype.getMenuObject=function(a){return this.menuCollection[a]||null},MenuManager.prototype.showMenu=function(a){var b="",c=null,d=null,e="",f=null,g=null,h=null,i=null;return(i=this.getMenuObject(a))?($("#menuContent"+a).remove(),i.isRootMenu()&&this.closeMenuStack(!0),e=i.isRootMenu()?"menu-container-root":"menu-container-submenu",g=$("<div></div>").attr("id","menuContent"+a).addClass(e+" "+i.getTypeClass()),i.isPersistent()&&i.isRootMenu()||g.hover(function(){i.setIsMouseOverMenu(!0),i.clearHoverTimeout()},function(){i.setIsMouseOverMenu(!1),i.startHoverTimeout()}),i.setContentElementId("menuContent"+a),h=i.generateMenuContent(),$(h).each(function(a,b){$(g).append(b)}),b=i.getAnchorActiveClass(),b&&$("#"+i.getAnchorElementId()).addClass(b),c=$("#"+i.getAnchorElementId()),i.getContentParentId()&&(d=$("#"+i.getContentParentId())),d&&d.length?$(d).append(g):$(document.body).append(g),$(g).width($(g).outerWidth()),f=new MPageControls.DetailDialog(c,g),f.setAutoFlipHorizontal(i.autoFlipHorizontal()),f.setAutoFlipVertical(i.autoFlipVertical()),f.setElementCorner(i.getAnchorConnectionCorner()),f.setContentsCorner(i.getContentConnectionCorner()),f.show(),i.setIsActive(!0),i.setIsVisible(!0),i.isRootMenu()&&!i.isPersistent()&&i.startHoverTimeout(3e3),void this.menuStack.push(i)):(logger.logError("Menu "+a+" does not exist"),!1)},MenuManager.prototype.refreshMenuDisplay=function(a){var b=null,c=0;return(b=this.getMenuObject(a))?(c=this.menuStack.length-1,void(c>=0&&b===this.menuStack[c]&&this.showMenu(a))):(logger.logError("Menu "+a+" does not exist"),!1)},MenuManager.prototype.updateMenuObject=function(a){return Menu.prototype.isPrototypeOf(a)?(this.menuCollection[a.getId()]=a,!0):(logger.logError("MenuManager.updateMenuObject only accepts objects of type Menu"),!1)};var MP_MenuManager=new MenuManager;MenuItem.prototype.closeOnClick=function(){return this.m_closeOnClick},MenuItem.prototype.isActive=function(){return this.m_activeInd},MenuItem.prototype.isDisabled=function(){return this.m_disabledInd},MenuItem.prototype.getClickFunction=function(){return this.m_clickFunc},MenuItem.prototype.getDefaultClickFunction=function(){return this.m_defaultClickFunction},MenuItem.prototype.getElementId=function(){return this.m_elementId},MenuItem.prototype.getId=function(){return this.m_menuItemId},MenuItem.prototype.getLabel=function(){return this.m_label},MenuItem.prototype.getTypeClass=function(){return this.m_menuItemTypeClass},MenuItem.prototype.setClickFunction=function(a){return"function"==typeof a&&(this.m_clickFunc=a),this},MenuItem.prototype.setCloseOnClick=function(a){return"boolean"==typeof a&&(this.m_closeOnClick=a),this},MenuItem.prototype.setDefaultClickFunction=function(a){return"function"==typeof a&&(this.m_defaultClickFunction=a),this},MenuItem.prototype.setElementId=function(a){return"string"==typeof a&&(this.m_elementId=a),this},MenuItem.prototype.setId=function(a){return a&&"string"==typeof a&&(this.m_menuItemId=a),this},MenuItem.prototype.setIsActive=function(a){return"boolean"==typeof a&&(this.m_activeInd=a),this},MenuItem.prototype.setIsDisabled=function(a){return"boolean"==typeof a&&(this.m_disabledInd=a),this},MenuItem.prototype.setLabel=function(a){var b="";return a&&"string"==typeof a&&(this.m_label=a,this.isActive()&&(b=this.getElementId().replace(/menuSel[0-9]+-/,""),MP_MenuManager.refreshMenuDisplay(b))),this},MenuItem.prototype.setTypeClass=function(a){return"string"==typeof a&&(this.m_menuItemTypeClass=a),this},MenuItem.prototype.generateSelectionContent=function(){return[$("<span>&nbsp;</span>").addClass("menu-selection-ind"),$("<span></span>").addClass("menu-selection").html(this.getLabel())]},Menu.prototype=new MenuItem,Menu.prototype.constructor=MenuItem,Menu.prototype.autoFlipHorizontal=function(){return this.m_autoFlipHorizontal},Menu.prototype.autoFlipVertical=function(){return this.m_autoFlipVertical},Menu.prototype.containsMenuItem=function(a){var b=0,c=this.m_menuItemArr;if(!c)return!1;for(b=c.length;b--;)if(c[b].getId()===a)return!0;return!1},Menu.prototype.isRootMenu=function(){return this.m_rootMenuInd},Menu.prototype.isMouseOverMenu=function(){return this.m_mouseOverContent},Menu.prototype.isMouseOverAnchor=function(){return this.m_mouseOverAnchor},Menu.prototype.isPersistent=function(){return this.m_isPersistent},Menu.prototype.isVisible=function(){return this.m_visibleInd},Menu.prototype.getAnchorActiveClass=function(){return this.m_anchorActiveClass},Menu.prototype.getAnchorConnectionCorner=function(){return this.anchorCorner?this.anchorCorner:["bottom","right"]},Menu.prototype.getAnchorElementId=function(){return this.m_anchorElementId},Menu.prototype.getCloseFunction=function(){return this.m_onCloseFunction},Menu.prototype.getContentConnectionCorner=function(){return this.contentCorner?this.contentCorner:["top","right"]},Menu.prototype.getContentElementId=function(){return this.m_contentElementId},Menu.prototype.getContentParentId=function(){return this.m_contentParentId},Menu.prototype.getMenuItemArray=function(){return this.m_menuItemArr},Menu.prototype.setAnchorConnectionCorner=function(a){return"object"==typeof a&&a.length&&(this.anchorCorner=a),this},Menu.prototype.setAnchorActiveClass=function(a){return"string"==typeof a&&(this.m_anchorActiveClass=a),this},Menu.prototype.setAnchorElementId=function(a){return"string"==typeof a&&(this.m_anchorElementId=a),this},Menu.prototype.setAutoFlipHorizontal=function(a){return"boolean"==typeof a&&(this.m_autoFlipHorizontal=a),this},Menu.prototype.setAutoFlipVertical=function(a){return"boolean"==typeof a&&(this.m_autoFlipVertical=a),this},Menu.prototype.setCloseFunction=function(a){return"function"==typeof a&&(this.m_onCloseFunction=a),this},Menu.prototype.setContentConnectionCorner=function(a){return"object"==typeof a&&a.length&&(this.contentCorner=a),this},Menu.prototype.setContentElementId=function(a){return"string"==typeof a&&(this.m_contentElementId=a),this},Menu.prototype.setContentParentId=function(a){return"string"==typeof a&&(this.m_contentParentId=a),this},Menu.prototype.setElementId=function(a){return"string"==typeof a&&(this.m_elementId=a,this.m_anchorElementId=a),this},Menu.prototype.setIsActive=function(a){var b=null,c=0;if("boolean"==typeof a&&(this.m_activeInd=a),b=this.getMenuItemArray(),b&&b.length)for(c=b.length;c--;)b[c].setIsActive(a);return this},Menu.prototype.setIsRootMenu=function(a){return"boolean"==typeof a&&(this.m_rootMenuInd=a),this},Menu.prototype.setIsMouseOverMenu=function(a){return"boolean"==typeof a&&(this.m_mouseOverContent=a),this},Menu.prototype.setIsMouseOverAnchor=function(a){return"boolean"==typeof a&&(this.m_mouseOverAnchor=a),this},Menu.prototype.setIsPersistent=function(a){return"boolean"==typeof a&&(this.m_isPersistent=a),this},Menu.prototype.setIsVisible=function(a){return"boolean"==typeof a&&(this.m_visibleInd=a),this},Menu.prototype.addMenuItem=function(a){return MenuItem.prototype.isPrototypeOf(a)&&(this.m_menuItemArr||(this.m_menuItemArr=[]),this.m_menuItemArr.push(a),Menu.prototype.isPrototypeOf(a)&&(a.setContentParentId(this.m_contentParentId),MP_MenuManager.updateMenuObject(a))),this},Menu.prototype.startHoverTimeout=function(a){var b=this;a=a||250,this.clearHoverTimeout(),this.m_hoverTimout=window.setTimeout(function(){var a=b.getCloseFunction();a&&a.call(b),MP_MenuManager.closeMenuStack(!1)},a)},Menu.prototype.clearHoverTimeout=function(){window.clearTimeout(this.m_hoverTimout)},Menu.prototype.insertMenuItem=function(a,b){return this.m_menuItemArr||(this.m_menuItemArr=[]),"number"!=typeof b?this:(MenuItem.prototype.isPrototypeOf(a)&&b<=this.m_menuItemArr.length&&b>=0&&(this.m_menuItemArr.splice(b,0,a),Menu.prototype.isPrototypeOf(a)&&MP_MenuManager.updateMenuObject(a)),this)},Menu.prototype.removeMenuItem=function(a){var b=0,c=this.m_menuItemArr;if(!c)return!1;if(MenuItem.prototype.isPrototypeOf(a)&&!this.isActive())for(b=c.length;b--;)if(c[b]===a)return c.splice(b,1),Menu.prototype.isPrototypeOf(a)&&MP_MenuManager.deleteMenuObject(a),!0;return!1},Menu.prototype.generateMenuContent=function(){function a(a){return function(b){var c=null;a.isDisabled()||(a.closeOnClick()?MP_MenuManager.closeMenuStack(!0):MP_MenuManager.closeMenuStack(!1),c=a.getDefaultClickFunction(),c.call(a,b),c=a.getClickFunction(),c&&c.call(a,b))}}function b(a){return function(){Menu.prototype.isPrototypeOf(a)&&(a.setIsMouseOverAnchor(!0),a.isVisible()?a.clearHoverTimeout():window.setTimeout(function(){a.isMouseOverAnchor()&&MP_MenuManager.showMenu(a.getId())},251))}}function c(a){return function(){Menu.prototype.isPrototypeOf(a)&&(a.setIsMouseOverAnchor(!1),a.isVisible()&&a.startHoverTimeout())}}var d="",e=null,f=[],g=this.getMenuItemArray(),h=g?g.length:0,i=null,j="",k=null,l=0;for(l=0;l<h;l++)i=g[l],
j="menuSel"+l+"-"+this.getId(),i.setElementId(j),d=i.isDisabled()?"menu-item-disabled":"",e=$("<div></div>").addClass("menu-item "+d+" "+i.getTypeClass()).attr("id",j),$(e).hover(b(i),c(i)),k=i.generateSelectionContent(),$(k).each(function(a,b){$(e).append(b)}),$(e).click(a(i)),f.push(e);return f},Menu.prototype.generateSelectionContent=function(){return[$("<span>&nbsp;</span>").addClass("menu-selection-ind"),$("<span></span>").addClass("menu-selection").html(this.getLabel()),$("<span>&nbsp;</span>").addClass("menu-submenu-ind")]},DynamicMenu.prototype=new Menu,DynamicMenu.prototype.constructor=Menu,DynamicMenu.prototype.getContentCreationFunction=function(){return this.m_contentCreationFunc},DynamicMenu.prototype.setContentCreationFunction=function(a){return"function"==typeof a&&(this.m_contentCreationFunc=a),this},DynamicMenu.prototype.generateMenuContent=function(){var a=this.getContentCreationFunction();return a?a.call(this):null},AdvancedFilterMenu.prototype=new DynamicMenu,AdvancedFilterMenu.prototype.constructor=DynamicMenu,AdvancedFilterMenu.prototype.setAdvancedFilterCreationFunction=function(a){a&&"function"==typeof a&&(this.settings.advancedFilterCreationFunction=a)},AdvancedFilterMenu.prototype.setCancelButtonLabel=function(a){a&&"string"==typeof a&&(this.setIsCancelButtonEnabled(!0),this.settings.cancel.label=a)},AdvancedFilterMenu.prototype.setCancelFunction=function(a){a&&"function"==typeof a&&(this.setIsCancelButtonEnabled(!0),this.settings.cancel.onclick=a)},AdvancedFilterMenu.prototype.setCheckboxClickFunction=function(a){a&&"function"==typeof a&&(this.setIsCheckboxEnabled(!0),this.settings.checkbox.onclick=a)},AdvancedFilterMenu.prototype.setCheckboxLabel=function(a){"string"==typeof a&&(this.settings.checkbox.label=a)},AdvancedFilterMenu.prototype.setActionLinkFunction=function(a){a&&"function"==typeof a&&(this.setIsActionLinkEnabled(!0),this.settings.actionLink.onclick=a)},AdvancedFilterMenu.prototype.setActionLinkLabel=function(a){"string"==typeof a&&(this.settings.actionLink.label=a)},AdvancedFilterMenu.prototype.setIsCancelButtonEnabled=function(a){"boolean"==typeof a&&(this.settings.cancel.enabled=a)},AdvancedFilterMenu.prototype.setIsCheckboxChecked=function(a){"boolean"==typeof a&&(this.settings.checkbox.isChecked=a)},AdvancedFilterMenu.prototype.setIsCheckboxEnabled=function(a){"boolean"==typeof a&&(this.settings.checkbox.enabled=a)},AdvancedFilterMenu.prototype.setIsActionLinkEnabled=function(a){"boolean"==typeof a&&(this.settings.actionLink.enabled=a)},AdvancedFilterMenu.prototype.setIsSaveButtonEnabled=function(a){"boolean"==typeof a&&(this.settings.save.enabled=a)},AdvancedFilterMenu.prototype.setSaveButtonLabel=function(a){a&&"string"==typeof a&&(this.setIsSaveButtonEnabled(!0),this.settings.save.label=a)},AdvancedFilterMenu.prototype.setSaveFunction=function(a){a&&"function"==typeof a&&(this.setIsSaveButtonEnabled(!0),this.settings.save.onclick=a)},AdvancedFilterMenu.prototype.setWidth=function(a){a&&"number"==typeof a&&(this.settings.dimensions.width=a)},ContextMenu.prototype=new Menu,ContextMenu.prototype.constructor=Menu,ContextMenu.prototype.getXOffset=function(){return this.m_xOffset},ContextMenu.prototype.getYOffset=function(){return this.m_yOffset},ContextMenu.prototype.setXOffset=function(a){return"number"==typeof a&&(this.m_xOffset=a),this},ContextMenu.prototype.setYOffset=function(a){return"number"==typeof a&&(this.m_yOffset=a),this},ContextMenu.prototype.setAnchorElement=function(){$(document.body).append($("<div id='"+this.getId()+"Anchor' class='context-menu'></div>").css({top:this.getYOffset(),left:this.getXOffset()}))},ContextMenu.prototype.removeAnchorElement=function(){$("#"+this.getId()+"Anchor").remove()},MenuSelection.prototype=new MenuItem,MenuSelection.prototype.constructor=MenuItem,MenuSelection.prototype.isSelected=function(){return this.m_selectedInd},MenuSelection.prototype.getSelectedClass=function(){return this.m_selectedClass},MenuSelection.prototype.setIsSelected=function(a){var b="",c=null;return"boolean"==typeof a&&(this.m_selectedInd=a,this.isActive()&&(b=this.getSelectedClass(),c=$("#"+this.getElementId()+" :first-child"),a?$(c).addClass(b):$(c).removeClass(b))),this},MenuSelection.prototype.setSelectedClass=function(a){return"string"==typeof a&&(this.m_selectedClass=a),this},MenuSelection.prototype.toggleSelection=function(){this.setIsSelected(!this.isSelected())},MenuSelection.prototype.generateSelectionContent=function(){var a=this.getSelectedClass();return this.isSelected()||(a=""),[$("<span>&nbsp;</span>").addClass("menu-selection-ind "+a),$("<span></span>").addClass("menu-selection").html(this.getLabel())]},MenuSeparator.prototype=new MenuItem,MenuSeparator.prototype.constructor=MenuItem,MenuSeparator.prototype.generateSelectionContent=function(){return["&nbsp;"]},MenuSeparator.prototype=new MenuItem,MenuSeparator.prototype.constructor=MenuItem,MenuSeparator.prototype.generateSelectionContent=function(){return["&nbsp;"]},ThemeSelector.prototype=new DynamicMenu,ThemeSelector.prototype.constructor=DynamicMenu,ThemeSelector.prototype.themeSelectorClickHandler=function(a){var b=a.target.getAttribute("data-color"),c=_g(a.target.getAttribute("style-id"));if(c){var d="brown|cernerblue|darkgreen|grey|green|lightblue|lightgrey|lowlight|navy|orange|pink|purple|yellow";if(d.indexOf(b)>=0){var e=/brown|cernerblue|darkgreen|grey|green|lightblue|lightgrey|lowlight|navy|orange|pink|purple|yellow/;c.className=c.className.replace(e,"")}Util.Style.acss(c,b);var f=Number(a.target.getAttribute("component-id")),g=MP_Util.GetCompObjById(f);g.setCompColor(b),setTimeout(function(){MP_Core.AppUserPreferenceManager.SaveCompPreferences(f,b,null,!1)},0)}},UtilitiesMenu.prototype=new DynamicMenu,UtilitiesMenu.prototype.constructor=DynamicMenu,UtilitiesMenu.prototype.setIsRootMenu=function(a){if("boolean"==typeof a){if(!a)throw new Error("UtilitiesMenu can only be used as root menus");this.m_rootMenuInd=a}},UtilitiesMenu.prototype.setIsPersistent=function(a){if("boolean"==typeof a){if(!a)throw new Error("UtilitiesMenu can only be used as a persistent menu");this.m_isPersistent=a}},UtilitiesMenu.prototype.setUtilitiesContentCreationFunction=function(a){a&&"function"==typeof a&&(this.settings.utilitiesContentCreationFunction=a)},UtilitiesMenu.prototype.setWidth=function(a){a&&"number"==typeof a&&(this.settings.dimensions.width=a)},UtilitiesMenu.prototype.setMaxHeight=function(a){a&&"number"==typeof a&&(this.settings.dimensions.maxHeight=a)};var MP_DocumentViewerDialog=function(){var a,b,c=i18n.discernabu.document_viewer_modal,d={DOCUMENTS:0,IMAGES:1},e=d.DOCUMENTS,f=[],g=0,h=[],i=null,j=null,k="",l=!1,m="",n="",o="",p="",q="",r="",s="",t="",u="",v="",w="",x="",y="",z="",A="",B="",C="",D="",E="",F="--",G=0,H=0,I=0,J=0,K=0,L=0,M=0;return{initDocumentViewer:function(a,b,d,e,f,h,i,j,m){var n=f?f:"STANDARD";g=d+".0",a+=".0",j+=".0",k=i,l=1===m;var o=[],p=MP_ModalDialog.retrieveModalDialogObject("docModalDialog");p||(p=new ModalDialog("docModalDialog"),p.setTopMarginPercentage(10).setBottomMarginPercentage(5).setIsBodySizeFixed(!1),p.setHeaderCloseFunction(),p.setHeaderTitle("<span class='documentwindow-title'>"+c.DOCUMENT_VIEWER+"</span>"),MP_ModalDialog.addModalDialogObject(p)),p.setBodyDataFunction(function(b){var c=[];c.push("^MINE^",g,a,j,"^"+n+"^"),MP_DocumentViewerDialog.loadWithCBParameters("mp_get_doc_viewer_data",c,MP_DocumentViewerDialog.renderDocViewer)}),MP_ModalDialog.updateModalDialogObject(p),MP_ModalDialog.showModalDialog(p.getId()),o.push("<div class='doc-body-loading'><span class='document-loading'></span></div>"),p.setBodyHTML(o.join("")),$("#docModalDialogbody").css("overflow","hidden"),$("#docModalDialogbody").css("height","100%"),$("#vwpModalDialogdocModalDialog").css("height","100%"),$("#vwpModalDialogdocModalDialog").css("position","absolute")},init:function(){var b="../../mpages/creds";a=MP_DocumentViewerDialog.getXMLHttpRequest(),a.open("GET",b,!1),a.onreadystatechange=MP_DocumentViewerDialog.processRequest,a.send()},getXMLHttpRequest:function(){var a=null;try{window.XMLHttpRequest&&(a=new XMLHttpRequest)}catch(b){try{a=new ActiveXObject("Msxml2.XMLHTTP")}catch(b){a=new ActiveXObject("Microsoft.XMLHTTP")}}return a},processRequest:function(){try{if(4===a.readyState){if(200===a.status){var b=JSON.parse(a.responseText);m=b.un,n=b.pw,o=b.dm,MP_DocumentViewerDialog.locateCmvWebapp()}}else MP_Util.LogScriptCallError(null,this,"document_viewer_modal.js","processRequest")}catch(a){MP_Util.LogScriptCallError(null,this,"document_viewer_modal.js","processRequest")}},webkit:function(){return new RegExp(" AppleWebKit/").test(navigator.userAgent)},ie8BrowserCheck:function(){var a=navigator.userAgent.toLowerCase(),b=function(b){return b.test(a)},c=b(/msie/),d=c&&b(/msie 8/);return d},ie9BrowserCheck:function(){var a=navigator.userAgent.toLowerCase(),b=function(b){return b.test(a)},c=b(/msie/),d=c&&b(/msie 9/);return d},ie10BrowserCheck:function(){var a=navigator.userAgent.toLowerCase(),b=function(b){return b.test(a)},c=b(/msie/),d=c&&b(/msie 10/);return d},locateCmvWebapp:function(){try{var a=i.FULLCANONICALDOMAINNAME;b=MP_DocumentViewerDialog.getXMLHttpRequest();var c="",d=window.location.protocol+"//"+window.location.host+"/mediaviewer/"+a+"/mom";c=MP_DocumentViewerDialog.webkit()===!0?m+"%40"+o:m+"@"+o,b.open("GET",d,!1,c,n),b.send()}catch(a){MP_Util.LogScriptCallError(null,this,"document_viewer_modal.js","locateCmvWebapp")}},loadWithCBParameters:function(a,b,c){try{var d=new MP_Core.ScriptRequest(this);d.setProgramName(a),d.setParameters(b),d.setAsync(!0),MP_Core.XMLCCLRequestCallBack(null,d,c)}catch(a){MP_Util.LogScriptCallError(null,this,"document_viewer_modal.js","loadWithCBParameters")}},buildDocHeaderInformation:function(a){try{var b=a.EVENT_PRSNL_LIST.length,d=null,e=null,f=null,g=new Date,h=new mp_formatter.DateTimeFormatter(MPAGE_LOCALE);p=j.NAME_FULL_FORMATTED?j.NAME_FULL_FORMATTED:"",q=j.PAT_ALIAS?j.PAT_ALIAS:F,r=j.BIRTH_DT_TM?h.formatISO8601(j.BIRTH_DT_TM,mp_formatter.DateTimeFormatter.FULL_DATE_4YEAR):F,s=j.RESULT_TYPE?j.RESULT_TYPE:F,t=j.RESULT_DATE?h.formatISO8601(j.RESULT_DATE,mp_formatter.DateTimeFormatter.FULL_DATE_TIME_4YEAR):F,u=j.RESULT_TITLE?j.RESULT_TITLE:F,u!==F&&(u=u.replace(/'/g,"&#39").replace(/</g,"&#60").replace(/>/g,"&#62"));for(var i=0;i<b;i++)d=a.EVENT_PRSNL_LIST[i],d.ACTION_TYPE_CD===H&&(e=h.formatISO8601(d.ACTION_DT_TM,mp_formatter.DateTimeFormatter.FULL_DATE_TIME_4YEAR)),d.ACTION_TYPE_CD===G&&(f=h.formatISO8601(d.ACTION_DT_TM,mp_formatter.DateTimeFormatter.FULL_DATE_TIME_4YEAR));j.PERFORMED_PRSNLID>0?(v=j.PERFORMED_FULL,e&&(v=v+"&nbsp"+c.ON+"&nbsp"+e)):v=F,w=j.RESULT_STATUS?j.RESULT_STATUS:F,j.VERIFIED_PRSNLID>0?(x=j.VERIFIED_FULL,f&&(x=x+"&nbsp"+c.ON+"&nbsp"+f)):x=F,z=j.ENCNTR_ALIAS?j.ENCNTR_ALIAS:"",A=j.FACILITY_DISP?j.FACILITY_DISP:"",B=j.ENCNTR_TYPE?j.ENCNTR_TYPE:"";var k=j.REG_DT_TM.substr(6,4);k>0?(g.setISO8601(j.REG_DT_TM),C=g.format(dateFormat.masks.mediumdate4yr)):C="";var l=j.DISCH_DT_TM.substr(6,4);l>0?(g.setISO8601(j.DISCH_DT_TM),D=g.format(dateFormat.masks.mediumdate4yr)):D="",j.REG_DATE&&""===j.DISCH_DATE&&(D="-"),""===j.DISCH_DATE&&""===j.REG_DATE&&(D=""),j.DISCH_DATE&&""===j.REG_DATE&&(D=""),y=""===z&&""===A&&""===B&&""===C&&""===D?F:z&&A&&""===B&&""===C&&""===D?z+", "+A+", "+B:z+", "+A+", "+B+", "+C+", "+D,E=""!==j.PROVIDER_NAME?j.PROVIDER_NAME:""}catch(a){MP_Util.LogScriptCallError(null,this,"document_viewer_modal.js","buildHeaderInformation")}},buildDocBodyInformation:function(a){try{var b=i.NOTE_BLOB.length,c=i.BLOBS.length,d="",e="",f="",g="",j=[];if(h=[],a.RESULT_STATUS_CD===J||a.RESULT_STATUS_CD===K)for(var k=0;k<c;k++){e=i.BLOBS[k].EVENT_TITLE_TEXT;var l=i.BLOBS[k].BLOB_HTML;if(a.EVENT_CLASS_CD===M){for(;l.indexOf("text-decoration: line-through")!==-1;)l=l.replace("text-decoration: line-through","display: none");d=l}else d=l;j.push("<br><span class='document_event_title'> "+e+" </span><br><span class='document_blob_text'> "+d+" </span>"),i.NOTE_BLOB[k]&&(g=i.NOTE_BLOB[k].NOTE_TITLE_TEXT,f=i.NOTE_BLOB[k].NOTE_BLOB_HTML,j.push("<br><br><span class='document_event_title'> "+g+" </span><br><span>"+f+"</span>"))}else{for(var m=0;m<c;m++)e=i.BLOBS[m].EVENT_TITLE_TEXT,d=i.BLOBS[m].BLOB_HTML,j.push("<br><span class='document_event_title'> "+e+" </span><br><span class='document_blob_text'> "+d+" </span>");for(var n=0;n<b;n++)g=i.NOTE_BLOB[n].NOTE_TITLE_TEXT,f=i.NOTE_BLOB[n].NOTE_BLOB_HTML,j.push("<br><br><span class='document_event_title'> "+g+" </span><br><span>"+f+"</span>")}j.length&&h.push(j.join(""))}catch(a){MP_Util.LogScriptCallError(null,this,"document_viewer_modal.js","buildDocBodyInformation")}},renderDocViewer:function(a){try{var b=MP_ModalDialog.retrieveModalDialogObject("docModalDialog"),g=c.DOCUMENTS,h=c.IMAGES,k=[],m=0;if(i=a.getResponse(),i&&"F"===a.getStatus())return void MP_Util.LogScriptCallError(null,this,"document_viewer.js","renderDocViewer");f[d.DOCUMENTS]=g,f[d.IMAGES]=h;var n=MP_Util.LoadCodeListJSON(i.CODES),o=i.RB_LIST[0];j=i.PAT_ENCNTR_DETAILS,m=n.length;for(var p=0;p<m;p++)21===n[p].value.codeSet?"VERIFY"===n[p].value.meaning?G=n[p].value.codeValue:"PERFORM"===n[p].value.meaning&&(H=n[p].value.codeValue):8===n[p].value.codeSet?"ALTERED"===n[p].value.meaning?I=n[p].value.codeValue:"MODIFIED"===n[p].value.meaning?J=n[p].value.codeValue:"UNAUTH"===n[p].value.meaning?K=n[p].value.codeValue:"AUTH"===n[p].value.meaning&&(L=n[p].value.codeValue):53===n[p].value.codeSet&&"DOC"===n[p].value.meaning&&(M=n[p].value.codeValue);MP_DocumentViewerDialog.buildDocHeaderInformation(o),MP_DocumentViewerDialog.buildDocBodyInformation(o),l===!1?e=d.DOCUMENTS:l===!0&&(e=d.IMAGES),k.push(MP_DocumentViewerDialog.switchTab(e)),b.setBodyHTML(k.join("")),$("#docModalDialogheader").css("border","0px"),$("#docModalDialogbody").css("border-bottom","1px solid #ABADB3"),$("#docModalDialogbody").css("border-left","1px solid #ABADB3"),$("#docModalDialogbody").css("border-right","1px solid #ABADB3"),l===!0&&MP_DocumentViewerDialog.ImagesTabContent();var q="#tabContainer .reachview-tabs ul li";$(q).eq(e).addClass("reachview-tab-active-header"),$(q).on("click",function(){var a=$(this.parentElement).find(".reachview-tab-active-header"),b=a.attr("id"),c=this.id;a.removeClass("reachview-tab-active-header"),$("#tab-sec-"+b.charAt(b.length-1)).hide(),$(this).addClass("reachview-tab-active-header"),$("#curTabId").show(),"tabHeader_0"===c?MP_DocumentViewerDialog.DocumentsTabContent():"tabHeader_1"===c&&MP_DocumentViewerDialog.ImagesTabContent()})}catch(a){MP_Util.LogJSError(a,this,"document_viewer_modal.js","renderDocumentViewer")}},switchTab:function(a){try{var b,d=[],g=c.SHOW_DETAILS,i=$(window).width();d.push("<div class='document-header'><div class='document-type-date'><dl class='document-note-type'><dt class='document-res-type'>"+c.RESULT_TYPE+"</dt><dd class='document-res-value'>"+s+"</dd></dl><dl class='document-note-type'><dt class='document-res-date'>"+c.RESULT_DATE+"</dt><dd class='document-res-value'>"+t+"</dd></dl></div><div class='document-showdetails-link'><a onclick='javascript:MP_DocumentViewerDialog.ShowDetailsLink(); return false;' href='#'>"+g+"</a></div><div class='document-separator'><dl class='document-note-type'><span class='doc-separator'>&nbsp;</span></dl></div><div class='document-print' id='printId'><dl class='document-note-type'><span class='document-print-icon' onmouseover='javascript:MP_DocumentViewerDialog.PrintMouseOver();' onmouseout='javascript:MP_DocumentViewerDialog.PrintMouseoff();' onclick='javascript:MP_DocumentViewerDialog.PrintDocument();'>&nbsp;</span></dl></div><div class='document-hdr-details'><dl class='document-note-type'><dt class='document-name'>"+c.RESULT_TITLE+"</dt><dd class='document-res-title-value'>"+u+"</dd></dl><dl class='document-note-type'><dt class='document-name'>"+c.PERFORMED_BY+"</dt><dd class='document-res-value'>"+v+"</dd></dl><br><dl class='document-note-type'><dt class='document-name'>"+c.RESULT_STATUS+"</dt><dd class='document-res-value'>"+w+"</dd></dl><dl class='document-note-type'><dt class='document-name'>"+c.VERIFIED_BY+"</dt><dd class='document-res-value'>"+x+"</dd></dl><br><dl class='document-note-type'><dt class='document-name'></dt><dd class='document-res-value'></dd></dl><dl class='document-note-type'><dt class='document-name'>"+c.ENCOUNTER_INFO+"</dt><dd class='document-res-value'>"+y+"</dd></dl></div></div>"),d.push('<div class="doc-main-container" id="tabContainer">'),k?(d.push('<div class="reachview-tabs"><ul>'),b=f.length):b=0,"number"==typeof a?e=a:a=e;var j,l;for(j=0;j<b;j++)l=f[j],d.push('<li id="tabHeader_',j,'"><span class="reachview-tab-left-edge">&nbsp;</span><span class="reachview-tab-text">',l,'</span><span class="reachview-tab-right-edge">&nbsp;</span></li>');return k?(i>1024?MP_DocumentViewerDialog.ie8BrowserCheck()?d.push('</ul></div><hr/><div class="doc-tabs-content-ie8-high-resolution" id="tabContent">'):MP_DocumentViewerDialog.ie9BrowserCheck()?d.push('</ul></div><hr/><div class="doc-tabs-content-ie9-high-resolution" id="tabContent">'):MP_DocumentViewerDialog.ie10BrowserCheck()?d.push('</ul></div><hr/><div class="doc-tabs-content-ie10-high-resolution" id="tabContent">'):MP_DocumentViewerDialog.webkit()?d.push('</ul></div><hr/><div class="doc-tabs-content-sfr-high-resolution" id="tabContent">'):d.push('</ul></div><hr/><div class="doc-tabs-content-oth-high-resolution" id="tabContent">'):i>768&&i<=1024&&(MP_DocumentViewerDialog.ie8BrowserCheck()?d.push('</ul></div><hr/><div class="doc-tabs-content-ie8-low-resolution" id="tabContent">'):MP_DocumentViewerDialog.ie9BrowserCheck()?d.push('</ul></div><hr/><div class="doc-tabs-content-ie9-low-resolution" id="tabContent">'):MP_DocumentViewerDialog.ie10BrowserCheck()?d.push('</ul></div><hr/><div class="doc-tabs-content-ie10-low-resolution" id="tabContent">'):MP_DocumentViewerDialog.webkit()?d.push('</ul></div><hr/><div class="doc-tabs-content-sfr-low-resolution" id="tabContent">'):d.push('</ul></div><hr/><div class="doc-tabs-content-oth-low-resolution" id="tabContent">')),d.push("</br>",h,"</div><iframe id='image-section' class='doc-document-tab' src='"+k+"' width='100%'></iframe>"),d.push("</div>"),MP_DocumentViewerDialog.init()):i>1024?MP_DocumentViewerDialog.ie8BrowserCheck()?d.push('<div class="doc-notabs-content-ie8-high-resolution" id="noTabContent"></br>',h,"</div></div>"):MP_DocumentViewerDialog.ie9BrowserCheck()?d.push('<div class="doc-notabs-content-ie9-high-resolution" id="noTabContent"></br>',h,"</div></div>"):MP_DocumentViewerDialog.ie10BrowserCheck()?d.push('<div class="doc-notabs-content-ie10-high-resolution" id="noTabContent"></br>',h,"</div></div>"):MP_DocumentViewerDialog.webkit()?d.push('<div class="doc-notabs-content-sfr-high-resolution" id="noTabContent"></br>',h,"</div></div>"):d.push('<div class="doc-notabs-content-oth-high-resolution" id="noTabContent"></br>',h,"</div></div>"):i>768&&i<=1024&&(MP_DocumentViewerDialog.ie8BrowserCheck()?d.push('<div class="doc-notabs-content-ie8-low-resolution" id="noTabContent"></br>',h,"</div></div>"):MP_DocumentViewerDialog.ie9BrowserCheck()?d.push('<div class="doc-notabs-content-ie9-low-resolution" id="noTabContent"></br>',h,"</div></div>"):MP_DocumentViewerDialog.ie10BrowserCheck()?d.push('<div class="doc-notabs-content-ie10-low-resolution" id="noTabContent"></br>',h,"</div></div>"):MP_DocumentViewerDialog.webkit()?d.push('<div class="doc-notabs-content-sfr-low-resolution" id="noTabContent"></br>',h,"</div></div>"):d.push('<div class="doc-notabs-content-oth-low-resolution" id="noTabContent"></br>',h,"</div></div>")),d.join("")}catch(a){MP_Util.LogJSError(a,this,"document_viewer_modal.js","switchTab")}},PrintMouseOver:function(){try{$("#docModalDialogbody").find(".document-header").find(".document-print").find(".document-print-icon").removeClass("document-print-icon").addClass("document-print-mouseover")}catch(a){MP_Util.LogJSError(a,this,"document_viewer_modal.js","PrintMouseOver")}},PrintMouseoff:function(){try{$("#docModalDialogbody").find(".document-header").find(".document-print").find(".document-print-mouseover").removeClass("document-print-mouseover").addClass("document-print-icon")}catch(a){MP_Util.LogJSError(a,this,"document_viewer_modal.js","PrintMouseoff")}},PrintDocument:function(){var a="";try{var b=[],d=window.navigator.userAgent,e=d.indexOf("MSIE "),f=d.indexOf("Trident/"),g=d.indexOf("Edge/"),i=$("<style type='text/css'>.document-print-label{display:inline;width:20%;}.document-print-font{font-size:14px;font-family:Arial;}.document-content-font{font-size:16px;font-family:Arial;}.document-print-bold{font-weight:bold;}.document-print-value {margin-right:10px;margin-left:4px;display:-moz-inline-stack;vertical-align:top;display:inline-block;zoom:1;*display:inline;}</style>");b.push("<div id='printDiv' class='document-print-font'>"),b.push("<dl><dd class='document-print-value document-print-bold'>"+p+"</dd>"),b.push("<dd class='document-print-value'>"+c.MRN+"</dd>"),b.push("<dd class='document-print-value'>"+q+"</dd>"),b.push("<dd class='document-print-value'>"+c.DOB+"</dd>"),b.push("<dd class='document-print-value'>"+r+"</dd></dl>"),b.push("<dl><dt class='document-print-label'>"+c.RESULT_TYPE+"</dt><dd class='document-print-value'>"+s+"</dd></dl><dl><dt class='document-print-label'>"+c.RESULT_DATE+"</dt><dd class='document-print-value'>"+t+"</dd></dl><dl><dt class='document-print-label'>"+c.RESULT_STATUS+"</dt><dd class='document-print-value'>"+w+"</dd></dl><dl><dt class='document-print-label'>"+c.RESULT_TITLE+"</dt><dd class='document-print-value'>"+u+"</dd></dl><dl><dt class='document-print-label'>"+c.PERFORMED_BY+"</dt><dd class='document-print-value'>"+v+"</dd></dl><dl><dt class='document-print-label'>"+c.VERIFIED_BY+"</dt><dd class='document-print-value'>"+x+"</dd></dl><dl><dt class='document-print-label'>"+c.ENCOUNTER_INFO+"</dt><dd class='document-print-value'>"+y+"</dd></dl></div></br></br>"),b.push("<div class='document-content-font'>"+h.join("")+"</div>"),b.push("</br></br></br></br><div class='document-print-font'><span>"+c.PRINTED_BY+"</span><span>&nbsp"+E+"</span></div>"),a=document.createElement("iframe"),$(a).css("display","none"),document.body.appendChild(a);var j=a.contentWindow,k=j?j.document:null;k&&(k.write(b.join("")),k.close(),$(a).show().contents().find("head").append(i),e!==-1||f!==-1||g!==-1?k.execCommand("print",!1,null):(j.focus(),j.print()),j.location.reload(),j.close())}catch(b){throw $(a).length&&$(a).remove(),MP_Util.LogJSError(b,null,"document_viewer_modal.js","PrintDocument"),b}finally{$(a).length&&$(a).remove()}},DocumentsTabContent:function(){try{var a=null;a=MP_ModalDialog.retrieveModalDialogObject("docModalDialog");a.getBodyElementId();$("#docModalDialogbody").find("#tabContent").show(),$("#image-section").removeClass("doc-image-tab"),$("#image-section").addClass("doc-document-tab")}catch(a){MP_Util.LogJSError(a,null,"document_viewer_modal.js","DocumentsTabContent")}},ImagesTabContent:function(){try{var a=null;a=MP_ModalDialog.retrieveModalDialogObject("docModalDialog");a.getBodyElementId();$("#docModalDialogbody").find("#tabContent").hide(),$("#image-section").removeClass("doc-document-tab"),$("#image-section").addClass("doc-image-tab")}catch(a){MP_Util.LogJSError(a,null,"document_viewer_modal.js","ImagesTabContent")}},ShowDetailsLink:function(){try{var a=null;a=MP_ModalDialog.retrieveModalDialogObject("docModalDialog");var b=(a.getBodyElementId(),$(window).width()),d=$("#docModalDialogbody");d.find(".document-showdetails-link").children("a").text()===""+c.SHOW_DETAILS?(d.find(".document-showdetails-link").children("a").text(""+c.HIDE_DETAILS),d.find(".document-header").children("div").removeClass("document-hdr-details").addClass("document-hdr-show"),b>1024?MP_DocumentViewerDialog.ie8BrowserCheck()?($("#tabContent").css("height","53%"),$("#noTabContent").css("height","395px"),$("#image-section").css("height","385px")):MP_DocumentViewerDialog.ie9BrowserCheck()?($("#tabContent").css("height","445px"),$("#noTabContent").css("height","470px"),$("#image-section").css("height","445px")):MP_DocumentViewerDialog.ie10BrowserCheck()?($("#tabContent").css("height","480px"),$("#noTabContent").css("height","515px"),$("#image-section").css("height","466px")):MP_DocumentViewerDialog.webkit()?($("#tabContent").css("height","455px"),$("#noTabContent").css("height","480px"),$("#image-section").css("height","487px")):($("#tabContent").css("height","71%"),$("#noTabContent").css("height","400px"),$("#image-section").css("height","400px")):b>768&&b<=1024&&(MP_DocumentViewerDialog.ie8BrowserCheck()?($("#tabContent").css("height","43%"),$("#noTabContent").css("height","230px"),$("#image-section").css("height","230px")):MP_DocumentViewerDialog.ie9BrowserCheck()?($("#tabContent").css("height","310px"),$("#noTabContent").css("height","350px"),$("#image-section").css("height","350px")):MP_DocumentViewerDialog.ie10BrowserCheck()?($("#tabContent").css("height","350px"),$("#noTabContent").css("height","385px"),$("#image-section").css("height","385px")):MP_DocumentViewerDialog.webkit()?($("#tabContent").css("height","310px"),$("#noTabContent").css("height","360px"),$("#image-section").css("height","360px")):($("#tabContent").css("height","62%"),$("#noTabContent").css("height","370px"),$("#image-section").css("height","370px")))):(d.find(".document-showdetails-link").children("a").text(""+c.SHOW_DETAILS),d.find(".document-header").children("div").removeClass("document-hdr-show").addClass("document-hdr-details"),b>1024?MP_DocumentViewerDialog.ie8BrowserCheck()?($("#tabContent").css("height","65%"),$("#noTabContent").css("height","480px"),$("#image-section").css("height","480px")):MP_DocumentViewerDialog.ie9BrowserCheck()?($("#tabContent").css("height","530px"),$("#noTabContent").css("height","560px"),$("#image-section").css("height","530px")):MP_DocumentViewerDialog.ie10BrowserCheck()?($("#tabContent").css("height","545px"),$("#noTabContent").css("height","580px"),$("#image-section").css("height","532px")):MP_DocumentViewerDialog.webkit()?($("#tabContent").css("height","520px"),$("#noTabContent").css("height","550px"),$("#image-section").css("height","550px")):($("#tabContent").css("height","82%"),$("#noTabContent").css("height","460px"),$("#image-section").css("height","460px")):b>768&&b<=1024&&(MP_DocumentViewerDialog.ie8BrowserCheck()?($("#tabContent").css("height","61%"),$("#noTabContent").css("height","360px"),$("#image-section").css("height","360px")):MP_DocumentViewerDialog.ie9BrowserCheck()?($("#tabContent").css("height","425px"),$("#noTabContent").css("height","460px"),$("#image-section").css("height","460px")):MP_DocumentViewerDialog.ie10BrowserCheck()?($("#tabContent").css("height","435px"),$("#noTabContent").css("height","470px"),$("#image-section").css("height","454px")):MP_DocumentViewerDialog.webkit()?($("#tabContent").css("height","410px"),$("#noTabContent").css("height","440px"),$("#image-section").css("height","448px")):($("#tabContent").css("height","80%"),$("#noTabContent").css("height","450px"),$("#image-section").css("height","452px"))))}catch(a){MP_Util.LogJSError(a,null,"document_viewer_modal.js","ShowDetailsLink")}}}}();MD_microViewerDialog=function(){function a(){this.m_description="",this.m_footNoteInd=!1,this.m_footNoteText=""}var b=i18n.discernabu.micro_viewer_modal,c=null,d=!1,e=!1,f=!1,g=!1,h=null,i=[];return a.prototype.getAntiDescription=function(){return this.m_description},a.prototype.setAntiDescription=function(a){this.m_description=a},a.prototype.getFootNoteInd=function(){return this.m_footNoteInd},a.prototype.setFootNoteInd=function(a){this.m_footNoteInd=a},a.prototype.getFootNoteText=function(){return this.m_footNoteText},a.prototype.setFootNoteText=function(a){this.m_footNoteText=a},{initMicroViewer:function(a,c){var d=MP_ModalDialog.retrieveModalDialogObject("microViewer");if(!d){d=new ModalDialog("microViewer");var e=new ModalButton("micViewerCloseBtn");e.setText(b.CLOSE),e.setFocusInd(!0),d.setTopMarginPercentage(10).setRightMarginPercentage(15).setBottomMarginPercentage(15).setLeftMarginPercentage(15).setIsBodySizeFixed(!1),d.setHeaderTitle(b.MIC_RESULT_DETAILS),d.addFooterButton(e),MP_ModalDialog.addModalDialogObject(d)}d.setBodyDataFunction(function(b){MD_microViewerDialog.attachListeners();var c=[];c.push("^MINE^",a+".0",0,1,1),$("#microViewerbody").addClass("micview-loading"),$("#microViewerbody").html("<div class = 'micview-jj'></div>"),MD_microViewerDialog.loadWithCBParameters("mp_get_result_viewer_data",c,MD_microViewerDialog.renderMicroViewer)}),MP_ModalDialog.updateModalDialogObject(d),MP_ModalDialog.showModalDialog("microViewer")},loadWithCBParameters:function(a,b,c){var d=new MP_Core.ScriptRequest(this,"");d.setProgramName(a),d.setParameters(b),d.setAsync(!0),MP_Core.XMLCCLRequestCallBack(null,d,c)},alertError:function(a,b,c){var d=MP_Util.generateModalDialogBody("micViewerFailureAlert","error",a,""),e=d.getFooterButton("modalOkBtn");e||(e=new ModalButton("modalOkBtn"),e.setText(c),e.setFocusInd(!0).setOnClickFunction(function(){MP_ModalDialog.closeModalDialog("microViewer")}),d.addFooterButton(e),d.setShowCloseIcon(!1)),d.setHeaderTitle(b),d.setFooterButtonText("modalOkBtn",c),MP_ModalDialog.updateModalDialogObject(d),MP_ModalDialog.showModalDialog("micViewerFailureAlert")},alertMicFootNoteWindow:function(a){var c=MP_Util.generateModalDialogBody("micMicFootNoteAlert","",a,""),d=c.getFooterButton("modalCloseBtn");d||(d=new ModalButton("modalCloseBtn"),d.setText(b.CLOSE),d.setFocusInd(!0).setOnClickFunction(function(){}),c.addFooterButton(d)),c.setHeaderTitle(b.MIC_FOOTNOTE),c.setFooterButtonText("modalCloseBtn",b.CLOSE),MP_ModalDialog.updateModalDialogObject(c),MP_ModalDialog.showModalDialog("micMicFootNoteAlert")},buildEventDetailSectionHTML:function(a){var b=[];return b.push("<div class='micview-detail' id='micViewDetail'>"),b.push("<div class='micview-controls' id='micViewControls'>"),b.push(MD_microViewerDialog.buildTabSectionHTML()),b.push("</div><div class='micview-tab-body ' id='micViewBody'>"),b.push("<div class='micview-body-container' id='micViewTabBodyId'>"),f&&b.push(MD_microViewerDialog.buildMicroRepotsTabHTML(a)),g&&b.push(MD_microViewerDialog.buildSuscepTabHTML(a)),d&&b.push(MD_microViewerDialog.buildSpecimenTabHTML(a)),e&&b.push(MD_microViewerDialog.buildCommentsTabHTML(a)),b.push(MD_microViewerDialog.buildActionListTabHTML(a)),b.push("</div></div></div>"),b.join("")},buildTabSectionHTML:function(){var a=[],c="<span class = 'micview-tab-active-left'></span><span class = 'micview-tab-active-center'>",h="</span><span class = 'micview-tab-active-right'></span>",i=" micview-tab-active",j="micview-tab-active-label",k=" hidden";return a.push("<span class = 'micview-tab-bg-left micview-tab-container'></span>"),f&&(a.push("<div  class='micview-tab-container",i,"' id='micViewTab1' tabtext = '",b.MIC_REPORT,"'>",c,"<div class='",j,"'>",b.MIC_REPORT,"</div>",h,"</div><span id = 'rvDetSepId' class='micview-tab-sep",k,"'></span>"),c="",h="",i=" micview-tab-inactive",j="micview-tab-inactive-label",k=""),g&&(a.push("<div  class='micview-tab-container",i,"'  id='micViewTab2' tabtext = '",b.SUSCEPTABILITIES,"'>",c,"<div class='",j,"'>",b.SUSCEPTABILITIES,"</div>",h,"</div><span id = 'rvSuscepSepId' class='micview-tab-sep",k,"'></span>"),c="",h="",i=" micview-tab-inactive",j="micview-tab-inactive-label",k=""),d&&(a.push("<div  class='micview-tab-container",i,"' id='micViewTab3' tabtext = '",b.SPECIMEN,"'>",c,"<div class='",j,"'>",b.SPECIMEN,"</div>",h,"</div><span id = 'rvSpecimenSepId' class='micview-tab-sep",k,"'></span>"),c="",h="",i=" micview-tab-inactive",j="micview-tab-inactive-label",k=""),e&&a.push("<div  class='micview-tab-container",i,"' id='micViewTab5' tabtext = '",b.COMMENTS,"'>",c,"<div class='",j,"'>",b.COMMENTS,"</div>",h,"</div><span id = 'rvCommentsSepId' class='micview-tab-sep",k,"'></span>"),a.push("<div  class='micview-tab-container",i,"' id='micViewTab4' tabtext = '",b.ACTION_LIST,"'>",c,"<div class='",j,"'>",b.ACTION_LIST,"</div>",h,"</div><span id = 'rvActionSepId' class='micview-tab-sep",k,"'></span>"),
a.join("")},buildMicroRepotsTabHTML:function(a){var b=[],c="",d="/Date(0000-00-00T00:00:00.000+00:00)/",e=null;b.push("<div class ='micview-comments-info' id = 'rvMicRepoInfoId'>"),micRptListLen=a.CHILD_EVENT_LIST.length;for(var f=0;f<micRptListLen;f++)e=a.CHILD_EVENT_LIST[f],e.VERIFIED_DT_TM!==d&&(c=h.formatISO8601(e.VERIFIED_DT_TM,mp_formatter.DateTimeFormatter.FULL_DATE_TIME_4YEAR)),b.push("<div class = 'micview-comment-text1'>",e.EVENT_CD_DISP," - ",c," - </div>"),b.push("<div class = 'micview-comment-pad'>",e.BLOB_RESULT[0].BLOB[0].BLOB_TEXT.replace("<","&#60;").replace("/","&#47;").replace(">","&#62;"),"</div>");return b.push("</div>"),b.join("")},buildSuscepTabHTML:function(b){var c=[],d=null,e=null,g=0,h=0,i=null,j=0,k=1,l=[],m=0,n=[],o="ABCDEFGHIJKLMNOPQRSTUVWXYZ",p=f?" hidden":"";c.push("<div class ='micview-comments-info",p,"' id = 'rvSuscepInfoId'>"),c.push("<div class = 'micview-table-div'><table class='micview-suscep-table'><tr><th></th>"),g=b.MICROBIOLOGY_LIST.length,l=new Array(g),n=new Array(g);for(var q=0;q<g;q++){d=b.MICROBIOLOGY_LIST[q],j=d.SUSCEPTIBILITY_LIST.length;for(var r=[],s=[],t=[],u=0;u<j;u++){e=d.SUSCEPTIBILITY_LIST[u];var v=e.DETAIL_SUSCEPTIBILITY_CD_DISP,w=e.ANTIBIOTIC_CD_DESC;if(r.indexOf(v)===-1&&r.push(v),s.indexOf(w)===-1){var x=new a;x.setAntiDescription(w),h=b.SUSCEP_FOOTNOTE_R_LIST.length;for(var y=0;y<h;y++){i=b.SUSCEP_FOOTNOTE_R_LIST[y];for(var z=i.SUSCEP_FOOTNOTE.length,A=0;A<z;A++){var B=i.SUSCEP_FOOTNOTE[A];i.SUSCEP_SEQ_NBR===e.SUSCEP_SEQ_NBR&&(x=new a,x.setFootNoteInd(!0),x.setAntiDescription(w),x.setFootNoteText(B.LONG_TEXT))}}s.push(w),t.push(x)}}l[q]=r,n[q]=t,l[q].length>m&&(m=l[q].length)}for(suscepColIdx=0;suscepColIdx<m+1;suscepColIdx++)c.push("<th>",o.charAt(suscepColIdx),"</th>");for(c.push("</tr>"),q=0;q<g;q++){d=b.MICROBIOLOGY_LIST[q];var C=1===d.ORGANISM_OCCURRENCE_NBR?d.ORGANISM_CD_DESC:d.ORGANISM_CD_DESC+" #"+d.ORGANISM_OCCURRENCE_NBR;c.push("<tr><th class = 'micview-suscep-firstcol'>",k++,"</th><td class = 'micview-suscep-section'>",C,"</td>");for(var D=0;D<l[q].length;D++)c.push("<td  class = 'micview-suscep-section'></td>"),l[q].length!==m&&c.push("<td class = 'micview-suscep-cell'></td>");for(c.push("</tr>"),c.push("<tr><th class = 'micview-suscep-firstcol'>",k++,"</th><td class = 'micview-suscep-subsection'></td>"),D=0;D<l[q].length;D++)c.push("<td  class = 'micview-suscep-subsection'>",l[q][D],"</td>"),l[q].length!==m&&c.push("<td class = 'micview-suscep-cell'></td>");c.push("</tr>"),j=d.SUSCEPTIBILITY_LIST.length;for(var E=0;E<n[q].length;E++){for(var F=[],G=0;G<l[q].length;G++){var H=!1;for(u=0;u<j;u++)if(e=d.SUSCEPTIBILITY_LIST[u],n[q][E].getAntiDescription()===e.ANTIBIOTIC_CD_DESC&&l[q][G]===e.DETAIL_SUSCEPTIBILITY_CD_DISP){F.push("<td class = 'micview-suscep-cell'>",e.RESULT_CD_DISP?e.RESULT_CD_DISP:e.RESULT_NUMERIC_VALUE,"</td>"),H=!0;break}H||F.push("<td class = 'micview-suscep-cell'></td>")}var I="'",J=n[q][E].getFootNoteInd(),K=J?n[q][E].getAntiDescription()+"*":n[q][E].getAntiDescription(),L='"'+n[q][E].getFootNoteText()+'"',M='"'+C+'"',N='"'+n[q][E].getAntiDescription()+'"';J&&(I=" micview-footnote' onclick = 'MD_microViewerDialog.buildFootNoteHTML("+M+","+N+","+L+")'"),l[q].length!==m&&F.push("<td  class = 'micview-suscep-cell'></td>"),c.push("<tr><th class = 'micview-suscep-firstcol'>",k++,"</th><td class = 'micview-suscep-cell'",I,">",K,"</td>",F.join(""),"</tr>")}if(q!==g-1){for(c.push("<tr><th class = 'micview-suscep-firstcol'>",k++,"</th>"),D=0;D<=m;D++)c.push("<td class = 'micview-suscep-cell'></td>");c.push("</tr>")}}return c.push("</table></div></div>"),c.join("")},buildActionListTabHTML:function(a){var c=[],d=0,e="",f="",g=null,j="--",k=null,l="",m="",n=null,o="",p=null,q="/Date(0000-00-00T00:00:00.000+00:00)/";c.push("<div class = 'micview-actionlist-info hidden' id = 'rvActionListInfoId'><div class = 'micview-table-div'><table class='micview-actionlist-table'><tr><th>",b.ACTION,"</th><th>",b.PERFORMED_BY,"</th><th>",b.PERFORMED_DATE,"</th><th>",b.ACTION_STATUS,"</th><th>",b.COMMENT,"</th><th>",b.PROXY_PERSONNEL,"</th><th>",b.REQUESTED_BY,"</th><th>",b.REQUESTED_DATE,"</th><th>",b.REQUEST_COMMENT,"</th></tr>"),d=a.EVENT_PRSNL_LIST.length;for(var r=0;r<d;r++)e="",f="",g=a.EVENT_PRSNL_LIST[r],g.ACTION_DT_TM!==q&&(e=h.formatISO8601(g.ACTION_DT_TM,mp_formatter.DateTimeFormatter.FULL_DATE_TIME_4YEAR)),g.REQUEST_DT_TM!==q&&(f=h.formatISO8601(g.REQUEST_DT_TM,mp_formatter.DateTimeFormatter.FULL_DATE_TIME_4YEAR)),k=MP_Util.GetValueFromArray(g.ACTION_PRSNL_ID,i),l=null===k?"":k.fullName,n=MP_Util.GetValueFromArray(g.REQUEST_PRSNL_ID,i),m=null===n?"":n.fullName,p=MP_Util.GetValueFromArray(g.PROXY_PRSNL_ID,i),o=null===p?"":p.fullName,c.push("<tr><td>",g.ACTION_TYPE_CD_DISP,"</td><td>",l,"</td><td>",e?e:j,"</td><td>",g.ACTION_STATUS_CD_DISP,"</td><td>",g.ACTION_COMMENT?g.ACTION_COMMENT:j,"</td><td>",o?o:j,"</td><td>",m?m:j,"</td><td>",f?f:j,"</td><td>",g.REQUEST_COMMENT?g.REQUEST_COMMENT:j,"</td></tr>");return c.push("</table></div></div>"),c.join("")},buildSpecimenTabHTML:function(a){var c=[],d=null,e="",i=" --",j=f||g?" hidden":"";return d=a.SPECIMEN_COLL[0],e=h.formatISO8601(d.COLLECT_DT_TM,mp_formatter.DateTimeFormatter.FULL_DATE_TIME_4YEAR),c.push("<div class ='micview-specimen-info",j,"' id = 'rvSpecimenInfoId'><div class = 'micview-tt'><span><h2 class='micview-resval'><span class = 'micview-resname'>",a.EVENT_CD_DISP,"</span><span><span class='micview-pad","'><span class='res-ind'></span>",a.RESULT_VAL,"</span></span></h2></span></div>"),c.push("<dl class = 'micview-event-info'><dd class = 'micview-event-hd'>",b.SOURCE_TYPE,":</dd><dd class = 'micview-event-data'>",d.SOURCE_TYPE_CD_DISP?d.SOURCE_TYPE_CD_DISP:i,"</dd></dl>"),c.push("<dl class = 'micview-event-info'><dd class = 'micview-event-hd'>",b.COLLECTED_ON,":</dd><dd class = 'micview-event-data'>",e?e:i,"</dd></dl>"),c.push("<dl class = 'micview-event-info'><dd class = 'micview-event-hd'>",b.BODY_SITE,":</dd><dd class = 'micview-event-data'>",d.BODY_SITE_CD_DISP?d.BODY_SITE_CD_DISP:i,"</dd></dl>"),c.push("</div>"),c.join("")},buildCommentsTabHTML:function(a){var c=[],d=null,e=null,f="";c.push("<div class ='micview-comments-info hidden' id = 'rvCommentsInfoId'>"),noteListLen=a.EVENT_NOTE_LIST.length;for(var g=0;g<noteListLen;g++)d=a.EVENT_NOTE_LIST[g],e=MP_Util.GetValueFromArray(d.NOTE_PRSNL_ID,i),f=null===e?"":e.fullName,c.push("<div class = 'micview-comment-hd-text'>",g+1,".) "+d.NOTE_TYPE_CD_DISP," ",b.BY," ",f," ",b.ON," ",h.formatISO8601(d.NOTE_DT_TM,mp_formatter.DateTimeFormatter.FULL_DATE_TIME_4YEAR),"</div>"),c.push("<div class = 'micview-comment-text'>",d.LONG_BLOB_TXT,"</div>");return c.push("</div>"),c.join("")},renderMicroViewer:function(a){var j=[],k=MP_ModalDialog.retrieveModalDialogObject("microViewer"),l=k.getBodyElementId();if(h=new mp_formatter.DateTimeFormatter(MPAGE_LOCALE),c=a.getResponse(),c&&"F"===a.getStatus())return MP_Util.LogScriptCallError(null,this,"micro_viewer.js","renderMicroViewer"),void MD_microViewerDialog.alertError(b.ERROR_RETRIEVE,b.ERROR_TITLE,b.OK);if(i=MP_Util.LoadPersonelListJSON(c.PRSNL),d=!1,e=!1,g=!1,f=!1,c.RB_LIST[0].SPECIMEN_COLL.length&&(d=!0),c.RB_LIST[0].EVENT_NOTE_LIST.length&&(e=!0),c.RB_LIST[0].CHILD_EVENT_LIST.length&&(f=!0),c.RB_LIST[0].MICROBIOLOGY_LIST.length)for(var m=0;m<c.RB_LIST[0].MICROBIOLOGY_LIST.length;m++){var n=c.RB_LIST[0].MICROBIOLOGY_LIST[m],o=n.SUSCEPTIBILITY_LIST.length;o&&(g=!0)}j.push("<div class='micview-container'>"),j.push("<div class = 'micview-tt'><span><h2 class='micview-resval'><span class = 'micview-resname'>",c.RB_LIST[0].EVENT_CD_DISP," - ",b.ACCESSION_NUMBER,":</span><span><span class='micview-pad","'>",c.RB_LIST[0].ACCESSION_NBR,"</span></span></h2></span></div>"),j.push(MD_microViewerDialog.buildEventDetailSectionHTML(c.RB_LIST[0])),j.push("</div>"),$("#microViewerbody").removeClass("micview-loading"),$("#"+l).html(j.join(""))},buildFootNoteHTML:function(a,b,c){var d="";d="<div><span class = 'micview-resname'>"+a+"<span><span class = 'micview-footnote-txt'> - "+b+"</span></div><br><div class = 'micview-footnote-div'>"+c+"</div>",MD_microViewerDialog.alertMicFootNoteWindow(d)},onTabChange:function(a){var b=$(a).parent().find(".micview-tab-active");if(b.length){if($(b).attr("id")===$(a).attr("id"))return;$(b).empty(),$(b).html("<div class='micview-tab-inactive-label'>"+$(b).attr("tabText")+"</div>"),b.removeClass("micview-tab-active"),b.addClass("micview-tab-inactive"),$(b).next().removeClass("hidden"),$(b).prev().removeClass("hidden")}$(a).removeClass("micview-tab-inactive"),$(a).next().addClass("hidden"),$(a).prev().addClass("hidden"),$(a).addClass("micview-tab-active"),$(a).html("<span class = 'micview-tab-active-left'></span><span class = 'micview-tab-active-center'><span class='micview-tab-active-label'>"+$(a).attr("tabText")+"</span></span><span class = 'micview-tab-active-right'></span>"),$(a).removeClass("micview-tab-inactive"),$(a).addClass("micview-tab-active")},attachListeners:function(){$(document).on("click","#micViewTab1",function(){MD_microViewerDialog.onTabChange($(this)),$("#rvActionListInfoId").addClass("hidden"),$("#rvCommentsInfoId").addClass("hidden"),$("#rvSpecimenInfoId").addClass("hidden"),$("#rvMicRepoInfoId").removeClass("hidden"),$("#rvSuscepInfoId").addClass("hidden")}),$(document).on("click","#micViewTab2",function(){MD_microViewerDialog.onTabChange($(this)),$("#rvDetailsInfoId").addClass("hidden"),$("#rvActionListInfoId").addClass("hidden"),$("#rvCommentsInfoId").addClass("hidden"),$("#rvSpecimenInfoId").addClass("hidden"),$("#rvMicRepoInfoId").addClass("hidden"),$("#rvSuscepInfoId").removeClass("hidden")}),$(document).on("click","#micViewTab3",function(){MD_microViewerDialog.onTabChange($(this)),$("#rvDetailsInfoId").addClass("hidden"),$("#rvActionListInfoId").addClass("hidden"),$("#rvCommentsInfoId").addClass("hidden"),$("#rvSpecimenInfoId").removeClass("hidden"),$("#rvMicRepoInfoId").addClass("hidden"),$("#rvSuscepInfoId").addClass("hidden")}),$(document).on("click","#micViewTab4",function(){MD_microViewerDialog.onTabChange($(this)),$("#rvDetailsInfoId").addClass("hidden"),$("#rvActionListInfoId").removeClass("hidden"),$("#rvCommentsInfoId").addClass("hidden"),$("#rvSpecimenInfoId").addClass("hidden"),$("#rvMicRepoInfoId").addClass("hidden"),$("#rvSuscepInfoId").addClass("hidden")}),$(document).on("click","#micViewTab5",function(){MD_microViewerDialog.onTabChange($(this)),$("#rvDetailsInfoId").addClass("hidden"),$("#rvActionListInfoId").addClass("hidden"),$("#rvCommentsInfoId").removeClass("hidden"),$("#rvSpecimenInfoId").addClass("hidden"),$("#rvMicRepoInfoId").addClass("hidden"),$("#rvSuscepInfoId").addClass("hidden")})}}}();var MP_PathologyViewerDialog=function(){var a,b,c=i18n.discernabu.pathology_viewer_modal,d=null,e={REPORT:0,IMAGES:1,ACTION_LIST:2,COMMENTS:3},f=e.REPORT,g="",h=!1,i=[],j="",k="",l="",m=0,n=null,o=[],p="",q="",r="",s="",t="",u="",v="",w="",x="",y="",z="",A="",B="",C=[],D="";return{initPathologyViewer:function(a,b,d){var e=d?d:"STANDARD",f=[],g=CERN_Platform.getCriterion().CRITERION.PPR_CD+".0",h=CERN_Platform.getCriterion().CRITERION.PRSNL_ID+".0";m=b+".0",a+=".0";var i=MP_ModalDialog.retrieveModalDialogObject("pathModalDialog");i||(i=new ModalDialog("pathModalDialog"),i.setTopMarginPercentage(10).setBottomMarginPercentage(5).setIsBodySizeFixed(!1),i.setHeaderCloseFunction(),i.setHeaderTitle("<span class='visitswindow-title'>"+c.PATHOLOGY_TITLE+"</span>"),MP_ModalDialog.addModalDialogObject(i)),i.setBodyDataFunction(function(b){var c=[];c.push("^MINE^",m,a,"^"+e+"^",g,h),MP_PathologyViewerDialog.loadWithCBParameters("mp_get_path_viewer_data",c,MP_PathologyViewerDialog.renderPathViewer)}),MP_ModalDialog.updateModalDialogObject(i),MP_ModalDialog.showModalDialog(i.getId()),f.push("<div class='path-body-loading'><span class='path-loading'></span></div>"),i.setBodyHTML(f.join("")),$("#pathModalDialogbody").css("overflow","hidden"),$("#pathModalDialogbody").css("height","100%"),$("#vwpModalDialogpathModalDialog").css("height","100%"),$("#vwpModalDialogpathModalDialog").css("position","absolute")},loadWithCBParameters:function(a,b,c){try{var d=new MP_Core.ScriptRequest(this);d.setProgramName(a),d.setParameters(b),d.setAsync(!0),MP_Core.XMLCCLRequestCallBack(null,d,c)}catch(a){MP_Util.LogScriptCallError(null,this,"pathology_viewer_modal.js","loadWithCBParameters")}},renderPathViewer:function(a){try{var b=[],j=MP_ModalDialog.retrieveModalDialogObject("pathModalDialog"),k=(j.getBodyElementId(),c.ACTION_LIST),l=c.COMMENTS,m=c.IMAGES;if(n=new mp_formatter.DateTimeFormatter(MPAGE_LOCALE),d=a.getResponse(),d&&"F"===a.getStatus())return void MP_Util.LogScriptCallError(null,this,"pathology_viewer_modal.js","renderPathViewer");i[e.REPORT]=d.PAT_ENCNTR_DETAILS.RESULT_TITLE?d.PAT_ENCNTR_DETAILS.RESULT_TITLE:"",i[e.IMAGES]=m,i[e.ACTION_LIST]=k,i[e.COMMENTS]=l,o=MP_Util.LoadPersonelListJSON(d.PRSNL),b.push(MP_PathologyViewerDialog.switchTab(f)),j.setBodyHTML(b.join("")),MP_PathologyViewerDialog.attachListeners(),$("#pathModalDialogheader").css("border","0px"),$("#pathModalDialogbody").css("border-bottom","1px solid #ABADB3"),$("#pathModalDialogbody").css("border-left","1px solid #ABADB3"),$("#pathModalDialogbody").css("border-right","1px solid #ABADB3");var p="#tabContainer .reachview-tabs ul li";$(p).eq(f).addClass("reachview-tab-active-header"),$(p).on("click",function(){var a=$(this.parentElement).find(".reachview-tab-active-header"),b=a.attr("id"),c=this.id;a.removeClass("reachview-tab-active-header"),$("#tab-sec-"+b.charAt(b.length-1)).hide(),$(this).addClass("reachview-tab-active-header"),$("#curTabId").show();var d=$("#pathModalDialogbody");if("pathViewerTab_0"===c?(h=!1,d.find(".path-report-tab").show(),d.find(".path-actionlist-tab").hide(),d.find(".path-comments-tab").hide(),d.find(".path-image-tab").hide(),$("#iframeImageId").css("visibility","hidden")):"pathViewerTab_3"===c&&(h=!1,d.find(".path-comments-tab").show(),d.find("path-comments-info").show(),$("#pathCommentsInfoId").removeClass("hidden"),d.find(".path-report-tab").hide(),d.find(".path-actionlist-tab").hide(),d.find(".path-image-tab").hide(),$("#iframeImageId").css("visibility","hidden")),g)if("pathViewerTab_1"===c){if(h){var e=document.getElementById("iframeImageId");e.src=g;var f=e.src.split("?")[0],i="?",j=e.src.split("?")[1].length,k=e.src.split("?")[1].slice(1,j);e.src=f+i+k}d.find(".path-report-tab").hide(),d.find(".path-comments-tab").hide(),d.find(".path-actionlist-tab").hide(),d.find(".path-image-tab").show(),$("#iframeImageId").css("visibility","visible")}else"pathViewerTab_2"===c&&(h=!1,d.find(".path-actionlist-tab").show(),d.find("path-actionlist-info").show(),$("#pathActionListInfoId").removeClass("hidden"),d.find(".path-report-tab").hide(),d.find(".path-comments-tab").hide(),d.find(".path-image-tab").hide(),$("#iframeImageId").css("visibility","hidden"));else"pathViewerTab_1"===c?(h=!1,d.find(".path-actionlist-tab").show(),d.find("path-actionlist-info").show(),$("#pathActionListInfoId").removeClass("hidden"),d.find(".path-report-tab").hide(),d.find(".path-comments-tab").hide(),d.find(".path-image-tab").hide(),$("#iframeImageId").css("visibility","hidden")):"pathViewerTab_2"===c&&(h=!1,d.find(".path-comments-tab").show(),d.find("path-comments-info").show(),$("#pathCommentsInfoId").removeClass("hidden"),d.find(".path-report-tab").hide(),d.find(".path-actionlist-tab").hide(),d.find(".path-image-tab").hide(),$("#iframeImageId").css("visibility","hidden"))})}catch(a){MP_Util.LogJSError(a,this,"pathology_viewer_modal.js","renderPathologyViewer")}},buildActionListTabHTML:function(a){var b=[],e=0,f="",g="",h=null,i="--",j=null,k="",l=null,m="",s=null,t="";new mp_formatter.DateTimeFormatter(MPAGE_LOCALE);b.push("<div class ='path-actionlist-info hidden' id = 'pathActionListInfoId'><div class = 'path-table-div'><table class='path-actionlist-table'><tr><th>",c.ACTION,"</th><th>",c.ACTION_PERFORMED_BY,"</th><th>",c.PERFORMED_DATE,"</th><th>",c.ACTION_STATUS,"</th><th>",c.COMMENT,"</th><th>",c.PROXY_PERSONNEL,"</th><th>",c.ACTION_REQUESTED_BY,"</th><th>",c.REQUESTED_DATE,"</th><th>",c.REQUEST_COMMENT,"</th></tr>"),e=a.EVENT_PRSNL_LIST.length;for(var u=0;u<e;u++){h=a.EVENT_PRSNL_LIST[u],f="",g="";var v=h.ACTION_DT_TM.substr(6,4),w=h.REQUEST_DT_TM.substr(6,4);v>0&&(f=n.formatISO8601(h.ACTION_DT_TM,mp_formatter.DateTimeFormatter.FULL_DATE_TIME_4YEAR)),w>0&&(g=n.formatISO8601(h.REQUEST_DT_TM,mp_formatter.DateTimeFormatter.FULL_DATE_TIME_4YEAR)),j=MP_Util.GetValueFromArray(h.ACTION_PRSNL_ID,o),k=null===j?"":j.fullName,l=MP_Util.GetValueFromArray(h.REQUEST_PRSNL_ID,o),m=null===l?"":l.fullName,s=MP_Util.GetValueFromArray(h.PROXY_PRSNL_ID,o),t=null===s?"":s.fullName,b.push("<tr><td>",h.ACTION_TYPE_CD_DISP,"</td><td>",k,"</td><td>",f?f:i,"</td><td>",h.ACTION_STATUS_CD_DISP,"</td><td>",h.ACTION_COMMENT?h.ACTION_COMMENT:i,"</td><td>",t?t:i,"</td><td>",m?m:i,"</td><td>",g?g:i,"</td><td>",h.REQUEST_COMMENT?h.REQUEST_COMMENT:i,"</td></tr>"),h.ACTION_TYPE_CD===d.ACTION_TYPE_CDS.ORDER_CD&&(p=k,q=f),h.ACTION_TYPE_CD===d.ACTION_TYPE_CDS.VERIFY_CD&&(r=f)}return b.push("</table></div></div>"),b.join("")},buildCommentsTabHTML:function(a){var b=[],d=null,e=null,f="";if(b.push("<div class ='path-comments-info hidden' id = 'pathCommentsInfoId'>"),noteListLen=a.EVENT_NOTE_LIST.length,noteListLen>0)for(var g=0;g<noteListLen;g++)d=a.EVENT_NOTE_LIST[g],e=MP_Util.GetValueFromArray(d.NOTE_PRSNL_ID,o),f=null===e?"":e.fullName,b.push("<div class = 'path-comment-hd-text'>",g+1,".) "+d.NOTE_TYPE_CD_DISP," ",c.BY," ",f," ",c.ON," ",n.formatISO8601(d.NOTE_DT_TM,mp_formatter.DateTimeFormatter.FULL_DATE_TIME_4YEAR),"</div>"),b.push("<div class = 'path-comment-text'>",d.LONG_BLOB_TXT,"</div>");else b.push("<div class = 'path-nocomments-text'>"+c.NO_COMMENTS+"</div>");return b.join("")},init:function(){var b="../../mpages/creds";a=MP_PathologyViewerDialog.getXMLHttpRequest(),a.open("GET",b,!1),a.onreadystatechange=MP_PathologyViewerDialog.processRequest,a.send()},getXMLHttpRequest:function(){var a=null;try{window.XMLHttpRequest&&(a=new XMLHttpRequest)}catch(b){try{a=new ActiveXObject("Msxml2.XMLHTTP")}catch(b){a=new ActiveXObject("Microsoft.XMLHTTP")}}return a},processRequest:function(){try{if(4===a.readyState){if(200===a.status){var b=JSON.parse(a.responseText);j=b.un,k=b.pw,l=b.dm,MP_PathologyViewerDialog.locateCmvWebapp()}}else MP_Util.LogScriptCallError(null,this,"pathology_viewer_modal.js","processRequest")}catch(a){MP_Util.LogScriptCallError(null,this,"pathology_viewer_modal.js","processRequest")}},webkit:function(){return new RegExp(" AppleWebKit/").test(navigator.userAgent)},locateCmvWebapp:function(){try{var a=d.FULL_CANONICAL_DOMAIN_NAME;b=MP_PathologyViewerDialog.getXMLHttpRequest();var c="",e=window.location.protocol+"//"+window.location.host+"/mediaviewer/"+a+"/mom";c=MP_PathologyViewerDialog.webkit()===!0?j+"%40"+l:j+"@"+l,b.open("GET",e,!1,c,k),b.send()}catch(a){MP_Util.LogScriptCallError(null,this,"pathology_viewer_modal.js","locateCmvWebapp")}},switchTab:function(a){try{var b=[],e=d.RB_LIST[0];e.CHILD_EVENT_LIST.sort(function(a,b){return parseFloat(a.CLINICAL_EVENT_ID)-parseFloat(b.CLINICAL_EVENT_ID)}),d.BLOBS.sort(function(a,b){return parseFloat(a.CLINICAL_EVENT_ID)-parseFloat(b.CLINICAL_EVENT_ID)});var j=(e.CHILD_EVENT_LIST.length,d.BLOBS.length),k=new mp_formatter.DateTimeFormatter(MPAGE_LOCALE),l=[],m="",n="",o="--",E=[],F=[];g=d.PATH_IMAGES.IMAGE_URL?d.PATH_IMAGES.IMAGE_URL:"",h=!0;var G=d.PAT_ENCNTR_DETAILS;if(E=MP_PathologyViewerDialog.buildActionListTabHTML(e),F=MP_PathologyViewerDialog.buildCommentsTabHTML(e),s=G.PAT_ALIAS?G.PAT_ALIAS:o,t=d.CASE_ID?d.CASE_ID:o,u=p?p:o,v=G.RESULT_DATE?k.formatISO8601(G.RESULT_DATE,mp_formatter.DateTimeFormatter.FULL_DATE_TIME_4YEAR):o,w=G.INSTITUTION_DISP?G.INSTITUTION_DISP:o,x=G.RESULT_TITLE?G.RESULT_TITLE:o,z=G.VERIFIED_FULL?G.VERIFIED_FULL:o,A=q?q:o,B=G.RESULT_STATUS?G.RESULT_STATUS:o,y=r?r:o,D=G.PROVIDER_NAME?G.PROVIDER_NAME:"",j>0)for(var H=0;H<j;H++){var I=e.CHILD_EVENT_LIST[H].EVENT_NOTE_LIST.length;if(m=e.CHILD_EVENT_LIST[H].EVENT_TITLE_TEXT,l.push("<br><span class='path-blob-title'>"+m+"</span><br>"),l.push(d.BLOBS[H].BLOB_HTML),I>0)for(var J=0;J<I;J++)n=e.CHILD_EVENT_LIST[H].EVENT_NOTE_LIST[0].LONG_BLOB,l.push("<br><span>"+n+"</span><br>");C=l.join("")}b.push("<div class='path-header'><dl class='path-note-type'><dt class='path-name'>"+c.CASE+"</dt><dd class='path-res-value'>"+t+"</dd></dl><dl class='path-note-type'><dt class='path-name'>"+c.REQUESTED_BY+"</dt><dd class='path-res-value'>"+u+"</dd></dl><dl class='path-note-type'><dt class='path-name'>"+c.COLLECTED+"</dt><dd class='path-res-value'>"+v+"</dd></dl><dl class='path-note-type'><dt class='path-name'>"+c.VERIFIED+"</dt><dd class='path-res-value'>"+y+"</dd><span class='path-print-icon' id='printPathRptId'></span></dl><dl class='path-note-type'><dt class='path-name'>"+c.REPORT+"</dt><dd class='path-res-value'>"+x+"</dd></dl><dl class='path-note-type'><dt class='path-name'>"+c.PERFORMED_BY+"</dt><dd class='path-res-value'>"+z+"</dd></dl><dl class='path-note-type'><dt class='path-name'>"+c.RECEIVED+"</dt><dd class='path-res-value'>"+A+"</dd></dl><dl class='path-note-type'><dt class='path-name'>"+c.LOCATION+"</dt><dd class='path-res-value'>"+w+"</dd></dl><dl class='path-note-type'><dt class='path-name'>"+c.STATUS+"</dt><dd class='path-res-value'>"+B+"</dd></dl></div>"),b.push('<div class="path-tabs-container" id="tabContainer"><div class="reachview-tabs"><ul>');var K;g?K=i.length:(i.splice(1,1),K=i.length),"number"==typeof a?f=a:a=f;var L,M;for(L=0;L<K;L++)M=i[L],b.push('<li id="pathViewerTab_',L,'"><span class="reachview-tab-left-edge">&nbsp;</span><span class="reachview-tab-text">',M,'</span><span class="reachview-tab-right-edge">&nbsp;</span></li>');b.push('</ul></div><hr /><div class="path-tabs-content">'),g?(b.push("<div class='tabs'><ul><li id='tab1'></li><li id='tab2'></li><li id='tab3'></li><li id='tab4'></li></ul></div><div class='path-report-tab' id='tab-sec-1'><dl class='path-smry-data'><dt class='path-res-type'></dt><dd class='path-smry-value'>"+C+"</dd></dl></div><div class='path-image-tab' id='tab-sec-2'><iframe id='iframeImageId' style= 'visibility:hidden;' src='"+g+"' width='100%' height='700'></iframe></div><div class='path-actionlist-tab' id='tab-sec-3'>",E,"</div><div class='path-comments-tab' id='tab-sec-4'>",F,"</div></div>"),b.push("</div>"),b.push("</div></div>"),MP_PathologyViewerDialog.init()):(b.push("<div class='tabs'><ul><li id='tab1'></li><li id='tab3'></li><li id='tab4'></li></ul></div><div class='path-report-tab' id='tab-sec-1'><dl class='path-smry-data'><dt class='path-res-type'></dt><dd class='path-smry-value'>"+C+"</dd></div><div class='path-actionlist-tab' id='tab-sec-3'><span class='path-tab-content'>"+E+"</span></div><div class='path-comments-tab' id='tab-sec-4'><span class='path-tab-content'>"+F+"</span></div>"),b.push("</div>"),b.push("</div></div>"));var N=b.join("");return N}catch(a){MP_Util.LogJSError(a,this,"pathology_viewer_modal.js","switchTab")}},printDocument:function(){var a="";try{var b=[],d=window.navigator.userAgent,e=d.indexOf("MSIE "),f=d.indexOf("Trident/"),g=d.indexOf("Edge/"),h=i18n.discernabu.document_viewer_modal,i=new mp_formatter.DateTimeFormatter(MPAGE_LOCALE),j=CERN_Platform.getCriterion().CRITERION.PERSON_INFO.PERSON_NAME,k=CERN_Platform.getCriterion().CRITERION.PERSON_INFO.DOB;j=j?j:"",k=k?i.formatISO8601(k,mp_formatter.DateTimeFormatter.FULL_DATE_4YEAR):"--";var l=$("<style type='text/css'>.document-print-label{display:inline-block;text-align:right;width:15%;vertical-align:top;}.document-print-font{font-size:14px;font-family:Arial;}.document-content-font{font-size:16px;font-family:Arial;}.document-print-bold{font-weight:bold;}.document-print-value{display:-moz-inline-stack;vertical-align:top;display:inline-block;zoom:1;*display:inline;width:15%;margin-left:4px;text-align:left;}</style>");b.push("<div id='printDiv' class='document-print-font'>"),b.push("<dl><dt class='document-print-label document-print-bold'>"+j+"</dt>"),b.push("<dd class='document-print-value'></dd>"),b.push("<dt class='document-print-label'>"+h.MRN+"</dt>"),b.push("<dd class='document-print-value'>"+s+"</dd>"),b.push("<dt class='document-print-label'>"+h.DOB+"</dt>"),b.push("<dd class='document-print-value'>"+k+"</dd></dl>"),b.push("<dl><dt class='document-print-label'>"+c.CASE+"</dt><dd class='document-print-value'>"+t+"</dd><dt class='document-print-label'>"+c.REQUESTED_BY+"</dt><dd class='document-print-value'>"+u+"</dd><dt class='document-print-label'>"+c.COLLECTED+"</dt><dd class='document-print-value'>"+v+"</dd></dl><dl><dt class='document-print-label'>"+c.REPORT+"</dt><dd class='document-print-value'>"+x+"</dd><dt class='document-print-label'>"+c.PERFORMED_BY+"</dt><dd class='document-print-value'>"+z+"</dd><dt class='document-print-label'>"+c.RECEIVED+"</dt><dd class='document-print-value'>"+A+"</dd></dl><dl><dt class='document-print-label'>"+c.STATUS+"</dt><dd class='document-print-value'>"+B+"</dd><dt class='document-print-label'>"+c.VERIFIED+"</dt><dd class='document-print-value'>"+y+"</dd><dt class='document-print-label'>"+c.LOCATION+"</dt><dd class='document-print-value'>"+w+"</dd></dl></div></br></br>"),b.push("<div class='document-content-font'>"+C+"</div>"),b.push("</br></br></br></br><div class='document-print-font'><span>"+h.PRINTED_BY+"</span><span>&nbsp"+D+"</span></div>"),a=document.createElement("iframe"),$(a).addClass("hidden"),document.body.appendChild(a);var m=a.contentWindow,n=m?m.document:null;n&&(n.write(b.join("")),n.close(),$(a).addClass("document-print-bold"),$(a).show().contents().find("head").append(l),e!==-1||f!==-1||g!==-1?n.execCommand("print",!1,null):(m.focus(),m.print()),m.location.reload(),m.close())}catch(b){throw $(a).length&&$(a).remove(),MP_Util.LogJSError(b,null,"pathology_viewer_modal.js","PrintDocument"),b}finally{$(a).length&&$(a).remove()}},attachListeners:function(){$("#printPathRptId").on("mouseover",function(){$("#printPathRptId").addClass("path-print-mouseover"),$("#printPathRptId").removeClass("path-print-icon")}),$("#printPathRptId").on("mouseout",function(){$("#printPathRptId").addClass("path-print-icon"),$("#printPathRptId").removeClass("path-print-mouseover")}),$("#printPathRptId").on("click",function(){MP_PathologyViewerDialog.printDocument()})}}}(),MD_reachViewerDialog=function(){return{LaunchReachGraphViewer:function(a){try{MD_trendingGraphDialog.initTrendGraph(a)}catch(a){MP_Util.LogJSError(a,null,"reach-viewer-core.js","LaunchReachClinNoteViewer")}},LaunchReachClinNoteViewer:function(a,b,c,d,e,f,g,h,i,j){try{switch(e){case"DOC":MP_DocumentViewerDialog.initDocumentViewer(a,b,c,d,e,f,g,h,i);break;case"EVENT":MD_resultViewerDialog.initResultViewer(c,j);break;case"MICRO":MD_microViewerDialog.initMicroViewer(c,j);break;case"AP":MP_PathologyViewerDialog.initPathologyViewer(a,c,e)}}catch(a){MP_Util.LogJSError(a,null,"reach-viewer-core.js","LaunchReachClinNoteViewer")}},LaunchReachVisitsDetailViewer:function(a,b,c,d,e){try{MP_VisitDetailDialog.initVisitViewer(a,b,c,d,e)}catch(a){MP_Util.LogJSError(a,null,"reach-viewer-core.js","LaunchReachVisitsDetailViewer")}}}}(),MD_resultViewerDialog=function(){var a=i18n.discernabu.result_viewer_modal,b=null,c=!1,d=!1,e=null,f=[];return{initResultViewer:function(b,c){var d=MP_ModalDialog.retrieveModalDialogObject("resultViewer");if(!d){d=new ModalDialog("resultViewer");var e=new ModalButton("resViewerCloseBtn");e.setText(a.CLOSE),e.setFocusInd(!0),d.setTopMarginPercentage(10).setRightMarginPercentage(30).setBottomMarginPercentage(15).setLeftMarginPercentage(30).setIsBodySizeFixed(!1),d.setHeaderTitle(c?c:a.RESULT_DETAILS),d.addFooterButton(e),MP_ModalDialog.addModalDialogObject(d)}d.setHeaderTitle(c?c:a.RESULT_DETAILS),d.setBodyDataFunction(function(a){MD_resultViewerDialog.attachListeners();var c=[];c.push("^MINE^",b+".0",0,1),$("#resultViewerbody").addClass("resview-loading"),$("#resultViewerbody").html("<div class = 'resview-jj'></div>"),MD_resultViewerDialog.loadWithCBParameters("mp_get_result_viewer_data",c,MD_resultViewerDialog.renderResultViewer)}),MP_ModalDialog.updateModalDialogObject(d),MP_ModalDialog.showModalDialog("resultViewer")},loadWithCBParameters:function(a,b,c){var d=new MP_Core.ScriptRequest(this,"");d.setProgramName(a),d.setParameters(b),d.setAsync(!0),MP_Core.XMLCCLRequestCallBack(null,d,c)},alertError:function(a,b,c){var d=MP_Util.generateModalDialogBody("resViewerFailureAlert","error",a,""),e=d.getFooterButton("modalOkBtn");e||(e=new ModalButton("modalOkBtn"),e.setText(c),e.setFocusInd(!0).setOnClickFunction(function(){MP_ModalDialog.closeModalDialog("resultViewer")}),d.addFooterButton(e),d.setShowCloseIcon(!1)),d.setHeaderTitle(b),d.setFooterButtonText("modalOkBtn",c),MP_ModalDialog.updateModalDialogObject(d),MP_ModalDialog.showModalDialog("resViewerFailureAlert")},buildEventHistorySectionHTML:function(){var c=[],d="",f="",g="";c.push("<div class = 'resview-history-label' id = 'resViewHistLblId'>",a.HISTORY,"</div>"),c.push("<div class ='resview-event-hist-info' id = 'resViewHistLblId'><div class = 'resview-hist-table-div'>"),c.push("<table class='resview-actionlist-table'><tr><th>",a.VALUE,"</th><th>",a.VALID_FROM,"</th><th>",a.VALID_UNTIL,"</th></tr>");for(var h=b.EVENT_HIST_LIST.length,i="odd ",j="",k="",l="",m=0;m<h;m++){var n=b.RB_LIST[m];0===m?(j="resview-hist-select resview-wht-text",k="resview-wht-text "):(j="",k=""),i=m%2?"even ":"odd ",d=e.formatISO8601(n.VALID_FROM_DT_TM,mp_formatter.DateTimeFormatter.FULL_DATE_TIME_4YEAR),f=e.formatISO8601(n.VALID_UNTIL_DT_TM,mp_formatter.DateTimeFormatter.FULL_DATE_TIME_4YEAR),0===m&&(f="Current"),l=n.DATE_RESULT.length?e.formatISO8601(n.DATE_RESULT[0].RESULT_DT_TM,mp_formatter.DateTimeFormatter.FULL_DATE_TIME_4YEAR):MD_resultViewerDialog.formatNumber(n.RESULT_VAL),g=MD_resultViewerDialog.GetNormalcyClass(n.NORMALCY_CD_MEAN),c.push("<tr class = 'resview-hist-info ",i,j,"' eventRowIndex = ",m,"><td><span class='",k,g,"'><span class='res-ind'></span>",l,"</span></td><td>",d,"</td><td>",f,"</td>")}return c.push("</table></div></div>"),c.join("")},GetNormalcyClass:function(a){var b="res-normal",c=a;if(c)switch(c){case"NORMAL":b="res-normal";break;case"LOW":b="res-low";break;case"HIGH":b="res-high";break;case"ABNORMAL":b="res-abnormal";break;case"CRITICAL":case"EXTREMEHIGH":case"PANICHIGH":case"EXTREMELOW":case"PANICLOW":case"VABNORMAL":case"POSITIVE":b="res-severe"}return b},formatNumber:function(a){var b=MP_Util.GetNumericFormatter();return mp_formatter._isNumber(a)?b.format(a,"^."+MP_Util.CalculatePrecision(a)):a},buildEventDetailSectionHTML:function(a){var b=[];return b.push("<div class='resview-detail' id='resViewDetail'>"),b.push("<div class='resview-controls' id='resViewControls'>"),b.push(MD_resultViewerDialog.buildTabSectionHTML()),b.push("</div><div class='resview-tab-body ' id='resViewBody'>"),b.push("<div class='resview-body-container' id='resViewTabBodyId'>"),b.push(MD_resultViewerDialog.buildDetailsTabHTML(a)),b.push(MD_resultViewerDialog.buildActionListTabHTML(a)),c&&b.push(MD_resultViewerDialog.buildSpecimenTabHTML(a)),d&&b.push(MD_resultViewerDialog.buildCommentsTabHTML(a)),b.push("</div></div></div>"),b.join("")},buildTabSectionHTML:function(){var b=[];return b.push("<span class = 'resview-tab-container'></span><div  class='resview-tab-container resview-tab-active' id='resViewTab1' tabtext = '",a.DETAILS,"'><span class = 'resview-tab-active-left'></span><span class = 'resview-tab-active-center'><div class='resview-tab-active-label'>",a.DETAILS,"</div></span><span class = 'resview-tab-active-right'></span></div><span id = 'rvDetSepId' class='resview-tab-sep hidden'></span>"),c&&b.push("<div  class='resview-tab-container resview-tab-inactive' id='resViewTab2' tabtext = '",a.SPECIMEN,"'><div class='resview-tab-inactive-label'>",a.SPECIMEN,"</div></div><span id = 'rvSpecimenSepId' class='resview-tab-sep'></span>"),b.push("<div class='resview-tab-container resview-tab-inactive' id='resViewTab3' tabtext = '",a.ACTION_LIST,"'><div class='resview-tab-inactive-label'>",a.ACTION_LIST,"</div></div><span id = 'rvActionSepId' class='resview-tab-sep'></span>"),
d&&b.push("<div  class='resview-tab-container resview-tab-inactive' id='resViewTab4' tabtext = '",a.COMMENTS,"'><div class='resview-tab-inactive-label'>",a.COMMENTS,"</div></div><span id = 'rvCommentsSepId' class='resview-tab-sep'></span>"),b.join("")},buildDetailsTabHTML:function(b){var d=[],f="",g="",h=MD_resultViewerDialog.GetNormalcyClass(b.NORMALCY_CD_MEAN);return f=e.formatISO8601(b.EVENT_END_DT_TM,mp_formatter.DateTimeFormatter.FULL_DATE_TIME_4YEAR),g=b.DATE_RESULT.length?e.formatISO8601(b.DATE_RESULT[0].RESULT_DT_TM,mp_formatter.DateTimeFormatter.FULL_DATE_TIME_4YEAR):this.formatNumber(b.RESULT_VAL),d.push("<div class ='resview-details-info' id = 'rvDetailsInfoId'><div class = 'resview-tt'><span><h2 class='resview-resval'><span class = 'resview-resname'>",b.EVENT_CD_DISP,"</span><span class='resview-pad ",h,"'><span class = 'res-ind'></span>",g," ","</span><span>",b.RESULT_UNITS_CD_DISP?b.RESULT_UNITS_CD_DISP:"","</span></h2></span></div>"),d.push("<dl class = 'resview-event-info'><dd class = 'resview-event-hd'>",a.DATE_TIME,":</dd><dd class = 'resview-event-data'>",f,"</dd><dd class = 'resview-limit-hd'>",a.NORMAL_LOW,":</dd><dd class = 'resview-limit-data'>",b.NORMAL_LOW,"</dd></dl>"),d.push("<dl class = 'resview-event-info'><dd class = 'resview-event-hd'>",a.CONTRIBUTE_SYSTEM,":</dd><dd class = 'resview-event-data'>",b.CONTRIBUTOR_SYSTEM_CD_DISP,"</dd><dd class = 'resview-limit-hd'>",a.NORMAL_HIGH,":</dd><dd class = 'resview-limit-data'>",b.NORMAL_HIGH,"</dd></dl>"),c?(d.push("<dl class = 'resview-event-info'><dd class = 'resview-event-hd'>",a.ACCESSION_NUMBER,":</dd><dd class = 'resview-event-data'>",b.ACCESSION_NBR,"</dd><dd class = 'resview-limit-hd'>",a.CRITICAL_LOW,":</dd><dd class = 'resview-limit-data'>",b.CRITICAL_LOW,"</dd></dl>"),d.push("<dl class = 'resview-event-info'><dd class = 'resview-event-hd'>",a.SERVICE_RESOURCE,":</dd><dd class = 'resview-event-data'>",b.RESOURCE_CD_DISP,"</dd><dd class = 'resview-limit-hd'>",a.CRITICAL_HIGH,":</dd><dd class = 'resview-limit-data'>",b.CRITICAL_HIGH,"</dd></dl>"),d.push("<dl class = 'resview-event-info'><dd class = 'resview-event-hd'>",a.STATUS,":</dd><dd class = 'resview-event-data'>",b.RESULT_STATUS_CD_DISP,"</dd>")):(d.push("<dl class = 'resview-event-info'><dd class = 'resview-event-hd'>",a.STATUS,":</dd><dd class = 'resview-event-data'>",b.RESULT_STATUS_CD_DISP,"</dd><dd class = 'resview-limit-hd'>",a.CRITICAL_LOW,":</dd><dd class = 'resview-limit-data'>",b.CRITICAL_LOW,"</dd></dl>"),d.push("<dl class = 'resview-event-info'><dd class = 'resview-event-hd'></dd><dd class = 'resview-event-data'></dd><dd class = 'resview-limit-hd'>",a.CRITICAL_HIGH,":</dd><dd class = 'resview-limit-data'>",b.CRITICAL_HIGH,"</dd></dl>")),d.push("</div>"),d.join("")},buildActionListTabHTML:function(b){var c=[],d=0,g="",h="",i=null,j="--",k=null,l="",m="",n=null,o="",p=null,q="/Date(0000-00-00T00:00:00.000+00:00)/";c.push("<div class ='resview-actionlist-info hidden' id = 'rvActionListInfoId'><div class = 'resview-table-div'><table class='resview-actionlist-table'><tr><th>",a.ACTION,"</th><th>",a.PERFORMED_BY,"</th><th>",a.PERFORMED_DATE,"</th><th>",a.ACTION_STATUS,"</th><th>",a.COMMENT,"</th><th>",a.PROXY_PERSONNEL,"</th><th>",a.REQUESTED_BY,"</th><th>",a.REQUESTED_DATE,"</th><th>",a.REQUEST_COMMENT,"</th></tr>"),d=b.EVENT_PRSNL_LIST.length;for(var r=0;r<d;r++)g="",h="",i=b.EVENT_PRSNL_LIST[r],i.ACTION_DT_TM!==q&&(g=e.formatISO8601(i.ACTION_DT_TM,mp_formatter.DateTimeFormatter.FULL_DATE_TIME_4YEAR)),i.REQUEST_DT_TM!==q&&(h=e.formatISO8601(i.REQUEST_DT_TM,mp_formatter.DateTimeFormatter.FULL_DATE_TIME_4YEAR)),k=MP_Util.GetValueFromArray(i.ACTION_PRSNL_ID,f),l=null===k?"":k.fullName,n=MP_Util.GetValueFromArray(i.REQUEST_PRSNL_ID,f),m=null===n?"":n.fullName,p=MP_Util.GetValueFromArray(i.PROXY_PRSNL_ID,f),o=null===p?"":p.fullName,c.push("<tr><td>",i.ACTION_TYPE_CD_DISP,"</td><td>",l,"</td><td>",g?g:j,"</td><td>",i.ACTION_STATUS_CD_DISP,"</td><td>",i.ACTION_COMMENT?i.ACTION_COMMENT:j,"</td><td>",o?o:j,"</td><td>",m?m:j,"</td><td>",h?h:j,"</td><td>",i.REQUEST_COMMENT?i.REQUEST_COMMENT:j,"</td></tr>");return c.push("</table></div></div>"),c.join("")},buildSpecimenTabHTML:function(b){var c=[],d=null,f="",g=MD_resultViewerDialog.GetNormalcyClass(b.NORMALCY_CD_MEAN);return d=b.SPECIMEN_COLL[0],f=e.formatISO8601(d.COLLECT_DT_TM,mp_formatter.DateTimeFormatter.FULL_DATE_TIME_4YEAR),c.push("<div class ='resview-specimen-info hidden' id = 'rvSpecimenInfoId'><div class = 'resview-tt'><span><h2 class='resview-resval'><span class = 'resview-resname'>",b.EVENT_CD_DISP,"</span><span><span class='resview-pad ",g,"'><span class='res-ind'></span>",b.RESULT_VAL,"</span></span></h2></span></div>"),c.push("<dl class = 'resview-event-info'><dd class = 'resview-event-hd'>",a.SOURCE_TYPE,":</dd><dd class = 'resview-event-data'>",d.SOURCE_TYPE_CD_DISP,"</dd></dl>"),c.push("<dl class = 'resview-event-info'><dd class = 'resview-event-hd'>",a.COLLECTED_ON,":</dd><dd class = 'resview-event-data'>",f,"</dd></dl>"),c.push("</div>"),c.join("")},buildCommentsTabHTML:function(b){var c=[],d=null,g=null,h="";c.push("<div class ='resview-comments-info hidden' id = 'rvCommentsInfoId'>"),noteListLen=b.EVENT_NOTE_LIST.length;for(var i=0;i<noteListLen;i++)d=b.EVENT_NOTE_LIST[i],g=MP_Util.GetValueFromArray(d.NOTE_PRSNL_ID,f),h=null===g?"":g.fullName,c.push("<div class = 'resview-comment-hd-text'>",i+1,".) "+d.NOTE_TYPE_CD_DISP," ",a.BY," ",h," ",a.ON," ",e.formatISO8601(d.NOTE_DT_TM,mp_formatter.DateTimeFormatter.FULL_DATE_TIME_4YEAR),"</div>"),c.push("<div class = 'resview-comment-text'>",d.LONG_BLOB_TXT,"</div>");return c.join("")},renderResultViewer:function(g){var h=[],i=MP_ModalDialog.retrieveModalDialogObject("resultViewer"),j=i.getBodyElementId();return e=new mp_formatter.DateTimeFormatter(MPAGE_LOCALE),b=g.getResponse(),b&&"F"===g.getStatus()?(MP_Util.LogScriptCallError(null,this,"result_viewer_modal.js","renderResultViewer"),void MD_resultViewerDialog.alertError(a.ERROR_RETRIEVE,a.ERROR_TITLE,a.OK)):(f=MP_Util.LoadPersonelListJSON(b.PRSNL),c=!1,d=!1,b.RB_LIST[0].SPECIMEN_COLL.length&&(c=!0),b.RB_LIST[0].EVENT_NOTE_LIST.length&&(d=!0),h.push("<div class='resview-container'>"),h.push(MD_resultViewerDialog.buildEventHistorySectionHTML()),h.push(MD_resultViewerDialog.buildEventDetailSectionHTML(b.RB_LIST[0])),h.push("</div>"),$("#resultViewerbody").removeClass("resview-loading"),void $("#"+j).html(h.join("")))},onTabChange:function(a){var b=$(a).parent().find(".resview-tab-active");if(b.length){if($(b).attr("id")===$(a).attr("id"))return;$(b).empty(),$(b).html("<div class='resview-tab-inactive-label'>"+$(b).attr("tabText")+"</div>"),b.removeClass("resview-tab-active"),b.addClass("resview-tab-inactive"),$(b).next().removeClass("hidden"),$(b).prev().removeClass("hidden")}$(a).removeClass("resview-tab-inactive"),$(a).next().addClass("hidden"),$(a).prev().addClass("hidden"),$(a).addClass("resview-tab-active"),$(a).html("<span class = 'resview-tab-active-left'></span><span class = 'resview-tab-active-center'><span class='resview-tab-active-label'>"+$(a).attr("tabText")+"</span></span><span class = 'resview-tab-active-right'></span>"),$(a).removeClass("resview-tab-inactive"),$(a).addClass("resview-tab-active")},attachListeners:function(){$(document).on("click",".resview-hist-info",function(){var a=$(this).parent().find(".resview-hist-select"),e=$(a).find(".res-ind").parent(),f=$(this).attr("eventRowIndex"),g=null,h=[];a.length&&(a.removeClass("resview-hist-select"),a.removeClass("resview-wht-text"),$(e).removeClass("resview-wht-text")),$(this).addClass("resview-hist-select"),$(this).addClass("resview-wht-text"),$(this).find(".res-high").addClass("resview-wht-text"),a.attr("eventRowIndex")!==f&&(g=b.RB_LIST[f],c=!1,d=!1,g.SPECIMEN_COLL.length&&(c=!0),g.EVENT_NOTE_LIST.length&&(d=!0),$("#resViewControls").html(MD_resultViewerDialog.buildTabSectionHTML()),h.push(MD_resultViewerDialog.buildDetailsTabHTML(g)),h.push(MD_resultViewerDialog.buildActionListTabHTML(g)),c&&h.push(MD_resultViewerDialog.buildSpecimenTabHTML(g)),d&&h.push(MD_resultViewerDialog.buildCommentsTabHTML(g)),$("#resViewTabBodyId").html(h.join("")),MD_resultViewerDialog.onTabChange($("#resViewTab1")),$("#rvDetailsInfoId").removeClass("hidden"),$("#rvActionListInfoId").addClass("hidden"),$("#rvCommentsInfoId").addClass("hidden"),$("#rvSpecimenInfoId").addClass("hidden"))}),$(document).on("click","#resViewTab1",function(){MD_resultViewerDialog.onTabChange($(this)),$("#rvDetailsInfoId").removeClass("hidden"),$("#rvActionListInfoId").addClass("hidden"),$("#rvCommentsInfoId").addClass("hidden"),$("#rvSpecimenInfoId").addClass("hidden")}),$(document).on("click","#resViewTab2",function(){MD_resultViewerDialog.onTabChange($(this)),$("#rvDetailsInfoId").addClass("hidden"),$("#rvActionListInfoId").addClass("hidden"),$("#rvCommentsInfoId").addClass("hidden"),$("#rvSpecimenInfoId").removeClass("hidden")}),$(document).on("click","#resViewTab3",function(){MD_resultViewerDialog.onTabChange($(this)),$("#rvDetailsInfoId").addClass("hidden"),$("#rvActionListInfoId").removeClass("hidden"),$("#rvCommentsInfoId").addClass("hidden"),$("#rvSpecimenInfoId").addClass("hidden")}),$(document).on("click","#resViewTab4",function(){MD_resultViewerDialog.onTabChange($(this)),$("#rvDetailsInfoId").addClass("hidden"),$("#rvActionListInfoId").addClass("hidden"),$("#rvCommentsInfoId").removeClass("hidden"),$("#rvSpecimenInfoId").addClass("hidden")})}}}(),MD_trendingGraphDialog=function(){var a=i18n.discernabu.trend_graph_modal,b=null;return{initTrendGraph:function(b){var c=MP_ModalDialog.retrieveModalDialogObject("trendGraphModal");if(!c){c=new ModalDialog("trendGraphModal");var d=new ModalButton("trendGraphCloseBtn");d.setText(a.CLOSE).setFocusInd(!0).setOnClickFunction(function(){MD_trendingGraphDialog.removeTrendGraphIframeObject()}).setCloseOnClick(!0),c.setTopMarginPercentage(10).setRightMarginPercentage(9).setBottomMarginPercentage(15).setLeftMarginPercentage(9).setIsBodySizeFixed(!1),c.setHeaderTitle("<span>"+a.RESULT_TREND+"</span>").setHeaderCloseFunction(MD_trendingGraphDialog.removeTrendGraphIframeObject)}c.setBodyDataFunction(function(a){var c=[b];a.setBodyHTML(MD_trendingGraphDialog.loadWithCBParameters("mp_retrieve_graph_results",c,MD_trendingGraphDialog.buildGraphHTML))}),c.addFooterButton(d),MP_ModalDialog.addModalDialogObject(c),MP_ModalDialog.showModalDialog("trendGraphModal"),$("#trendGraphModalbody").addClass("trend-graph-loading")},loadWithCBParameters:function(a,b,c){var d=new MP_Core.ScriptRequest(this,"");d.setProgramName(a),d.setParameters(b),d.setAsync(!0),d.setRequiresRawData(!0),MP_Core.XMLCCLRequestCallBack(null,d,c)},buildGraphHTML:function(a){var c=a.getResponse(),d="100%",e="98%",f=null,g=null;b=document.createElement("iframe"),b.setAttribute("id","iframeGraph"),b.setAttribute("height",d),b.setAttribute("width",e),b.setAttribute("frameborder",0),$("#trendGraphModalbody").html(b),f=b.contentWindow,g=f?f.document:null,g&&(g.write(c),g.close()),$("#trendGraphModalbody").removeClass("trend-graph-loading"),setTimeout(function(){$("#iframeGraph").contents().find("#printGraph").remove(),document.getElementById("iframeGraph").height=document.getElementById("iframeGraph").contentWindow.document.body.scrollHeight+80+"px",document.getElementById("iframeGraph").width=document.getElementById("iframeGraph").contentWindow.document.body.scrollWidth+100+"px",$("#trendGraphModalbody").removeClass("trend-graph-loading")},1100)},removeTrendGraphIframeObject:function(){$(b).remove()}}}(),MP_VisitDetailDialog=function(){var a=i18n.discernabu.visit_detail_modal,b=null,c={SUMMARY:0,INSURANCE:1,GUARANTOR:2},d=c.SUMMARY,e=[],f=!1,g=!1,h=!1,i=!1;return{initVisitViewer:function(b,c,d,e,f){var g=[],h=a.CLOSE;b+=".0",c+=".0",d+=".0",e+=".0";var i=0,j=MP_ModalDialog.retrieveModalDialogObject("visitModalDialog");if(!j){j=new ModalDialog("visitModalDialog"),j.setTopMarginPercentage(10).setRightMarginPercentage(30).setBottomMarginPercentage(5).setLeftMarginPercentage(30).setIsBodySizeFixed(!1),j.setHeaderCloseFunction(),j.setHeaderTitle("<span class='visitswindow-title'>"+a.VISIT_DETAIL+"</span>");var k=new ModalButton("visitViewerCloseBtn");k.setText(h),k.setFocusInd(!0),j.addFooterButton(k),MP_ModalDialog.addModalDialogObject(j)}j.setBodyDataFunction(function(a){var c=[];c.push("^MINE^",b,d,e,i,"^"+f+"^"),MP_VisitDetailDialog.loadWithCBParameters("mp_get_visit_detail_data",c,MP_VisitDetailDialog.renderVisitDetail)}),MP_ModalDialog.updateModalDialogObject(j),MP_ModalDialog.showModalDialog(j.getId()),g.push("<div class='visits-body-loading'><span class='visits-loading'></span></div>"),j.setBodyHTML(g.join("")),$("#visitModalDialogbody").css("overflow","hidden")},loadWithCBParameters:function(a,b,c){try{var d=new MP_Core.ScriptRequest(this);d.setProgramName(a),d.setParameters(b),d.setAsync(!0),MP_Core.XMLCCLRequestCallBack(null,d,c)}catch(a){MP_Util.LogScriptCallError(null,this,"visit_detail_modal.js","loadWithCBParameters")}},renderVisitDetail:function(j){try{var k=[],l=MP_ModalDialog.retrieveModalDialogObject("visitModalDialog"),m=(l.getBodyElementId(),a.SUMMARY),n=a.INSURANCE,o=a.GUARANTOR;if(b=j.getResponse(),b&&"F"===j.getStatus())return void MP_Util.LogScriptCallError(null,this,"visit_detail_modal.js","renderVisitDetail");e[c.SUMMARY]=m,e[c.INSURANCE]=n,e[c.GUARANTOR]=o,k.push(MP_VisitDetailDialog.switchTab(d)),l.setBodyHTML(k.join(""));var p="#tabContainer .reachview-tabs ul li";$(p).eq(d).addClass("reachview-tab-active-header"),$(p).on("click",function(){var a=$(this.parentElement).find(".reachview-tab-active-header"),b=a.attr("id"),c=this.id;a.removeClass("reachview-tab-active-header"),$("#tab-sec-"+b.charAt(b.length-1)).hide(),$(this).addClass("reachview-tab-active-header"),$("#curTabId").show();var d=$("#visitModalDialogbody");"tabHeader_0"===c?(d.find(".visit-summary-tab-container").show(),d.find(".visit-insurance-tab-container").hide(),d.find(".visit-guarantor-tab-container").hide()):"tabHeader_1"===c?(f===!0&&d.find("#secondaryIns").removeClass("visit-disp-none"),g===!0&&d.find("#tertiaryIns").removeClass("visit-disp-none"),d.find(".visit-insurance-tab-container").show(),d.find(".visit-summary-tab-container").hide(),d.find(".visit-guarantor-tab-container").hide()):"tabHeader_2"===c&&(h===!0&&d.find("#secondaryGua").removeClass("visit-disp-none"),i===!0&&d.find("#tertiaryGua").removeClass("visit-disp-none"),d.find(".visit-guarantor-tab-container").show(),d.find(".visit-summary-tab-container").hide(),d.find(".visit-insurance-tab-container").hide())})}catch(a){MP_Util.LogScriptCallError(null,this,"visit_detail_modal.js","renderVisitDetail")}},switchTab:function(c){try{var j="--",k=b.FIN,l=j,m=j,n=j,o=j,p=j,q=j,r=j,s=j,t=j,u=j,v=j,w=j,x=j,y=j,z="",A="",B="",C="",D="",E="",F="",G="",H="",I="",J="",K="",L="",M="",N=j,O="",P="",Q=new mp_formatter.DateTimeFormatter(MPAGE_LOCALE),R=b.HP_LIST.length,S=b.GUARANTOR.length,T=b.E_LIST[0],U=b.HP_LIST[0],V=b.HP_LIST[1],W=b.HP_LIST[2],X=b.GUARANTOR[0],Y=b.GUARANTOR[1],Z=b.GUARANTOR[2],$="",_="",aa=[],ba=[],ca=[],da=[],ea=[],fa=[];if(f=!1,g=!1,h=!1,i=!1,aa=j,da=j,b.E_LIST.length>0&&(n=""!==T.REG_DATE?Q.formatISO8601(T.REG_DATE,mp_formatter.DateTimeFormatter.FULL_DATE_2YEAR):j,o=""!==T.DISCH_DATE?Q.formatISO8601(T.DISCH_DATE,mp_formatter.DateTimeFormatter.FULL_DATE_2YEAR):j,l=""!==T.LOCATION?T.LOCATION:j,m=""!==T.ORG_NAME?T.ORG_NAME:j,p=""!==T.MED_SERVICE?T.MED_SERVICE:j,q=""!==T.ADMITTING_PROVIDER?T.ADMITTING_PROVIDER:j,r=""!==T.ATTENDING_PROVIDER?T.ATTENDING_PROVIDER:j),R>0)for(var ga=0;ga<R;ga++)0===ga&&(s=""!==U.NAME?U.NAME:j,t=""!==U.POLICY_NUM?U.POLICY_NUM:j,v=""!==U.MEMBER_NUM?U.MEMBER_NUM:j,w=""!==U.TYPE?U.TYPE:j,x=""!==U.GROUP_NUM?U.GROUP_NUM:j,y=""!==U.FIN_CLASS?U.FIN_CLASS:j),1===ga&&(z=""!==V.NAME?V.NAME:j,A=""!==V.POLICY_NUM?V.POLICY_NUM:j,C=""!==V.MEMBER_NUM?V.MEMBER_NUM:j,D=""!==V.TYPE?V.TYPE:j,E=""!==V.GROUP_NUM?V.GROUP_NUM:j,F=""!==V.FIN_CLASS?V.FIN_CLASS:j,f=!0),2===ga&&(G=""!==W.NAME?W.NAME:j,H=""!==W.POLICY_NUM?W.POLICY_NUM:j,J=""!==W.MEMBER_NUM?W.MEMBER_NUM:j,K=""!==W.TYPE?W.TYPE:j,L=""!==W.GROUP_NUM?W.GROUP_NUM:j,M=""!==W.FIN_CLASS?W.FIN_CLASS:j,g=!0);if(S>0)for(var ha=0;ha<S;ha++){if(0===ha){u=""!==X.NAME?X.NAME:j,N=""!==X.TYPE?X.TYPE:j,$=b.GUARANTOR[ha].ADDRESS_LIST.length,_=b.GUARANTOR[ha].PHONE_LIST.length;var ia=$>0?b.GUARANTOR[ha].ADDRESS_LIST:"";if(aa="",""!==ia)for(var ja=0;ja<$;ja++)aa+="<span>"+ia[ja].LINE1+"</span></br><span>"+ia[ja].LINE2+"</span></br>";else aa=j;var ka=_>0?b.GUARANTOR[ha].PHONE_LIST:"";if(da="",""!==ka)for(var la=0;la<_;la++)da+="<span>"+ka[la].NUMBER+"</span></br>";else da=j}if(1===ha){h=!0,B=""!==Y.NAME?Y.NAME:j,O=""!==Y.TYPE?Y.TYPE:j,$=b.GUARANTOR[1].ADDRESS_LIST.length,_=b.GUARANTOR[1].PHONE_LIST.length;var ma=$>0?b.GUARANTOR[ha].ADDRESS_LIST:"";if(ba="",""!==ma)for(var na=0;na<$;na++)ba+="<span class='visit-gua-address'>"+ma[na].LINE1+"</span></br><span class='visit-gua-address'>"+ma[na].LINE2+"</span></br>";else ba=j;var oa=_>0?b.GUARANTOR[ha].PHONE_LIST:"";if(ea="",""!==oa)for(var pa=0;pa<_;pa++)ea+="<span>"+oa[pa].NUMBER+"</span></br>";else ea=j}if(2===ha){i=!0,I=""!==Z.NAME?Z.NAME:j,P=""!==Z.TYPE?Z.TYPE:j,$=b.GUARANTOR[2].ADDRESS_LIST.length,_=b.GUARANTOR[2].PHONE_LIST.length;var qa=$>0?b.GUARANTOR[ha].ADDRESS_LIST:"";if(ca="",""!==qa)for(var ra=0;ra<$;ra++)ca+="<span>"+qa[ra].LINE1+"</span></br><span>"+qa[ra].LINE2+"</span></br>";else ca=j;var sa=_>0?b.GUARANTOR[ha].PHONE_LIST:"";if(fa="",""!==sa)for(var ta=0;ta<_;ta++)fa+="<span>"+sa[ta].NUMBER+"</span></br>";else fa=j}}var ua=['<div class="reachview-tab-container" id="tabContainer"><div class="reachview-tabs"><ul>'],va=e.length;"number"==typeof c?d=c:c=d;var wa,xa;for(wa=0;wa<va;wa++)xa=e[wa],ua.push('<li id="tabHeader_',wa,'"><span class="reachview-tab-left-edge">&nbsp;</span><span class="reachview-tab-text">',xa,'</span><span class="reachview-tab-right-edge">&nbsp;</span></li>');ua.push('</ul></div><hr /><div class="visit-tabs-content">');var ya=b.DIAG.length,za=ya>0?b.DIAG:"",Aa="";if(""!==za)for(var Ba=0;Ba<ya;Ba++)Aa+="<span>"+za[Ba].TEXT+"&nbsp</span><span class='visit-diag-code'>("+za[Ba].CODE+")</span><br>";else Aa=j;ua.push("<div class='tabs'><ul><li id='tab1'></li><li id='tab2'></li><li id='tab3'></li></ul></div><div class='visit-summary-tab-container' id='tab-sec-1'><dl class='visit-smry-data'><dt class='visit-res-type'></dt><dd class='visit-smry-value'></dd></dl><dl class='visit-smry-data'><dt class='visit-res-type'>"+a.FIN+"&nbsp</dt><dd class='visit-smry-value'>"+k+"</dd></dl><dl class='visit-smry-data'><dt class='visit-res-type'>"+a.REG_DATE+"&nbsp</dt><dd class='visit-smry-value'>"+n+"</dd></dl><dl class='visit-smry-data'><dt class='visit-res-type'>"+a.DISCH_DATE+"&nbsp</dt><dd class='visit-smry-value'>"+o+"</dd></dl><dl class='visit-smry-data'><dt class='visit-res-type'>"+a.LOCATION+"&nbsp</dt><dd class='visit-smry-value'>"+l+"</dd></dl><dl class='visit-smry-data'><dt class='visit-res-type'>"+a.ORG_NAME+"&nbsp</dt><dd class='visit-smry-value'>"+m+"</dd></dl><dl class='visit-smry-data'><dt class='visit-res-type'>"+a.MED_SER+"&nbsp</dt><dd class='visit-smry-value'>"+p+"</dd></dl><dl class='visit-smry-separator'></dl><dl class='visit-smry-empty'></dl><dl class='visit-smry-data'><dt class='visit-res-type'>"+a.ADMIT_PROVIDER+"&nbsp</dt><dd class='visit-smry-value'>"+q+"</dd></dl><dl class='visit-smry-data'><dt class='visit-res-type'>"+a.ATTEND_PROVIDER+"&nbsp</dt><dd class='visit-smry-value'>"+r+"</dd></dl><dl class='visit-smry-separator'></dl><dl class='visit-smry-empty'></dl><dl class='visit-smry-data'><dt class='visit-res-type'>"+a.VISIT_DIAG+"&nbsp</dt><dd class='visit-smry-value'>"+Aa+"</dd></dl></div><div class='visit-insurance-tab-container' id='tab-sec-2'><div class='visit-hp-primary' id='primaryIns'><span><h2 class='visit-ins-line'><span class='visit-ins-res-type'>"+a.PRIMARY+"&nbsp</span></h2></span><dl class='visit-ins-hp-data'><dt class='visit-res-hp-type'>"+a.HEALTH_PLAN+"&nbsp</dt><dd class='visit-ins-hp-value'>"+s+"</dd></dl><dl class='visit-ins-hp-data'><dt class='visit-res-hp-type'>"+a.POLICY+"&nbsp</dt><dd class='visit-ins-hp-value'>"+t+"</dd></dl><dl class='visit-ins-hp-data'><dt class='visit-res-hp-type'>"+a.GUARANTOR_NAME+"&nbsp</dt><dd class='visit-ins-hp-value'>"+u+"</dd></dl><dl class='visit-ins-hp-data'><dt class='visit-res-hp-type'>"+a.MEMBER+"&nbsp</dt><dd class='visit-ins-hp-value'>"+v+"</dd></dl><dl class='visit-ins-hp-data'><dt class='visit-res-hp-type'>"+a.TYPE+"&nbsp</dt><dd class='visit-ins-hp-value'>"+w+"</dd></dl><dl class='visit-ins-hp-data'><dt class='visit-res-hp-type'>"+a.GROUP+"&nbsp</dt><dd class='visit-ins-hp-value'>"+x+"</dd></dl><dl class='visit-ins-hp-data'><dt class='visit-res-hp-type'>"+a.FIN_CLASS+"&nbsp</dt><dd class='visit-ins-hp-value'>"+y+"</dd></dl></div><div class='visit-disp-none' id='secondaryIns'><span><h2 class='visit-ins-line'><span class='visit-ins-res-type'>"+a.SECONDARY+"&nbsp</span></h2></span><dl class='visit-ins-hp-data'><dt class='visit-res-hp-type'>"+a.HEALTH_PLAN+"&nbsp</dt><dd class='visit-ins-hp-value'>"+z+"</dd></dl><dl class='visit-ins-hp-data'><dt class='visit-res-hp-type'>"+a.POLICY+"&nbsp</dt><dd class='visit-ins-hp-value'>"+A+"</dd></dl><dl class='visit-ins-hp-data'><dt class='visit-res-hp-type'>"+a.GUARANTOR_NAME+"&nbsp</dt><dd class='visit-ins-hp-value'>"+B+"</dd></dl><dl class='visit-ins-hp-data'><dt class='visit-res-hp-type'>"+a.MEMBER+"&nbsp</dt><dd class='visit-ins-hp-value'>"+C+"</dd></dl><dl class='visit-ins-hp-data'><dt class='visit-res-hp-type'>"+a.TYPE+"&nbsp</dt><dd class='visit-ins-hp-value'>"+D+"</dd></dl><dl class='visit-ins-hp-data'><dt class='visit-res-hp-type'>"+a.GROUP+"&nbsp</dt><dd class='visit-ins-hp-value'>"+E+"</dd></dl><dl class='visit-ins-hp-data'><dt class='visit-res-hp-type'>"+a.FIN_CLASS+"&nbsp</dt><dd class='visit-ins-hp-value'>"+F+"</dd></dl></div><div class='visit-disp-none' id='tertiaryIns'><span><h2 class='visit-ins-line'><span class='visit-ins-res-type'>"+a.TERTIARY+"&nbsp</span></h2></span><dl class='visit-ins-hp-data'><dt class='visit-res-hp-type'>"+a.HEALTH_PLAN+"&nbsp</dt><dd class='visit-ins-hp-value'>"+G+"</dd></dl><dl class='visit-ins-hp-data'><dt class='visit-res-hp-type'>"+a.POLICY+"&nbsp</dt><dd class='visit-ins-hp-value'>"+H+"</dd></dl><dl class='visit-ins-hp-data'><dt class='visit-res-hp-type'>"+a.GUARANTOR_NAME+"&nbsp</dt><dd class='visit-ins-hp-value'>"+I+"</dd></dl><dl class='visit-ins-hp-data'><dt class='visit-res-hp-type'>"+a.MEMBER+"&nbsp</dt><dd class='visit-ins-hp-value'>"+J+"</dd></dl><dl class='visit-ins-hp-data'><dt class='visit-res-hp-type'>"+a.TYPE+"&nbsp</dt><dd class='visit-ins-hp-value'>"+K+"</dd></dl><dl class='visit-ins-hp-data'><dt class='visit-res-hp-type'>"+a.GROUP+"&nbsp</dt><dd class='visit-ins-hp-value'>"+L+"</dd></dl><dl class='visit-ins-hp-data'><dt class='visit-res-hp-type'>"+a.FIN_CLASS+"&nbsp</dt><dd class='visit-ins-hp-value'>"+M+"</dd></dl></div></div><div class='visit-guarantor-tab-container' id='tab-sec-3'><div class='visit-gr-primary' id='primaryGua'><span><h2 class='visit-ins-line'><span class='visit-ins-res-type'>"+a.PRIMARY+"&nbsp</span></h2></span><dl class='visit-ins-gua-data'><dt class='visit-res-gua-type'>"+a.NAME+"&nbsp</dt><dd class='visit-ins-gua-value'>"+u+"</dd></dl><dl class='visit-ins-gua-data'><dt class='visit-res-gua-type'>"+a.ADDRESS+"&nbsp</dt><dd class='visit-ins-gua-value'>"+aa+"</dd></dl><dl class='visit-ins-gua-data'><dt class='visit-res-gua-type'>"+a.PHONE_HOME+"&nbsp</dt><dd class='visit-ins-gua-value'>"+da+"</dd></dl><dl class='visit-ins-gua-data'><dt class='visit-gua-rp-type'>"+a.REL_TO_PAT+"&nbsp</dt><dd class='visit-gua-rp-value'>"+N+"</dd></dl></div><div class='visit-disp-none' id='secondaryGua'><span><h2 class='visit-ins-line'><span class='visit-ins-res-type'>"+a.SECONDARY+"&nbsp</span></h2></span><dl class='visit-ins-gua-data'><dt class='visit-res-gua-type'>"+a.NAME+"&nbsp</dt><dd class='visit-ins-gua-value'>"+B+"</dd></dl><dl class='visit-ins-gua-data'><dt class='visit-res-gua-type'>"+a.ADDRESS+"&nbsp</dt><dd class='visit-ins-gua-value'>"+ba+"</dd></dl><dl class='visit-ins-gua-data'><dt class='visit-res-gua-type'>"+a.PHONE_HOME+"&nbsp</dt><dd class='visit-ins-gua-value'>"+ea+"</dd></dl><dl class='visit-ins-gua-data'><dt class='visit-gua-rp-type'>"+a.REL_TO_PAT+"&nbsp</dt><dd class='visit-gua-rp-value'>"+O+"</dd></dl></div><div class='visit-disp-none' id='tertiaryGua'><span><h2 class='visit-ins-line'><span class='visit-ins-res-type'>"+a.TERTIARY+"&nbsp</span></h2></span><dl class='visit-ins-gua-data'><dt class='visit-res-gua-type'>"+a.NAME+"&nbsp</dt><dd class='visit-ins-gua-value'>"+I+"</dd></dl><dl class='visit-ins-gua-data'><dt class='visit-res-gua-type'>"+a.ADDRESS+"&nbsp</dt><dd class='visit-ins-gua-value'>"+ca+"</dd></dl><dl class='visit-ins-gua-data'><dt class='visit-res-gua-type'>"+a.PHONE_HOME+"&nbsp</dt><dd class='visit-ins-gua-value'>"+fa+"</dd></dl><dl class='visit-ins-gua-data'><dt class='visit-gua-rp-type'>"+a.REL_TO_PAT+"&nbsp</dt><dd class='visit-gua-rp-value'>"+P+"</dd></dl></div></div>"),ua.push("</div></div>");var Ca=ua.join("");return Ca}catch(a){MP_Util.LogJSError(a,this,"visit_detail_modal.js","switchTab")}}}}();StructureOrganizerBuilder.prototype.getNamespace=function(){return this.m_namespace},StructureOrganizerBuilder.prototype.setNamespace=function(a){if("string"!=typeof a)throw new Error("Attempted to call StructureOrganizerBuilder.prototype.setNamespace with invalid parameter.");return this.m_namespace=a,this},StructureOrganizerBuilder.prototype.getNodeCount=function(){return this.m_nodeCount},StructureOrganizerBuilder.prototype.setNodeCount=function(a){if("number"!=typeof a)throw new Error("Attempted to call StructureOrganizerBuilder.prototype.setNodeCount with invalid parameter.");return this.m_nodeCount=a,this},StructureOrganizerBuilder.prototype.getStructureOrganizer=function(){return this.m_structureOrganizer},StructureOrganizerBuilder.prototype.startNewStructureOrganizer=function(){this.m_structureOrganizer=new StructureOrganizer,this.m_structureOrganizer.setNamespace(this.getNamespace()),this.m_structureOrganizer.setId(""+this.m_nodeCount++)},StructureOrganizerBuilder.prototype.buildNavigator=function(){throw new Error("Attempted to call StructureOrganizerBuilder.prototype.buildNavigator. This function must be implemented by a sub-class")},JSONStructureOrganizerBuilder.prototype=new StructureOrganizerBuilder,JSONStructureOrganizerBuilder.prototype.constructor=StructureOrganizerBuilder,JSONStructureOrganizerBuilder.prototype.getStructureJSON=function(){return this.m_structureJSON},JSONStructureOrganizerBuilder.prototype.setStructureJSON=function(a){return this.m_structureJSON=a,this},JSONStructureOrganizerBuilder.prototype.buildStructureTree=function(){this.m_nodeCount=0;var a=this.m_structureJSON,b=new StructureOrganizer;return this.m_structureOrganizer=b,b.setTemplateRelations(a.template_rltns),b.setReferenceSectionId(a.dd_sref_section_id),b.setNamespace(this.getNamespace()),b.setId(""+this.m_nodeCount++),b.setOrganizer(b),this.traverse(a,b),this.handleMultiSectionStructure(),b.isMultiSection()||b.setNavigator(this.buildNavigatorForSection(b)),b},JSONStructureOrganizerBuilder.prototype.handleMultiSectionStructure=function(){for(var a=this.m_structureOrganizer,b=a.getChildren(),c=b.length,d=null,e=0;e<c;e++)d=b[e],StructureOrganizer.prototype.isPrototypeOf(d)&&(a.setIsMultiSection(!0),d.setNavigator(this.buildNavigatorForSection(d)),a.m_activeSection||a.setActiveSection(d))},JSONStructureOrganizerBuilder.prototype.buildNavigatorForSection=function(a){var b=new Navigator;b.setId(this.getNamespace()+":structureNavigator:"+a.getId());for(var c=a.getChildren(),d=null,e=c.length,f=this.m_namespace,g=0;g<e;g++){d=c[g];var h=new StructureNavigation;h.setContainerId(f+":organizer:CONTENT:"+a.getId()),h.setAnchorId(f+":group:ROOT:"+d.getId()),h.setLabel(d.getTitle().replace(":","")),h.setId(f+":structureNavigation:"+d.getId()),h.setNode(d),b.addNavigation(h)}return b},JSONStructureOrganizerBuilder.prototype.buildNavigator=function(){var a=new Navigator;a.setId(this.getNamespace()+":structureNavigator");for(var b=this.m_structureOrganizer.getChildren(),c=null,d=b.length,e=0;e<d;e++){c=b[e];var f=new StructureNavigation;f.setContainerId(this.getNamespace()+":organizer:CONTENT:"+this.m_structureOrganizer.getId()),f.setAnchorId(this.getNamespace()+":group:ROOT:"+c.getId()),f.setLabel(c.getTitle().replace(":","")),f.setId(this.getNamespace()+":structureNavigation:"+c.getId()),a.addNavigation(f)}return a},JSONStructureOrganizerBuilder.prototype.traverse=function(a,b){var c;if(a instanceof Object)for(c in a)if(a.hasOwnProperty(c)){if(!(a[c]instanceof Object))continue;if(Array.prototype.isPrototypeOf(a[c]))for(var d=a[c],e=0;e<d.length;e++){var f=this.buildNode(c,d[e],b);"attribute_menu_items"!==c||"EXPAND"!==d[e].ui_type&&"TABLE"!==d[e].ui_type||this.extractMatchingChildren(d,e),this.traverse(d[e],f)}else this.traverse(a[c],b)}},JSONStructureOrganizerBuilder.prototype.extractMatchingChildren=function(a,b){for(var c=0,d=a[b],e=a.length,f=b+1;f<e;f++){var g=a[f];d.label_id&&g.child_label_id&&d.label_id===g.child_label_id&&(g.label_id&&(e=this.extractMatchingChildren(a,f)),"undefined"==typeof d.attribute_menu_items&&(d.attribute_menu_items=[]),d.attribute_menu_items[c++]=g,a.splice(f,1),e--,f--)}return e},JSONStructureOrganizerBuilder.prototype.buildNode=function(a,b,c){var d=null;if("subsections"===a)d=new StructureOrganizer,d.setReferenceSectionId(b.dd_sref_section_id),d.setTemplateRelations(b.template_rltns);else if("groupbys"===a)d=new StructureGroup;else if("subgroupbys"===a)d=new StructureSubGroup;else if("items"===a)d=new StructureItemGroup;else if("attributes"===a)d=this.buildStructureTermGroupNode(b);else{if("attribute_menu_items"!==a)return null;b.user_input?d="FREE_TEXT"===b.ui_type?this.buildFreeTextNode(b):this.buildInputNode(b):"LINE"===b.ui_type?d=new LineStructureTerm:"EXPAND"===b.ui_type?(d=new ExpandStructureTermGroup,this.addNormality(d,b)):d="TABLE"===b.ui_type?this.buildTableStructureTermGroupNode(b):this.buildCycleNode(b,c),d.setCaption(b.caption||""),d.setDisplayPosition(b.display_seq),d.setUIValue(b.ui_value),d.setPriority(b.priority)}return"undefined"!=typeof b.displayflag&&d.setShouldRender(!!b.displayflag),d.setNamespace(this.getNamespace()),d.setOCID(b.ocid||""),d.setType(a),d.setTitle(b.label||b.value||b.name||b.section_label||""),d.setId(this.m_nodeCount++ +""),d.setOrganizer(this.getStructureOrganizer()),this.m_structureOrganizer.addTermToLookup(d),c.addChild(d),d},JSONStructureOrganizerBuilder.prototype.buildStructureTermGroupNode=function(a){switch(a.attrib_type){case"Single":return new SingleStructureTermGroup;case"Multiple":return new MultiStructureTermGroup;case"YesNo":return new YesNoStructureTermGroup;default:throw new Error("Attempted to call JSONStructureOrganizerBuilder.prototype.buildStructureTermGroupNode with unsupported ATTRIB_TYPE")}},JSONStructureOrganizerBuilder.prototype.buildInputNode=function(a){var b=new InputStructureTerm;return b.setDataType(a.data_type),b.setActiveState((new TermState).setCSSClass("Abnormal"===a.normalfinding?"documented-abnormal":"documented").setValue(!0)),b.setInactiveState((new TermState).setCSSClass("undocumented").setValue(null)),b.setInitialState(b.getInactiveState()),"NUMERIC"===a.data_type&&(0===a.min_value&&0===a.max_value?b.addValidator(new DataRangeValidator):b.addValidator((new DataRangeValidator).setMinValue(a.min_value).setMaxValue(a.max_value))),b.addValidator((new DataTypeValidator).setDataType(a.data_type)),b},JSONStructureOrganizerBuilder.prototype.buildFreeTextNode=function(a){var b=new FreeTextStructureTerm;return b.setDataType(a.data_type),b.setActiveState((new TermState).setCSSClass("Abnormal"===a.normalfinding?"documented-abnormal":"documented").setValue(!0)),b.setInactiveState((new TermState).setCSSClass("undocumented").setValue(null)),b.setInitialState(b.getInactiveState()),b},JSONStructureOrganizerBuilder.prototype.buildTableStructureTermGroupNode=function(a){
var b=new TableStructureTermGroup;return this.addNormality(b,a),b},JSONStructureOrganizerBuilder.prototype.buildCycleNode=function(a,b){var c=null,d=a.ui_type,e=YesNoStructureTermGroup.prototype.isPrototypeOf(b)&&"NONE"!==d;return c=e?new YesNoStructureTerm:"NONE"===d?new NoneStructureTerm:TableStructureTermGroup.prototype.isPrototypeOf(b)?new TableStructureTerm:new CycleStructureTerm,this.addNormality(c,a),c},JSONStructureOrganizerBuilder.prototype.addNormality=function(a,b){var c=YesNoStructureTerm.prototype.isPrototypeOf(a),d=b.normalfinding;switch(a.addState((new TermState).setCSSClass("undocumented").setValue(null)),d){case"Neutral":a.addState((new TermState).setCSSClass("documented").setValue(!0)),c&&a.addState((new TermState).setCSSClass("documented").setValue(!1));break;case"Normal":a.addState((new TermState).setCSSClass("documented").setValue(!0)),c&&a.addState((new TermState).setCSSClass("documented-abnormal").setValue(!1));break;case"Abnormal":a.addState((new TermState).setCSSClass("documented-abnormal").setValue(!0)),c&&a.addState((new TermState).setCSSClass("documented").setValue(!1));break;default:throw new Error("Unexpected normal finding value in the JSON: "+d)}return a.setInitialState(a.getStates()[0]),a},JSONStructureOrganizerBuilder.prototype.update=function(a,b){a.setActivityId(b.dd_section_id),this.updateTraverse(b,a)},JSONStructureOrganizerBuilder.prototype.updateTraverse=function(a,b){var c;if(a instanceof Object)for(c in a)if(a.hasOwnProperty(c)){if(!(a[c]instanceof Object))continue;if(Array.prototype.isPrototypeOf(a[c]))for(var d=a[c],e=0;e<d.length;e++){var f=this.updateNode(c,d[e],b);f&&this.updateTraverse(d[e],f)}else this.updateTraverse(a[c],b)}},JSONStructureOrganizerBuilder.prototype.updateNode=function(a,b,c){var d,e,f=null,g=c.getChildren();if("subsections"===a){for(d=0;d<g.length;d++)if(e=g[d],this.matchesSubsection(g[d],b)){f=e,f.setActivityId(b.dd_section_id);break}}else if("groupbys"===a){for(d=0;d<g.length;d++)if(e=g[d],b.label===e.getTitle()){f=e,f.setActivityId(b.dd_groupby_id);break}}else if("subgroupbys"===a){for(d=0;d<g.length;d++)if(e=g[d],b.label===e.getTitle()){f=e,f.setActivityId(b.dd_sgroupby_id);break}}else if("items"===a){for(d=0;d<g.length;d++)if(e=g[d],b.ocid===e.getOCID()){f=e,f.setActivityId(b.dd_item_id);break}}else if("attributes"===a){for(d=0;d<g.length;d++)if(e=g[d],b.ocid===e.getOCID()){f=e,f.setActivityId(b.dd_attribute_id);break}}else if("attribute_menu_items"===a)for(d=0;d<g.length;d++)if(e=g[d],e.getChildren().length>0&&this.updateNode(a,b,e),b.ocid===e.getOCID()&&b.display_seq===e.getDisplayPosition()){f=e,f.setActivityId(b.dd_attr_menu_item_id),b.comment&&f.displayComment(b.comment),f instanceof InputStructureTerm?(f.setCurrentValue(b.value_text?f.unescapePlaintextAsHtml(b.value_text):b.value_number+""),f.update()):f instanceof CycleStructureTerm&&f.jumpToState("T"===b.truth_state_mean?1:2);break}return f},JSONStructureOrganizerBuilder.prototype.matchesSubsection=function(a,b){var c=a.getTemplateRelations(),d=b.template_rltns,e=c.length,f=d.length,g=null,h=null,i=!1;if(e!==f)return!1;for(var j=0;j<e;j++){g=c[j],i=!1;for(var k=0;k<f;k++)if(h=d[k],g.dd_sref_chf_cmplnt_crit_id===h.dd_sref_chf_cmplnt_crit_id&&g.dd_sref_templ_instance_ident===h.dd_sref_templ_instance_ident&&g.parent_entity_id===h.parent_entity_id&&g.parent_entity_name===h.parent_entity_name){i=!0;break}if(!i)return!1}return!0},JSONStructureOrganizerBuilder.prototype.buildQuestionSet=function(a){var b=null,c=null,d=null,e=null,f=a.length,g=new StructureQuestionSet,h=null,i=null,j=0;g.setNamespace(this.m_namespace);for(var k=g.getLookup(),l=0;l<f;l++){b=a[l],h=new StructureQuestion,h.setId(++j+""),h.setNamespace(this.m_namespace),h.setQuestionDisplay(b.label),h.setParentEntityId(b.parent_entity_id),h.setParentEntityName(b.parent_entity_name),c=b.choices,e=c.length;for(var m=0;m<e;m++)d=c[m],i=new StructureAnswer,i.setAnswerDisplay(d.label),i.setTemplateId(d.dd_sref_chf_cmplnt_crit_id),i.setId(++j+""),i.setNamespace(this.m_namespace),k[i.getId()]=i,h.addChild(i);g.addChild(h)}return g},JSONStructureOrganizerBuilder.extendClassMethods=function(a,b,c){for(var d=c.length,e=0;e<d;e++)!function(d){a.prototype[c[d]]=function(a){return b.prototype[c[d]].apply(this,arguments)}}(e)},StructureNode.prototype.getActivityId=function(){return this.m_activityId},StructureNode.prototype.setActivityId=function(a){if("number"!=typeof a)throw new Error("Called setActivityId on StructureNode with invalid parameter for activityId");return this.m_activityId=a,this},StructureNode.prototype.getChildren=function(){return this.m_children||(this.m_children=[]),this.m_children},StructureNode.prototype.isDirty=function(){return this.m_dirty},StructureNode.prototype.setIsDirty=function(a){if("boolean"!=typeof a)throw new Error("Called setIsDirty on StructureNode with invalid dirty parameter.");return this.m_dirty=a,this},StructureNode.prototype.getDisplayPosition=function(){return this.m_displayPosition},StructureNode.prototype.setDisplayPosition=function(a){if("number"!=typeof a)throw new Error("Attempted to call StructureNode.prototype.setDisplayPosition with invalid parameter.");return this.m_displayPosition=a,this},StructureNode.prototype.getId=function(){return this.m_id},StructureNode.prototype.setId=function(a){if("string"!=typeof a)throw new Error("Called setId on StructureNode with invalid parameter for id");return this.m_id=a,this},StructureNode.prototype.getInitialState=function(){return this.m_initialState},StructureNode.prototype.setInitialState=function(a){if(!TermState.prototype.isPrototypeOf(a))throw new Error("Called setInitialState on StructureNode with invalid initialState parameter.");return this.m_initialState=a,this},StructureNode.prototype.getNamespace=function(){return this.m_namespace},StructureNode.prototype.setNamespace=function(a){if("string"!=typeof a)throw new Error("Called setNamespace on StructureNode with invalid namespace parameter.");return this.m_namespace=a,this},StructureNode.prototype.getNumberOfDocumentedChildren=function(){return this.m_numberDocumented},StructureNode.prototype.getOCID=function(){return this.m_ocid},StructureNode.prototype.setOCID=function(a){if("string"!=typeof a)throw new Error("Attempted to call StructureNode.prototype.setOCID with invalid parameter.");return this.m_ocid=a,this},StructureNode.prototype.getParent=function(){return this.m_parent},StructureNode.prototype.setParent=function(a){if(!StructureNode.prototype.isPrototypeOf(a))throw new Error("Called setParent on StructureNode with invalid parent parameter.");return this.m_parent=a,this},StructureNode.prototype.getPreviousState=function(){return this.m_previousState},StructureNode.prototype.setPreviousState=function(a){if(!TermState.prototype.isPrototypeOf(a)&&null!==a)throw new Error("Attempted to call StructureNode.prototype.setPreviousState with invalid parameter.");return this.m_previousState=a,this},StructureNode.prototype.getRootElement=function(){return this.m_rootElement},StructureNode.prototype.getShouldRender=function(){return this.m_shouldRender},StructureNode.prototype.setShouldRender=function(a){if("boolean"!=typeof a)throw new Error("Called setShouldRender on StructureNode with invalid shouldRender parameter.");return this.m_shouldRender=a,this},StructureNode.prototype.inNavigationStructureTree=function(){return this.m_inNavigateStructureTree},StructureNode.prototype.shouldSave=function(){return this.m_shouldSave},StructureNode.prototype.isDefaultDisplayed=function(){return this.m_isDefaultDisplayed},StructureNode.prototype.setIsDefaultDisplayed=function(a){if("boolean"!=typeof a)throw new Error("Called setIsDefaultDisplayed on StructureNode with invalid defaultDisplayed paramater");return this.m_isDefaultDisplayed=a,this},StructureNode.prototype.isCurrentlyDisplayed=function(){return!0},StructureNode.prototype.displayNode=function(){throw new Error("displayNode is abstract, to be implemented by children")},StructureNode.prototype.getState=function(){return this.m_state},StructureNode.prototype.setState=function(a){if(!TermState.prototype.isPrototypeOf(a))throw new Error("Attempted to call StructureNode.prototype.setState with invalid parameter.");return this.m_state=a,this},StructureNode.prototype.getTitle=function(){return this.m_title},StructureNode.prototype.setTitle=function(a){if("string"!=typeof a)throw new Error("Attempted to call StructureNode.prototype.setTitle with invalid parameter.");return this.m_title=a,this},StructureNode.prototype.getType=function(){return this.m_type},StructureNode.prototype.setType=function(a){if("string"!=typeof a)throw new Error("Attempted to call StructureNode.prototype.setType with invalid parameter.");return this.m_type=a,this},StructureNode.prototype.notifyDirty=function(a){this.getParent()&&this.getParent().notifyDirty(a)},StructureNode.prototype.resetDirty=function(){this.m_dirty=!1},StructureNode.prototype.convertToJSON=function(){return{}},StructureNode.prototype.getOrganizer=function(){return this.m_organizer},StructureNode.prototype.setOrganizer=function(a){if(!StructureOrganizer.prototype.isPrototypeOf(a))throw new Error("StructureOrganizer.prototype.setOrganizer expects a StructureOrganizer object.");this.m_organizer=a},StructureNode.prototype.getParentSectionNode=function(){for(var a=this,b=null;null!==a&&!StructureOrganizer.prototype.isPrototypeOf(a);)a=a.getParent();return b=a},StructureNode.prototype.getHighlightElement=function(){return this.getRootElement()},StructureNode.prototype.postProcessing=function(){},StructureNode.prototype.addChildrenJSON=function(a){var b=this.getChildren();this.addNodesToJSON(b,a)},StructureNode.prototype.addNodesToJSON=function(a,b){for(var c={},d=0;d<a.length;d++){var e=a[d],f=e.getState()?e.getState().getValue():null;if((null!==f||"subsections"===e.getType())&&e.shouldSave()){c[e.getType()]||(c[e.getType()]=[]);var g=e.convertToJSON();c[e.getType()].push(g)}}for(var h in c)b.push('"'+h+'": ['+c[h].join(",")+"]")},StructureNode.prototype.getAllDescendents=function(a){for(var b,c=this.getChildren(),d=c.length,e=0;e<d;e++)b=c[e],a.push(b),b.getAllDescendents(a);return a},StructureNode.prototype.addDescendentJSON=function(a){var b=this.getAllDescendents([]);this.addNodesToJSON(b,a)},StructureNode.prototype.escapePlaintextAsHtml=function(a){return a.replace(/\&/g,"&#38;").replace(/\"/g,"&#34;").replace(/\'/g,"&#39;").replace(/\</g,"&#60;").replace(/\>/g,"&#62;").replace(/\\/g,"&#92;").replace(/\^/g,"&#94;").replace(/\~/g,"&#126;").replace(/\t/g,"&#9;").replace(/\r/g,"&#10;").replace(/\n/g,"&#13;")},StructureNode.prototype.unescapePlaintextAsHtml=function(a){return a.replace(/\&\#34\;/g,'"').replace(/\&\#39\;/g,"'").replace(/\&\#60\;/g,"<").replace(/\&\#62\;/g,">").replace(/\&\#92\;/g,"\\").replace(/\&\#94\;/g,"^").replace(/\&\#126\;/g,"~").replace(/\&\#9\;/g,"\t").replace(/\&\#10\;/g,"\r").replace(/\&\#13\;/g,"\n").replace(/\&\#38\;/g,"&")},StructureNode.prototype.notifyStateChange=function(a){var b=a.getState(),c=a.getPreviousState();if(!c||b.getValue()!==c.getValue()){var d=this.m_numberDocumented;null===b.getValue()?this.m_numberDocumented=Math.max(0,this.m_numberDocumented-1):a.getPreviousState()&&null!==a.getPreviousState().getValue()||null===b.getValue()||(this.m_numberDocumented=Math.min(this.m_children.length,this.m_numberDocumented+1)),0===this.m_numberDocumented?this.updateState((new TermState).setValue(null).setKey("NULL")):this.m_numberDocumented>0&&0===d&&this.updateState((new TermState).setValue(!0).setKey("TRUE"))}},StructureNode.prototype.updateState=function(a){var b=this.getState();a!==b&&(this.setState(a),this.setPreviousState(b),this.getParent()&&this.getParent().notifyStateChange(this)),this.refresh()},StructureNode.prototype.refresh=function(){},StructureNode.prototype.addChild=function(a){a.getParent()!==this&&a.setParent(this),this.getChildren().push(a)},StructureNode.prototype.render=function(a){},StructureNode.prototype.clear=function(){var a,b=this.getChildren();for(a=0;a<b.length;a++)b[a].clear();this.clearSelf()},StructureNode.prototype.clearSelf=function(){this.setActivityId(0),this.m_previousState=null,this.m_state=null,this.m_numberDocumented=0},StructureHtml.prototype.getHtml=function(){return this.m_html},StructureHtml.prototype.append=function(a){return this.m_html+=a,this},StructureOrganizer.prototype=new StructureNode,StructureOrganizer.prototype.constructor=StructureNode,StructureOrganizer.prototype.setIsRendered=function(a){if("boolean"!=typeof a)throw new Error("StructureOrganizer.prototype.setIsRendered expects a boolean.");return this.m_rendered=a,this},StructureOrganizer.prototype.isRendered=function(){return this.m_rendered},StructureOrganizer.prototype.setTemplateRelations=function(a){return this.m_templateRelations=a,this},StructureOrganizer.prototype.getTemplateRelations=function(){return this.m_templateRelations},StructureOrganizer.prototype.setActiveSection=function(a){if(!StructureOrganizer.prototype.isPrototypeOf(a))throw new Error("StructureOrganizer.prototype.setActiveSection expects a jQuery element.");return this.m_activeSection=a,this},StructureOrganizer.prototype.getActiveSection=function(){return this.m_activeSection},StructureOrganizer.prototype.isMultiSection=function(){return this.m_isMultiSection},StructureOrganizer.prototype.setIsMultiSection=function(a){if("boolean"!=typeof a)throw new Error("StructureOrganizer.prototype.setIsMultiSection expects a boolean.");return this.m_isMultiSection=a,this},StructureOrganizer.prototype.isPriorityEnabled=function(){return this.m_isPriorityEnabled},StructureOrganizer.prototype.setIsPriorityEnabled=function(a){if("boolean"!=typeof a)throw new Error("StructureOrganizer.prototype.setIsPriorityEnabled expects a boolean.");this.m_isPriorityEnabled=a},StructureOrganizer.prototype.setOnDirtyChangeCallback=function(a){if("function"!=typeof a)throw new Error("Attempted to call StructureOrganizer.prototype.setOnDirtyChangeCallback with invalid parameter.");return this.m_onDirtyChangeCallback=a,this},StructureOrganizer.prototype.notifyDirty=function(a){var b=this.getParent();b&&b.notifyDirty(a),b||(a.isDirty()?this.addNodeToDirtyList(a):this.removeNodeFromDirtyList(a),this.updateDirty())},StructureOrganizer.prototype.resetDirty=function(){StructureNode.prototype.resetDirty.call(this);var a=this.getDirtyNodeList();for(var b in a)a.hasOwnProperty(b)&&this.m_lookup[b].resetDirty();this.m_dirtyNodeList={}},StructureOrganizer.prototype.getDirtyNodeList=function(){return this.m_dirtyNodeList||(this.m_dirtyNodeList={}),this.m_dirtyNodeList},StructureOrganizer.prototype.removeNodeFromDirtyList=function(a){this.getDirtyNodeList()[a.getId()]=!1},StructureOrganizer.prototype.addNodeToDirtyList=function(a){this.getDirtyNodeList()[a.getId()]=!0},StructureOrganizer.prototype.getRootElement=function(){return this.m_rootElement&&this.m_rootElement.length||(this.m_isMultiSection?this.m_rootElement=$("#"+this.getNamespace()+"\\:parentOrganizer\\:ROOT\\:"+this.getId()):this.m_rootElement=$("#"+this.getNamespace()+"\\:organizer\\:ROOT\\:"+this.getId())),this.m_rootElement},StructureOrganizer.prototype.getResizeFunction=function(){return this.m_resizeFunction},StructureOrganizer.prototype.setResizeFunction=function(a){if("function"!=typeof a)throw new Error("Called setResizeFunction on StructureOrganizer with invalid parameter resizeFunction");return this.m_resizeFunction=a,this},StructureOrganizer.prototype.getNavigatorElement=function(){return this.m_navigatorElement||(this.m_navigatorElement=$("#"+this.getNamespace()+"\\:navigatorPanel\\:"+this.getId())),this.m_navigatorElement},StructureOrganizer.prototype.navigateToNode=function(a){for(var b="",c=JSON.parse(a),d=0;d<c.length;d++){var e=c[d];e.label?b=b+"label:"+e.label:e.ocid&&(b=b+", ocid:"+e.ocid)}var f=this.findNode(this,this.m_ocid,b);this.goToNode(f,!0,!0)},StructureOrganizer.prototype.goToNode=function(a,b,c){var d,e,f,g,h,i,j=null;return a?(j=a.getParentSectionNode(),j&&StructureOrganizer.prototype.isPrototypeOf(j)?(this.isMultiSection()&&this.getActiveSection()!==j&&$("#"+this.getNamespace()+"\\:tab\\:"+j.getId()).click(),a.isCurrentlyDisplayed()||a.displayNode(),h=j.getContentElement(),i=this.findRenderedRootHighlightElement(a),void(i&&i.length&&(b&&(i.addClass("highlight-navigation"),this.m_previousHighlightedNode=i),d=h.offset().top,e=i.offset().top,f=e+i.height(),g=h.height()||null,!c&&f-d>0&&f-d<=g||h.scrollTop(e-d+h.scrollTop()-(g/2-i.height()/2))))):void logger.logWarning("StructureOrganizer.prototype.navigateToNode: unable to find a section node that is parent to the node that was navigated to.")):void logger.logWarning("StructureOrganizer.prototype.navigateToNode: unable to find the specified node")},StructureOrganizer.prototype.findNode=function(a,b,c){if(c===b)return a;for(var d=0;d<a.getChildren().length;d++){var e,f=a.m_children[d];if(f.inNavigationStructureTree()){var g=b+"label:"+f.m_title,h=f.m_ocid?b+", ocid:"+f.m_ocid:b;e=this.findNode(f,"groupbys"===f.m_type||"subgroupbys"===f.m_type||"subsections"===f.m_type?g:h,c)}else e=this.findNode(f,b,c);if(e)return e}return null},StructureOrganizer.prototype.findRenderedRootHighlightElement=function(a){if(a.getShouldRender())return a.getHighlightElement();var b=this.findRenderedRootHighlightElement(a.getParent());return b?b:null},StructureOrganizer.prototype.clearHighlighter=function(){var a=this.m_previousHighlightedNode;a&&a.removeClass("highlight-navigation")},StructureOrganizer.prototype.resize=function(){this.m_resizeFunction&&this.m_resizeFunction({rootElement:this.getRootElement(),navigatorElement:this.getNavigatorElement(),contentElement:this.getContentElement()})},StructureOrganizer.prototype.getContentElement=function(){return this.m_contentElement||(this.m_contentElement=$("#"+this.getNamespace()+"\\:organizer\\:CONTENT\\:"+this.getId())),this.m_contentElement},StructureOrganizer.prototype.getNavigator=function(){return this.m_navigator},StructureOrganizer.prototype.setNavigator=function(a){if(!Navigator.prototype.isPrototypeOf(a))throw new Error("Attempted to call StructureOrganizer.prototype.setNavigator with invalid parameter.");return this.m_navigator=a,this},StructureOrganizer.prototype.checkIsDirty=function(){var a=this.getDirtyNodeList();for(var b in a)if(a.hasOwnProperty(b)&&a[b])return!0;return!1},StructureOrganizer.prototype.updateDirty=function(){var a=this.m_dirty;this.m_dirty=this.checkIsDirty(),a!==this.m_dirty&&this.m_onDirtyChangeCallback&&this.m_onDirtyChangeCallback(this.m_dirty),this.m_previousHighlightedNode&&this.clearHighlighter()},StructureOrganizer.prototype.getTemplateIds=function(){return this.m_templateIds},StructureOrganizer.prototype.setTemplateIds=function(a){if(!Array.prototype.isPrototypeOf(a))throw new Error("Attempted to call StructureOrganizer.prototype.setTemplateIds with invalid parameter");return this.m_templateIds=a,this},StructureOrganizer.prototype.getReferenceSectionId=function(){return this.m_referenceSectionId},StructureOrganizer.prototype.setReferenceSectionId=function(a){if("number"!=typeof a)throw new Error("Attempted to call StructureOrganizer.prototype.setReferenceSectionId with invalid parameter");return this.m_referenceSectionId=a,this},StructureOrganizer.prototype.parseIdForLookup=function(a){return a.split(":")[3]},StructureOrganizer.prototype.addTermToLookup=function(a){this.getLookup()[a.getId()]=a},StructureOrganizer.prototype.getLookup=function(){return this.m_lookup||(this.m_lookup={}),this.m_lookup},StructureOrganizer.prototype.render=function(a){var b=this.getChildren(),c=b.length,d=this.m_namespace,e=null,f="",g="",h=this.getId();if(this.m_isMultiSection){a.append("<div id='"+d+":parentOrganizer:ROOT:"+this.getId()+"' class='structure-organizer-parent structure-multi-section'>"),a.append("<div id='"+d+"StructureTabParent' class='structure-tab-parent'>"),a.append("<div id='"+d+"StructureTabBlock' class='structure-tab-block'>"),a.append("<div id='"+d+"StructureTabGroupWrapper' class='structure-tab-wrapper'>"),a.append("<ul id='"+d+"StructureTabGroup' class='structure-tab-group'>");for(var i=0;i<c;i++)e=b[i],f=e.getId(),a.append("<li class='structure-tab'><span id='"+d+":tab:"+f+"' data-lookup='"+f+"' class='structure-tab-display"+(0===i?" structure-tab-active":"")+"' title='"+e.getTitle().replace(":","")+"'>"+e.getTitle().replace(":","")+"</span></li>");a.append("</ul></div><li id='"+d+"StructureTabMenuButton' class='structure-tab structure-add-tab'><span>&nbsp;</span></li></div><div class='structure-tab-bottom'></div></div>"),a.append("<div id='"+d+"StructureTabContents' class='structure-tab-contents'>");for(var i=0;i<c;i++)i>0&&(g="style='display:none;'"),a.append("<div id='"+d+":tabContent:"+b[i].getId()+"' class='structure-tab-content' "+g+">"),0===i&&(b[i].render(a,!0),b[i].setIsRendered(!0)),a.append("</div>");a.append("</div>"),a.append("</div>")}else{a.append("<div id='"+d+":organizer:ROOT:"+h+"' class='structure-organizer' data-lookup='"+h+"'><div id='"+d+":navigatorPanel:"+h+"' class='structure-navigator-panel'><div class='structure-navigator-label'>"+i18n.discernabu.mpage_structured_documentation.NAVIGATION+"</div>"+this.getNavigator().render()+"</div><div id='"+d+":organizer:CONTENT:"+h+"' class='structure-body structure-section-body' data-lookup='"+h+"'>");for(var i=0;i<c;i++)b[i].render(a,!0);a.append("<div id='"+d+":structureHeightAdjust:"+h+"' class='structure-height-adjust'></div></div></div>")}return a.getHtml()},StructureOrganizer.prototype.renderHtml=function(){var a=new StructureHtml;return this.render(a),a.getHtml()},StructureOrganizer.prototype.finalize=function(){function a(){g=e.findGroupInView(),g&&e.updateActiveGroup(g)}var b=(new Date).getTime(),c=(new Date).getTime(),d=150,e=this,f=null,g=null;if(this.m_isMultiSection)for(var h=this.getChildren(),i=h.length,j=0;j<i;j++)h[j].isRendered()&&h[j].finalize();else $("#"+this.getNamespace()+"\\:organizer\\:CONTENT\\:"+this.getId()).on("scroll",function(){b=(new Date).getTime(),f&&clearTimeout(f),f=setTimeout(function(){c=b,a()},200),b-c>=d&&(c=b,a())}),this.getNavigator().finalize(),this.adjustContentHeight(),this.getChildren().length&&this.updateActiveGroup(this.getChildren()[0]),this.performNodePostProcessing()},StructureOrganizer.prototype.performNodePostProcessing=function(){var a=function(b){b&&b.postProcessing();for(var c=b.getChildren(),d=c.length,e=0;e<d;e++)a(c[e])};a(this)},StructureOrganizer.prototype.adjustContentHeight=function(){var a=this.getChildren();if(a.length){var b=this.getContentElement();if(b&&b.length){var c=b[0],d=c.offsetHeight,e=$("#"+this.getNamespace()+"\\:structureHeightAdjust\\:"+this.getId()),f=a[a.length-1],g=f.getRootElement().height(),h=12;e.height(Math.max(0,d-g-h))}}},StructureOrganizer.prototype.updateActiveGroup=function(a){this.m_navigator.updateActiveNavigation(this.getNamespace()+":structureNavigation:"+a.getId())},StructureOrganizer.prototype.findGroupInView=function(){function a(a,b,c){return c>=a&&c<=b}function b(a,b,c,d){return c<=a&&d>=b-12}function c(c){return d=g[c],e=d.getRootElement(),f=e.position().top,a(n.midpoint,n.bottom,f)?g[o-1]:a(n.top,n.midpoint,f)?d:b(n.top,n.bottom,f,f+e.height())?d:null}for(var d=null,e=null,f=null,g=this.getChildren(),h=g.length,i=this.getContentElement(),j=i[0],k=j.offsetHeight,l=i.position().top,m=(j.scrollHeight,j.scrollTop,null),n={top:l,midpoint:l+k/2,bottom:l+k},o=0;o<h;o++)if(m=c(o))return m;return null},StructureOrganizer.prototype.convertToJSON=function(){var a=[];a.push('"section_act": {');var b=[];b.push('"dd_section_id": '+this.getActivityId()+".0"),b.push('"dd_sref_section_id": '+this.getReferenceSectionId()+".0");for(var c=this.getTemplateRelations()||[],d=[],e=0;e<c.length;e++)d.push('{"dd_sref_chf_cmplnt_crit_id": '+c[e].dd_sref_chf_cmplnt_crit_id+'.0,"dd_sref_templ_instance_ident": "'+c[e].dd_sref_templ_instance_ident+'","parent_entity_id": '+c[e].parent_entity_id+'.0,"parent_entity_name": "'+c[e].parent_entity_name+'"}');return b.push('"template_rltns": ['+d.join(",")+"]"),this.addChildrenJSON(b),"subsections"===this.getType()?(b.push('"parent_section_id": '+this.getParent().getActivityId()+".0"),"{"+b.join(",")+"}"):(a.push(b.join(",")),a.push("}"),a.join(""))},StructureGroup.prototype=new StructureNode,StructureGroup.prototype.constructor=StructureNode,StructureGroup.prototype.getRootElement=function(){return this.m_rootElement||(this.m_rootElement=$("#"+this.getNamespace()+"\\:group\\:ROOT\\:"+this.getId())),this.m_rootElement},StructureGroup.prototype.convertToJSON=function(){var a=[];return a.push('"dd_groupby_id": '+this.getActivityId()+".0"),a.push('"label": "'+this.getTitle()+'"'),a.push('"truth_state_mean": "T"'),this.addChildrenJSON(a),"{"+a.join(",")+"}"},StructureGroup.prototype.notifyStateChange=function(a){StructureNode.prototype.notifyStateChange.call(this,a);var b=$("#"+this.getNamespace()+"\\:structureNavigation\\:"+this.getId());"groupbys"===this.getType()&&(this.m_numberDocumented&&b.addClass("navigation-documented")||b.removeClass("navigation-documented"))},StructureGroup.prototype.refresh=function(){this.getState()&&this.getState().getValue()?$("#"+this.getNamespace()+"\\:group\\:ROOT\\:"+this.getId()).addClass("documented"):$("#"+this.getNamespace()+"\\:group\\:ROOT\\:"+this.getId()).removeClass("documented")},StructureGroup.prototype.getDefaultRenderChildren=function(){for(var a=this.getChildren(),b=a.length,c=[],d=null,e=0;e<b;e++)d=a[e],d.isDefaultDisplayed()&&c.push(d);return c},StructureGroup.prototype.renderChildren=function(a,b){var c=this.getDefaultRenderChildren(),d=c.length;if(b&&d>1)for(var e=3,f=d/e>=1?e:d,g=Math.floor(d/f),h=d%f,i=0,j=100/f+"%",k=0;k<f;k++){a.append("<div class='structure-column' style='width: "+j+";'>");for(var l=h?g+1:g,m=0;m<l;m++){var n=c[m+i];n.render(a,!1)}i+=m,h=Math.max(0,h-1),a.append("</div>")}else for(var k=0;k<d;k++)c[k].render(a,b)},StructureGroup.prototype.render=function(a,b){a.append("<div id='"+this.getNamespace()+":group:ROOT:"+this.getId()+"' class='structure-group group expanded'><div class='structure-group-header'><div class='structure-group-title-wrapper'><span class='structure-group-title'>"+this.getTitle().replace(":","")+"</span></div></div><div class='structure-group-children'>"),this.renderChildren(a,b),a.append("</div></div>")},StructureGroup.prototype.isExpanded=function(){var a=this.getRootElement();return a.hasClass("expanded")},StructureGroup.prototype.toggleExpand=function(){var a=this.getRootElement(),b=a.hasClass("expanded")?{add:"collapsed",remove:"expanded"}:{add:"expanded",remove:"collapsed"};a.addClass(b.add).removeClass(b.remove),this.onToggleExpand()},StructureGroup.prototype.onToggleExpand=function(){},StructureItemGroup.prototype=new StructureGroup,StructureItemGroup.prototype.constructor=StructureGroup,StructureItemGroup.prototype.convertToJSON=function(){var a=[];return a.push('"dd_item_id": '+this.getActivityId()+".0"),a.push('"ocid": "'+this.getOCID()+'"'),a.push('"truth_state_mean": "T"'),this.addChildrenJSON(a),"{"+a.join(",")+"}"},StructureItemGroup.prototype.getRootElement=function(){return this.m_rootElement&&this.m_rootElement.length||(this.m_rootElement=$("#"+this.getNamespace()+"\\:group\\:ROOT\\:"+this.getId())),this.m_rootElement},StructureItemGroup.prototype.render=function(a,b){this.getShouldRender()&&a.append("<div id='"+this.getNamespace()+":group:ROOT:"+this.getId()+"' class='structure-group item expanded'><div class='structure-group-header item'><span class='structure-component-toggle'></span><span class='structure-group-title'>"+this.getTitle().replace(":","")+"</span></div><div class='structure-group-children'>"),this.renderChildren(a,b),this.getShouldRender()&&a.append("</div></div>")},StructureSubGroup.prototype=new StructureGroup,StructureSubGroup.prototype.constructor=StructureGroup,StructureSubGroup.prototype.convertToJSON=function(){var a=[];return a.push('"dd_sgroupby_id": '+this.getActivityId()+".0"),a.push('"label": "'+this.getTitle()+'"'),a.push('"truth_state_mean": "T"'),this.addChildrenJSON(a),"{"+a.join(",")+"}"},StructureSubGroup.prototype.getRootElement=function(){return this.m_rootElement||(this.m_rootElement=$("#"+this.getNamespace()+"\\:subgroup\\:ROOT\\:"+this.getId())),this.m_rootElement},StructureSubGroup.prototype.render=function(a,b){this.getShouldRender()&&a.append("<div id='"+this.getNamespace()+":subgroup:ROOT:"+this.getId()+"' class='structure-group sub-group expanded'><div class='structure-group-header'><span class='structure-group-title sub-group'>"+this.getTitle().replace(":","")+"</span></div><div class='structure-group-children'>"),this.renderChildren(a,b),this.getShouldRender()&&a.append("</div></div>")},StructureTermGroup.prototype=new StructureGroup,StructureTermGroup.prototype.constructor=StructureGroup,StructureTermGroup.prototype.getActiveTerm=function(){return this.m_activeTerm},StructureTermGroup.prototype.setActiveTerm=function(a){if(!StructureTerm.prototype.isPrototypeOf(a))throw new Error("Called setActiveTerm on StructureTermGroup with invalid activeTerm parameter.");return this.m_activeTerm=a,this},StructureTermGroup.prototype.getPreviousActiveTerm=function(){return this.m_previousActiveTerm},StructureTermGroup.prototype.setPreviousActiveTerm=function(a){if(!StructureTerm.prototype.isPrototypeOf(a))throw new Error("Called setPreviousActiveTerm on StructureTermGroup with invalid activeTerm parameter.");return this.m_previousActiveTerm=a,this},StructureTermGroup.prototype.convertToJSON=function(){var a=[];return a.push('"dd_attribute_id": '+this.getActivityId()+".0"),a.push('"ocid": "'+this.getOCID()+'"'),a.push('"truth_state_mean": "T"'),this.addDescendentJSON(a),"{"+a.join(",")+"}"},StructureTermGroup.prototype.isShowMore=function(){return this.m_isShowMore},StructureTermGroup.prototype.setIsShowMore=function(a){if("boolean"!=typeof a)throw new Error("Called setIsShowMore on StructureNode with invalid showMore paramater");this.m_isShowMore=a},StructureTermGroup.prototype.hasShownMore=function(){return this.m_hasShownMore},StructureTermGroup.prototype.setHasShownMore=function(a){if("boolean"!=typeof a)throw new Error("Called setHasShownMore on StructureNode with invalid hasShownMore paramater");this.m_hasShownMore=a},StructureTermGroup.prototype.getChildrenWithPriority=function(a){var b=this.getChildren(),c=[];return c=$.grep(b,function(b,c){return b.getPriority&&b.getPriority()===a})},StructureTermGroup.prototype.notifyStateChange=function(a){StructureNode.prototype.notifyStateChange.call(this,a),this.handleTermActivity(a)},StructureTermGroup.prototype.handleTermActivity=function(a){this.performNoneTermUpdates(a)},StructureTermGroup.prototype.performNoneTermUpdates=function(a){var b=this.getNoneTerm(),c=null,d=null,e=this,f=null;if(b){if(f=b.getState()&&b.getState().getValue(),a!==b&&a.getState()&&a.getState().getValue()&&f)b.deactivate();else if(f)if(c=this.getActiveFreeTextTerm(),c.length){var d=c[0].getState().getValue();d&&(this.setPreviousActiveTerm(this.m_activeTerm),this.launchRemoveFreeTextWarning(function(){e.deactivateTerms()}))}else this.deactivateTerms();this.m_activeTerm=a}},StructureTermGroup.prototype.getUnshownDocumentedCount=function(){for(var a=this.getChildrenWithPriority(2),b=a.length,c=0,d=0;d<b;d++){var e=a[d];e.getChildren().length?c+=e.getNumberOfDocumentedChildren():e.getState()&&e.getState().getValue()&&c++}return c},StructureTermGroup.prototype.updateUnshownDocumentedCount=function(){var a=this.getDocumentedCountContainer(),b=this.getUnshownDocumentedCount();b&&!this.isShowMore()?(a.html(b),a.addClass("shown")):(a.empty(),a.removeClass("shown"))},StructureTermGroup.prototype.getDocumentedCountContainer=function(){return this.m_documentedCountContainer&&this.m_documentedCountContainer.length||(this.m_documentedCountContainer=$("#documentedCountContainer"+this.getId())),this.m_documentedCountContainer},StructureTermGroup.prototype.getActiveFreeTextTerm=function(a){
var b=this.filterTerms(function(a){return!(!FreeTextStructureTerm.prototype.isPrototypeOf(a)||!a.getState())&&null!==a.getState().getValue()});return b},StructureTermGroup.prototype.getNoneTerm=function(a){return this.m_noneTerm||(this.m_noneTerm=this.filterTerms(function(a){return NoneStructureTerm.prototype.isPrototypeOf(a)})[0]),this.m_noneTerm},StructureTermGroup.prototype.deactivateTerms=function(){for(var a=this.filterTerms(function(a){return!(NoneStructureTerm.prototype.isPrototypeOf(a)||!a.getState())&&null!==a.getState().getValue()}),b=0;b<a.length;b++){var c=a[b];c.deactivate()}},StructureTermGroup.prototype.filterTerms=function(a){if("function"!=typeof a)throw new Error("Called filterTerms on the StructureTermGroup with an invalid callback function");for(var b=[],c=this.getAllDescendents([]),d=0;d<c.length;d++)a(c[d])&&b.push(c[d]);return b},StructureTermGroup.prototype.launchRemoveFreeTextWarning=function(a){if("function"!=typeof a)throw new Error("Called launchRemoveFreeTextWarning on the StructureTermGroup with an invalid callback function");var b=this,c="removeFreeText"+this.getId(),d=null,e=null,f=MP_ModalDialog.retrieveModalDialogObject(c);f||(f=new ModalDialog(c),f.setShowCloseIcon(!1),f.setHeaderTitle(i18n.discernabu.mpage_structured_documentation.REMOVE_FREE_TEXT_HEADER),f.setLeftMarginPercentage(35).setRightMarginPercentage(35).setTopMarginPercentage(20).setIsBodySizeFixed(!1).setIsFooterAlwaysShown(!0),e=new ModalButton("removeModal"),e.setFocusInd(!0).setCloseOnClick(!0),e.setOnClickFunction(a),e.setText(i18n.discernabu.mpage_structured_documentation.REMOVE),f.addFooterButton(e),d=new ModalButton("cnlModal"),d.setText(i18n.discernabu.mpage_structured_documentation.CANCEL),d.setOnClickFunction(function(){b.cancelFreeTextBtnCallback()}),f.addFooterButton(d),f.setBodyDataFunction(function(a){a.setBodyHTML("<div class='structure-remove-free-text-warning'><span>"+i18n.discernabu.mpage_structured_documentation.REMOVE_FREE_TEXT_WARNING+"</span></div>")}),MP_ModalDialog.addModalDialogObject(f)),MP_ModalDialog.showModalDialog(c)},StructureTermGroup.prototype.cancelFreeTextBtnCallback=function(){var a="removeFreeText"+this.getId();this.getActiveTerm().jumpToState(0),this.setActiveTerm(this.getPreviousActiveTerm()),MP_ModalDialog.closeModalDialog(a),MP_ModalDialog.deleteModalDialogObject(a)},StructureTermGroup.prototype.render=function(a,b){this.getShouldRender()&&a.append("<div id='"+this.getNamespace()+":group:ROOT:"+this.getId()+"' class='structure-group item expanded'><div class='structure-group-header item'><span class='structure-group-title'>"+this.getTitle()+"</span></div><div class='structure-group-children'>"),this.renderChildren(a,b),this.getShouldRender()&&(a.append("</div>"),this.renderShowMore(a),a.append("</div>"))},StructureTermGroup.prototype.renderShowMore=function(a){var b=i18n.discernabu.mpage_structured_documentation,c=this.getOrganizer();if(c.isPriorityEnabled()){var d=b.SHOW_MORE;this.getChildrenWithPriority(2).length&&a.append("<div class='show-more-link-container'><a id='showMoreLink"+this.getId()+"' class='show-more-link'>"+d+"</a><div id='documentedCountContainer"+this.getId()+"' class='documented-count'></div></div>")}else this.setIsShowMore(!0)},StructureTermGroup.prototype.getUnprioritizedContentContainer=function(){return this.m_unprioritizedContent&&this.m_unprioritizedContent.length||(this.m_unprioritizedContent=$("#unprioritizedContent"+this.getId())),this.m_unprioritizedContent},StructureTermGroup.prototype.getShowMoreLinkContainer=function(){return this.m_showMoreLinkContainer&&this.m_showMoreLinkContainer.length||(this.m_showMoreLinkContainer=$("#showMoreLink"+this.getId())),this.m_showMoreLinkContainer},StructureTermGroup.prototype.showMore=function(){var a=i18n.discernabu.mpage_structured_documentation,b=$(this.getRootElement()),c=this.getUnprioritizedContentContainer(),d=this.getDefaultRenderChildren(),e=d.length,f=e?d[e-1]:null,g=null;if(f&&(g=$(f.getRootElement())),b.length){if(this.hasShownMore())c.show();else{var h=new StructureHtml;this.renderUnprioritizedSectionHtml(h),g&&g.length?g.after(h.getHtml()):b.find(".structure-group-children").prepend(h.getHtml()),this.setHasShownMore(!0)}this.getShowMoreLinkContainer().text(a.SHOW_LESS),this.setIsShowMore(!0)}},StructureTermGroup.prototype.showLess=function(){var a=i18n.discernabu.mpage_structured_documentation,b=this.getUnprioritizedContentContainer();b.hide(),this.getShowMoreLinkContainer().text(a.SHOW_MORE),this.setIsShowMore(!1);var c=this.getOrganizer();c.goToNode(this,!1)},StructureTermGroup.prototype.toggleShowMore=function(){this.isShowMore()?this.showLess():this.showMore(),this.updateUnshownDocumentedCount()},StructureTermGroup.prototype.renderUnprioritizedSectionHtml=function(a){var b=this.getChildrenWithPriority(2),c=b.length,d="";if(c!==this.getChildren().length&&(d="structured-has-shown-terms"),c){a.append("<div id='unprioritizedContent"+this.getId()+"' class='unprioritized-terms "+d+"'>");for(var e=0;e<c;e++)b[e].render(a,!1);a.append("</div>")}},SingleStructureTermGroup.prototype=new StructureTermGroup,SingleStructureTermGroup.prototype.constructor=StructureTermGroup,SingleStructureTermGroup.prototype.handleTermActivity=function(a){StructureTermGroup.prototype.handleTermActivity.call(this,a);var b=a.getState().getValue(),c=this,d=this.getActiveFreeTextTerm();b&&(a!==this.m_activeTerm&&this.m_activeTerm&&(d.length&&d[0]===this.m_activeTerm?(this.setPreviousActiveTerm(this.m_activeTerm),c.launchRemoveFreeTextWarning(function(){d[0].deactivate()})):this.m_activeTerm.deactivate()),this.m_activeTerm=a)},SingleStructureTermGroup.prototype.clearSelf=function(){StructureTermGroup.prototype.clearSelf.call(this),this.m_activeTerm=null},MultiStructureTermGroup.prototype=new StructureTermGroup,MultiStructureTermGroup.prototype.constructor=StructureTermGroup,YesNoStructureTermGroup.prototype=new StructureTermGroup,YesNoStructureTermGroup.prototype.constructor=StructureTermGroup,TableStructureTermGroup.prototype=new SingleStructureTermGroup,TableStructureTermGroup.prototype.constructor=TableStructureTermGroup;JSONStructureOrganizerBuilder.extendClassMethods(TableStructureTermGroup,CycleStructureTerm,["setCaption","getCaption","addState","getCurrentState","setCurrentState","getStates","cycleState","jumpToState","deactivate","refresh","getComment","setComment","setSavedComment","buildTextArea","displayComment","checkIsDirty","getRootElement","getSavedComment","resetDirty","setPriority","getPriority","setUIValue","getUIValue","displayNode","isDefaultDisplayed","isCurrentlyDisplayed"]);TableStructureTermGroup.prototype.checkIsDirty=function(){return!1},TableStructureTermGroup.prototype.convertToJSON=function(){},TableStructureTermGroup.prototype.render=function(a){var b="",c="",d=this.m_state?this.m_state.getCSSClass():"";this.getComment()&&(c="<div class='structure-term-comment-wrapper'>"+this.buildTextArea()+"</div>",b="comment "),a.append("<div id='"+this.getNamespace()+":term:ROOT:"+this.getId()+"' class='structure-term-item table-group-term "+b+d+"' title='"+this.getCaption()+"'><div class='structure-term-info-wrapper'><span class='structure-term-title'>"+this.getTitle()+"</span><span class='structure-comment'>&nbsp;</span></div><div class='structure-table-group-terms'>"),this.renderChildren(a,!1),a.append("</div>"+c+"</div>")},TableStructureTermGroup.prototype.handleTermActivity=function(a){SingleStructureTermGroup.prototype.handleTermActivity.call(this,a);var b=this.getActiveTerm(),c=b?b.getState():null;c?this.updateState(c):this.jumpToState(0),this.refresh()},TableStructureTermGroup.prototype.notifyStateChange=function(a){StructureTermGroup.prototype.notifyStateChange.call(this,a),this.getParent()&&this.getParent().notifyStateChange(a)},TableStructureTermGroup.prototype.updateState=function(a){var b=this.getState();a!==b&&(this.setState(a),this.setPreviousState(b)),this.refresh()},TableStructureTermGroup.prototype.clearSelf=function(){SingleStructureTermGroup.prototype.clearSelf.call(this),CycleStructureTerm.prototype.clearSelf.call(this)},ExpandStructureTermGroup.prototype=new StructureTermGroup,ExpandStructureTermGroup.prototype.constructor=ExpandStructureTermGroup,JSONStructureOrganizerBuilder.extendClassMethods(ExpandStructureTermGroup,CycleStructureTerm,["setCaption","getCaption","addState","getCurrentState","setCurrentState","getStates","cycleState","jumpToState","deactivate","refresh","checkIsDirty","getRootElement","resetDirty","setPriority","getPriority","displayNode","isDefaultDisplayed","isCurrentlyDisplayed","setUIValue","getUIValue","postProcessing"]),JSONStructureOrganizerBuilder.extendClassMethods(ExpandStructureTermGroup,TableStructureTermGroup,["convertToJSON","updateState","notifyStateChange","checkIsDirty"]),ExpandStructureTermGroup.prototype.render=function(a){a.append("<div class ='structure-group expand-group collapsed' id='"+this.getNamespace()+":term:ROOT:"+this.getId()+"'><div class ='structure-group-header'> <span class='structure-component-toggle'></span><span class='structure-group-title' title ='"+this.getCaption()+"'>"+this.getTitle()+"</span><div id='documentedExpandCountContainer"+this.getId()+"' class='documented-count'></div></div><div class='structure-group-children'>"),this.renderChildren(a,!1),this.getShouldRender()&&this.getDefaultRenderChildren()!==this.getChildren()&&this.renderShowMore(a),a.append("</div></div>")},ExpandStructureTermGroup.prototype.getDefaultRenderChildren=function(){var a=StructureGroup.prototype.getDefaultRenderChildren.call(this);return a.length||(a=this.getChildren(),this.setIsShowMore(!0)),a},ExpandStructureTermGroup.prototype.updateExpandDocumentedCount=function(){var a=this.getDocumentedExpandCountContainer(),b=this.getNumberOfDocumentedChildren();this.isExpanded()||!b?(a.empty(),a.removeClass("shown")):(a.html(b),a.addClass("shown"))},ExpandStructureTermGroup.prototype.getDocumentedExpandCountContainer=function(){return this.m_documentedExpandCountContainer&&this.m_documentedExpandCountContainer.length||(this.m_documentedExpandCountContainer=$("#documentedExpandCountContainer"+this.getId())),this.m_documentedExpandCountContainer},ExpandStructureTermGroup.prototype.onToggleExpand=function(){this.updateExpandDocumentedCount()},TermState.prototype.getValue=function(){return this.m_value},TermState.prototype.setValue=function(a){return this.m_value=a,this},TermState.prototype.getCSSClass=function(){return this.m_cssClass},TermState.prototype.setCSSClass=function(a){if("string"!=typeof a)throw new Error("Attempted to call TermState.prototype.setCSSClass with invalid parameter.");return this.m_cssClass=a,this},TermState.prototype.getKey=function(){return this.m_key},TermState.prototype.setKey=function(a){return this.m_key=a,this},TermState.prototype.getData=function(){return this.m_data},TermState.prototype.setData=function(a){return this.m_data=a,this},TermState.prototype.addData=function(a,b){return this.m_data[a]=b,this},TermState.prototype.getDataValue=function(a){return this.m_data[a]||(this.m_data[a]={}),this.m_data[a]},StructureTerm.prototype=new StructureNode,StructureTerm.prototype.constructor=StructureNode,StructureTerm.prototype.getComment=function(){return this.m_comment},StructureTerm.prototype.setComment=function(a){if("string"!=typeof a)throw new Error("Attempted to call StructureTerm.prototype.setComment with invalid parameter.");return this.m_comment=a,this},StructureTerm.prototype.getPriority=function(){return this.m_priority},StructureTerm.prototype.isDefaultDisplayed=function(){var a=2,b=this.getPriority(),c=this.getOrganizer();return!c||!c.isPriorityEnabled()||b!==a},StructureTerm.prototype.isCurrentlyDisplayed=function(){var a=this.getParent(),b=2,c=this.getPriority();return!(!(!StructureTermGroup.prototype.isPrototypeOf(a)||a.isCurrentlyDisplayed()&&a.isShowMore()||c!==b)||ExpandStructureTermGroup.prototype.isPrototypeOf(a)&&!a.isExpanded())},StructureTerm.prototype.displayNode=function(){var a=this.getParent();StructureTermGroup.prototype.isPrototypeOf(a)&&!a.isShowMore()&&a.toggleShowMore(),a.isCurrentlyDisplayed()||a.displayNode(),ExpandStructureTermGroup.prototype.isPrototypeOf(a)&&!a.isExpanded()&&a.toggleExpand()},StructureTerm.prototype.postProcessing=function(){var a=this;a.getState()&&a.getState().getValue()&&!a.isCurrentlyDisplayed()&&a.displayNode()},StructureTerm.prototype.setPriority=function(a){if("number"!=typeof a)throw new Error("Attempted to call StructureTerm.prototype.setPriority with invalid paramater.");this.m_priority=a},StructureTerm.prototype.setUIValue=function(a){this.m_uiValue=a},StructureTerm.prototype.getUIValue=function(){return this.m_uiValue},StructureTerm.prototype.getSavedComment=function(){return this.m_savedComment},StructureTerm.prototype.setSavedComment=function(a){if("string"!=typeof a)throw new Error("Attempted to call StructureTerm.prototype.setComment with invalid parameter.");return this.m_savedComment=a,this},StructureTerm.prototype.buildTextArea=function(){var a="<textarea id='comment"+this.getNamespace()+this.getId()+"' class='term-textarea textarea-fill' type='text' title='Add Comment' placeholder='Add Comment'>"+this.getComment()+"</textarea>";return a},StructureTerm.prototype.displayComment=function(a){var b=a?this.unescapePlaintextAsHtml(a):a+"";this.setComment(b),this.setSavedComment(b);var c=this.getRootElement(),d=c.children("div.structure-term-comment-wrapper");c.length>0&&d.length<1&&(d="<div class='structure-term-comment-wrapper'>"+this.buildTextArea()+"</div>",c.append(d)),c.addClass("comment")},StructureTerm.prototype.getCaption=function(){return this.m_caption},StructureTerm.prototype.setCaption=function(a){if("string"!=typeof a)throw new Error("Attempted to call StructureTerm.prototype.setCaption with invalid parameter.");return this.m_caption=a,this},StructureTerm.prototype.convertToJSON=function(){var a=this.getComment(),b=[];return b.push('"dd_attr_menu_item_id": '+this.getActivityId()+".0"),b.push('"ocid": "'+this.getOCID()+'"'),b.push('"display_seq": '+this.getDisplayPosition()),b.push('"truth_state_mean": "'+(this.getState().getValue()?"T":"F")+'"'),b.push('"comment": "'+(a?this.escapePlaintextAsHtml(a):a)+'"'),b.push('"comment_format_mean": "XHTML"'),b.push('"value_text": ""'),b.push('"value_text_format_mean": "XHTML"'),b.push('"value_number": 0.0'),"{"+b.join(",")+"}"},StructureTerm.prototype.updateState=function(a){StructureNode.prototype.updateState.call(this,a),this.updateDirty()},StructureTerm.prototype.getRootElement=function(){return this.m_rootElement&&this.m_rootElement.length||(this.m_rootElement=$("#"+this.getNamespace()+"\\:term\\:ROOT\\:"+this.getId())),this.m_rootElement},StructureTerm.prototype.checkIsDirty=function(){return this.getState()!==this.getInitialState()},StructureTerm.prototype.updateDirty=function(){var a=this.m_dirty;this.m_dirty=this.checkIsDirty(),a!==this.m_dirty&&this.getParent().notifyDirty(this)},StructureTerm.prototype.resetDirty=function(){StructureNode.prototype.resetDirty.call(this),this.setInitialState(this.getState())},StructureTerm.prototype.render=function(a){a.append("<div>"+this.getTitle()+"</div>")},StructureTerm.prototype.deactivate=function(){},StructureTerm.prototype.refresh=function(){this.m_state!==this.m_previousState&&$("#"+this.getNamespace()+"\\:term\\:ROOT\\:"+this.getId()).removeClass(this.m_previousState?this.m_previousState.getCSSClass():"").addClass(this.m_state.getCSSClass())},LineStructureTerm.prototype=new StructureTerm,LineStructureTerm.prototype.constructor=StructureTerm,LineStructureTerm.prototype.render=function(a){a.append("<div id='"+this.getNamespace()+":term:ROOT:"+this.getId()+"' class='structure-term-item line-term'></div>")},CycleStructureTerm.prototype=new StructureTerm,CycleStructureTerm.prototype.constructor=StructureTerm,CycleStructureTerm.prototype.getCurrentState=function(){return this.m_currentState},CycleStructureTerm.prototype.setCurrentState=function(a){if("number"!=typeof a)throw new Error("Called setCurrentState on CycleStructureTerm with invalid currentState parameter.");if(a<0||a>=this.m_states.length)throw new Error("Called setCurrentState on CycleStructureTerm with an invalid state index.");return this.m_currentState=a,this},CycleStructureTerm.prototype.addState=function(a){if(!TermState.prototype.isPrototypeOf(a))throw new Error("Called addState on CycleStructureTerm with invalid state parameter.");return this.getStates().push(a),this},CycleStructureTerm.prototype.getStates=function(){return this.m_states||(this.m_states=[]),this.m_states},CycleStructureTerm.prototype.cycleState=function(){this.m_currentState=(this.m_currentState+1)%this.m_states.length,this.updateState(this.m_states[this.m_currentState])},CycleStructureTerm.prototype.jumpToState=function(a){this.m_currentState=a%this.m_states.length,this.updateState(this.m_states[this.m_currentState])},CycleStructureTerm.prototype.deactivate=function(){this.m_currentState=0,this.updateState(this.m_states[this.m_currentState])},CycleStructureTerm.prototype.render=function(a){var b="",c="",d=this.m_state?this.m_state.getCSSClass():"";this.getComment()&&(c="<div class='structure-term-comment-wrapper'>"+this.buildTextArea()+"</div>",b="comment "),a.append("<div id='"+this.getNamespace()+":term:ROOT:"+this.getId()+"' class='structure-term-item cycle-term "+b+d+"' title='"+this.getCaption()+"'><div class='structure-term-info-wrapper'><span class='structure-term-title'>"+this.getTitle()+"</span><span class='structure-comment'>&nbsp;</span></div><div class='structure-documented-icon-area'></div>"+c+"</div>")},CycleStructureTerm.prototype.clearSelf=function(){StructureTerm.prototype.clearSelf.call(this),this.deactivate()},YesNoStructureTerm.prototype=new CycleStructureTerm,YesNoStructureTerm.prototype.constructor=CycleStructureTerm,YesNoStructureTerm.prototype.render=function(a){var b="",c="",d=this.m_state?this.m_state.getCSSClass()+" "+this.getYesNoValue():"";this.getComment()&&(c="<div class='structure-term-comment-wrapper'>"+this.buildTextArea()+"</div>",b="comment "),a.append("<div id='"+this.getNamespace()+":term:ROOT:"+this.getId()+"' class='structure-term-item cycle-term yes-no "+b+d+"' title='"+this.getCaption()+"'><div class='structure-term-info-wrapper'><span class='structure-term-title'>"+this.getTitle()+"</span><span class='structure-comment'>&nbsp;</span></div><div id='"+this.getNamespace()+":term:YES:"+this.getId()+"' class='structure-yes-no-icon structure-yes'>Y</div><div id='"+this.getNamespace()+":term:NO:"+this.getId()+"' class='structure-yes-no-icon structure-no'>N</div>"+c+"</div>")},YesNoStructureTerm.prototype.getYesNoValue=function(){return this.m_state&&null!==this.m_state.getValue()?this.m_state.getValue()?"yes":"no":""},YesNoStructureTerm.prototype.refresh=function(){StructureTerm.prototype.refresh.call(this);var a=$("#"+this.getNamespace()+"\\:term\\:ROOT\\:"+this.getId());this.getState()&&this.getState().getValue()===!0?a.addClass("yes").removeClass("no"):this.getState()&&this.getState().getValue()===!1?a.addClass("no").removeClass("yes"):a.removeClass("yes").removeClass("no")},InputStructureTerm.prototype=new StructureTerm,InputStructureTerm.prototype.constructor=StructureTerm,InputStructureTerm.prototype.getDataType=function(){return this.m_dataType},InputStructureTerm.prototype.setDataType=function(a){if("string"!=typeof a)throw new Error("Called setDataType on InputStructureTerm with invalid dataType parameter.");return this.m_dataType=a,this},InputStructureTerm.prototype.getPreviousValue=function(){return this.m_previousValue},InputStructureTerm.prototype.resetDirty=function(){StructureTerm.prototype.resetDirty.call(this),this.m_previousValue=this.m_currentValue},InputStructureTerm.prototype.checkIsDirty=function(){var a=this.getState()===this.getActiveState(),b=this.getInitialState()===this.getInactiveState(),c=this.getCurrentValue(),d=this.getPreviousValue();return b&&a||!b&&a&&c!==d||!b&&!a},InputStructureTerm.prototype.convertToJSON=function(){var a=this.getCurrentValue(),b=this.getComment(),c=[];return c.push('"dd_attr_menu_item_id": '+this.getActivityId()+".0"),c.push('"ocid": "'+this.getOCID()+'"'),c.push('"display_seq": '+this.getDisplayPosition()),c.push('"truth_state_mean": "'+(this.getState().getValue()?"T":"F")+'"'),c.push('"comment": "'+(b?this.escapePlaintextAsHtml(b):b)+'"'),c.push('"comment_format_mean": "XHTML"'),c.push('"value_text": "'+(a?this.escapePlaintextAsHtml(a):a)+'"'),c.push('"value_text_format_mean": "XHTML"'),"NUMERIC"===this.m_dataType?(a=parseFloat(this.getCurrentValue()),a%1===0&&(a+=".0"),c.push('"value_number": '+a)):c.push('"value_number": 0.0'),"{"+c.join(",")+"}"},InputStructureTerm.prototype.getCurrentValue=function(){return this.m_currentValue},InputStructureTerm.prototype.update=function(){this.validate()?(this.m_isValid=!0,""!==this.m_currentValue?(this.getActiveState().addData("value",this.m_currentValue),this.updateState(this.m_activeState)):this.updateState(this.m_inactiveState)):(this.m_isValid=!1,this.updateState(this.m_inactiveState))},InputStructureTerm.prototype.refresh=function(){StructureTerm.prototype.refresh.call(this);var a=$("#"+this.getNamespace()+"\\:term\\:INPUT\\:"+this.getId());this.getCurrentValue()!==a.val()&&a.val(this.getCurrentValue()),this.m_isValid?$("#"+this.getNamespace()+"\\:term\\:ROOT\\:"+this.getId()).removeClass("invalid"):$("#"+this.getNamespace()+"\\:term\\:ROOT\\:"+this.getId()).addClass("invalid")},InputStructureTerm.prototype.setCurrentValue=function(a){if("string"!=typeof a)throw new Error("Called setCurrentValue on InputStructureTerm with invalid type: expected {String}");return this.m_currentValue=a,this},InputStructureTerm.prototype.deactivate=function(){this.setCurrentValue(""),this.updateState(this.m_inactiveState)},InputStructureTerm.prototype.clearSelf=function(){StructureTerm.prototype.clearSelf.call(this),this.deactivate()},InputStructureTerm.prototype.getValidators=function(){return this.m_validators||(this.m_validators=[]),this.m_validators},InputStructureTerm.prototype.addValidator=function(a){if(!InputValidator.prototype.isPrototypeOf(a))throw new Error("Called addValidator on InputStructureTerm with invalid type, expected InputValidator");return this.getValidators().push(a),this},InputStructureTerm.prototype.validate=function(){var a=this.getCurrentValue();if(""==a)return!0;for(var b=this.getValidators(),c=b.length,d=0;d<c;d++)if(!b[d].validate(a))return!1;return!0},InputStructureTerm.prototype.render=function(a){var b="",c="",d=this.getTitle(),e="45%",f=this.escapePlaintextAsHtml(this.m_currentValue),g="<input style='width: "+e+";' type='text' id='"+this.getNamespace()+":term:INPUT:"+this.getId()+"' value='"+f+"'>";if(d.indexOf("_")===-1&&(d+="_"),0===d.indexOf("_"))d=g+"<span class='structure-term-title' style='width: "+e+";'>"+d.replace(/_/g,"")+"</span>";else if(d.lastIndexOf("_")===d.length-1)d="<span class='structure-term-title' style='width: "+e+";'>"+d.replace(/_/g,"")+"</span>"+g;else{var h=d.split(/_+/g),i=0,j=0;for(j=0;j<h.length;j++)h[j]&&i++;for(e=90/(i+1)+"%",g="<input style='width: "+e+";' type='text' id='"+this.getNamespace()+":term:INPUT:"+this.getId()+"' value='"+f+"'>",j=0;j<h.length;j++)h[j]&&(h[j]="<span class='structure-term-title' style='width: "+e+";'>"+h[j]+"</span>");d=h.join(g)}var k=this.m_state?this.m_state.getCSSClass():"";this.getComment()&&(c="<div class='structure-term-comment-wrapper'>"+this.buildTextArea()+"</div>",b="comment "),a.append("<div id='"+this.getNamespace()+":term:ROOT:"+this.getId()+"' class='structure-term-item input-term "+b+k+"' title='"+this.getCaption()+"'><div class='structure-term-info-wrapper'>"+d+"<span class='structure-comment'>&nbsp;</span></div><div class='structure-documented-icon-area'></div>"+c+"</div>")},InputStructureTerm.prototype.getActiveState=function(){return this.m_activeState},InputStructureTerm.prototype.setActiveState=function(a){if(!TermState.prototype.isPrototypeOf(a))throw new Error("Attempted to call InputStructureTerm.prototype.setActiveState with invalid parameter");return this.m_activeState=a,this},InputStructureTerm.prototype.getInactiveState=function(){return this.m_inactiveState},InputStructureTerm.prototype.setInactiveState=function(a){if(!TermState.prototype.isPrototypeOf(a))throw new Error("Attempted to call InputStructureTerm.prototype.setInactiveState with invalid parameter.");return this.m_inactiveState=a,this},FreeTextStructureTerm.prototype=new InputStructureTerm,FreeTextStructureTerm.prototype.constructor=InputStructureTerm,FreeTextStructureTerm.prototype.render=function(a){var b=this.m_state?this.m_state.getCSSClass():"",c=this.escapePlaintextAsHtml(this.m_currentValue);a.append("<div id='"+this.getNamespace()+":term:ROOT:"+this.getId()+"' class='structure-term-item input-term freetext-term "+b+"' title='"+this.getCaption()+"'><div class='structure-term-info-wrapper'><input type='text' id='"+this.getNamespace()+":term:INPUT:"+this.getId()+"' value='"+c+"' placeholder='"+i18n.discernabu.mpage_structured_documentation.ADD_FREE_TEXT_TERM+"'></div></div>")},NoneStructureTerm.prototype=new CycleStructureTerm,NoneStructureTerm.prototype.constructor=CycleStructureTerm,TableStructureTerm.prototype=new CycleStructureTerm,TableStructureTerm.prototype.constructor=CycleStructureTerm,TableStructureTerm.prototype.render=function(a){var b=this.m_state?this.m_state.getCSSClass():"",c=100/this.getParent().getChildren().length+"%";a.append("<div id='"+this.getNamespace()+":term:ROOT:"+this.getId()+"' class='table-term "+b+"' title='"+this.getCaption()+"'  style='width: "+c+";'><div class='structure-documented-icon-area'>"+this.getUIValue()+"</div></div>")},TableStructureTerm.prototype.isDefaultDisplayed=function(){return!0},TableStructureTerm.prototype.getComment=function(){var a=this.getParent(),b=a.getComment();return a.getActiveTerm()===this?(this.setComment(b),b):(this.setComment(""),"")},TableStructureTerm.prototype.getSavedComment=function(){var a=this.getParent();return a.getSavedComment()},TableStructureTerm.prototype.displayComment=function(a){var b=a?this.unescapePlaintextAsHtml(a):a+"";this.setComment(b),this.setSavedComment(b);var c=this.getParent();c.displayComment(a)},TableStructureTerm.prototype.getHighlightElement=function(){var a=this.getParent();return a.getHighlightElement()},TableStructureTerm.prototype.isDefaultDisplayed=function(){return!0},TableStructureTerm.prototype.isCurrentlyDisplayed=function(){var a=this.getParent();return a.isCurrentlyDisplayed()},TableStructureTerm.prototype.displayNode=function(){var a=this.getParent();a.displayNode()},Navigator.prototype.getClickCallback=function(){return this.m_clickCallback},Navigator.prototype.setClickCallback=function(a){if("function"!=typeof a)throw new Error("Attempted to call setClickCallback with invalid parameter");return this.m_clickCallback=a,this},Navigator.prototype.applyCustomSkin=function(a){if("string"!=typeof a)throw new Error("Attempted to call applyCustomSkin with invalid parameter.");return this.m_skin=a,this},Navigator.prototype.getCustomSkin=function(){return this.m_skin},Navigator.prototype.getActiveNavigation=function(){return this.m_activeNavigation},Navigator.prototype.setActiveNavigation=function(a){if(!Navigation.prototype.isPrototypeOf(a))throw new Error("Attempted to call setActiveNavigation with invalid parameter.");return this.m_activeNavigation=a,this},Navigator.prototype.getId=function(){return this.m_id},Navigator.prototype.setId=function(a){if("string"!=typeof a)throw new Error("Attempted to call setId with invalid parameter.");return this.m_id=a,this},Navigator.prototype.getNavigations=function(){return this.m_navigations||(this.m_navigations=[]),this.m_navigations},Navigator.prototype.setNavigations=function(a){if(!Array.prototype.isPrototypeOf(a))throw new Error("Attempted to call setNavigations with invalid parameter.");return this.m_navigations=a,this},Navigator.prototype.addNavigation=function(a){if(!Navigation.prototype.isPrototypeOf(a))throw new Error("Attempted to call addNavigation with invalid parameter.");return this.getNavigations().push(a),this.getNavigationMap()[a.getId()]=a,this},Navigator.prototype.getNavigationMap=function(){return this.m_navigationMap||(this.m_navigationMap={}),this.m_navigationMap},Navigator.prototype.render=function(){var a="",b=this.getNavigations(),c=b.length;a+="<div id='"+this.getId()+"' class='"+this.getCustomSkin()+" structure-navigator'>";for(var d=0;d<c;d++)a+=b[d].render();return a+="</div>"},Navigator.prototype.finalize=function(){var a=this,b=this.getId().replace(/:/g,"\\:");$("#"+b).on("click",".navigator-button",function(){a.handleNavigationSelection(this.id)})},Navigator.prototype.updateActiveNavigation=function(a){var b=this.getNavigationMap()[a];b&&b!==this.getActiveNavigation()&&(this.getActiveNavigation()&&this.getActiveNavigation().deselect(),b.getElement().addClass("active"),this.setActiveNavigation(b))},Navigator.prototype.handleNavigationSelection=function(a){var b=this.getNavigationMap()[a];b&&b!==this.getActiveNavigation()&&(this.getActiveNavigation()&&this.getActiveNavigation().deselect(),this.setActiveNavigation(b),b.onSelect(),this.m_clickCallback&&this.m_clickCallback(b))},Navigation.prototype.getElement=function(){return this.m_element||(this.m_element=$("#"+this.getId().replace(/\:/g,"\\:"))),this.m_element},Navigation.prototype.getId=function(){return this.m_id},Navigation.prototype.setId=function(a){if("string"!=typeof a)throw new Error("Attempted to call Navigation.prototype.setId with invalid parameter.");return this.m_id=a,this},Navigation.prototype.getLabel=function(){return this.m_label},Navigation.prototype.setLabel=function(a){if("string"!=typeof a)throw new Error("Attempted to call Navigation.prototype.setLabel with invalid parameter.");return this.m_label=a,this},Navigation.prototype.onSelect=function(){this.getElement().addClass("active")},Navigation.prototype.deselect=function(){this.getElement().removeClass("active").blur()},Navigation.prototype.render=function(){return"<button id='"+this.getId()+"' class='navigator-button'>"+this.getLabel()+"</button>"},ScrollNavigation.prototype=new Navigation,ScrollNavigation.prototype.constructor=Navigation,ScrollNavigation.prototype.getAnchorId=function(){return this.m_anchorId},ScrollNavigation.prototype.setAnchorId=function(a){if("string"!=typeof a)throw new Error("Attempted to call ScrollNavigation.prototype.setAnchorId with invalid parameter.");return this.m_anchorId=a,this},ScrollNavigation.prototype.getAnchorElement=function(){return this.m_anchorElement||(this.m_anchorElement=$("#"+this.getAnchorId().replace(/:/g,"\\:"))),this.m_anchorElement},ScrollNavigation.prototype.getContainerId=function(){return this.m_containerId},ScrollNavigation.prototype.setContainerId=function(a){if("string"!=typeof a)throw new Error("Attempted to call ScrollNavigation.prototype.setContainerId with invalid parameter.");return this.m_containerId=a,this},ScrollNavigation.prototype.getContainerElement=function(){return this.m_containerElement||(this.m_containerElement=$("#"+this.getContainerId().replace(/:/g,"\\:"))),this.m_containerElement},ScrollNavigation.prototype.onSelect=function(){Navigation.prototype.onSelect.call(this);var a=this.getContainerElement(),b=this.getAnchorElement();a.scrollTop(b.offset().top-a.offset().top+a.scrollTop())},CallbackNavigation.prototype=new Navigation,CallbackNavigation.prototype.constructor=Navigation,CallbackNavigation.prototype.setOnSelect=function(a){if("function"!=typeof a)throw new Error("Attempted to call CallbackNavigation.prototype.setOnSelect with invalid parameter.");return this.m_onSelect=a,this},CallbackNavigation.prototype.onSelect=function(){Navigation.prototype.onSelect.call(this),this.m_onSelect&&this.m_onSelect()},StructureNavigation.prototype=new ScrollNavigation,StructureNavigation.prototype.constructor=ScrollNavigation,StructureNavigation.prototype.setNode=function(a){
return this.m_node=a,this},StructureNavigation.prototype.render=function(){var a=this.m_node&&this.m_node.getNumberOfDocumentedChildren()>0?" navigation-documented":"";return"<div id='"+this.getId()+"' class='navigator-button structure-navigator-button"+a+"'><span>"+this.getLabel()+"</span><div class='navigation-documented-icon'></div></div>"},StructureQuestionSet.prototype=new StructureGroup,StructureQuestionSet.prototype.constructor=StructureGroup,StructureQuestionSet.prototype.getLookup=function(){return this.m_lookup||(this.m_lookup={}),this.m_lookup},StructureQuestionSet.prototype.getAnswers=function(){for(var a=[],b=this.getChildren(),c=b.length,d=null,e=null,f=null,g=null,h=0;h<c;h++){d=b[h],e=d.getChildren(),f=e.length;for(var i=0;i<f;i++)g=e[i],g.getState().getValue()&&a.push({parent_entity_id:d.getParentEntityId()+".0",parent_entity_name:d.getParentEntityName(),dd_sref_chf_cmplnt_crit_id:g.getTemplateId()+".0"})}return JSON.stringify(a)},StructureQuestionSet.prototype.setOnCompleteCallback=function(a){if("function"!=typeof a)throw new Error("StructureQuestionSet.prototype.setOnCompleteCallback expects a function");return this.m_onCompleteCallback=a,this},StructureQuestionSet.prototype.getRootElement=function(){return this.m_rootElement&&this.m_rootElement.length||(this.m_rootElement=$("#"+this.m_namespace+"StructureQuestionSet")),this.m_rootElement},StructureQuestionSet.prototype.notifyStateChange=function(a){StructureNode.prototype.notifyStateChange.call(this,a),this.m_numberDocumented===this.m_children.length?this.m_onCompleteCallback&&this.m_onCompleteCallback(!0):this.m_onCompleteCallback(!1)},StructureQuestionSet.prototype.render=function(){var a=new StructureHtml;return a.append("<div id='"+this.m_namespace+"StructureQuestionSet' class='structure-question-set' data-lookup='"+this.m_id+"'>"),this.renderChildren(a,!1),a.append("</div>"),a.getHtml()},StructureQuestion.prototype=new MultiStructureTermGroup,StructureQuestion.prototype.constructor=MultiStructureTermGroup,StructureQuestion.prototype.setParentEntityId=function(a){if("number"!=typeof a)throw new Error("StructureQuestion.prototype.setParentEntityId expects a number.");return this.m_parentEntityId=a,this},StructureQuestion.prototype.setParentEntityName=function(a){if("string"!=typeof a)throw new Error("StructureQuestion.prototype.setParentEntityName expects a string.");return this.m_parentEntityName=a,this},StructureQuestion.prototype.getParentEntityId=function(){return this.m_parentEntityId},StructureQuestion.prototype.getParentEntityName=function(){return this.m_parentEntityName},StructureQuestion.prototype.setQuestionDisplay=function(a){if("string"!=typeof a)throw new Error("StructureQuestion.prototype.setQuestionDisplay expects a string.");return this.m_questionDisplay=a,this},StructureQuestion.prototype.setDiagnosisGroup=function(a){if("number"!=typeof a)throw new Error("StructureQuestion.prototype.setDiagnosisGroup expects a number.");return this.m_diagnosisGroup=a,this},StructureQuestion.prototype.render=function(a,b){a.append("<div class='structure-question' data-lookup='"+this.m_id+"'>"),a.append("<div>"+this.m_questionDisplay+"</div>"),this.renderChildren(a,!1),a.append("</div>")},StructureAnswer.prototype=new CycleStructureTerm,StructureAnswer.prototype.constructor=CycleStructureTerm,StructureAnswer.prototype.setTemplateId=function(a){if("number"!=typeof a)throw new Error("StructureAnswer.prototype.setAnswerId expects a number.");return this.m_templateId=a,this},StructureAnswer.prototype.getTemplateId=function(){return this.m_templateId},StructureAnswer.prototype.getRootElement=function(){return this.m_rootElement&&this.m_rootElement.length||(this.m_rootElement=$("#"+this.m_namespace+"Answer"+this.m_id)),this.m_rootElement},StructureAnswer.prototype.refresh=function(){this.m_state!==this.m_previousState&&this.getRootElement().removeClass(this.m_previousState.getCSSClass()).addClass(this.m_state.getCSSClass())},StructureAnswer.prototype.setAnswerDisplay=function(a){if("string"!=typeof a)throw new Error("");return this.m_answerDisplay=a,this},StructureAnswer.prototype.render=function(a,b){a.append("<div id='"+this.m_namespace+"Answer"+this.m_id+"' class='structure-answer' data-lookup='"+this.m_id+"'><input class='structure-answer-box' type='checkbox' data-lookup='"+this.m_id+"'><span class='structure-answer-display' data-lookup='"+this.m_id+"'>"+this.m_answerDisplay+"</span></div>")},StructureTermController.prototype.attach=function(a){throw new Error("Attempted to call StructureTermController.prototype.attach, method must be implemented by sub-class")},InputStructureTermController.prototype=new StructureTermController,InputStructureTermController.prototype.constructor=StructureTermController,InputStructureTermController.prototype.attach=function(a){var b=a.getRootElement();b.on("keyup","div.input-term input",function(){var b=a.getLookup()[a.parseIdForLookup($(this).attr("id"))];b.setCurrentValue($(this).val()),b.update()}),b.on("click","div.input-term input",function(){var b=a.getLookup()[a.parseIdForLookup($(this).attr("id"))];$(this).val()&&b.update()})},CycleStructureTermController.prototype=new StructureTermController,CycleStructureTermController.prototype.constructor=StructureTermController,CycleStructureTermController.prototype.attach=function(a){var b=a.getRootElement();b.on("click","div.cycle-term >.structure-documented-icon-area, div.cycle-term >.structure-term-info-wrapper",function(b){if(!$(b.target).hasClass("structure-comment")){var c=a.getLookup()[a.parseIdForLookup($(this).closest(".structure-term-item").attr("id"))];c.cycleState();var d=$(this).closest(".structure-term-item");if(c.getComment()){var e=$(this).siblings("div.structure-term-comment-wrapper");d.addClass("comment"),e.length<1&&(e="<div class='structure-term-comment-wrapper'>"+c.buildTextArea()+"</div>",d.append(e))}else d.removeClass("comment")}}),b.on("click","span.structure-comment",function(b){var c=$(this).closest(".structure-term-info-wrapper"),d=$(c).siblings("div.structure-term-comment-wrapper"),e=$(this).closest(".structure-term-item");if(e.addClass("comment"),d.length<1){var f=a.getLookup()[a.parseIdForLookup($(this).closest(".structure-term-item").attr("id"))];d="<div class='structure-term-comment-wrapper'>"+f.buildTextArea()+"</div>",e.append(d)}$(e).find("textarea")[0].focus()}),b.on("focusout","div.structure-term-comment-wrapper",function(b){var c=a.getLookup()[a.parseIdForLookup($(this).closest(".structure-term-item").attr("id"))],d=$(this).find("textarea").val(),e=$(this).closest(".structure-term-item");""===d&&e.removeClass("comment"),c.setComment(d),c.checkIsDirty()||(c.getComment()!==c.getSavedComment()?(c.m_dirty=!0,c.notifyDirty(c)):(c.m_dirty=!1,c.notifyDirty(c)))})},YesNoStructureTermController.prototype=new StructureTermController,YesNoStructureTermController.prototype.constructor=StructureTermController,YesNoStructureTermController.prototype.attach=function(a){a.getRootElement().on("click","div.structure-yes, div.structure-no",function(b){var c=a.getLookup()[a.parseIdForLookup($(this).attr("id"))],d=c.getParent(),e=d.getChildren()[0];NoneStructureTerm.prototype.isPrototypeOf(e)&&e===c&&e.jumpToState(0);var f=$(this).hasClass("structure-yes")?1:2,g=c.getCurrentState();c.jumpToState(f===g?0:f);var h=$(this).closest(".structure-term-item");if(c.getComment()){var i=$(this).siblings("div.structure-term-comment-wrapper");h.addClass("comment"),i.length<1&&(i="<div class='structure-term-comment-wrapper'>"+c.buildTextArea()+"</div>",h.append(i))}else h.removeClass("comment")})},StructureGroupController.prototype=new StructureTermController,StructureGroupController.prototype.constructor=StructureTermController,StructureGroupController.prototype.attach=function(a){a.getRootElement().on("click",".structure-component-toggle, .structure-component-toggle + .structure-group-title",function(b){var c=$(this).parents(".structure-group").first(),d=a.getLookup()[a.parseIdForLookup($(c).attr("id"))];d.toggleExpand()})},TableTermController.prototype=new StructureTermController,TableTermController.prototype.constructor=StructureTermController,TableTermController.prototype.attach=function(a){var b=a.getRootElement();b.on("click","div.table-term >.structure-documented-icon-area",function(b){var c=a.getLookup()[a.parseIdForLookup($(this).closest(".table-term").attr("id"))];c.cycleState()})},StructureTabController.prototype=new StructureTermController,StructureTabController.prototype.constructor=StructureTermController,StructureTabController.prototype.getStructureTabGroup=function(){return this.m_$structureTabGroup&&this.m_$structureTabGroup.length||(this.m_$structureTabGroup=$("#"+this.m_organizer.getNamespace()+"StructureTabGroup")),this.m_$structureTabGroup},StructureTabController.prototype.getStructureTabParent=function(){return this.m_$structureTabParent&&this.m_$structureTabParent.length||(this.m_$structureTabParent=$("#"+this.m_organizer.getNamespace()+"StructureTabParent")),this.m_$structureTabParent},StructureTabController.prototype.getStructureTabWrapper=function(){return this.m_$structureTabWrapper&&this.m_$structureTabWrapper.length||(this.m_$structureTabWrapper=$("#"+this.m_organizer.getNamespace()+"StructureTabGroupWrapper")),this.m_$structureTabWrapper},StructureTabController.prototype.getStructureTabMenuButton=function(){return this.m_$structureTabMenuButton&&this.m_$structureTabMenuButton.length||(this.m_$structureTabMenuButton=$("#"+this.m_organizer.getNamespace()+"StructureTabMenuButton")),this.m_$structureTabMenuButton},StructureTabController.prototype.resize=function(){var a=this.getStructureTabParent(),b=this.getStructureTabWrapper(),c=b[0],d=this.getStructureTabMenuButton(),e=8;c.style.width=a[0].offsetWidth-d[0].offsetWidth-e+"px"},StructureTabController.prototype.disableActiveTab=function(a,b){b.removeClass("structure-tab-active");var c=a.getLookup()[b.attr("data-lookup")];c&&(this.m_scrollMap[c.getId()]=c.getContentElement().scrollTop(),c.getRootElement().closest(".structure-tab-content").hide())};StructureTabController.prototype.restoreScrollPosition=function(a){var b=this.m_scrollMap[a.getId()];"undefined"!=typeof b&&a.getContentElement().scrollTop(b)};StructureTabController.prototype.attach=function(a){this.m_organizer=a;var b=a.getNamespace(),c=null,d=$("#"+b+"StructureTabGroup"),e=d.find(".structure-tab-display"),f=this.getStructureTabWrapper(),g=null,h=this,i=null,j=null,k=0,l=a.getRootElement().closest(".structured-documentation-view"),m=8;this.resize();var n=function(a){return function(){var b=e.eq(a);b.click();var c=b.closest(".structure-tab").position().left+f.scrollLeft();f.scrollLeft(c-m)}};a.getRootElement().on("click",".structure-tab-group .structure-tab .structure-tab-display",function(c){var e=a.getLookup()[$(this).attr("data-lookup")];if(e&&e!==a.getActiveSection()){if(l.css("overflow-y","hidden"),!e.isRendered()){var f=$("#"+b+"\\:tabContent\\:"+e.getId());f.html(e.renderHtml()),e.finalize(),e.setIsRendered(!0),e.getParent().resize()}e.getRootElement().closest(".structure-tab-content").show(),h.disableActiveTab(a,d.find(".structure-tab-active")),$(this).addClass("structure-tab-active"),e.adjustContentHeight(),a.setActiveSection(e),h.restoreScrollPosition(e),k=$(this).closest(".structure-tab").index(),i&&j&&(j[k].setIsSelected(!0),g&&g.setIsSelected(!1),g=j[k]),l.css("overflow-y","auto")}}),a.getRootElement().on("click",".structure-add-tab",function(d){i=MP_MenuManager.getMenuObject(b+"structureAddTab"),i&&MP_MenuManager.deleteMenuObject(b+"structureAddTab"),i=new Menu(b+"structureAddTab"),i.setTypeClass("menu-page-menu structure-tab-menu"),i.setIsRootMenu(!0),i.setAnchorElementId(b+"StructureTabMenuButton"),i.setAnchorConnectionCorner(["bottom","right"]),i.setContentConnectionCorner(["top","right"]),i.setLabel("");for(var e=a.getChildren(),f=e.length,h=null,l=0;l<f;l++)h=e[l],c=new MenuSelection(b+"structureSectionTab"+h.getId()),c.setLabel(h.getTitle()),c.setCloseOnClick(!0),c.setClickFunction(n(l)),l===k&&(c.setIsSelected(!0),g=c),i.addMenuItem(c);j=i.getMenuItemArray(),MP_MenuManager.addMenuObject(i),MP_MenuManager.showMenu(b+"structureAddTab")})},StructureTermGroupController.prototype.attach=function(a){var b=a.getRootElement();b.on("click","a.show-more-link",function(){var b=$(this).closest(".structure-group"),c=a.getLookup()[a.parseIdForLookup(b.attr("id"))];c.toggleShowMore()})},StructureManager.prototype.setNamespace=function(a){if("string"!=typeof a)throw new Error("StructureManager.prototype.setNamespace expects a string.");return this.m_namespace=a,this},StructureManager.prototype.setOnDirtyChangeCallback=function(a){if("function"!=typeof a)throw new Error("StructureManager.prototype.setOnDirtyChangeCallback expects a function.");return this.m_onDirtyChangeCallback=a,this},StructureManager.prototype.setOpenExistingFunction=function(a){if("function"!=typeof a)throw new Error("StructureManager.prototype.setOpenExistingFunction expects a function.");return this.m_openExistingFunction=a,this},StructureManager.prototype.setQueryTemplateFunction=function(a){if("function"!=typeof a)throw new Error("StructureManager.prototype.setQueryTemplateFunction expects a function.");return this.m_queryTemplateFunction=a,this},StructureManager.prototype.setOpenExistingCheckFunction=function(a){if("function"!=typeof a)throw new Error("StructureManager.prototype.setOpenExistingCheckFunction expects a function.");return this.m_openExistingCheckFunction=a,this},StructureManager.prototype.setOrganizerResizeFunction=function(a){if("function"!=typeof a)throw new Error("StructureManager.prototype.setResizeFunction expects a function");return this.m_resizeFunction=a,this},StructureManager.prototype.resize=function(){var a=this;setTimeout(function(){a.m_organizer&&a.m_organizer.resize(),a.m_tabController&&a.m_tabController.resize()},100)},StructureManager.prototype.onAddTemplateClick=function(){this.m_$addTemplateButton.prop("disabled",!0),this.m_answers=this.m_questionSet.getAnswers(),this.completeRefresh()},StructureManager.prototype.shouldOpenExisting=function(){if(!this.m_openExistingCheckFunction)throw new Error("StructureManager.prototype.shouldOpenExisting function expects you to have set an open existing check function.");return this.m_openExistingCheckFunction()},StructureManager.prototype.completeRefresh=function(){this.resetReplyData(),this.shouldOpenExisting()?this.openExisting():this.queryTemplate()},StructureManager.prototype.render=function(){var a=this,b=this.m_namespace,c=$("<div id='"+b+"StructureView' class='structured-documentation-view content-body'></div>");this.m_$structureManagerContainer=c;var d=$("<div id='"+b+"QuestionContainer' class='structure-question-container'></div>").hide();this.m_$questionContainer=d;var e=$("<button id='"+b+"AddTemplateButton' class='structure-add-template-btn' disabled>Add Template(s)</button>");e.click(function(){a.onAddTemplateClick()}),this.m_$addTemplateButton=e,d.append(e),d.append($("<div class='structure-question-info-icon'></div>"));var f=$("<div id='"+b+"QuestionContents' class='structure-question-contents'></div>");d.append(f),this.m_$questionContents=f,c.append(d);var g=$("<div id='"+b+"StructureContainer'></div>").hide();this.m_$structureContainer=g;var h=$("<div id='"+b+"StructureOrganizerContents'></div>");this.m_$structureOrganizerContents=h,g.append(h),c.append(g);var i=$("<div id='"+b+"StructureMessageContainer'></div>").hide();return this.m_$messageContainer=i,c.append(i),"S"!==this.m_status?(this.showStructureErrorMessage(i18n.discernabu.documentation_base.STRUCTURED_DOC_UNAVAILABLE),c):(this.hasQuestions()?this.showQuestions():this.hasStructuredContent()?this.showStructure():this.showStructureErrorMessage(i18n.discernabu.documentation_base.STRUCTURED_TEMPLATES_NOT_FOUND),c)},StructureManager.prototype.renderInto=function(a){a.append(this.render()),this.attachQuestionDelegates(),this.mergeActivity(),this.finalizeStructure()},StructureManager.prototype.attachQuestionDelegates=function(){var a=this;this.m_$questionContainer.on("change",".structure-answer-box",function(b){var c=$(this).attr("data-lookup"),d=a.m_questionSet.getLookup()[c];return d?void d.cycleState():void logger.logWarning("StructureDocumentationView.prototype.finalizeQuestions: could not find answer node with id = "+c)}),this.m_$questionContainer.on("click",".structure-answer-display",function(b){var c=$(this).attr("data-lookup"),d=a.m_questionSet.getLookup()[c];return d?(d.cycleState(),void $(this).siblings(".structure-answer-box").prop("checked",!!d.getState().getValue())):void logger.logWarning("StructureDocumentationView.prototype.finalizeQuestions: could not find answer node with id = "+c)})},StructureManager.prototype.refresh=function(){return"S"!==this.m_status?(this.m_$structureContainer.hide(),this.m_$questionContainer.hide(),void this.showStructureErrorMessage(i18n.discernabu.documentation_base.STRUCTURED_DOC_UNAVAILABLE)):void(this.hasQuestions()?(this.m_$structureContainer.hide(),this.m_$messageContainer.hide(),this.showQuestions()):this.hasStructuredContent()?(this.m_$questionContainer.hide(),this.m_$messageContainer.hide(),this.showStructure(),this.mergeActivity(),this.finalizeStructure()):(this.m_$structureContainer.hide(),this.m_$questionContainer.hide(),this.showStructureErrorMessage(i18n.discernabu.documentation_base.STRUCTURED_TEMPLATES_NOT_FOUND)))},StructureManager.prototype.navigateToNode=function(a){return a?this.m_organizer?void this.m_organizer.navigateToNode(a):void logger.logWarning("StructureManager.prototype.navigateToNode: attempted to navigate to node without a structure organizer object."):void logger.logWarning("StructureManager.prototype.navigateToNode expects navigation data.")},StructureManager.prototype.finalizeStructure=function(){var a=this.m_organizer;if(a&&(a.setResizeFunction(this.m_resizeFunction),a.setOnDirtyChangeCallback(this.m_onDirtyChangeCallback),a.finalize(),(new CycleStructureTermController).attach(a),(new InputStructureTermController).attach(a),(new StructureGroupController).attach(a),(new YesNoStructureTermController).attach(a),(new TableTermController).attach(a),(new StructureTermGroupController).attach(a),a.isMultiSection())){var b=new StructureTabController;b.attach(a),this.m_tabController=b}},StructureManager.prototype.hasStructuredContent=function(){return null!==this.m_referenceData&&this.m_referenceData.length>0},StructureManager.prototype.hasQuestions=function(){return null!==this.m_questionData},StructureManager.prototype.generateQuestionSet=function(){var a=this,b=this.m_questionData;return this.m_questionSet=(new JSONStructureOrganizerBuilder).setNamespace(this.m_namespace).buildQuestionSet(b),this.m_questionSet.setOnCompleteCallback(function(b){a.m_$addTemplateButton.prop("disabled",!b)}),this.m_questionSet},StructureManager.prototype.finalize=function(){this.finalizeStructure(),this.attachQuestionDelegates()},StructureManager.prototype.showQuestions=function(){var a=this.m_$questionContainer;a.show();var b=this.generateQuestionSet();this.m_$questionContents.html(b.render()),this.m_$addTemplateButton.prop("disabled",!0)},StructureManager.prototype.showStructure=function(){this.m_$structureContainer.show();var a=this.m_$structureOrganizerContents,b=new JSONStructureOrganizerBuilder;b.setNamespace(this.m_namespace),b.setStructureJSON(this.m_referenceData[0]);var c=b.buildStructureTree();this.m_organizer=c,a.html(c.renderHtml())},StructureManager.prototype.showStructureErrorMessage=function(a){this.m_$messageContainer.html(a),this.m_$messageContainer.show()},StructureManager.prototype.setReplyData=function(a){this.setStatus(a.status||"F"),this.setReferenceData(a.section_ref||null),this.setActivityData(a.section_act||null),a.user_options&&a.user_options.length?this.setQuestionData(a.user_options):this.setQuestionData(null)},StructureManager.prototype.resetDirty=function(){this.m_organizer&&this.m_organizer.resetDirty()},StructureManager.prototype.resetReplyData=function(){this.m_replyData=null,this.m_referenceData=null,this.m_activityData=null,this.m_questionData=null,this.m_status="F"},StructureManager.prototype.setStatus=function(a){if("string"!=typeof a)throw new Error("StructureManager.prototype.setStatus expects a string (S/F/Z)");return this.m_status=a,this},StructureManager.prototype.setReferenceData=function(a){return this.m_referenceData=a,this},StructureManager.prototype.setActivityData=function(a){return this.m_activityData=a,this},StructureManager.prototype.setQuestionData=function(a){return this.m_questionData=a,this},StructureManager.prototype.mergeActivity=function(){if(this.m_organizer&&this.m_activityData){var a=new JSONStructureOrganizerBuilder;a.update(this.m_organizer,this.m_activityData),this.resetDirty()}},StructureManager.prototype.queryTemplate=function(){if(!this.m_queryTemplateFunction)return void logger.logError("StructureManager.prototype.queryTemplate: No query template function provided.");var a=this,b={USER_OPTION_RESPONSES:this.m_answers};this.m_queryTemplateFunction(b,function(b){a.m_answers=null,a.setReplyData(b),a.refresh()})},StructureManager.prototype.openExisting=function(){if(!this.m_openExistingFunction)return void logger.logError("StructureManager.prototype.openExisting: No open existing function provided.");var a=this,b={USER_OPTION_RESPONSES:this.m_answers};this.m_openExistingFunction(b,function(b){a.m_answers=null,a.setReplyData(b),a.refresh()})},InputValidator.prototype.validate=function(a){return!0},InputValidator.prototype.getMessage=function(){return""},DataTypeValidator.ALPHA_TYPE="ALPHA",DataTypeValidator.ALPHA_REGEX=/^[a-zA-Z0-9 `~!@#$%^&*()_+-=,.<>?;:''"{}|\\\/\[\]]*$/,DataTypeValidator.NUMERIC_TYPE="NUMERIC",DataTypeValidator.NUMERIC_REGEX=/^[-]?[0-9]*[.]?[0-9]*$/,DataTypeValidator.prototype=new InputValidator,DataTypeValidator.prototype.constructor=InputValidator,DataTypeValidator.prototype.getDataType=function(){return this.m_dataType},DataTypeValidator.prototype.setDataType=function(a){switch(this.m_dataType=a,a){case DataTypeValidator.NUMERIC_TYPE:this.m_dataRegex=DataTypeValidator.NUMERIC_REGEX;break;case DataTypeValidator.ALPHA_TYPE:default:this.m_dataType=DataTypeValidator.ALPHA_TYPE,this.m_dataRegex=DataTypeValidator.ALPHA_REGEX}return this},DataTypeValidator.prototype.getMessage=function(){var a="";switch(this.m_dataType){case DataTypeValidator.NUMERIC_TYPE:a="Number (+- 0-9)";break;case DataTypeValidator.ALPHA_TYPE:default:a="Alphabetical and Numeric"}return"<span class='term-info-item'>This field accepts only {0} characters</span>".replace("{0}",a)},DataTypeValidator.prototype.validate=function(a){return this.m_dataRegex.test(a)},DataTypeValidator.prototype.getDataRegex=function(){return this.m_dataRegex},DataTypeValidator.prototype.setDataRegex=function(a){if(!RegExp.prototype.isPrototypeOf(a))throw new Error("Cannot set regex with non regex type");return this.m_dataRegex=a,this},DataRangeValidator.prototype=new InputValidator,DataRangeValidator.prototype.constructor=InputValidator,DataRangeValidator.prototype.getMessage=function(){return"<span class='term-info-item'>Number must be between {0} and {1}</span>".replace("{0}",this.m_minValue).replace("{1}",this.m_maxValue)},DataRangeValidator.prototype.validate=function(a){try{var b=parseFloat(a);if(isNaN(b))throw new Error("Input is not a number type, cannot validate");return b<=this.m_maxValue&&b>=this.m_minValue}catch(a){return!1}},DataRangeValidator.prototype.setMinValue=function(a){if("number"!=typeof a)throw new Error("Cannot setMinValue with non number type");if(a>this.m_maxValue)throw new Error("Cannot set a minValue greater than the max value");return this.m_minValue=a,this},DataRangeValidator.prototype.setMaxValue=function(a){if("number"!=typeof a)throw new Error("Cannot setMaxValue with non number type");if(a<this.m_minValue)throw new Error("Cannot set a maxValue less than the min value");return this.m_maxValue=a,this},TemplateEngine={},function(a,b){a.getHtmlTags=function(){var b=["html","span","head","body","pre","h1","h2","h3","h4","h5","h6","b","i","em","strong","font","a","p","br","dl","dt","dd","ol","ul","li","div","img","hr","table","th","tr","td","tbody","thead","form","option","input","textarea","button"],c={};return c=a.getTags(b)},a.getTags=function(c){var d={};return b.each(c,function(b,c){d[c]=a.tag(c)}),d},a.tag=function(b){return function(){var c=[].slice.call(arguments);c.unshift(b);var d=new a.Tag(b);return a.Tag.apply(d,c),d}},a.button=function(b){return b.type="button",new a.Tag("input",b,null)},a.textbox=function(b){return b.type="text",new a.Tag("input",b,null)},a.Tag=function(c,d){if(this.name=c,this.parent=null,this.element=null,this.content="",this.attributes={},1!=arguments.length){var e=arguments[1],f=1;if(!(e instanceof Object)||e instanceof a.Tag||e instanceof String||e instanceof Array||(this.attributes=e,f=2),2!=arguments.length||2!=f){for(var g=[],h=f;h<arguments.length;h++)arguments[h]instanceof Array?b.merge(g,arguments[h]):g.push(arguments[h]);this.content=g}}},a.Tag.prototype.render=function(){return this.makeElement(),this.makeContent(),this.element},a.Tag.prototype.makeElement=function(){var a=b("<"+this.name+"></"+this.name+">");return b.each(this.attributes,function(b,c){c||(c=""),a.attr(b,c)}),this.element=a,a},a.Tag.traverse=function(c,d){if(c)return c instanceof a.Tag?(c.parent=d,void d.element.append(c.render())):c instanceof Array?void b.each(c,function(b,c){a.Tag.traverse(c,d)}):void d.element.append(c)},a.Tag.prototype.makeContent=function(){a.Tag.traverse(this.content,this)},a.Template=function(a){this.m_function=a,this.m_factory=null},a.Template.prototype.render=function(b){var c=new a.ScopeManager;this.m_factory&&this.m_factory.before(c);var d=this.m_function(b);d instanceof a.Tag||alert("The template function does not return a Tag instance.");var e=d.render();return c.clean(),this.m_factory&&this.m_factory.after(c),e},a.TemplateFactory=function(c){var d=this;b.each(c,function(b,c){"before"!=b&&"after"!=b?(d[b]=new a.Template(c),d[b].m_factory=d):d[b]=c})},a.TemplateFactory.prototype.before=function(){},a.TemplateFactory.prototype.after=function(){},a.ScopeManager=function(){this.m_originalScope={}},a.ScopeManager.prototype.use=function(a){var c=this;b.each(a,function(a,b){void 0!==window[a]&&(c.m_originalScope[a]=window[a]),window[a]=b})},a.ScopeManager.prototype.clean=function(){b.each(this.m_originalScope,function(a,b){window[a]=b})}}(TemplateEngine,jQuery);/**
 * The getDstSwitches function has been obtained from a third party source which can be found in the link below:
 * http://www.codeproject.com/Articles/58728/JavaScript-code-to-determine-when-DayLight-Savings
 * License for it can be found here: http://www.codeproject.com/info/cpol10.aspx
 */
var TimeZone=function(a,b,c,d,e){this.m_name=a,this.m_abbr=b,this.m_dst_abbr=c,this.m_dst_info=d,this.m_tz_index=e};TimeZone.prototype.getTzIndex=function(){return this.m_tz_index},TimeZone.prototype.getName=function(){return this.m_name},TimeZone.prototype.setName=function(a){if("string"!=typeof a)throw new Error("TimeZone: Invalid timezone name");this.m_name=a},TimeZone.prototype.getStandardAbbreviation=function(){return this.m_abbr},TimeZone.prototype.setStandardAbbreviation=function(a){if("string"!=typeof a)throw new Error("TimeZone: Invalid standard timezone abbreviation");this.m_abbr=a},TimeZone.prototype.getDaylightAbbreviation=function(){return this.m_dst_abbr},TimeZone.prototype.setDaylightAbbreviation=function(a){if("string"!=typeof a)throw new Error("TimeZone: Invalid daylight timezone abbreviation");this.m_dst_abbr=a},TimeZone.prototype.getDSTInfo=function(){return this.m_dst_info},TimeZone.prototype.setDSTInfo=function(a,b){this.m_dst_info[a]=b};var timezones={};timezones.mapping={"Etc/GMT+12":new TimeZone("Etc/GMT+12","DST","DST",{},1),"Pacific/Pago_Pago":new TimeZone("Pacific/Pago_Pago","SST","SST",{},7),"America/Adak":new TimeZone("America/Adak","HAST","HADT",{},10),"Pacific/Apia":new TimeZone("Pacific/Apia","WST","WST",{},4),"Pacific/Honolulu":new TimeZone("Pacific/Honolulu","HAST","HAST",{},15),"Pacific/Marquesas":new TimeZone("Pacific/Marquesas","MART","MART",{},22),"Pacific/Gambier":new TimeZone("Pacific/Gambier","GAMT","GAMT",{},29),"America/Anchorage":new TimeZone("America/Anchorage","AKST","AKDT",{},24),"America/Los_Angeles":new TimeZone("America/Los_Angeles","PST","PDT",{},35),"America/Santa_Isabel":new TimeZone("America/Santa_Isabel","PST","PDT",{},607),"Pacific/Pitcairn":new TimeZone("Pacific/Pitcairn","PST","PST",{},45),"America/Phoenix":new TimeZone("America/Phoenix","MST","MST",{},59),"America/Denver":new TimeZone("America/Denver","MST","MDT",{},54),"America/Mazatlan":new TimeZone("America/Mazatlan","MST","MDT",{},58),"America/Guatemala":new TimeZone("America/Guatemala","CST","CST",{},78),"America/Chicago":new TimeZone("America/Chicago","CST","CDT",{},75),"America/Mexico_City":new TimeZone("America/Mexico_City","CST","CDT",{},82),"Pacific/Easter":new TimeZone("Pacific/Easter","EAST","EASST",{},99),"America/Bogota":new TimeZone("America/Bogota","COT","COT",{},104),"America/New_York":new TimeZone("America/New_York","EST","EDT",{},126),"America/Havana":new TimeZone("America/Havana","CST","CDT",{},111),"America/Caracas":new TimeZone("America/Caracas","VET","VET",{},154),"America/Halifax":new TimeZone("America/Halifax","AST","ADT",{},163),"America/Goose_Bay":new TimeZone("America/Goose_Bay","AST","ADT",{},159),"America/Santo_Domingo":new TimeZone("America/Santo_Domingo","AST","AST",{},172),"America/Asuncion":new TimeZone("America/Asuncion","PYT","PYST",{},151),"America/Santiago":new TimeZone("America/Santiago","CLT","CLST",{},171),"America/Campo_Grande":new TimeZone("America/Campo_Grande","AMT","AMST",{},573),"America/St_Johns":new TimeZone("America/St_Johns","NST","NDT",{},190),"America/Godthab":new TimeZone("America/Godthab","WGT","WGST",{},201),"America/Miquelon":new TimeZone("America/Miquelon","PMST","PMDT",{},205),"America/Argentina/Buenos_Aires":new TimeZone("America/Argentina/Buenos_Aires","ART","ART",{},562),"America/Montevideo":new TimeZone("America/Montevideo","UYT","UYST",{},206),"America/Sao_Paulo":new TimeZone("America/Sao_Paulo","BRT","BRST",{},210),"America/Noronha":new TimeZone("America/Noronha","FNT","FNT",{},214),"Atlantic/Azores":new TimeZone("Atlantic/Azores","AZOT","AZOST",{},219),"Atlantic/Cape_Verde":new TimeZone("Atlantic/Cape_Verde","CVT","CVT",{},220),UTC:new TimeZone("UTC","GMT","GMT",{},266),"Europe/London":new TimeZone("Europe/London","WET","WEST",{},257),"Europe/Berlin":new TimeZone("Europe/Berlin","CET","CEST",{},293),"Europe/Helsinki":new TimeZone("Europe/Helsinki","EET","EEST",{},350),"Africa/Lagos":new TimeZone("Africa/Lagos","WAT","WAT",{},276),"Africa/Windhoek":new TimeZone("Africa/Windhoek","WAT","WAST",{},284),"Asia/Beirut":new TimeZone("Asia/Beirut","EET","EEST",{},336),"Asia/Amman":new TimeZone("Asia/Amman","AST","AST",{},335),"Asia/Jerusalem":new TimeZone("Asia/Jerusalem","IST","IDT",{},340),"Asia/Damascus":new TimeZone("Asia/Damascus","EET","EEST",{},337),"Africa/Cairo":new TimeZone("Africa/Cairo","EET","EET",{},324),"Asia/Gaza":new TimeZone("Asia/Gaza","EET","EEST",{},338),"Europe/Minsk":new TimeZone("Europe/Minsk","FET","FET",{},354),"Africa/Johannesburg":new TimeZone("Africa/Johannesburg","SAST","SAST",{},327),"Europe/Moscow":new TimeZone("Europe/Moscow","MSK","MSK",{},384),"Asia/Baghdad":new TimeZone("Asia/Baghdad","AST","AST",{},377),"Asia/Tehran":new TimeZone("Asia/Tehran","IRST","IRDT",{},395),"Asia/Dubai":new TimeZone("Asia/Dubai","GST","GST",{},399),"Asia/Yerevan":new TimeZone("Asia/Yerevan","AMT","AMT",{},403),"Asia/Baku":new TimeZone("Asia/Baku","AZT","AZST",{},398),"Asia/Kabul":new TimeZone("Asia/Kabul","AFT","AFT",{},410),"Asia/Yekaterinburg":new TimeZone("Asia/Yekaterinburg","YEKT","YEKT",{},419),"Asia/Karachi":new TimeZone("Asia/Karachi","PKT","PKT",{},416),"Asia/Kolkata":new TimeZone("Asia/Kolkata","IST","IST",{},596),"Asia/Kathmandu":new TimeZone("Asia/Kathmandu","NPT","NPT",{},597),"Asia/Dhaka":new TimeZone("Asia/Dhaka","BST","BST",{},432),"Asia/Omsk":new TimeZone("Asia/Omsk","OMST","OMST",{},434),"Asia/Rangoon":new TimeZone("Asia/Rangoon","MMT","MMT",{},441),"Asia/Krasnoyarsk":new TimeZone("Asia/Krasnoyarsk","KRAT","KRAT",{},447),"Asia/Jakarta":new TimeZone("Asia/Jakarta","WIB","WIB",{},446),"Asia/Shanghai":new TimeZone("Asia/Shanghai","CST","CST",{},469),"Asia/Irkutsk":new TimeZone("Asia/Irkutsk","IRKT","IRKT",{},461),"Australia/Perth":new TimeZone("Australia/Perth","AWST","AWST",{},476),"Australia/Eucla":new TimeZone("Australia/Eucla","ACWST","ACWST",{},582),"Asia/Yakutsk":new TimeZone("Asia/Yakutsk","YAKT","YAKT",{},489),"Asia/Tokyo":new TimeZone("Asia/Tokyo","JST","JST",{},488),"Australia/Darwin":new TimeZone("Australia/Darwin","ACST","ACST",{},498),"Australia/Adelaide":new TimeZone("Australia/Adelaide","ACST","ACDT",{},496),"Australia/Brisbane":new TimeZone("Australia/Brisbane","AEST","AEST",{},507),"Asia/Vladivostok":new TimeZone("Asia/Vladivostok","VLAT","VLAT",{},505),"Australia/Sydney":new TimeZone("Australia/Sydney","AEST","AEDT",{},514),"Australia/Lord_Howe":new TimeZone("Australia/Lord_Howe","LHST","LHDT",{},524),"Asia/Kamchatka":new TimeZone("Asia/Kamchatka","PETT","PETT",{},537),"Pacific/Noumea":new TimeZone("Pacific/Noumea","NCT","NCT",{},530),"Pacific/Norfolk":new TimeZone("Pacific/Norfolk","NFT","NFT",{},533),"Pacific/Auckland":new TimeZone("Pacific/Auckland","NZST","NZDT",{},542),"Pacific/Fiji":new TimeZone("Pacific/Fiji","FJT","FJST",{},543),"Pacific/Majuro":new TimeZone("Pacific/Tarawa","GILT","GILT",{},546),"Pacific/Chatham":new TimeZone("Pacific/Chatham","CHAST","CHADT",{},552),"Pacific/Tongatapu":new TimeZone("Pacific/Tongatapu","TOT","TOT",{},555),"Pacific/Kiritimati":new TimeZone("Pacific/Kiritimati","LINT","LINT",{},557)};var MP_Timezone={};MP_Timezone=timezones.mapping[jstz.determine().name()],TimeZone.prototype.getDstSwitches=function(a){var b,c=1e3,d=function(a){return new Date(a*c).getTimezoneOffset()},e=function(a,b){return d(a)!==d(b)},f=new Date(a-1,11,21,12)/c,g=new Date(a,5,21,12)/c;return e(f,g)?(b=function(a,b){for(var d;b-a>1;)d=a+(b-a>>1),e(d,b)?a=d:b=d;return{from:a*c,to:b*c}},{first:b(f,g),second:b(g,new Date(a,11,21,12)/c)}):null},TimeZone.prototype.getAmbiguousEndDates=function(a){if(a){var b=new Date(a.first.from).getTimezoneOffset()-new Date(a.first.to).getTimezoneOffset(),c=new Date(a.second.from).getTimezoneOffset()-new Date(a.second.to).getTimezoneOffset(),d=new Date,e=new Date,f=new Date,g=new Date;return b<c?(d=(new Date).setTime(new Date(a.first.from).getTime()-3599e3),g=(new Date).setTime(new Date(a.first.to).getTime()+3599e3),e=(new Date).setTime(a.first.from),f=(new Date).setTime(a.first.to)):b>c&&(d=(new Date).setTime(new Date(a.second.from).getTime()-3599e3),g=(new Date).setTime(new Date(a.second.to).getTime()+3599e3),e=(new Date).setTime(a.second.from),f=(new Date).setTime(a.second.to)),{dst_trans_day_start:d,dst_trans_day_end:e,dst_trans_std_start:f,dst_trans_std_end:g}}},TimeZone.prototype.getTimeZone=function(a,b){var c=new Date,d=b?b:"default",e=!1;a&&(c=a);var f={longDateTime2:1,longDateTime3:1,shortTime:1,mediumTime:1,militaryTime:1,default:1,shortdatetime:1,mediumdatetime:1,longdatetime:1,timewithseconds:1,timenoseconds:1,shortdatetimenosec:1,"mmmm dd, yyyy HH:MM":1};d.indexOf("isoTime")<0&&d.indexOf("isoDateTime")<0&&"isoUtcDateTime"!==d&&(d in f||d.indexOf("HH:mm")>=0||d.indexOf("HH:MM")>=0)&&(e=!0);var g=c.getFullYear();if(!this.m_dst_info[g+"_dst_ind"]){if(this.setDSTInfo(g+"_dst_ind",this.isDSTObserved(g)),this.m_dst_info[g]||!this.m_dst_info[g+"_dst_ind"])return"";var h=this.getDstSwitches(g);h&&this.setDSTInfo(g,this.getAmbiguousEndDates(h))}if(e){if(a>=this.m_dst_info[g].dst_trans_day_start&&a<=this.m_dst_info[g].dst_trans_day_end)return this.m_dst_abbr;if(a>=this.m_dst_info[g].dst_trans_std_start&&a<=this.m_dst_info[g].dst_trans_std_end)return this.m_abbr}return""},TimeZone.prototype.isDSTObserved=function(a){var b=new Date(a,0,1,0,0,0,0),c=b.toUTCString(),d=new Date(c.substring(0,c.lastIndexOf(" ")-1)),e=(b-d)/36e5,f=new Date(a,6,1,0,0,0,0),g=f.toUTCString(),h=new Date(g.substring(0,g.lastIndexOf(" ")-1)),i=(f-h)/36e5;return e===i?0:1};var VideoVisit={criterion:null,appointmentId:0,eventId:0,patientCheckedInStatus:!1,visitCompleted:!1,$header:null,visitURL:"",videoPlayerURL:"",videoPlayerURLWithAuth:"",loadTimer:null};VideoVisit.loadPortalLink=function(){VideoVisit.loadTimer=new RTMSTimer("ENG:MPG Load Video Visits",VideoVisit.criterion.CATEGORY_MEAN),VideoVisit.loadTimer.start(),logger.logMessage("Initializing Video Visit...");var a=new ScriptRequest;a.setArtifactInfo({artifactId:"mpage-video-visits",functionName:"loadPortalLink"}),a.setProgramName("mp_vv_get_portal_link");var b="";VideoVisit.criterion.PERSON_INFO.SEX_CD&&(b=MP_Util.GetValueFromArray(VideoVisit.criterion.PERSON_INFO.SEX_CD,MP_Util.LoadCodeListJSON(VideoVisit.criterion.CODES)).display),a.setParameterArray(["^MINE^",VideoVisit.criterion.PERSON_ID+".00",VideoVisit.criterion.ENCNTRS[0].ENCNTR_ID+".00",VideoVisit.criterion.PRSNL_ID+".00",VideoVisit.eventId+".00",VideoVisit.appointmentId+".00","^"+b+"^"]),a.setResponseHandler(VideoVisit.displayBanner),a.performRequest()},VideoVisit.displayBanner=function(a){if(!a)return logger.logMessage("No reply object provided to the display banner handler."),void VideoVisit.loadTimer.fail();var b=a.getStatus(),c=a.getResponse();if("S"!==b)return logger.logError("Video Visits -- "+c.RESPONSETEXT+". Operation Failure in "+c.STATUS_DATA.SUBEVENTSTATUS[0].OPERATIONNAME),void VideoVisit.loadTimer.fail();var d=JSON.parse(c.RESPONSEBODY);if(VideoVisit.visitCompleted=d.completed,VideoVisit.visitCompleted)return logger.logMessage("Video Visit has already been completed."),void VideoVisit.loadTimer.stop();VideoVisit.videoPlayerURL="",VideoVisit.thirdPartyVideoPlayer=!1,VideoVisit.visitURL=d._links.self.href;for(var e="",f=d._embedded.participants.length;f--;)if(e=d._embedded.participants[f],"PROVIDER"===e.participant_type){if(e._links.player.third_party){VideoVisit.thirdPartyVideoPlayer=!0,VideoVisit.videoPlayerURL=e._links.player.href;break}if(e.unique_id&&parseFloat(e.unique_id)===VideoVisit.criterion.PRSNL_ID){VideoVisit.videoPlayerURL=e._links.player.href;break}}if(!VideoVisit.videoPlayerURL)return void logger.logMessage("Video Visit URL does not exist for participant id: "+VideoVisit.criterion.PRSNL_ID);logger.logMessage("Video Visit URL without authentication: "+VideoVisit.videoPlayerURL);var g="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAMAAAD04JH5AAAAM1BMVEUAAAD////////y8vL////////39/fe3t7y8vL09PTv7+/Z2dnu7u7u7u7w8PDz8/P///+tUKSkAAAAEHRSTlMAJn+OkZ6ut7zHyM3W3+jwf8O1WgAAAXZJREFUeAHsllFOxDAMRGOXTQNk27n/aflYLDRCKlnJzP74HcDzannUtKIoiqIoiqIICvNM7On47Y5M5nMK5icYrYIN/Ad91cA+AKWB4PuD24qB3YBg7hncgcAXBBzfDHfLKvSMmQsTN15XDtbXV3BQfrbB9teyPhvvKg17fNhhl/ETaLGqbDwGX8aHwGlqAfMB/AjsTStg3gG9AJ2oVODi16cXMD8AvQCfvl6A4vUC3LygT6lANC8YbrtUwPqv95pMgJsX8UoBbt7xiNcJ8OmfEa8SeIt4eqcKBd4p3q1JBZgR8WIBPn29AMfrBbh5egFunl4gmvdCgf7Vrh0SAACAMBCU9G9Mgukz/wkmYfv9bh08SgvgAxSgAAUoQAEK4A8Sf5L5o9Sd5f4x8a+Zf079e+4LCl/R+JLK13S+qORVLS+rcV3vBws/2fjRys92frj0060fr/18zwUGrnBwiYVrPFxk8iqXl9m8zueFRql0RkRERETEAxuDn9tJFgriAAAAAElFTkSuQmCC";VideoVisit.$header=$("<div/>").addClass("vv-banner").attr("id","vidvisBanner"),VideoVisit.$header.html("<img src='"+g+"' />&nbsp;&nbsp;<a class='vv-player'>"+i18n.innov.videoVisit.JOIN_SESSION+"</a><a class='vv-complete-session'>"+i18n.innov.videoVisit.COMPLETE_SESSION+"</a><span class='vv-patient-status'></span>"),VideoVisit.updatePatientStatus(),VideoVisit.$header.find(".vv-player").on("click",function(){new CapabilityTimer("CAP:MPG Launch Video Visit").capture();var a=VideoVisit.videoPlayerURL;VideoVisit.thirdPartyVideoPlayer?(logger.logMessage("Video Visit URL: "+a),APPLINK(100,a,"")):(VideoVisit.videoPlayerURLWithAuth=a,MPagesOAuth.getAuthenticationValue().then(function(b){VideoVisit.videoPlayerURLWithAuth+="?authentication="+b,a=VideoVisit.videoPlayerURLWithAuth}).catch(function(){logger.logError("Unable to retrieve Millennium integrated auth information.")}).finally(function(){logger.logMessage("Video Visit URL: "+a),APPLINK(100,a,"")})),VideoVisit.$header.find(".vv-patient-status").text(""),VideoVisit.$header.find(".vv-complete-session").show()}),VideoVisit.$header.find(".vv-complete-session").on("click",function(){new CapabilityTimer("CAP:MPG Complete Video Visit").capture(),VideoVisit.$header.slideUp(),VideoVisit.$header=null,$(window).trigger("resize",[!0]),VideoVisit.completeSession()}),$("body").prepend(VideoVisit.$header),$(window).trigger("resize",[!0]),VideoVisit.loadTimer.stop()},VideoVisit.getPatientStatus=function(){if(!VideoVisit.visitCompleted){var a=new ScriptRequest;a.setArtifactInfo({artifactId:"mpage-video-visits",functionName:"getPatientStatus"}),a.setProgramName("mp_vv_get_user_status"),a.setParameterArray(["^MINE^",VideoVisit.eventId+".00"]),a.setResponseHandler(function(a){var b=a.getResponse();VideoVisit.patientCheckedInStatus=parseInt(b.PATIENT_CHECKED_IN,10),VideoVisit.updatePatientStatus()}),a.performRequest()}},VideoVisit.updatePatientStatus=function(){VideoVisit.patientCheckedInStatus?(VideoVisit.$header.addClass("vv-arrived").removeClass("vv-waiting"),VideoVisit.$header.find(".vv-patient-status").text(i18n.innov.videoVisit.ARRIVED)):(VideoVisit.$header.addClass("vv-waiting").removeClass("vv-arrived"),VideoVisit.$header.find(".vv-patient-status").text(i18n.innov.videoVisit.WAITING),setTimeout(VideoVisit.getPatientStatus,15e3))},VideoVisit.completeSession=function(){VideoVisit.visitCompleted=!0;var a=new ScriptRequest;a.setArtifactInfo({artifactId:"mpage-video-visits",functionName:"completeSession"}),a.setProgramName("mp_vv_complete_session"),a.setParameterArray(["^MINE^","^"+VideoVisit.visitURL+"^"]),a.setResponseHandler(function(){}),a.performRequest()},VideoVisit.appointmentReplyHandler=function(a){if(!a)return void logger.logMessage("No reply object provided to the appointment reply handler.");var b=a.getResponse();return b.APPOINTMENT_ID<1?void logger.logMessage("No qualifying video visit appointment found."):(VideoVisit.appointmentId=b.APPOINTMENT_ID,VideoVisit.eventId=b.EVENT_ID,VideoVisit.patientCheckedInStatus=parseInt(b.PATIENT_CHECKED_IN,10),void VideoVisit.loadPortalLink())},VideoVisit.getAppointment=function(){if(VideoVisit.criterion=CERN_Platform.getCriterion().CRITERION,VideoVisit.criterion.PERSON_ID&&VideoVisit.criterion.PERSON_ID>0&&VideoVisit.criterion.ENCNTRS[0].ENCNTR_ID&&VideoVisit.criterion.ENCNTRS[0].ENCNTR_ID>0){var a=new ScriptRequest;a.setArtifactInfo({artifactId:"mpage-video-visits",functionName:"getAppointment"}),a.setProgramName("mp_vv_get_appointment"),a.setParameterArray(["^MINE^",VideoVisit.criterion.PERSON_ID+".00",VideoVisit.criterion.PRSNL_ID+".00",VideoVisit.criterion.ENCNTRS[0].ENCNTR_ID+".00"]),a.setResponseHandler(VideoVisit.appointmentReplyHandler),a.performRequest()}},VideoVisit.initialize=function(){var a=VideoVisit.getAppointment;return function(){a&&(a(),a=null)}}(),!function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,b),e.l=!0,e.exports}var c={};b.m=a,b.c=c,b.i=function(a){return a},b.d=function(a,c,d){b.o(a,c)||Object.defineProperty(a,c,{configurable:!1,enumerable:!0,get:d})},b.n=function(a){var c=a&&a.__esModule?function(){return a.default}:function(){return a};return b.d(c,"a",c),c},b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},b.p="",b(b.s=2)}([function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=c(1);window.MP_StringParser=d.a,b.default=d.a},function(a,b,c){"use strict";function d(a){return Array.isArray(a)?a:Array.from(a)}var e=function(){function a(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!b||c.length!==b);d=!0);}catch(a){e=!0,f=a}finally{try{!d&&h.return&&h.return()}finally{if(e)throw f}}return c}return function(b,c){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return a(b,c);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),f=function(a){var b=MPAGE_LOCALE.decimalPoint,c=MPAGE_LOCALE.thousandsSep,f=parseInt(MPAGE_LOCALE.grouping,10),g=new RegExp("^([+-]?)([\\d"+c+"]*\\"+b+"?\\d+)$"),h=g.exec(a);if(h){var i=h[1],j=h[2].split(b),k=e(j,2),l=k[0],m=k[1],n=void 0===m?"":m,o=l.split(c),p=d(o),q=p[0],r=p.slice(1);if(o.length>1&&q.length&&q.length<=f&&r.every(function(a){return a.length===f})||1===o.length)return Number(""+i+o.join("")+"."+n)}return NaN};b.a={parseNumber:f}},function(a,b,c){a.exports=c(0)}]);var HtmlSanitizer=function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,b),e.l=!0,e.exports}var c={};return b.m=a,b.c=c,b.d=function(a,c,d){b.o(a,c)||Object.defineProperty(a,c,{configurable:!1,enumerable:!0,get:d})},b.n=function(a){var c=a&&a.__esModule?function(){return a.default}:function(){return a};return b.d(c,"a",c),c},b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},b.p="",b(b.s=0)}([function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var e=c(1),f=function(a){return a&&a.__esModule?a:{default:a}}(e),g=c(2),h={WHOLE_DOCUMENT:!0,ALLOWED_TAGS:g.ALLOWED_TAGS,ALLOWED_ATTR:g.ALLOWED_ATTR},i=function(){function a(){d(this,a),this.hooks={}}return a.prototype.addHook=function(a,b){this.hooks[a]=this.hooks[a]||[],this.hooks[a].push(b)},a.prototype.sanitize=function(a,b){var c=this;if(!a||!a.length)throw new Error("sanitize function called with an invalid html string");return f.default.setConfig(Object.assign({},h,b)),f.default.removeAllHooks(),Object.keys(this.hooks).forEach(function(a){return c.hooks[a].forEach(function(b){return f.default.addHook(a,b)})}),f.default.sanitize(a)},a}();b.default=i},function(a,b,c){!function(b,c){a.exports=c()}(0,function(){"use strict";function a(a,b){for(var c=b.length;c--;)"string"==typeof b[c]&&(b[c]=b[c].toLowerCase()),a[b[c]]=!0;return a}function b(a){var b={},c=void 0;for(c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b}function c(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}function d(){var w=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v(),x=function(a){return d(a)};if(x.version="1.0.5",x.removed=[],!w||!w.document||9!==w.document.nodeType)return x.isSupported=!1,x;var y=w.document,z=!1,A=w.document,B=w.DocumentFragment,C=w.HTMLTemplateElement,D=w.Node,E=w.NodeFilter,F=w.NamedNodeMap,G=void 0===F?w.NamedNodeMap||w.MozNamedAttrMap:F,H=w.Text,I=w.Comment,J=w.DOMParser;if("function"==typeof C){var K=A.createElement("template");K.content&&K.content.ownerDocument&&(A=K.content.ownerDocument)}var L=A,M=L.implementation,N=L.createNodeIterator,O=L.getElementsByTagName,P=L.createDocumentFragment,Q=y.importNode,R={};x.isSupported=M&&void 0!==M.createHTMLDocument&&9!==A.documentMode;var S=n,T=o,U=p,V=q,W=s,X=t,Y=r,Z=null,$=a({},[].concat(c(e),c(f),c(g),c(h),c(i))),_=null,aa=a({},[].concat(c(j),c(k),c(l),c(m))),ba=null,ca=null,da=!0,ea=!0,fa=!1,ga=!1,ha=!1,ia=!1,ja=!1,ka=!1,la=!1,ma=!1,na=!1,oa=!0,pa=!0,qa={},ra=a({},["audio","head","math","script","style","template","svg","video"]),sa=a({},["audio","video","img","source","image"]),ta=a({},["alt","class","for","id","label","name","pattern","placeholder","summary","title","value","style","xmlns"]),ua=null,va=A.createElement("form"),wa=function(d){"object"!==(void 0===d?"undefined":u(d))&&(d={}),Z="ALLOWED_TAGS"in d?a({},d.ALLOWED_TAGS):$,_="ALLOWED_ATTR"in d?a({},d.ALLOWED_ATTR):aa,ba="FORBID_TAGS"in d?a({},d.FORBID_TAGS):{},ca="FORBID_ATTR"in d?a({},d.FORBID_ATTR):{},qa="USE_PROFILES"in d&&d.USE_PROFILES,da=!1!==d.ALLOW_ARIA_ATTR,ea=!1!==d.ALLOW_DATA_ATTR,fa=d.ALLOW_UNKNOWN_PROTOCOLS||!1,ga=d.SAFE_FOR_JQUERY||!1,ha=d.SAFE_FOR_TEMPLATES||!1,ia=d.WHOLE_DOCUMENT||!1,la=d.RETURN_DOM||!1,ma=d.RETURN_DOM_FRAGMENT||!1,na=d.RETURN_DOM_IMPORT||!1,ka=d.FORCE_BODY||!1,oa=!1!==d.SANITIZE_DOM,pa=!1!==d.KEEP_CONTENT,Y=d.ALLOWED_URI_REGEXP||Y,ha&&(ea=!1),ma&&(la=!0),qa&&(Z=a({},[].concat(c(i))),_=[],!0===qa.html&&(a(Z,e),a(_,j)),!0===qa.svg&&(a(Z,f),a(_,k),a(_,m)),!0===qa.svgFilters&&(a(Z,g),a(_,k),a(_,m)),!0===qa.mathMl&&(a(Z,h),a(_,l),a(_,m))),d.ADD_TAGS&&(Z===$&&(Z=b(Z)),a(Z,d.ADD_TAGS)),d.ADD_ATTR&&(_===aa&&(_=b(_)),a(_,d.ADD_ATTR)),d.ADD_URI_SAFE_ATTR&&a(ta,d.ADD_URI_SAFE_ATTR),pa&&(Z["#text"]=!0),ia&&a(Z,["html","head","body"]),Object&&"freeze"in Object&&Object.freeze(d),ua=d},xa=function(a){x.removed.push({element:a});try{a.parentNode.removeChild(a)}catch(b){a.outerHTML=""}},ya=function(a,b){try{x.removed.push({attribute:b.getAttributeNode(a),from:b})}catch(a){x.removed.push({attribute:null,from:b})}b.removeAttribute(a)},za=function(a){var b=void 0;if(ka&&(a="<remove></remove>"+a),z)try{b=(new J).parseFromString(a,"text/html")}catch(a){}if(!b||!b.documentElement){b=M.createHTMLDocument("");var c=b,d=c.body;d.parentNode.removeChild(d.parentNode.firstElementChild),d.outerHTML=a}return O.call(b,ia?"html":"body")[0]};x.isSupported&&function(){try{za('<svg><p><style><img src="</style><img src=x onerror=alert(1)//">').querySelector("svg img")&&(z=!0)}catch(a){}}();var Aa=function(a){return N.call(a.ownerDocument||a,a,E.SHOW_ELEMENT|E.SHOW_COMMENT|E.SHOW_TEXT,function(){return E.FILTER_ACCEPT},!1)},Ba=function(a){return!(a instanceof H||a instanceof I||"string"==typeof a.nodeName&&"string"==typeof a.textContent&&"function"==typeof a.removeChild&&a.attributes instanceof G&&"function"==typeof a.removeAttribute&&"function"==typeof a.setAttribute)},Ca=function(a){return"object"===(void 0===D?"undefined":u(D))?a instanceof D:a&&"object"===(void 0===a?"undefined":u(a))&&"number"==typeof a.nodeType&&"string"==typeof a.nodeName},Da=function(a,b,c){R[a]&&R[a].forEach(function(a){a.call(x,b,c,ua)})},Ea=function(a){var b=void 0;if(Da("beforeSanitizeElements",a,null),Ba(a))return xa(a),!0;var c=a.nodeName.toLowerCase();if(Da("uponSanitizeElement",a,{tagName:c,allowedTags:Z}),!Z[c]||ba[c]){if(pa&&!ra[c]&&"function"==typeof a.insertAdjacentHTML)try{a.insertAdjacentHTML("AfterEnd",a.innerHTML)}catch(a){}return xa(a),!0}return!ga||a.firstElementChild||a.content&&a.content.firstElementChild||!/</g.test(a.textContent)||(x.removed.push({element:a.cloneNode()}),a.innerHTML?a.innerHTML=a.innerHTML.replace(/</g,"&lt;"):a.innerHTML=a.textContent.replace(/</g,"&lt;")),ha&&3===a.nodeType&&(b=a.textContent,b=b.replace(S," "),b=b.replace(T," "),a.textContent!==b&&(x.removed.push({element:a.cloneNode()}),a.textContent=b)),Da("afterSanitizeElements",a,null),!1},Fa=function(a){var b=void 0,c=void 0,d=void 0,e=void 0,f=void 0;Da("beforeSanitizeAttributes",a,null);var g=a.attributes;if(g){var h={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:_};for(f=g.length;f--;){b=g[f];var i=b,j=i.name;if(c=b.value.trim(),d=j.toLowerCase(),h.attrName=d,h.attrValue=c,h.keepAttr=!0,Da("uponSanitizeAttribute",a,h),c=h.attrValue,"name"===d&&"IMG"===a.nodeName&&g.id)e=g.id,g=Array.prototype.slice.apply(g),ya("id",a),ya(j,a),g.indexOf(e)>f&&a.setAttribute("id",e.value);else{if("INPUT"===a.nodeName&&"type"===d&&"file"===c&&(_[d]||!ca[d]))continue;"id"===j&&a.setAttribute(j,""),ya(j,a)}if(h.keepAttr&&(!oa||"id"!==d&&"name"!==d||!(c in A||c in va))){if(ha&&(c=c.replace(S," "),c=c.replace(T," ")),ea&&U.test(d));else if(da&&V.test(d));else{if(!_[d]||ca[d])continue;if(ta[d]);else if(Y.test(c.replace(X,"")));else if("src"!==d&&"xlink:href"!==d||0!==c.indexOf("data:")||!sa[a.nodeName.toLowerCase()])if(fa&&!W.test(c.replace(X,"")));else if(c)continue}try{a.setAttribute(j,c),x.removed.pop()}catch(a){}}}Da("afterSanitizeAttributes",a,null)}},Ga=function a(b){var c=void 0,d=Aa(b);for(Da("beforeSanitizeShadowDOM",b,null);c=d.nextNode();)Da("uponSanitizeShadowNode",c,null),Ea(c)||(c.content instanceof B&&a(c.content),Fa(c));Da("afterSanitizeShadowDOM",b,null)};return x.sanitize=function(a,b){var c=void 0,d=void 0,e=void 0,f=void 0,g=void 0;if(a||(a="<!-->"),"string"!=typeof a&&!Ca(a)){if("function"!=typeof a.toString)throw new TypeError("toString is not a function");if("string"!=typeof(a=a.toString()))throw new TypeError("dirty is not a string, aborting")}if(!x.isSupported){if("object"===u(w.toStaticHTML)||"function"==typeof w.toStaticHTML){if("string"==typeof a)return w.toStaticHTML(a);if(Ca(a))return w.toStaticHTML(a.outerHTML)}return a}if(ja||wa(b),x.removed=[],a instanceof D)c=za("<!-->"),d=c.ownerDocument.importNode(a,!0),1===d.nodeType&&"BODY"===d.nodeName?c=d:c.appendChild(d);else{if(!la&&!ia&&-1===a.indexOf("<"))return a;if(!(c=za(a)))return la?null:""}ka&&xa(c.firstChild);for(var h=Aa(c);e=h.nextNode();)3===e.nodeType&&e===f||Ea(e)||(e.content instanceof B&&Ga(e.content),Fa(e),f=e);if(la){if(ma)for(g=P.call(c.ownerDocument);c.firstChild;)g.appendChild(c.firstChild);else g=c;return na&&(g=Q.call(y,g,!0)),g}return ia?c.outerHTML:c.innerHTML},x.setConfig=function(a){wa(a),ja=!0},x.clearConfig=function(){ua=null,ja=!1},x.addHook=function(a,b){"function"==typeof b&&(R[a]=R[a]||[],R[a].push(b))},x.removeHook=function(a){R[a]&&R[a].pop()},x.removeHooks=function(a){R[a]&&(R[a]=[])},x.removeAllHooks=function(){R={}},x}var e=["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"],f=["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","audio","canvas","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","video","view","vkern"],g=["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"],h=["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmuliscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mpspace","msqrt","mystyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"],i=["#text"],j=["accept","action","align","alt","autocomplete","background","bgcolor","border","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","coords","crossorigin","datetime","default","dir","disabled","download","enctype","face","for","headers","height","hidden","high","href","hreflang","id","integrity","ismap","label","lang","list","loop","low","max","maxlength","media","method","min","multiple","name","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","type","usemap","valign","value","width","xmlns"],k=["accent-height","accumulate","additivive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","tabindex","targetx","targety","transform","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"],l=["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"],m=["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"],n=/\{\{[\s\S]*|[\s\S]*\}\}/gm,o=/<%[\s\S]*|[\s\S]*%>/gm,p=/^data-[\-\w.\u00B7-\uFFFF]/,q=/^aria-[\-\w]+$/,r=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,s=/^(?:\w+script|data):/i,t=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){
return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},v=function(){return"undefined"==typeof window?null:window};return d()})},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr","title"],e=["accept","action","align","alt","autocomplete","background","bgcolor","border","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","coords","crossorigin","datetime","default","dir","disabled","download","enctype","face","for","headers","height","hidden","high","href","hreflang","id","integrity","ismap","label","lang","list","loop","low","max","maxlength","media","method","min","multiple","name","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","summary","tabindex","title","type","usemap","valign","value","width","xmlns"];b.ALLOWED_ATTR=e,b.ALLOWED_TAGS=d}]);!function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,b),e.l=!0,e.exports}var c={};b.m=a,b.c=c,b.d=function(a,c,d){b.o(a,c)||Object.defineProperty(a,c,{configurable:!1,enumerable:!0,get:d})},b.n=function(a){var c=a&&a.__esModule?function(){return a.default}:function(){return a};return b.d(c,"a",c),c},b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},b.p="",b(b.s=2)}([function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.SCRIPT_RESPONSE_STATUS={SUCCESS:"S",FAILURE:"F",NO_DATA:"Z"},b.EVENT_CKI_VALUE={WEIGHT:"CKI.EC!9515",HEIGHT:"CKI.EC!9516"},b.MEASUREMENT_TYPE={WEIGHT:1,HEIGHT:2}},function(a,b){a.exports=ScriptRequest},function(a,b,c){a.exports=c(3)},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var f=c(4),g=d(f),h=c(5),i=d(h),j=c(6),k=d(j),l=c(0),m=function(){function a(){e(this,a),this._events={}}return a.prototype._hasEvent=function(a){return a in this._events},a.prototype._saveEventInObject=function(a,b,c){this._events[a]={result:b,unitOfMeasure:c}},a.prototype._evaluateFormula=function(a){return a.split("*").reduce(function(a,b){return a*Number(b||1)},1)},a.prototype.convertUnit=function(a,b,c){var d=this;if(this._hasEvent(c)){var e=(this._events[c].result*b).toFixed(2);return Promise.resolve({result:e,unit:this._events[c].unitOfMeasure})}return(0,k.default)(a).then(function(a){if(a.getStatus()===l.SCRIPT_RESPONSE_STATUS.SUCCESS)switch(a.getResponse().CKI){case l.EVENT_CKI_VALUE.WEIGHT:return d._callConversionService(b,c,l.MEASUREMENT_TYPE.WEIGHT);case l.EVENT_CKI_VALUE.HEIGHT:return d._callConversionService(b,c,l.MEASUREMENT_TYPE.HEIGHT);default:return null}return null}).catch(function(a){return g.default.logError("Artifact: mpage-unit-converter, FunctionName: convertUnit, script: getCKI, Failed to perform the request due to "+JSON.stringify(a)),null})},a.prototype._callConversionService=function(a,b,c){var d=this;return(0,i.default)(b,c).then(function(c){if(c.getStatus()===l.SCRIPT_RESPONSE_STATUS.SUCCESS){var e=c.getResponse(),f=d._evaluateFormula(e.FORMULA),g=(f*a).toFixed(2);return d._saveEventInObject(b,f,e.RESULT_UNIT),{result:g,unit:e.RESULT_UNIT}}return null})},a}();b.default=m,void 0===window.MP_UnitConverter&&(window.MP_UnitConverter=new m)},function(a,b){a.exports=logger},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=c(1),e=function(a){return a&&a.__esModule?a:{default:a}}(d),f=c(0),g=function(a,b){return new Promise(function(c,d){(new e.default).setArtifactInfo({artifactId:"mpage-unit-converter",functionName:"getConvertedUnitData"}).setProgramName("mp_get_unit_code_formula").setParameterArray(["^MINE^",a,b]).setResponseHandler(function(a){return a.getStatus()!==f.SCRIPT_RESPONSE_STATUS.FAILURE?c(a):d(a.getResponse())}).performRequest()})};b.default=g},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=c(1),e=function(a){return a&&a.__esModule?a:{default:a}}(d),f=c(0),g=function(a){return new Promise(function(b,c){(new e.default).setArtifactInfo({artifactId:"mpage-unit-converter",functionName:"getCKI"}).setProgramName("mp_get_cki_value").setParameterArray(["^MINE^",a]).setResponseHandler(function(a){return a.getStatus()!==f.SCRIPT_RESPONSE_STATUS.FAILURE?b(a):c(a.getResponse())}).performRequest()})};b.default=g}]),function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,b),e.l=!0,e.exports}var c={};return b.m=a,b.c=c,b.d=function(a,c,d){b.o(a,c)||Object.defineProperty(a,c,{configurable:!1,enumerable:!0,get:d})},b.n=function(a){var c=a&&a.__esModule?function(){return a.default}:function(){return a};return b.d(c,"a",c),c},b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},b.p="",b(b.s=0)}([function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}b.__esModule=!0,b.default=void 0;var e=d(c(1)),f=d(c(2)),g=d(c(3)),h={BLUR:0,FOCUS:5},i=500,j=function(){var a,b={},c=function(a,b){new g.default("CAP:MPG_INITIAL_VIEWPOINT_LOAD",a).addMetaData("Viewpoint_Name",b).addMetaData("Browser_Context",f.default.inEdgeContext()?"Edge":"IE").capture(),e.default.logMessage(JSON.stringify({Timer:"CAP:MPG_INITIAL_VIEWPOINT_LOAD",Viewpoint_Name:b}))},d=function(a,b,c){new g.default("CAP:MPG_INITIAL_MPAGES_VIEW_LOAD",a).addMetaData("MPages_View_Label",b).addMetaData("MPages_View_Name",c).capture(),e.default.logMessage(JSON.stringify({Timer:"CAP:MPG_INITIAL_MPAGES_VIEW_LOAD",MPages_View_Label:b,MPages_View_Name:c}))},j=function(a,b,c){new g.default("CAP:MPG_MPAGES_VIEW_BLUR",a).addMetaData("MPages_View_Label",b).addMetaData("MPages_View_Name",c).addMetaData("Viewpoint_Category_Mean",a).capture(),e.default.logMessage(JSON.stringify({Timer:"CAP:MPG_MPAGES_VIEW_BLUR",MPages_View_Label:b,MPages_View_Name:c,Viewpoint_Category_Mean:a}))},k=function(a,b,c){new g.default("CAP:MPG_MPAGES_VIEW_FOCUS",a).addMetaData("MPages_View_Label",b).addMetaData("MPages_View_Name",c).addMetaData("Viewpoint_Category_Mean",a).capture(),e.default.logMessage(JSON.stringify({Timer:"CAP:MPG_MPAGES_VIEW_FOCUS",MPages_View_Label:b,MPages_View_Name:c,Viewpoint_Category_Mean:a}))},l=function(a,c,d){b.categoryMean=a,b.viewLabel=c,b.viewName=d},m=function(){b.categoryMean="",b.viewLabel="",b.viewName=""},n=function(){return b},o=function(a){a===h.BLUR?j(b.categoryMean,b.viewLabel,b.viewName):a===h.FOCUS&&k(b.categoryMean,b.viewLabel,b.viewName)},p=function(b){clearTimeout(a),a=setTimeout(function(){return o(b)},i)};(function(){f.default.inMillenniumContext()&&"PCNotifyShowComponent"in external?(window.tabSwitchListener=p,window.external.PCNotifyShowComponent("tabSwitchListener")):e.default.logMessage("PCNotifyShowComponent is not available")})();return{captureInitialViewpointLoad:c,captureInitialMPagesViewLoad:d,captureMPagesViewFocus:k,captureMPagesViewBlur:j,setViewSpecificDetails:l,resetViewSpecificDetails:m,getViewObject:n,captureSwitchBetweenTabs:o}}(),k=j;b.default=k,window.MP_ACTIVITY_TRACKING=j},function(a,b){a.exports=logger},function(a,b){a.exports=CERN_Platform},function(a,b){a.exports=CapabilityTimer}]),PriorAuthMPageView.prototype=new MPageView,PriorAuthMPageView.prototype.constructor=MPageView,PriorAuthMPageView.prototype.initializeView=function(){return!0},PriorAuthMPageView.prototype.loadViewSettings=function(){return!0},PriorAuthMPageView.prototype.loadComponents=function(){return!0},PriorAuthMPageView.prototype.initializeComponents=function(){return!0},PriorAuthMPageView.prototype.resizeView=function(){},PriorAuthMPageView.prototype.renderView=function(){var a=$("#vwpBody"),b=$("#"+this.getCategoryMean());this.setContainer(b);var c=[],d=a.css("height"),e='"overflow-y:hidden; height:'+d+';"',f="pa_iframe"+this.getCategoryMean();return c.push('<div class="content-body" style='+e+" >"),c.push('<iframe id="'+f+'" name="pa-iframe" frameborder="0" width="100%" height="100%" >'),c.push("</iframe>"),c.push("</div>"),b.html(c.join("")),!0},PriorAuthMPageView.prototype.postProcessing=function(){var a=this,b=a.getCategoryMean(),c="pa_iframe"+b,d=document.getElementById(c),e=d.contentDocument,f=e.getElementById(b+"html");if(!f||!$(f).hasClass("pa-form-open")){var g=a.getCriterion(),h=[],i=a.priorAuthStaticContentLocation,j=MP_Viewpoint.getViewContainerById(b),k={priorAuthorizationRecordId:j.priorAuthRecordId,userId:g.provider_id,patientProviderRelationshipCodeValue:g.ppr_cd,facilityCodeValue:g.facility_cd};h.push("<DOCTYPE html>"),h.push('<html id="'+b+'html" class="pa-form-open" dir="ltr">'),h.push("<head>"),h.push('<script type="text/javascript">'),h.push("var CERN_params = { viewToLoad: 'priorauth/viewmodels/mainView', activationData : "+JSON.stringify(k)+"};"),h.push("</script>"),h.push('<meta charset="utf-8" />'),h.push("<meta content='XMLCCLREQUEST' name='discern'>"),h.push('<link rel="stylesheet" href="'+i+'lib/terra/css/terra.css" />'),h.push('<link rel="stylesheet" href="'+i+'css/priorauth.css" />'),h.push('<script src="'+i+'lib/blackbird/js/blackbird.js" type="text/javascript"></script>'),h.push('<script src="'+i+'lib/mpages/mpages_core.js" type="text/javascript"></script>'),h.push('<script src="'+i+'i18n/en-us.js" type="text/javascript"></script>'),h.push('<link href="'+i+'lib/toastr/css/toastr.min.css" rel="stylesheet" type="text/css" />'),h.push('<link type="text/css" rel="Stylesheet" href="'+i+'lib/blackbird/css/blackbird.css" />'),h.push('<link type="text/css" rel="Stylesheet" href="'+i+'lib/datetimepicker/jquery.datetimepicker.css" />'),h.push('<script src="'+i+'lib/require/require.js" type="text/javascript"></script>'),h.push('<script src="'+i+'app/main-built.min.js" type="text/javascript"></script>'),h.push("</head>"),h.push("<body>"),h.push('<div id="applicationHost"></div>'),h.push("</body>"),h.push("</html>");var l=h.join("");d.requireConfig={baseUrl:i+"app",config:{"priorauth/services/dataContext":{inMillennium:CERN_Platform.inMillenniumContext(),isModal:!1,Timers:{CapabilityTimer:CapabilityTimer,CheckpointTimer:CheckpointTimer,AggregateTimer:AggregateTimer,RTMSTimer:RTMSTimer},ErrorModalDialog:{MP_ModalDialog:MP_ModalDialog,MP_Util:MP_Util,CERN_Platform:CERN_Platform,ErrorButtonContinue:new ModalButton("continue"),ErrorButtonOk:new ModalButton("ok")},tunnel:a.getEventNotifier()}}},e.open(),e.writeln(l),e.close()}},PriorAuthMPageView.eventNotifiers={},PriorAuthMPageView.prototype.getEventNotifier=function(){var a=this.getCategoryMean(),b=PriorAuthMPageView.eventNotifiers[a];return b||(b=document.createElement("EPA_EVENT_HANDLER"),PriorAuthMPageView.eventNotifiers[a]=b),b},PriorAuthMPageView.prototype.addDynamicTab=function(a){var b=this,c=MP_Viewpoint.getViewpointObject().getViewpointTabList().getTabCount(),d=a.getId(),e=function(a){if(a===d){var c=$(document.getElementById("pa_iframe"+a));if(0!==c.length){var f=c[0].contentDocument,g=$(f),h=g.find("#"+a+"html"),i=g.find("#prior-auth-save-button"),j=$.Deferred().resolve();if(i.length>0)if("disabled"===i.attr("disabled")){var k=document.createEvent("Event");k.initEvent("dismiss",!1,!0),b.getEventNotifier().dispatchEvent(k)}else j=b.showUnsavedDataErrorDialog();h.removeClass("pa-form-open"),j.always(function(){f.open(),f.writeln(""),f.close(),c[0].contentWindow.location.reload()}),MP_Viewpoint.removeListener(MP_Viewpoint.EVENTS.REMOVE_TAB,e)}}};MP_Viewpoint.Tabs.addDynamicTab(a,c),MP_Viewpoint.on(MP_Viewpoint.EVENTS.REMOVE_TAB,e),MP_Viewpoint.Tabs.selectTab(d)},PriorAuthMPageView.prototype.showUnsavedDataErrorDialog=function(){var a=this,b=i18n.orders.prior_auth_mpage,c=b.UNSAVED_CHANGES_MESSAGE,d=b.SAVE,e=b.DO_NOT_SAVE,f=b.UNSAVED_CHANGES_TITLE,g=$.Deferred(),h=MP_Util.generateModalDialogBody("epaUnsavedDataErrorDialog","error",c,""),i=h.getFooterButton("modalSaveBtn");return i||(i=new ModalButton("modalSaveBtn"),i.setText(d),i.setFocusInd(!0),i.setCloseOnClick(!0),h.addFooterButton(i),h.setShowCloseIcon(!1)),i.setOnClickFunction(function(){var b=document.createEvent("Event");b.initEvent("save-and-dismiss",!1,!0),a.getEventNotifier().dispatchEvent(b),g.resolve()}),i=h.getFooterButton("modalDoNotSaveBtn"),i||(i=new ModalButton("modalDoNotSaveBtn"),i.setText(e),i.setFocusInd(!0),i.setCloseOnClick(!0),h.addFooterButton(i),h.setShowCloseIcon(!1)),i.setOnClickFunction(function(){var b=document.createEvent("Event");b.initEvent("dismiss",!1,!0),a.getEventNotifier().dispatchEvent(b),g.resolve()}),h.setHeaderTitle(f),h.setFooterButtonText("modalSaveBtn",d),h.setFooterButtonText("modalDoNotSaveBtn",e),MP_ModalDialog.updateModalDialogObject(h),MP_ModalDialog.showModalDialog("epaUnsavedDataErrorDialog"),g.promise()};var NavigatorSubsectionSummaryMPage=function(){var a=function(){this.m_selectiveComponentLoadInd=!1,this.setName("Navigator Subsection Summary MPage"),this.m_parentWorkflowId="",this.m_aggregateTimer=null,this.m_isContextualViewActive=!1,this.m_componentsInContextualView=[],this.m_rootControl=null,this.m_featureToggleConfig={}};a.prototype=new MPageView,a.prototype.constructor=MPageView,a.prototype.dangerouslyGetRootControl=function(){return this.m_rootControl},a.prototype.selectivelyLoadComponents=function(){return this.m_selectiveComponentLoadInd},a.prototype.getAggregateTimer=function(){return this.m_aggregateTimer},a.prototype.getFeatureToggleConfig=function(){return this.m_featureToggleConfig||(this.m_featureToggleConfig={}),this.m_featureToggleConfig},a.prototype.getParentWorkflowIdentifier=function(){return this.m_parentWorkflowId},a.prototype.isContextualViewActive=function(){return this.m_isContextualViewActive},a.prototype.setFeatureToggleConfig=function(a){this.m_featureToggleConfig=a},a.prototype.setAggregateTimer=function(a){this.m_aggregateTimer=a},a.prototype.setParentWorkflowIdentifier=function(a){this.m_parentWorkflowId=a},a.prototype.setSelectiveComponentLoadInd=function(a){return"boolean"==typeof a&&(this.m_selectiveComponentLoadInd=a,!0)},a.prototype.setContextualViewActive=function(a){this.m_isContextualViewActive=a},a.prototype.createMPageTimerObject=function(){},a.prototype.createAggregateTimer=function(){var a=null,b=this.getParentWorkflowIdentifier();return a=MP_Viewpoint.getInitialViewId()===b?"USR:MPG.MP_UNIFIED_DRIVER load entire page":"USR:MPG.VIEWPOINT load switch view",new AggregateTimer(a,b)};var b=function(a){var b=760;return a.isDisplayable()&&!a.isLoaded()&&(CERN_Platform.inMillenniumContext()||a.isFusionComponent||CERN_Browser.getViewportWidth()>=b)};a.prototype.loadSelectedComponent=function(a){return MPageComponent.prototype.isPrototypeOf(a)?!!b(a)&&(a.setLoaded(!0),a.startComponentDataRetrieval(),!0):(logger.logError("Invalid MPageComponent object passed into NavigatorSubsectionSummaryMPage.loadSelectedComponent"),!1)},a.prototype.createNewRenderStrategy=function(){return new MPageUI.LegacyAdapter.MPageUIRenderStrategy},a.prototype.postProcessing=function(){},a.prototype.initializeView=function(a,b){if(this.m_rootControl=new MPageUI.LegacyAdapter.RootControl,a&&this.setCategoryMean(a),MPageView.prototype.initializeView.call(this,null),b){if(b.length&&MP_Viewpoint.getViewpointObject().getWorkspaceInd()){var c=0;for(c;c<b.length;c++){var d=b[c]&&b[c].F_MN?MP_Util.getObjectDefinitionMapping(b[c].F_MN):"";d&&d.isContextualViewCompatible&&b.splice(c--,1)}}this.setViewSettings({C_MN:this.getCategoryMean(),BR_SET:{CS:b}})}},a.prototype.loadViewSettings=function(){m_bedrockMpage.MPAGE.push({SETTINGS:this.getViewSettings()})},a.prototype.isOrionComponent=function(a,b,c){var d=!1;return d=a&&a[b]?a[b]:d,d||c&&!c.feature_toggle},a.prototype.initializeComponents=function(){var a=null,b=[],c=0,d=null,e=null,f=null,g=0,h=window.DynamicComponentCatalog?window.DynamicComponentCatalog.bedrockConfig:void 0;f=this.getViewSettings(),e=this.getCriterion(),e.category_mean=this.getParentWorkflowIdentifier(),b=f.BR_SET.CS,c=b.length;var i=this.getFeatureToggleConfig();for(g=0;g<c;g++){d=b[g];var j=h?h[d.F_MN]:null,k=this.isOrionComponent(i,d.F_MN,j);if(k){var l=j?{WORKFLOW_IDENTIFIER:j.workflow_identifier,COMPONENT_TIMER:j.timer,BEDROCK_IDENTIFIER:d.F_MN,bedrockJson:d}:void 0;a=new DynamicFilterMappingComponent(e,j.workflow_identifier,l)}else a=this.createMPageComponentObject(d.F_MN);a&&(a.initializeComponent(e),a.loadComponentSettings(d),a.loadDisplayFilters(),a.setAlwaysExpanded(!0),a.getStyles().setComponentType(CERN_COMPONENT_TYPE_WORKFLOW),a.getColumn()>1&&(a.setSequence(100*a.getColumn()+a.getSequence()),a.setColumn(1)),0!==a.getToggleStatus()||a.getGapCheckCriteria()||a.setDisplayEnabled(!1),a.createMainMenu(),a.isDisplayable()&&a.preProcessing(),a.isFusionComponent&&a.getFusionComponentContent()&&this.dangerouslyGetRootControl().addMappedChild("component"+a.getComponentId(),a.getFusionComponentContent()),this.addComponent(a),this.addComponentId(b[g].R_ID))}},a.prototype.forceComponentsIntoSingleColumn=function(a){for(var b=a.length,c=0;c<b;c++){var d=a[c];d.setPageGroupSequence(1),d.setColumn(1)}},a.prototype.canHaveContextualView=function(){return MPageFusion.coreAPI.base.mediaQuery.atLeast("XL")},a.prototype.changeLayout=function(a){var b=$("#"+this.m_parentWorkflowId).find(".wrkflw-views"),c=b.height();1===a?(b.find(".ss-view-active").removeClass("is-contextual-view-open").find("[data-contextual-view='true']").remove(),this.m_isContextualViewActive=!1):2===a&&b.find(".ss-view-active").addClass("is-contextual-view-open").append("<div class='mpageui-DetailPanelLayout' data-column='2' data-contextual-view='true'><div class='mpageui-Components mpageui-DetailPanelLayout-content col2' style='height: "+c+"px;'><div class='components-col-container'></div></div></div>")},a.prototype.addComponentToContextualViewArray=function(a){$.inArray(a,this.m_componentsInContextualView)===-1&&this.m_componentsInContextualView.push(a)},a.prototype.getComponentsInContextualViewArray=function(){return this.m_componentsInContextualView},a.prototype.removeComponentFromContextualViewArray=function(a){for(var b=this.getComponentsInContextualViewArray(),c=null,d=b.length;d--;)if(c=b[d],c===a){b.splice(d,1);break}},a.prototype.filterActiveComponentsInContextualView=function(){var a=[],b=this.getComponents();return b.length&&(a=$.grep(b,function(a){return a.isAddedToContextualView()&&a.isDisplayable()})),a},a.prototype.moveComponentBetweenViews=function(a){function b(a,b){var c=$(a).prev(),d=$(a).next();c.length?c.after(b):d.length&&d.before(b)}var c=a.getRootComponentNode(),d=a.getRootPlaceholderComponentNode(),e=this.getColumnContainer(2).find(".components-col-container"),f=null;a.isAddedToContextualView()&&this.m_isContextualViewActive?(b(d,c),$(d).hide(),a.setAddedToContextualView(!1)):(d.length?$(d).show():d=a.createPlaceholderViewOfComponent(),a.isDisplayable()&&!a.isLoaded()&&(a.setLoaded(!0),a.startComponentDataRetrieval()),b(c,d),e.append(c),f=a.getPlaceholderView(),f.hasRendered()||(a.getContextualViewControlInPlaceholderView().setOnClickCallback(this.handleContextualViewControlFunction(a)),a.getContextualViewControlInPlaceholderView().attachEvents()),f.setRendered(!0),a.setAddedToContextualView(!0),a.getContextualViewControlInPlaceholderView().setIcon(MPageUI.ICONS.ICON_MOVE_LEFT))},a.prototype.handleContextualViewControlFunction=function(a){var b=this.getCategoryMean(),c=this;return function(){var d=a.getPreferencesObj();d?d.contextualViewPrefs={}:d={contextualViewPrefs:{}};var e=new CapabilityTimer("CAP:MPG COMPONENT CONTEXTUAL VIEW CONTROL CLICK",b);e.addMetaData("component.reportMean",a.getReportMean()),a.isAddedToContextualView()?(c.removeComponentFromContextualViewArray(a),d.contextualViewPrefs=null,e.addMetaData("action","Removed from Contextual View")):(c.addComponentToContextualViewArray(a),d.contextualViewPrefs.isAddedToContextualView=!0,e.addMetaData("action","Added to Contextual View"),c.m_isContextualViewActive||(c.m_isContextualViewActive=!0,c.changeLayout(2))),a.setPreferencesObj(d),e.capture(),c.moveComponentBetweenViews(a),c.updateContextualViewCompPreferences(),c.closeContextualView(),c.resizeComponents(),CERN_EventListener.fireEvent(null,a,EventListener.EVENT_COMPONENT_MOVED_FROM_CONTEXTUAL_VIEW,a),MP_Core.AppUserPreferenceManager.UpdateAllCompPreferences(c.getComponents(),!0,!0),a.toggledFromContextualView()}},a.prototype.updateContextualViewCompPreferences=function(){for(var a=this.getColumnContainer(2).find(".components-col-container"),b=this.getComponentsInContextualViewArray(),c=b.length,d=0;d<c;d++){var e=b[d],f=e.getStyles().getId(),g=e.getPreferencesObj();g&&g.contextualViewPrefs&&(g.contextualViewPrefs.row_seq=a.find("#"+f).index())}},a.prototype.closeContextualView=function(){var a=this.getComponentsInContextualViewArray(),b=a.length;!b&&this.m_isContextualViewActive&&(this.changeLayout(1),this.m_isContextualViewActive=!1)};var c=function(a,b,c){return a.map(function(a){return a.setRenderStrategy(c()),a.isAddedToContextualView()&&!a.getPlaceholderView()&&b?a.createPlaceholderViewOfComponent():a.getRenderStrategy().createComponentShell()})},d=function(a,b,d,e){return a.map(function(a,f){return $("<div id='"+b+"_detailPanelLayout' class='mpageui-DetailPanelLayout' data-column='"+(f+1)+"' data-contextual-view='"+(f>0)+"'>").append($("<div class='mpageui-Components mpageui-DetailPanelLayout-content col"+(f+1)+"'>").append($("<div class='components-col-container'>").append(c(a,d,e)))).append($("<div id='"+b+"_detailPanel' class='mpageui-DetailPanelLayout-panel'>"))})},e=function(a,b,c){return!!b&&(a.filter(function(a){return a.isAddedToContextualView()}).forEach(function(a){a.setAddedToContextualView(!0),a.getPlaceholderView().setRendered(!0),a.toggleContextualView=c(a);var b=a.getContextualViewControlInPlaceholderView();b.setOnClickCallback(c(a)),b.attachEvents()}),!0)},f=function(a,b){return!!a&&(a.mountDetailPanel(b+"_detailPanel"),!0)},g=function(a){a.filter(function(a){return a.isFusionComponent&&a.isDisplayable()}).forEach(function(a){a.getFusionComponentContent().mount(a.getStyles().getId()).update(),a.afterMount()})};return a.prototype.renderComponents=function(a){function b(a,b){return a.getSequenceInContextualView()<b.getSequenceInContextualView()?-1:a.getSequenceInContextualView()>b.getSequenceInContextualView()?1:0}if(!Array.prototype.isPrototypeOf(a)||!a||!a.length)return void logger.logError("No components were provided to the renderComponents() method");this.forceComponentsIntoSingleColumn(a),this.storeViewComponents(a);var c=MP_Util.GetComponentArray(a);this.m_componentsInContextualView=this.filterActiveComponentsInContextualView().sort(b),this.m_componentsInContextualView.length&&this.canHaveContextualView()&&(c[0].push(this.m_componentsInContextualView),this.m_isContextualViewActive=!0);var h=this.getContainer(),i=c[0];i&&(this.isContextualViewActive()&&h.addClass("is-contextual-view-open"),h.append(d(i,this.getCategoryMean(),this.canHaveContextualView(),this.createNewRenderStrategy.bind(this))),this.m_rootControl.setComponentScrollingContainer($(h).addBack().find("[data-contextual-view='false']").find(".mpageui-Components")),e(i[0],this.canHaveContextualView(),this.handleContextualViewControlFunction.bind(this)),f(this.dangerouslyGetRootControl(),this.getCategoryMean()),g(a))},a.prototype.getColumnContainer=function(a){return $("#"+this.getCategoryMean()).find(".col"+a)},a.prototype.postProcessRenderStrategies=function(){this.getComponents().filter(function(a){return void 0!==a.getRenderStrategy()&&null!==a.getRenderStrategy()}).forEach(function(a){a.getRenderStrategy().postProcessing&&(a.getRenderStrategy().setRootControl(this.m_rootControl),a.getRenderStrategy().postProcessing())}.bind(this))},a.prototype.renderView=function(){function a(a){return function(){MP_MenuManager.showMenu("mainCompMenu"+a.getStyles().getId())}}var b=null,c=this.getComponents(),d=c?c.length:0,e=null,f=null,g=0,h=this.createAggregateTimer();h.markTimerStarted(),this.setAggregateTimer(h),this.setContainer($("#"+this.getCategoryMean())),this.renderComponents(c),this.postProcessRenderStrategies();var i=$("#"+this.getCategoryMean()),j=i.find(".hdr-contextual-view-control-container");this.canHaveContextualView()||j.hide();var k=this.getColumnContainer(2);k.length&&k.height(this.getContainer().parent().height()),MP_Util.Doc.SetupCompFilters(c);var l=0,m=!this.selectivelyLoadComponents();for(g=0;g<d;g++)if(b=c[g],b.isDisplayable()&&!b.isLoaded()&&(e=b.getMenu(),e&&Menu.prototype.isPrototypeOf(e)&&(f=e.getMenuItemArray(),f&&f.length||0===b.getStyles().getId().indexOf("cust")?$("#"+e.getAnchorElementId()).unbind("click").click(a(b)):$("#"+e.getAnchorElementId()).addClass("opts-menu-empty").unbind("click")),m?(b.setLoaded(!0),h.registerTask(b.getStyles().getId()),b.setAggregateTimer(h),l++,b.startComponentDataRetrieval()):b.isAddedToContextualView()&&this.canHaveContextualView()&&(b.setLoaded(!0),b.startComponentDataRetrieval(),CERN_EventListener.fireEvent(b,b,EventListener.EVENT_COUNT_UPDATE,{count:null})),b.isContextualViewCompatible()&&(b.toggleContextualView=this.handleContextualViewControlFunction(b)),!b.isFusionComponent&&!CERN_Platform.inMillenniumContext())){var n=MPageUI.Fusion.composite.banner.BannerItem.DISPLAYMODE.COMPACT,o=new MPageUI.Fusion.composite.banner.BannerItem;o.setProp("title",i18n.NON_RESPONSIVE_TITLE),o.setProp("description",i18n.NON_RESPONSIVE_DESC),o.setProp("moreDetailText",i18n.NON_RESPONSIVE_DETAIL),o.setProp("displayMode",n),o.setProp("enableDismissClick",!1),o.mount("non-responsive-banner"+b.getStyles().getId()).update();var p=new MPageUI.Fusion.composite.banner.BannerItem;p.setProp("title",i18n.COMPONENT_HIDDEN_TITLE),p.setProp("description",i18n.COMPONENT_HIDDEN_DESC),p.setProp("moreDetailText",i18n.COMPONENT_HIDDEN_DETAIL),p.setProp("displayMode",n),p.setProp("enableDismissClick",!1),p.mount("non-responsive-banner-sm"+b.getStyles().getId()).update()}m&&(h.addMetaData("component.count",d),h.addMetaData("component.initialLoadCount",l),h.lockRegistration())},a.prototype.resizeView=function(){function a(){for(var a=0;a<e.length;a++){var b=e[a];f.moveComponentBetweenViews(b)}}function b(){for(var a=0;a<e.length;a++){var b=e[a];b.toggledFromContextualView()}}var c=$("#"+this.getCategoryMean()),d=c.find(".hdr-contextual-view-control-container"),e=this.getComponentsInContextualViewArray(),f=this,g=this.getColumnContainer(1),h=null,i=$("#"+this.getParentWorkflowIdentifier()).height();g.height(i),this.m_isContextualViewActive&&(h=this.getColumnContainer(2),h.height(i)),this.canHaveContextualView()?(d.show(),e.length&&!this.m_isContextualViewActive&&(this.changeLayout(2),a(),this.m_isContextualViewActive=!0,b())):this.canHaveContextualView()||(d.hide(),e.length&&this.m_isContextualViewActive&&(a(),this.changeLayout(1),b())),this.resizeComponents()},a.prototype.resizeComponents=function(){for(var a=null,b=this.getComponents(),c=b.length;c--;)a=b[c],a.isDisplayable()&&a.isLoaded()&&a.resizeComponent()},a.prototype.loadComponentSelection=function(){var a=this,b=!1,c=null,d=null,e=0,f=!1,g=null,h=null,i=0,j=0,k=function(a){return d.findIndex(function(b){return b.getComponentId()===a||!1})},l=function(){var a=this.getCriterion().category_mean,b=this;MP_Core.AppUserPreferenceManager.GetPreferences(a).then(function(c){function e(b,c){var d=MP_MenuManager.getMenuObject("pageMenu"+a),e=d.getMenuItemArray()[0].getMenuItemArray();e.forEach(function(a){a.isDisabled()||parseInt(a.getId(),10)!==b||a.setIsSelected(!!c)}),MP_MenuManager.updateMenuObject(d),f=!1}if(c&&c.user_prefs.page_prefs.components.length)c.user_prefs.page_prefs.components.forEach(function(a){var b=k(a.id);b!==-1&&(d[b].setToggleStatus(a.toggleStatus),e(d[b].getComponentId(),a.toggleStatus))});else{var g=b.getComponents().slice(0);g.forEach(function(a){e(a.getComponentId(),a.getToggleStatus())})}})},m=function(){$("body").css("cursor","wait"),MP_Core.AppUserPreferenceManager.UpdateAllCompPreferences(d).then(function(){MP_Viewpoint.refreshActiveView(),$("body").css("cursor","default"),f=!1})},n=function(){l.bind(this)()},o=function(a,b){var c=a.getLabel().toUpperCase(),d=b.getLabel().toUpperCase();return c<d?-1:c>d?1:0},p=function(a,b){var c=b?1:0,e=d.find(function(b){return b.getComponentId()===a});return e?(e.setToggleStatus(c),void(b&&(99!==e.getColumn()&&e.setColumn(1),e.setSequence(0),MP_Core.AppUserPreferenceManager.GetPreferences(e.criterion.category_mean).then(function(a){a||MP_Core.AppUserPreferenceManager.SetPreferences('{"user_prefs":{"page_prefs":{"components":[]}}}',e.criterion.category_mean);var b=e.getPageGroupSequence();d.forEach(function(a){1===a.getColumn()&&a.getPageGroupSequence()===b&&a!==e&&a.setSequence(a.getSequence()+1)})})))):void logger.logWarning("No component to toggle matching "+a)},q=function(a){return function(){f=!0;var b=a.getId(),c=parseFloat(a.getId(),10);c==b?p(c,a.isSelected()):p(b,a.isSelected())}};for(d=this.getComponents().slice(0),e=d.length,j=e;j--;)if(c=d[j],i=c.getToggleStatus(),2!==i&&!c.isComponentFiltered()){b=!0;break}if(!b)return null;for(g=new Menu("compSelection"+this.getCategoryMean()),g.setLabel(i18n.COMPONENTS),g.setIsRootMenu(!1),g.setAnchorConnectionCorner(["top","left"]),g.setContentConnectionCorner(["top","right"]),d.sort(o),j=0;j<e;j++)c=d[j],c.isComponentFiltered()||(h=new MenuSelection(c.getComponentId().toString()),h.setCloseOnClick(!1),c.getRequiredInd()?(h.setLabel(c.getLabel()+" ("+i18n.LOCKED+")"),h.setIsDisabled(!0),h.setIsSelected(!0)):(h.setLabel(c.getLabel()),h.setIsSelected(1===c.getToggleStatus()),h.setClickFunction(q(h))),g.addMenuItem(h));return g.setCloseFunction(function(){f&&MP_PendingData.launchPendingDataDialog(MP_PendingData.requestLevel.VIEW,m,null,MP_Viewpoint.getActiveViewId(),n.bind(a))}),g},a.prototype.componentOrderChanged=function(){this.m_rootControl.componentOrderChanged()},a}(),ComponentContainer=function(){var a=function(){this.configOptionsBitmask=0,this.hideComponentShell=!1,this.m_selectiveComponentLoadInd=!1,this.loadingWorkflowComponents=!1};return a.prototype=new NavigatorSubsectionSummaryMPage,a.prototype.constructor=NavigatorSubsectionSummaryMPage,a.prototype.createNewRenderStrategy=function(){return this.loadingWorkflowComponents?new MPageUI.LegacyAdapter.MPageUIRenderStrategy:new SummaryRenderStrategy},a.prototype.getParentWorkflowIdentifier=function(){return this.getCategoryMean()},a.prototype.getViewSettingsObject=function(){var a=this.getViewSettings();return a?a:MPageView.prototype.getViewSettingsObject.call(this)},a.prototype.initializeComponents=function(){NavigatorSubsectionSummaryMPage.prototype.initializeComponents.call(this);for(var a,b=this.getComponents(),c=b.length;c--;)a=b[c],this.loadingWorkflowComponents?a.isFusionComponent&&(this.hideComponentShell||a.alwaysHideHeader())&&a.setHeaderShown(!1):(a.setAlwaysExpanded(!1),a.getStyles().setComponentType(CERN_COMPONENT_TYPE_SUMMARY))},a.prototype.loadViewSettings=function(){if(MPageView.prototype.loadViewSettings.call(this),
"WF_STD"===this.getViewType())this.loadingWorkflowComponents=!0,logger.logWarning("Rendering Workflow Components");else if("SUM_STD"===this.getViewType())this.loadingWorkflowComponents=!1,logger.logWarning("Rendering Summary Components");else{logger.logWarning("Attempting to identify if WF components are present");for(var a=this.getViewSettings(),b=a.BR_SET.CS,c=b.length;c--;)if(/^WF_/.test(b[c].F_MN.toUpperCase())){logger.logWarning("WF components are present"),this.loadingWorkflowComponents=!0;break}}},a.prototype.postProcessRenderStrategies=function(){this.getComponents().forEach(function(a){var b=a.getRenderStrategy();b&&b.postProcessing&&(this.hideComponentShell||a.alwaysHideHeader()||(b.setRootControl(this.m_rootControl),b.postProcessing()))}.bind(this))},a.prototype.renderView=function(){NavigatorSubsectionSummaryMPage.prototype.renderView.call(this),this.loadingWorkflowComponents?$("#"+this.getCategoryMean()).addClass("wf"):(MP_Util.Doc.SetupExpandCollapse(this.getCategoryMean()),MP_Util.Doc.SetupCompFilters(this.getComponents()),MP_Util.Doc.CreateCompMenus(this.getComponents(),!1))},a.prototype.setOptionsBitmask=function(a){this.configOptionsBitmask=a,this.hideComponentShell=1===(1&this.configOptionsBitmask)},a.prototype.setSelectiveComponentLoadInd=function(){},a}(),ViewBuilderMPage=function(){logger.logMessage("Rendering View Builder MPages View"),this.setName("MPages View")};ViewBuilderMPage.prototype=new MPageView,ViewBuilderMPage.prototype.constructor=MPageView,ViewBuilderMPage.prototype.initializeComponents=function(){var a=null,b=null,c=0,d=0;for(MPageView.prototype.initializeComponents.call(this,null),b=this.getComponents(),c=b.length,d=c;d--;)a=b[d],0===a.getToggleStatus()&&a.setDisplayEnabled(!1)},ViewBuilderMPage.prototype.loadComponentSelection=function(){var a=!1,b=null,c=null,d=0,e=!1,f=null,g=null,h=0,i=0,j=function(a,b){var c=a.getLabel().toUpperCase(),d=b.getLabel().toUpperCase();return c<d?-1:c>d?1:0},k=function(a,b){var d=null;h=b?1:0;var e=c.find(function(b){return b.getComponentId()===a});return e?(e.setToggleStatus(h),void(b&&(99!==e.getColumn()&&e.setColumn(1),e.setSequence(0),MP_Core.AppUserPreferenceManager.GetPreferences(e.criterion.category_mean).then(function(a){a||MP_Core.AppUserPreferenceManager.SetPreferences('{"user_prefs":{"page_prefs":{"components":[]}}}',e.criterion.category_mean),d=e.getPageGroupSequence(),c.forEach(function(a){1===a.getColumn()&&a.getPageGroupSequence()===d&&a!==e&&a.setSequence(a.getSequence()+1)})})))):void logger.logWarning("No component to toggle matching "+a)},l=function(a){return function(){e=!0,k(parseFloat(a.getId(),10),a.isSelected())}};for(c=this.getComponents(),d=c.length,i=d;i--;)if(b=c[i],h=b.getToggleStatus(),2!==h&&!b.isComponentFiltered()){a=!0;break}if(!a)return null;for(f=new Menu("compSelection"+this.getCategoryMean()),f.setLabel(i18n.COMPONENTS),f.setIsRootMenu(!1),f.setAnchorConnectionCorner(["top","left"]),f.setContentConnectionCorner(["top","right"]),c.sort(j),i=0;i<d;i++)b=c[i],b.isComponentFiltered()||(h=b.getToggleStatus(),g=new MenuSelection(b.getComponentId().toString()),g.setCloseOnClick(!1),2===h?(g.setLabel(b.getLabel()+" ("+i18n.LOCKED+")"),g.setIsDisabled(!0),g.setIsSelected(!0)):(g.setLabel(b.getLabel()),g.setIsSelected(1===h),g.setClickFunction(l(g))),f.addMenuItem(g));return f.setCloseFunction(function(){e&&($("body").css("cursor","wait"),MP_Core.AppUserPreferenceManager.UpdateAllCompPreferences(c).then(function(){MP_Viewpoint.refreshActiveView(),$("body").css("cursor","default"),e=!1}))}),f},MP_Util.setObjectDefinitionMapping("SUM_STD",ViewBuilderMPage),WorkflowView.prototype=new MPageView,WorkflowView.prototype.constructor=MPageView,WorkflowView.prototype.addNavigatorSubsection=function(a){this.m_navigatorSubsections||(this.m_navigatorSubsections=[]),this.m_navigatorSubsections.push(a)},WorkflowView.prototype.applyOffsetPosition=function(){var a=this.getActiveSubsection();a&&a.applyViewOffsetPosition()},WorkflowView.prototype.getXRPrintTemplates=function(){return this.m_xrPrintTemplates||(this.m_xrPrintTemplates=[]),this.m_xrPrintTemplates},WorkflowView.prototype.getActiveSubsection=function(){return this.m_activeSubsection},WorkflowView.prototype.getDefaultSubsection=function(){var a=this.getSavedSubsectionIdFromCookie(),b=this.m_navigatorSubsections,c=0,d=0;if(b&&b.length){if(a)for(c=b.length,d=0;d<c;d++)if(b[d].getSubsectionId()===a)return b[d];return this.m_navigatorSubsections[0]}return null},WorkflowView.prototype.getNavigatorSubsections=function(){return this.m_navigatorSubsections},WorkflowView.prototype.saveOffsetPosition=function(){var a=this.getActiveSubsection();a&&a.saveViewOffsetPosition()},WorkflowView.prototype.getSavedSubsectionIdFromCookie=function(){var a=this.getCriterion(),b=a.person_id,c=a.encntr_id;return MP_Util.GetCookieProperty(this.getCategoryMean(),"LAST_ACTIVE_SUBSECTION|"+b+"|"+c)},WorkflowView.prototype.setXRPrintTemplates=function(a){this.m_xrPrintTemplates=a},WorkflowView.prototype.saveSubsectionIdInCookie=function(a){var b=this.getCriterion(),c=b.person_id,d=b.encntr_id;MP_Util.AddCookieProperty(this.getCategoryMean(),"LAST_ACTIVE_SUBSECTION|"+c+"|"+d,a),MP_Util.WriteCookie()},WorkflowView.prototype.setActiveSubsection=function(a){this.m_activeSubsection=a},WorkflowView.prototype.setNavigatorSubsections=function(a){this.m_navigatorSubsections=a},WorkflowView.prototype.initializeComponents=function(){var a=null,b=[],c=0,d=null,e=null,f=this.getViewSettings(),g=0;for(e=this.getComponentSettings(f),a=this.getCriterion(),this.createNavigatorSubsectionObjects(f),b=this.getNavigatorSubsections(),c=b.length,g=0;g<c;g++)d=b[g],d.initializeSubsection(a),d.hasAssociatedView()&&(d.setAssociatedViewElementId(this.getCategoryMean()+"_ssView_"+g),e||(e=f),d.createAssociatedMPageView(e))},WorkflowView.prototype.getComponentSettings=function(a){return a&&a.BR_SET&&a.BR_SET.CS.length?a.BR_SET.CS:null},WorkflowView.prototype.renderView=function(){function a(a){return function(){p.activateSubsection(a)}}var b=function(a){return a.addClass("is-open")},c=function(a){return a.removeClass("is-open")},d=function(a){return a.toggleClass("is-open")},e=function(a){return $("<div class='mpageui-Navigator-tab'><div></div></div>").on("mouseenter",function(){b(a)}).on("click",function(){d(a)})},f=function(){return $("<div class='mpageui-Navigator-utils'><button type='button' class='mpageui-Button mpageui-Button--link mpageui-Button--icon mpageui-Navigator-utils-pin mpageui-u-show-for-md'><div title='"+i18n.discernabu.baseWorkflow.UNPIN_NAVIGATOR+"' aria-label='"+i18n.discernabu.baseWorkflow.UNPIN_NAVIGATOR+"' class='mpageui-Navigator-pin-icon--pinned' ><svg class='mpageui-SvgIcon' viewBox='0 0 48 48'><path d='M35,29.9c0-3.8-1.6-7.4-4.4-10L30,19.4V6h2c1.1,0,2-0.9,2-2V2c0-1.1-0.9-2-2-2H16c-1.1,0-2,0.9-2,2v2c0,1.1,0.9,2,2,2h2v13.5L17.5,20c-2.8,2.6-4.5,6.2-4.5,10h9.5v18h3V30L35,29.9L35,29.9z' /></svg></div><div title='"+i18n.discernabu.baseWorkflow.PIN_NAVIGATOR+"' aria-label='"+i18n.discernabu.baseWorkflow.PIN_NAVIGATOR+"' class='mpageui-Navigator-pin-icon--unpinned' ><svg class='mpageui-SvgIcon' viewBox='0 0 48 48'><path d='M44,15.3L32.7,4c-0.8-0.8-2-0.8-2.8,0l-1.4,1.4c-0.8,0.8-0.8,2,0,2.8l1.4,1.4l-9.5,9.5l-0.7,0c-3.8-0.2-7.5,1.2-10.2,3.9l6.7,6.7L3.4,42.5l2.1,2.1l12.7-12.7l6.7,6.7l0,0c2.7-2.7,4.1-6.4,3.9-10.1l0-0.8l9.5-9.5l1.4,1.4c0.8,0.8,2,0.8,2.8,0l1.4-1.4C44.8,17.3,44.8,16.1,44,15.3z' /></svg></div></button></div>")},g=function(a){return a.append(e(a))},h=function(a){return a.append(f())},i=function(a){return a&&a.relatedTarget&&$(a.relatedTarget).closest(".more-notes-context-menu").length>0},j=function(a){return g(h($("<div id='wrkflwNav_"+a+"' class='mpageui-Navigator'></div>").on("mouseleave",function(a){i(a)||c($(this))})))},k="",l=2,m=this.getCategoryMean(),n=0,o="",p=this,q=null,r=null,s=null,t="",u=0,v=null,w=null,x=0;if(!this.isContextValid())return void this.displayInvalidContextMessage();var y=j(m),z=$("<div class='mpageui-Navigator-contents'>");for(y.append(z),this.m_$navContainer=z,v=this.m_$workflowContainer=$("#"+this.getCategoryMean()),this.m_$parentWorkflowContainer=this.m_$workflowContainer.parent(),w=this.m_$viewContainer=$("<div id='wrkflwViews_"+m+"' class='mpageui-Content wrkflw-views wf'></div>"),r=this.getNavigatorSubsections(),u=r.length,x=0;x<u;x++)if(q=r[x],t=m+"_ssContainer_"+x,q.setSubsectionElementId(t),s=$("<div></div>").addClass("wrkflw-nav-subsec").attr("id",t),q.isAlwaysExpanded()&&s.addClass("wrkflw-nav-subsec-always-expanded"),s.click(a(q)),q.hasHeaderElement()&&(o=m+"_ssHead_"+x,q.setHeaderElementId(o),$(s).append($("<div></div>").addClass("navi-subsec-header").attr("id",o).append(q.generateHeaderHTML()))),q.hasBodyElement()&&(k=m+"_ssBody_"+x,q.setBodyElementId(k),s.append($("<div></div>").addClass("navi-subsec-body").attr("id",k).append(q.generateBodyHTML()))),z.append(s),q.hasAssociatedView()){var A=m+"_ssView_"+x;w.append($("<div></div>").addClass("wrkflw-view").attr("id",A)),q.setAssociatedViewElementId(A)}v.append(y).append(w),n=this.m_$parentWorkflowContainer.height(),w.height(n-l),q=p.getDefaultSubsection(),setTimeout(function(){p.activateSubsection(q)},10)},WorkflowView.prototype.resizeView=function(){var a=null,b=0,c=this,d=2;this.m_$parentWorkflowContainer&&this.m_$viewContainer&&(b=this.m_$parentWorkflowContainer.height(),this.m_$viewContainer.height(b-d),setTimeout(function(){try{if(a=c.getActiveSubsection(),!a)return;a.resizeSubsection(),!a.hasAssociatedView()&&c.m_lastActiveSubsectionWithView&&c.m_lastActiveSubsectionWithView.resizeSubsection()}catch(a){logger.logJSError(a,null,"base-workflow-def.js","resizeView - resizeSubsection")}},10))},WorkflowView.prototype.postProcessing=function(){for(var a=null,b=this.getNavigatorSubsections(),c=b.length,d=0;d<c;d++)a=b[d],a.postProcessing()},WorkflowView.prototype.createNavigatorSubsectionObjects=function(a){},WorkflowView.prototype.activateSubsection=function(a){var b=null,c=null;a&&(b=this.getActiveSubsection(),a!==b&&(b&&(b.hasAssociatedView()&&(b.saveViewOffsetPosition(),this.m_lastActiveSubsectionWithView=b),a.hasAssociatedView()&&(this.m_$navContainer.find(".ss-active").removeClass("ss-active"),this.m_$viewContainer.find(".ss-view-active").removeClass("ss-view-active")),this.setActiveSubsection(null)),this.setActiveSubsection(a),a.isAlwaysExpanded()||$("#"+a.getSubsectionElementId()).addClass("ss-active"),a.hasAssociatedView()&&(this.saveSubsectionIdInCookie(a.getSubsectionId()),c=$("#"+a.getAssociatedViewElementId()),c.addClass("ss-view-active"),a.isSubsectionRendered()?a.applyViewOffsetPosition():(a.renderSubsection(),this.m_navigatorSubsections&&this.m_navigatorSubsections[0]&&this.m_navigatorSubsections[0].isGapCheckRequired()&&this.initializeGapCheck()),this.loadWorkflowPageMenu())))},WorkflowView.prototype.loadFilterMappings=function(){this.addFilterMappingObject("VIEWPOINT_LABEL",{setFunction:this.setName,type:"String",field:"FTXT"}),this.addFilterMappingObject("PREG_PRINT",{setFunction:this.setPrintableReportName,type:"String",field:"FTXT"}),this.addFilterMappingObject("XR_PRINTING_TEMPLATES",{setFunction:this.setXRPrintTemplates,type:"ARRAY",field:"PARENT_ENTITY_ID"})},WorkflowView.prototype.loadXRPrintMenuItem=function(){var a=null,b=this.getCriterion();return this.getXRPrintTemplates()&&this.getXRPrintTemplates().length&&(a=new MenuSelection("xrPrintMenu"+this.getCategoryMean()),a.setLabel(i18n.discernabu.CREATE_REPORT),a.setClickFunction(function(){new CapabilityTimer("CAP:MPG.Create_report_open_modal",b.category_mean).capture(),XRPrint.launchXRPrint(b)})),a},WorkflowView.prototype.loadWorkflowPageMenu=function(){var a=null,b=this.getCategoryMean(),c="",d=null,e=null,f=null,g=0;if(f=MP_MenuManager.getMenuObject("pageMenu"+b)){if(e=f.getMenuItemArray())for(c="separator|",c+=!CERN_Platform.inMillenniumContext()&&this.getXRPrintTemplates().length?"printReport"+b+"|xrPrintMenu"+b+"|clearPrefs"+b:"printReport"+b+"|clearPrefs"+b,MPagesWeb.inContextOfWebApp()&&(null!==CERN_Platform.getChangePasswordMenuItem()&&(c+="|changePasswordMenuItem"),c+="|logOutMenuItem"),g=e.length;g--;)d=e[g],c.indexOf(d.getId())<0&&e.splice(g,1)}else f=new Menu("pageMenu"+b),f.setTypeClass("menu-page-menu"),f.setIsRootMenu(!0),f.setAnchorElementId("pageMenu"+b),f.setAnchorConnectionCorner(["bottom","right"]),f.setContentConnectionCorner(["top","right"]),d=this.loadPrintableReportMenuItem(),MenuItem.prototype.isPrototypeOf(d)&&f.addMenuItem(d),f.addMenuItem(new MenuSeparator("separator")),d=this.createClearPrefsMenuItem(),MenuItem.prototype.isPrototypeOf(d)&&f.addMenuItem(d),CERN_Platform.inMillenniumContext()||(d=this.loadXRPrintMenuItem(),MenuItem.prototype.isPrototypeOf(d)&&f.addMenuItem(d)),MPagesWeb.inContextOfWebApp()&&(null!==CERN_Platform.getChangePasswordMenuItem()&&f.addMenuItem(CERN_Platform.getChangePasswordMenuItem()),f.addMenuItem(CERN_Platform.getLogoutMenuItem()));MP_MenuManager.updateMenuObject(f),a=this.getActiveSubsection(),a&&a.loadWorkflowPageMenuItems("pageMenu"+b),$("#pageMenu"+b).unbind("click").click(function(){MP_MenuManager.showMenu("pageMenu"+b)})},WorkflowView.prototype.initializeGapCheck=function(){var a=null,b=this.m_categoryMean+"gapCheckResource",c=MP_Resources.getSharedResource(b),d=!0;if(c||(c=new SharedResource(b),a=new GapCheck(this.getCriterion()),c.setResourceData(a),c.setIsAvailable(!0),MP_Resources.addSharedResource(b,c),a.triggerInitializationTimer(this.m_navigatorSubsections[0].getAssociatedView().getComponents()),d=!1),a=c.getResourceData(),c.isResourceAvailable()&&a){var e=a.getMappedOrderSynonyms();e.length?(CERN_EventListener.addListener(a,EventListener.EVENT_ORDER_ACTION,a.checkForOrder,a),a.checkForOrder(null,d)):a.fireAdmitOrderEvent(d,0)}};var ViewBuilderWorkflow=function(){this.setName("View Builder Workflow"),this.m_selectiveComponentLoadInd=!0,this.m_featureToggleConfig={}};ViewBuilderWorkflow.prototype=new WorkflowView,ViewBuilderWorkflow.prototype.constructor=WorkflowView,ViewBuilderWorkflow.prototype.selectivelyLoadComponents=function(){return this.m_selectiveComponentLoadInd},ViewBuilderWorkflow.prototype.getFeatureToggleConfig=function(){return this.m_featureToggleConfig||(this.m_featureToggleConfig={}),this.m_featureToggleConfig},ViewBuilderWorkflow.prototype.setFeatureToggleConfig=function(a){this.m_featureToggleConfig=a},ViewBuilderWorkflow.prototype.setSelectiveComponentLoadInd=function(a){return"string"==typeof a&&(this.m_selectiveComponentLoadInd="1"===a,!0)},ViewBuilderWorkflow.prototype.createNavigatorSubsectionObjects=function(a){var b=null,c=null,d=null;b=new DetailedReviewSubsection;var e=this.getFeatureToggleConfig();b.setFeatureToggleConfig(e),b.setWorkflowViewId(this.getCategoryMean()),b.setSelectiveComponentLoadInd(this.selectivelyLoadComponents()),this.addNavigatorSubsection(b),CERN_Platform.inMillenniumContext()&&(c=new CreateNoteSubsection,c.listenForComponentsInView(),c.setAlwaysExpanded(!0),c.setWorkflowViewId(this.getCategoryMean()),c.setSubsectionId("createNote"+this.getCategoryMean()),this.addNavigatorSubsection(c),d=new PMConvoSubsection(this.getCategoryMean()),d.isFilterSetToYes()&&(d.setAlwaysExpanded(!0),d.setHasBodyElement(!0),this.addNavigatorSubsection(d)))},ViewBuilderWorkflow.prototype.beforeDestroy=function(){var a=this.getNavigatorSubsections();a.forEach(function(a){a.beforeDestroy()})},ViewBuilderWorkflow.prototype.loadFilterMappings=function(){WorkflowView.prototype.loadFilterMappings.call(this),this.addFilterMappingObject("WF_SELECTIVE_COMP_LOADING_FLAG",{setFunction:this.setSelectiveComponentLoadInd,type:"String",field:"FTXT"})},ViewBuilderWorkflow.prototype.loadViewSettings=function(a){var b=this;return a?WorkflowView.prototype.loadViewSettings.call(this,!0).then(function(){return WorkflowView.prototype.getViewSettingsObject.call(b,!0).then(function(a){if(!a)throw new Error(i18n.VIEW_SETTINGS_UNAVAILABLE);var c=a.BR_SET.CS,d=window.DynamicComponentCatalog?window.DynamicComponentCatalog.bedrockConfig:void 0;return c.reduce(function(a,c){return a.then(function(){var a=c.F_MN,e=d?d[a]:null;return checkFeatureToggleStatus(e).then(function(c){var d=b.getFeatureToggleConfig();d[a]=c,b.setFeatureToggleConfig(d)})})},Promise.resolve())})}):WorkflowView.prototype.loadViewSettings.call(this)},MP_Util.setObjectDefinitionMapping("WF_STD",ViewBuilderWorkflow),NavigatorSubsection.prototype.addFilterMappingObject=function(a,b){this.m_filterMappingsObj[a]=b},NavigatorSubsection.prototype.beforeDestroy=function(){CERN_EventListener.removeAllListeners(this,this),this.hasAssociatedView()&&"function"==typeof this.getAssociatedView().beforeDestroy&&this.getAssociatedView().beforeDestroy()},NavigatorSubsection.prototype.generateHeaderHTML=function(){return this.getHeaderText()},NavigatorSubsection.prototype.generateBodyHTML=function(){return"&nbsp;"},NavigatorSubsection.prototype.getAssociatedView=function(){return this.m_associatedView},NavigatorSubsection.prototype.getAssociatedViewElementId=function(){return this.m_associatedViewElementId},NavigatorSubsection.prototype.getBodyElementId=function(){return this.m_bodyElementId},NavigatorSubsection.prototype.getCriterion=function(){return this.m_criterion},NavigatorSubsection.prototype.getFilterMappingsObj=function(){return this.m_filterMappingsObj},NavigatorSubsection.prototype.getHeaderElementId=function(){return this.m_headerElementId},NavigatorSubsection.prototype.getHeaderText=function(){return this.m_headerElementText},NavigatorSubsection.prototype.getName=function(){return this.m_subsectionName},NavigatorSubsection.prototype.getSubsectionElementId=function(){return this.m_subsectionElementId},NavigatorSubsection.prototype.getSubsectionIcon=function(){return this.m_subsectionIcon},NavigatorSubsection.prototype.getSubsectionId=function(){return this.m_subsectionId},NavigatorSubsection.prototype.getSubsectionSettings=function(){return this.m_subsectionSettings},NavigatorSubsection.prototype.getWorkflowViewId=function(){return this.m_workflowViewId},NavigatorSubsection.prototype.hasAssociatedView=function(){return this.m_hasAssociatedView},NavigatorSubsection.prototype.hasBodyElement=function(){return this.m_hasBodyElement},NavigatorSubsection.prototype.hasHeaderElement=function(){return this.m_hasHeaderElement},NavigatorSubsection.prototype.isAlwaysExpanded=function(){return this.m_alwaysExpanded},NavigatorSubsection.prototype.isSubsectionActive=function(){return this.m_isSubsectionActive},NavigatorSubsection.prototype.isSubsectionRendered=function(){return this.m_isSubsectionRendered},NavigatorSubsection.prototype.applyViewOffsetPosition=function(){},NavigatorSubsection.prototype.saveViewOffsetPosition=function(){},NavigatorSubsection.prototype.setAlwaysExpanded=function(a){this.m_alwaysExpanded=a},NavigatorSubsection.prototype.setAssociatedView=function(a){this.m_associatedView=a},NavigatorSubsection.prototype.setAssociatedViewElementId=function(a){this.m_associatedViewElementId=a},NavigatorSubsection.prototype.setBodyElementId=function(a){return!(!a||"string"!=typeof a)&&(this.m_bodyElementId=a,!0)},NavigatorSubsection.prototype.setCriterion=function(a){this.m_criterion=a},NavigatorSubsection.prototype.setFilterMappingsObj=function(a){return!!a&&(this.m_filterMappingsObj=a,!0)},NavigatorSubsection.prototype.setHasAssociatedView=function(a){return"boolean"==typeof a&&(this.m_hasAssociatedView=a,!0)},NavigatorSubsection.prototype.setHasBodyElement=function(a){return"boolean"==typeof a&&(this.m_hasBodyElement=a,!0)},NavigatorSubsection.prototype.setHasHeaderElement=function(a){return"boolean"==typeof a&&(this.m_hasHeaderElement=a,!0)},NavigatorSubsection.prototype.setHeaderElementId=function(a){return!(!a||"string"!=typeof a)&&(this.m_headerElementId=a,!0)},NavigatorSubsection.prototype.setHeaderText=function(a){return!(!a||"string"!=typeof a)&&(this.m_headerElementText=a,!0)},NavigatorSubsection.prototype.setName=function(a){return!(!a||"string"!=typeof a)&&(this.m_subsectionName=a,!0)},NavigatorSubsection.prototype.setSubsectionActive=function(a){this.m_isSubsectionActive=a},NavigatorSubsection.prototype.setSubsectionElementId=function(a){return!(!a||"string"!=typeof a)&&(this.m_subsectionElementId=a,!0)},NavigatorSubsection.prototype.setSubsectionIcon=function(a){return!(!a||"string"!=typeof a)&&(this.m_subsectionIcon=a,!0)},NavigatorSubsection.prototype.setSubsectionId=function(a){this.m_subsectionId=a},NavigatorSubsection.prototype.setSubsectionRendered=function(a){this.m_isSubsectionRendered=a},NavigatorSubsection.prototype.setSubsectionSettings=function(a){this.m_subsectionSettings=a},NavigatorSubsection.prototype.setWorkflowViewId=function(a){return!(!a||"string"!=typeof a)&&(this.m_workflowViewId=a,!0)},NavigatorSubsection.prototype.initializeSubsection=function(a){this.setCriterion(a)},NavigatorSubsection.prototype.renderSubsection=function(){var a=null;this.hasAssociatedView()&&(a=this.getAssociatedView(),MPageView.prototype.isPrototypeOf(a)&&a.renderView()),this.setSubsectionRendered(!0)},NavigatorSubsection.prototype.postProcessing=function(){},NavigatorSubsection.prototype.resizeSubsection=function(){var a=null;this.hasAssociatedView()&&(a=this.getAssociatedView(),MPageView.prototype.isPrototypeOf(a)&&a.resizeView())},NavigatorSubsection.prototype.createAssociatedMPageView=function(a){},NavigatorSubsection.prototype.extractComponentSettings=function(a){return a},NavigatorSubsection.prototype.loadWorkflowPageMenuItems=function(a){};var DetailedReviewSubsection=function(){this.m_subsectionBodyElement=null,this.m_componentLoadTimeout=null,this.m_blockingComponentLoadTimeout=!1,this.m_componentsToLoad=0,this.m_emptyComponentHeightInPixels=120,this.m_selectiveComponentLoadInd=!0,this.m_$paddingPlaceholder=null,this.m_$contentObject=null,this.m_$lastComponentElement=null,this.m_lastComponentId=0,this.m_$viewElementObject=null,this.m_viewScrollOffset=0,this.m_lastComponentHeight=0,this.m_lastPaddingHeight=0,this.setName("Detailed Review"),this.setHasBodyElement(!0),this.setHasAssociatedView(!0),this.m_gapCheckInd=null,this.m_featureToggleConfig={}};DetailedReviewSubsection.prototype=new NavigatorSubsection,DetailedReviewSubsection.prototype.constructor=NavigatorSubsection,DetailedReviewSubsection.prototype.selectivelyLoadComponents=function(){return this.m_selectiveComponentLoadInd},DetailedReviewSubsection.prototype.getFeatureToggleConfig=function(){return this.m_featureToggleConfig},DetailedReviewSubsection.prototype.setFeatureToggleConfig=function(a){this.m_featureToggleConfig=a},DetailedReviewSubsection.prototype.setSelectiveComponentLoadInd=function(a){return"boolean"==typeof a&&(this.m_selectiveComponentLoadInd=a,!0)},DetailedReviewSubsection.prototype.createAssociatedMPageView=function(a){var b=null;b=new NavigatorSubsectionSummaryMPage,b.setFeatureToggleConfig(this.getFeatureToggleConfig()),b.setParentWorkflowIdentifier(this.getWorkflowViewId()),b.setSelectiveComponentLoadInd(this.m_selectiveComponentLoadInd),a&&(b.initializeView(this.getAssociatedViewElementId(),a),b.loadViewSettings(),b.initializeComponents()),this.setAssociatedView(b),this.fireComponentsInViewEvent()},DetailedReviewSubsection.prototype.fireComponentsInViewEvent=function(){var a=this.getAssociatedView().getComponents(),b=this.getWorkflowViewId();CERN_EventListener.fireEvent(this,this,EventListener.EVENT_COMPONENTS_IN_VIEW,{componentsInView:a,workflowViewId:b})},DetailedReviewSubsection.prototype.highlightNavigator=function(a){var b=null;a&&(b=this.m_subsectionBodyElement,b.find(".dr-selected").removeClass("dr-selected"),b.find("#drNavi"+a.getStyles().getId()).addClass("dr-selected"))},DetailedReviewSubsection.prototype.applyViewOffsetPosition=function(){this.m_$viewElementObject&&this.m_$viewElementObject.scrollTop(this.m_viewScrollOffset)},DetailedReviewSubsection.prototype.saveViewOffsetPosition=function(){this.m_$viewElementObject&&(this.m_viewScrollOffset=this.m_$viewElementObject.scrollTop())},DetailedReviewSubsection.prototype.onCountUpdate=function(a,b){try{var c=this.m_subsectionBodyElement.find("#drNavi"+a.getStyles().getId());c.length&&(null!==b.count&&c.find(".dr-error").hasClass("hidden")?c.find(".dr-count").html("("+b.count+")").removeClass("hidden"):c.find(".dr-count").html("(null)").addClass("hidden"))}catch(b){logger.logJSError(b,a,"detailed-review.js","onCountUpdate")}},DetailedReviewSubsection.prototype.onCheckoutScroll=function(a,b){var c=0,d=null,e=this.getAssociatedView();if(e){var f=$("#"+this.getAssociatedViewElementId()).find(".col1"),g=f.find("#"+a.getStyles().getId());if(g.length){d=e.getComponents(),c=d.length;for(var h=!0,i=0;i<c;i++)if(d[i].getStyles().getNameSpace()===b&&d[i].isDisplayable()&&f.length){var j=f.find("#"+d[i].getStyles().getId());j.length&&(h=!1,this.scrollToComponent(j))}h&&CERN_EventListener.fireEvent(a,a,EventListener.EVENT_NAVIGATOR_ERR,b)}}},DetailedReviewSubsection.prototype.onCriticalUpdate=function(a,b){try{var c=this.m_subsectionBodyElement.find("#drNavi"+a.getStyles().getId());c.length&&(null!==b.critical&&$(c).find(".dr-error").hasClass("hidden")?c.find(".dr-critical").removeClass("hidden"):c.find(".dr-critical").addClass("hidden"))}catch(b){logger.logJSError(b,a,"detailed-review.js","onCriticalUpdate")}},DetailedReviewSubsection.prototype.updateNavigatorGapCheckIcons=function(a,b){if(this.m_subsectionBodyElement){var c=this.m_subsectionBodyElement.find("#drNavi"+a.getStyles().getId());if(c.length){if(!a.getGapCheckRequiredInd())return void c.find(".dr-gc-icon").removeClass("dr-required").removeClass("dr-satisfied");(b.satisfied||a.getSatisfiedInd())&&c.find(".dr-error").hasClass("hidden")?c.find(".dr-gc-icon").removeClass("dr-required").addClass("dr-satisfied"):c.find(".dr-gc-icon").addClass("dr-required").removeClass("dr-satisfied")}}},DetailedReviewSubsection.prototype.onErrorUpdate=function(a,b){try{var c=this.m_subsectionBodyElement.find("#drNavi"+a.getStyles().getId());c.length&&(b.error?(c.find(".dr-error").removeClass("hidden"),c.find(".dr-count").html("(null)").addClass("hidden"),c.find(".dr-critical").addClass("hidden")):c.find(".dr-error").addClass("hidden"))}catch(b){logger.logJSError(b,a,"detailed-review.js","onErrorUpdate")}},DetailedReviewSubsection.prototype.onContextualViewMoveUpdate=function(a,b){var c=-1;c=b.isAddedToContextualView()?b.getRootPlaceholderComponentNode().index():$(b.getRootComponentNode()).index(),this.cacheLastVisibleComponent(),this.generateNavigatorLinkClickFunction(b,c)},DetailedReviewSubsection.prototype.generateNavigatorLinkClickFunction=function(a,b){var c=this;return function(){var d=$("#"+c.getAssociatedViewElementId()).find(".col1"),e=null;d.length&&(e=a.isAddedToContextualView()&&MPageFusion.coreAPI.base.mediaQuery.atLeast("XL")?d.find("#"+a.getStyles().getId()+"PlaceholderView"):d.find("#"+a.getStyles().getId()),e.length&&(c.m_selectiveComponentLoadInd&&c.loadSelectiveComponents(b,!0,0),c.scrollToComponent(e))),setTimeout(function(){c.highlightNavigator(a),c.captureCapabilityTimer(a)},0)}},DetailedReviewSubsection.prototype.captureCapabilityTimer=function(a){var b=new CapabilityTimer("CAP:MPG Detailed Review Subsection - Click Navigator Link",a.getCriterion().category_mean);b.addMetaData("rtms.legacy.metadata.1",a.getReportMean()),b.capture()},DetailedReviewSubsection.prototype.scrollToComponent=function(a){this.attemptPaddingAdjustment();var b=this.m_$viewElementObject.scrollTop(a.position().top);b&&b.scrollTop&&(this.m_viewScrollOffset=b.scrollTop())},DetailedReviewSubsection.prototype.cacheLastVisibleComponent=function(){for(var a=this.getAssociatedView(),b=a.getComponents(),c=b.length,d=MPageFusion.coreAPI.base.mediaQuery.atLeast("XL"),e=c;e--;){var f=b[e];if(f.isDisplayable())return f.isAddedToContextualView()&&d?this.m_$lastComponentElement=$(f.getRootPlaceholderComponentNode()):this.m_$lastComponentElement=$(f.getRootComponentNode()),void(this.m_lastComponentId=f.m_componentId)}},DetailedReviewSubsection.prototype.isGapCheckRequired=function(){if(null===this.m_gapCheckInd){var a=this.getAssociatedView().getComponents(),b=a.length;this.m_gapCheckInd=!1;for(var c=0;c<b;c++)if(a[c].getGapCheckCriteria()){this.m_gapCheckInd=!0;break}}return this.m_gapCheckInd},DetailedReviewSubsection.prototype.getFirstVisibleComponentIndex=function(){for(var a=this.getAssociatedView().getComponents(),b=a.length,c=0;c<b;c++)if(a[c].isDisplayable())return c;return-1},DetailedReviewSubsection.prototype.storeLatestElementDimensions=function(a,b){this.m_lastComponentHeight=a,this.m_lastPaddingHeight=b},DetailedReviewSubsection.prototype.attemptPaddingAdjustment=function(){var a=null,b=0,c=0,d=0,e=null;if(this.m_$lastComponentElement||this.cacheLastVisibleComponent(),this.m_$viewElementObject||(this.m_$viewElementObject=$("#"+this.getAssociatedViewElementId()).find(".col1")),!this.m_$contentObject&&this.m_$lastComponentElement&&(this.m_$contentObject=this.m_$lastComponentElement.closest(".components-col-container")),!this.m_$paddingPlaceholder&&this.m_$contentObject&&(this.m_$paddingPlaceholder=$("<div class='padding-placeholder'></div>").appendTo(this.m_$contentObject)),this.m_$lastComponentElement&&(a=$(this.m_$lastComponentElement).outerHeight(),d=this.m_$lastComponentElement.position().top,e=MP_Util.GetCompObjById(this.m_lastComponentId)),this.m_lastComponentHeight!==a||e.isAddedToContextualView()){this.m_$contentObject&&(b=this.m_$contentObject.outerHeight()),this.m_$viewElementObject&&(c=$(this.m_$viewElementObject).outerHeight());var f=Math.max(c-b+d+this.m_lastPaddingHeight,this.m_lastPaddingHeight);this.m_$paddingPlaceholder&&this.m_$paddingPlaceholder.css({height:f+"px"}),this.storeLatestElementDimensions(a,f)}},DetailedReviewSubsection.prototype.generateBodyHTML=function(){var a=null,b=null,c=0,d=null,e=null,f=this,g=null,h=0,i="",j="";try{if(a=this.getAssociatedView(),!a)return null;if(d=a.getComponents(),c=d.length){for(d.sort(function(a,b){var c=a.getSequence(),d=b.getSequence();return c<d?-1:1}),g=$("<div></div>"),this.isGapCheckRequired()&&(i="<span class='dr-gc-icon'>&nbsp;</span>"),j="dr-gc-offset",h=0;h<c;h++)b=d[h],b.isDisplayable()&&(e=this.m_selectiveComponentLoadInd?$("<div id='drNavi"+b.getStyles().getId()+"' class='dr-comp-link' title='"+i18n.discernabu.detailed_review.COMPONENT_NOT_LOADED+"'>"+i+"<span class='"+j+"'><div class='dr-error hidden'>&nbsp;</div>"+b.getLabel()+"<span class='dr-count'>...</span><span class='dr-critical hidden'>&nbsp;</span></span></div>"):$("<div id='drNavi"+b.getStyles().getId()+"' class='dr-comp-link'>"+i+"<span class='"+j+"'><div class='dr-error hidden'>&nbsp;</div>"+b.getLabel()+"<span class='dr-count'>&nbsp;</span><span class='dr-critical hidden'>&nbsp;</span></span></div>"),e.click(this.generateNavigatorLinkClickFunction(b,h)),$(g).append(e));return CERN_EventListener.addListener(b,EventListener.EVENT_COUNT_UPDATE,this.onCountUpdate,this),CERN_EventListener.addListener(b,EventListener.EVENT_CRITICAL_UPDATE,this.onCriticalUpdate,this),CERN_EventListener.addListener(b,EventListener.EVENT_ERROR_UPDATE,this.onErrorUpdate,this),CERN_EventListener.addListener(b,EventListener.EVENT_SCROLL,this.onCheckoutScroll,this),CERN_EventListener.addListener(b,EventListener.EVENT_SATISFIER_UPDATE,this.updateNavigatorGapCheckIcons,this),CERN_EventListener.addListener(b,EventListener.EVENT_COMPONENT_MOVED_FROM_CONTEXTUAL_VIEW,this.onContextualViewMoveUpdate,this),CERN_EventListener.addListener(this,EventListener.EVENT_ADMT_ORDER_PLACED+this.getCriterion().category_mean,this.flexGapCheck,this),g.sortable({axis:"y",containment:g,distance:5,items:".dr-comp-link",placeholder:"dr-comp-link-placeholder",tolerance:"pointer",update:function(a,e){try{var i=null,j="",k=null,l=null,m="",n=null;for(k=$(e.item),j=k.attr("id").replace("drNavi",""),l=k.prev(),n=$("#"+f.getAssociatedViewElementId()+" .col1").find(".components-col-container"),i=n.find("#"+j).length?n.find("#"+j):n.find("#"+j+"PlaceholderView"),l.length?(m=l.attr("id").replace("drNavi",""),l=n.find("#"+m),l.length||(l=n.find("#"+m+"PlaceholderView")),
i.insertAfter(l)):n.prepend(i),MP_Core.AppUserPreferenceManager.UpdateAllCompPreferences(d,!0,!0),d.sort(function(a,b){var c=a.getSequence(),d=b.getSequence();return c<d?-1:1}),h=0;h<c;h++)if(b=d[h],b.isDisplayable()&&(g.find("#drNavi"+b.getStyles().getId()).unbind("click").click(f.generateNavigatorLinkClickFunction(b,h)),b.getStyles().getId()===j)){var o=b;setTimeout(function(){o.postDOMLocationChange()},0)}}catch(a){logger.logJSError(a,null,"detailed-review.js","scrolling: update")}},start:function(a,b){var c=$(b.item);c.hasClass("dr-selected")?c.addClass("dr-link-selected-sorting"):c.addClass("dr-link-sorting")},stop:function(b,c){var d=$(c.item);d.removeClass("dr-link-selected-sorting dr-link-sorting"),f.cacheLastVisibleComponent(),d.click();var e=new CapabilityTimer("CAP:MPG Workflow Navigator Component Sort",a.getCriterion().category_mean);e.capture(),f.getAssociatedView().componentOrderChanged&&f.getAssociatedView().componentOrderChanged()}}),g}return"&nbsp;"}catch(a){logger.logJSError(a,null,"detailed-review.js","generateBodyHTML")}},DetailedReviewSubsection.prototype.loadSelectiveComponents=function(a,b,c,d){var e=this;return b=b||!1,!this.m_blockingComponentLoadTimeout&&(b&&(this.m_blockingComponentLoadTimeout=!0),clearTimeout(this.m_componentLoadTimeout),this.m_componentLoadTimeout=setTimeout(function(){var b=e.getAssociatedView(),c=null,f=b.getComponents(),g=f.length,h=e.m_componentsToLoad,i=e.m_subsectionBodyElement,j=0,k=b.getAggregateTimer(),l=0;for(j=a;j<g;j++)c=f[j],c.isDisplayable()&&(!c.isLoaded()&&(h>0||c.getGapCheckCriteria())&&(d&&(k.registerTask(c.getStyles().getId()),c.setAggregateTimer(k)),l++,b.loadSelectedComponent(c),i.find("#drNavi"+c.getStyles().getId()).attr("title",""),e.onCountUpdate(c,{count:null})),h--);d&&(k.addMetaData("component.count",g),k.addMetaData("component.initialLoadCount",l),k.addMetaData("browserContext",CERN_Platform.inEdgeContext()?"Edge":"IE"),k.lockRegistration()),e.m_blockingComponentLoadTimeout=!1},c),!0)},DetailedReviewSubsection.prototype.associatedViewScrollHandler=function(){var a=null,b=this.getAssociatedView().getComponents(),c=b.length,d=null,e=0,f=75,g=0,h=$("#"+this.getAssociatedViewElementId()+" .col1");for(g=0;g<c;g++){a=b[g];var i=a.getStyles().getId(),j=h.find("#"+i);if(d=j.length?j:h.find("#"+i+"PlaceholderView"),d.length){if(e=d.offset().top,e<0&&e+f<0)continue;if(Math.abs(this.m_viewElementOffsetTop-e)<f||e>0){this.attemptPaddingAdjustment(),this.highlightNavigator(a),this.m_selectiveComponentLoadInd&&this.loadSelectiveComponents(g,!1,250,!1);break}}}},DetailedReviewSubsection.prototype.renderSubsection=function(){var a=this;this.m_subsectionBodyElement=$("#"+this.getBodyElementId()),NavigatorSubsection.prototype.renderSubsection.call(this);var b=$("#"+this.getAssociatedViewElementId()),c=b.parent(),d=b.find(".col1");if(d.length){d.height(c.height()),this.m_viewElementOffsetTop=d.offset().top,this.m_componentsToLoad=Math.ceil(d.height()/this.m_emptyComponentHeightInPixels),d.scroll(function(){a.associatedViewScrollHandler()});var e=this.getFirstVisibleComponentIndex();if(e>-1){this.attemptPaddingAdjustment();var f=this.getAssociatedView().getComponents(),g=f[e];this.highlightNavigator(g),this.loadSelectiveComponents(0,!0,0,!0)}}},DetailedReviewSubsection.prototype.loadWorkflowPageMenuItems=function(a){var b=0,c=this.getAssociatedView().loadComponentSelection(),d=MP_MenuManager.getMenuObject(a);d&&(c&&!d.containsMenuItem(c.getId())&&d.insertMenuItem(c,b),MP_MenuManager.updateMenuObject(d))},DetailedReviewSubsection.prototype.resizeSubsection=function(){NavigatorSubsection.prototype.resizeSubsection.call(this);var a=$("#"+this.getAssociatedViewElementId()).find(".col1");a.length&&(this.m_componentsToLoad=Math.ceil(a.height()/this.m_emptyComponentHeightInPixels),a.scroll())},DetailedReviewSubsection.prototype.flexGapCheck=function(a,b){for(var c=this.getAssociatedView().getComponents(),d=!!b,e=0;e<c.length;e++)c[e].getGapCheckCriteria()===GapCheck.CRITERIA.DISCHARGE&&c[e].getGapCheckRequiredInd()===d?(c[e].setGapCheckRequiredInd(!d),c[e].updateComponentRequiredIndicator(!d),this.updateNavigatorGapCheckIcons(c[e],{})):c[e].getGapCheckCriteria()===GapCheck.CRITERIA.ADMIT&&c[e].getGapCheckRequiredInd()===!d?(c[e].setGapCheckRequiredInd(d),c[e].updateComponentRequiredIndicator(d),this.updateNavigatorGapCheckIcons(c[e],{})):c[e].getGapCheckCriteria()!==GapCheck.CRITERIA.ALL||c[e].getGapCheckRequiredInd()||(c[e].setGapCheckRequiredInd(!0),c[e].updateComponentRequiredIndicator(!0),this.updateNavigatorGapCheckIcons(c[e],{}))};var CreateNoteSubsection=function(){this.setName("Create Note"),this.setHasAssociatedView(!1),this.m_subsectionBodyElement=null,this.m_createNoteSecEnabled=null,this.m_filterObj=null,this.m_noteTypeFilterObj=null,this.m_noteTypeGrouperObj=null,this.m_noteTypesArr=null,this.m_components=null,this.associationLinkTimer=null,this.m_duplicateDocTable=null,this.m_noteId=null,this.m_existingNoteDetails=null,this.m_gapCheckInd=null,this.m_isSectionEnabled=!1,this.m_isOrderPlaced=null,this.m_isDocumentationInView=!1};CreateNoteSubsection.prototype=new NavigatorSubsection,CreateNoteSubsection.prototype.constructor=NavigatorSubsection,CreateNoteSubsection.prototype.listenForComponentsInView=function(){CERN_EventListener.addListener(this,EventListener.EVENT_COMPONENTS_IN_VIEW,this.setComponentsInView,this),CERN_EventListener.addListener(this,EventListener.EVENT_DYN_DOC_COMP_CKEDITOR_STABLE,this.updateDynDocStabilityStatus,this),CERN_EventListener.addListener(this,EventListener.EVENT_DOCUMENTATION_COMPONENTS_IN_VIEW,this.enableDocumentationComponentsInView,this)},CreateNoteSubsection.prototype.setComponentsInView=function(a,b){b.workflowViewId===this.getWorkflowViewId()&&(this.m_components=b.componentsInView)},CreateNoteSubsection.prototype.enableDocumentationComponentsInView=function(){this.m_isDocumentationInView=!0},CreateNoteSubsection.prototype.hasBodyElement=function(){return!!CERN_Platform.inMillenniumContext()&&!(!this.isTemplateAssociationPresent()&&!this.isDynDocComponentPresent())},CreateNoteSubsection.prototype.isDynDocComponentPresent=function(){return"undefined"!=typeof MpageDocumentationComponent&&(!!this.m_isDocumentationInView||this.m_components.some(function(a){return a instanceof MpageDocumentationComponent&&a.isDisplayable()}))},CreateNoteSubsection.prototype.isTemplateAssociationPresent=function(){var a=this.getCriterion(),b=null,c=!1,d=a.category_mean+"pageLevelFilters",e=MP_Resources.getSharedResource(d);if(e&&e.isResourceAvailable()){var f=e.getResourceData(),g=f.length;if(g>0)for(var h=0,i=0;h<g;h++){switch(b=f[h],b.F_MN){case"WF_NOTE_TYPE_ALERT":this.m_noteTypeFilterObj=b,i++;break;case"WF_NOTE_TEMPLATE_PAIR":this.m_filterObj=b,i++,c=!0;break;case"WF_NOTE_TEMPLATE_PAIR_SEQ":this.m_noteTypeGrouperObj=b,i++}if(i>2)break}}return c},CreateNoteSubsection.prototype.formatDateTime=function(a,b,c){var d=new Date;return d.setISO8601(a),d.format(b)+"  "+d.format(c)},CreateNoteSubsection.prototype.createWarningBanner=function(a){var b=i18n.discernabu.create_note_i18n,c=new MPageUI.AlertBanner;return c.setType(MPageUI.ALERT_OPTIONS.TYPE.WARNING),c.setPrimaryText(b.ALERT_WARNING_PRIMARY_TEXT),c.setSecondaryText(a),c.render()},CreateNoteSubsection.prototype.launchDuplicateDocumentAlertDialog=function(a,b){var c=this,d=c.getCriterion(),e=d.category_mean,f="DynDocAlertModalDlg"+e,g="continueExisting"+e,h=null,i=i18n.discernabu.create_note_i18n,j=MP_ModalDialog.retrieveModalDialogObject(f),k=null,l=null;if(!j){j=new ModalDialog(f).setLeftMarginPercentage(13).setTopMarginPercentage(10).setRightMarginPercentage(13).setIsBodySizeFixed(!1).setIsFooterAlwaysShown(!0),j.setShowCloseIcon(!0),h=new ModalButton(g),h.setFocusInd(!0).setText(i.ALERT_CONTINUEDOC_BTN),j.addFooterButton(h);var m=new ModalButton("cancelOverrideModal"+e);m.setCloseOnClick(!0).setText(i.ALERT_CANCEL_BTN),j.addFooterButton(m)}a.length>1?(k=i.ALERT_WARNING_GROUPED_SECONDARY_TEXT,l=i.ALERT_MSG_HEADER_GROUPED_NOTES):(k=i.ALERT_WARNING_SECONDARY_TEXT,l=i.ALERT_MSG_HEADER),j.setHeaderTitle(l),j.setBodyDataFunction(function(b){var d=[],f=c.createWarningBanner(k);d.push(f);var g=c.processDuplicateDocTableResults(a),h=c.createDuplicateDocTable(g);c.m_duplicateDocTable=h,d.push("<div class='create-note-dupdoc-table wf' id='"+e+"createNoteDupdocTable'>"+h.render()+"</div>"),d.push("<br/><dl>"),d.push("<dd class='create-note-dupdoc-alert-message'>"+i.ALERT_MSG_CONTINUE_EXIS_BODY+"</dd><dd class='create-note-dupdoc-alert-message create-note-dupdoc-alert-message-bottom'>"+i.ALERT_MSG_CREATE_NEW_BODY+"</dd></dl>"),d.push("</div>"),b.setBodyHTML(d.join("")),h.finalize()}),h=j.getFooterButton(g),h.setOnClickFunction(function(){var a=new CapabilityTimer("CAP:MPG.CREATE_NOTE_DUPLICATE_DOCUMENTS_ALERT_CONTINUE",e),d=c.processDuplicateDocResults();a.addMetaData("rtms.legacy.metadata.1","Existing Notes count: "+d.noteIds.length),a.capture(),b("continueExisting",d)}),MP_ModalDialog.updateModalDialogObject(j),MP_ModalDialog.showModalDialog(f),c.resizeDuplicateDocAlertTable(),$("#DynDocAlertModalDlg"+e+"header").css("border-bottom","0"),$("#DynDocAlertModalDlg"+e+"body").css("margin","0"),$("#DynDocAlertModalDlg"+e+"body .alert-msg").css("padding","0"),$("#DynDocAlertModalDlg"+e+"body .alert-icon").addClass("create-note-alert-iconAlign")},CreateNoteSubsection.prototype.processDuplicateDocResults=function(){var a=this,b=a.getCriterion(),c=b.category_mean,d=$("#DynDocAlertModalDlg"+c+"body").find(".open-existing-note-button"),e={eventIds:[],noteIds:[]};return d.each(function(){var a=$(this);a.prop("checked")&&(e.eventIds.push(a.attr("event-id")),e.noteIds.push(a.attr("note-type-id")))}),e},CreateNoteSubsection.prototype.processDuplicateDocTableResults=function(a){for(var b=this,c=i18n.discernabu.create_note_i18n,d=[],e=0;e<a.length;e++){var f=a[e];if(f&&0!==f.EVENT_ID){var g={},h="<div class='search-button'><input  class='open-existing-note-button create-note-radio-buttons' note-type-id='"+f.NOTE_TYPE_ID+"' event-id='"+f.EVENT_ID+"'  type='radio' name='open-existing-note"+e+"'  value='openExistingNote' checked><span class='duplicate-doc-actions-name'>"+c.ALERT_EXISTDOC_BTN+"</span><span class='create-note-button-spacing'></span><input  class='create-newnote-button create-note-radio-buttons' type='radio' name='open-existing-note"+e+"'  value='createNewNote'><span class='duplicate-doc-actions-name'>"+c.ALERT_NEWDOC_BTN+"</span></div>",i=b.formatDateTime(f.CLINSIG_UPDT_DT_TM,"mediumDate","shortTime");g.UPDT_DT_TM=i,g.DOCUMENT_TYPE=f.DOCUMENT_TYPE,g.AUTHOR=f.AUTHOR,g.ACTIONS=h,d.push(g)}}return d},CreateNoteSubsection.prototype.resizeDuplicateDocAlertTable=function(){var a,b,c=this,d=c.getCriterion(),e=d.category_mean,f=$("#DynDocAlertModalDlg"+e+"body"),g="105px";a=$("#"+e+"createNoteDupdocTable"),b=g,f.length&&c.m_duplicateDocTable&&(a.find(".content-body").css({"max-height":b,"overflow-y":"auto","box-sizing":"border-box"}),c.m_duplicateDocTable.updateAfterResize())},CreateNoteSubsection.prototype.createDuplicateDocTable=function(a){var b=this.getCriterion(),c=b.category_mean,d=i18n.discernabu.create_note_i18n,e=new ComponentTable;e.setNamespace(c+"duplicateDocTable");var f=new TableColumn;f.setColumnId("duplicateNote"),f.setCustomClass("create-note-dup-doc-duplicate-note"),f.setColumnDisplay(d.DUPLICATE_NOTE),f.setRenderTemplate("<span>${DOCUMENT_TYPE} </span>");var g=new TableColumn;g.setColumnId("lastUpdated"),g.setCustomClass("create-note-dupdoc-last-updated"),g.setColumnDisplay(d.LAST_UPDATED),g.setRenderTemplate("<span>${UPDT_DT_TM} </span>");var h=new TableColumn;h.setColumnId("lastUpdatedBy"),h.setCustomClass("create-note-dupdoc-last-updated-by"),h.setColumnDisplay(d.LAST_UPDATED_BY),h.setRenderTemplate("<span> ${AUTHOR} </span>");var i=new TableColumn;return i.setColumnId("actionsCol"),i.setCustomClass("create-note-dupdoc-actions"),i.setColumnDisplay(d.ACTIONS),i.setRenderTemplate("<span> ${ACTIONS} </span>"),e.addColumn(f),e.addColumn(g),e.addColumn(h),e.addColumn(i),e.bindData(a),e},CreateNoteSubsection.prototype.getDuplicateNote=function(a,b){for(var c=this,d=this.getCriterion(),e=d.person_id,f=d.encntr_id,g=this.m_noteTypeFilterObj,h=g.VALS.length,i=[],j=0;j<h;j++)i.push(g.VALS[j].PE_ID);var k=this.m_noteTypesArr[a],l=[];if(k)for(var m=0;m<k.values.length;m++){var n=k.values[m].PE_ID;l.indexOf(n)===-1&&l.push(n)}var o=[],p=MP_Util.CreateParamArray(l,1),q=MP_Util.CreateParamArray(i,1),r=["^MINE^",e,f,q,p],s=(new ScriptRequest).setProgramName("mp_validate_duplicate_document");s.setParameterArray(r),s.setResponseHandler(function(a){"S"===a.getStatus()&&(o=a.getResponse().EXISTING_NOTES),o.length?c.launchDuplicateDocumentAlertDialog(o,b):b("openNew")}),s.performRequest()},CreateNoteSubsection.prototype.generateBodyHTML=function(){var a=i18n.discernabu.create_note_i18n,b=this.getSubsectionId(),c=$("<div class='create-note-label'>"+a.CREATE_NOTE+"</div>");return this.m_noteTypesArr=[],this.createNoteTypesFilter(this.m_noteTypeGrouperObj,!0),this.createNoteTypesFilter(this.m_filterObj,!1),CERN_EventListener.addListener(this,EventListener.EVENT_ADMT_ORDER_PLACED+this.getCriterion().category_mean,this.setOrderStatus,this),this.m_subsectionBodyElement=$("<div class='create-note' id='"+b+"'></div>"),this.m_subsectionBodyElement.append(c),this.displayAllTemplateAssociations(),this.m_subsectionBodyElement},CreateNoteSubsection.prototype.createNoteTypesFilter=function(a,b){if(a){var c=0,d=0,e=null,f=null;d=a.VALS.length,e=a.VALS;var g=this.m_noteTypesArr,h=g.length;for(c=0;c<d;c++){if(g[h-1+e[c].G_SQ])f=g[h-1+e[c].G_SQ];else{var i=h-1+e[c].G_SQ;f={id:i,displayName:e[c].FTXT,values:[],isGrouped:b},g[i]=f}f.values.push(e[c])}}},CreateNoteSubsection.prototype.displayAllTemplateAssociations=function(){var a=this.getCriterion().category_mean,b=this.getSubsectionId(),c=this.m_noteTypesArr,d=c.length;this.associationLinkTimer=new CapabilityTimer("CAP:MPG_CREATE_NOTE_SELECT_TEMPLATE_ASSOCIATION",a);for(var e=i18n.discernabu.create_note_i18n,f=null,g=5,h=null,i=!1,j=d<g?d:g,k=0;k<j;k++)c[k].isGrouped?(i=!0,h=$("<div class='create-note-assoc-link create-note-disabled create-note-ptrnEle' id='"+c[k].id+"'><span class='create-note-grouper-icon-space create-note-grouper-icon'></span><span class='create-note-grouper-margin'>"+c[k].displayName+"</span></div>")):h=i?$("<div class='create-note-assoc-link create-note-disabled create-note-ptrnEle ' id='"+c[k].id+"'><span class='create-note-grouper-icon-space'></span><span class='create-note-grouper-margin'>"+c[k].displayName+"</span></div>"):$("<div class='create-note-assoc-link create-note-disabled create-note-ptrnEle ' id='"+c[k].id+"'>"+c[k].displayName+"</div>"),this.m_subsectionBodyElement.append(h);if(d>g){var l=null;return l=i?$("<div id = 'createMoreNotesContextMenu"+a+"' class='create-note-more-link create-note-disabled'><span class='create-note-grouper-icon-space'></span><span class='create-note-grouper-margin'>"+e.MORE+"</span><span class='create-note-more-down-link'></span></div>"):$("<div id = 'createMoreNotesContextMenu"+a+"' class='create-note-more-link create-note-disabled'>"+e.MORE+"<span class='create-note-more-down-link'></span></div>"),void this.m_subsectionBodyElement.append(l)}f=i?$("<div class='create-note-assoc-link create-note-disabled' id='"+b+"selOtherNote'><span class='create-note-grouper-icon-space'></span><span class='create-note-grouper-margin'>"+e.SELECT_OTHER_NOTE+"</span></div>"):$("<div class='create-note-assoc-link create-note-disabled' id='"+b+"selOtherNote'>"+e.SELECT_OTHER_NOTE+"</div>"),this.m_subsectionBodyElement.append(f)},CreateNoteSubsection.prototype.enableSubsection=function(){this.m_isSectionEnabled||this.isDynDocComponentPresent()&&!this.areAllDynDocComponentsStable()||this.isGapCheckRequired()&&null===this.m_isOrderPlaced||(this.removeClickHandlers(),this.attachListeners(),$("#"+this.getSubsectionId()).children().removeClass("create-note-disabled"),this.m_isSectionEnabled=!0)},CreateNoteSubsection.prototype.disableSubsection=function(){this.removeClickHandlers(),$("#"+this.getSubsectionId()).children().addClass("create-note-disabled"),this.m_isSectionEnabled=!1},CreateNoteSubsection.prototype.setOrderStatus=function(a,b){this.m_isOrderPlaced=b,this.enableSubsection()},CreateNoteSubsection.prototype.areAllDynDocComponentsStable=function(){for(var a=this.m_components,b=null,c=null,d=a.length;d--;)if(b=a[d],b instanceof MpageDocumentationComponent&&(c=b.getEditorInstance(),c&&c.refreshState&&"stable"!==c.refreshState))return!1;return!0},CreateNoteSubsection.prototype.updateDynDocStabilityStatus=function(a,b){return b?void this.enableSubsection():void this.disableSubsection()},CreateNoteSubsection.prototype.postProcessing=function(){this.enableSubsection()},CreateNoteSubsection.prototype.attachListeners=function(){var a=this,b=5,c=0,d=this.getCriterion().category_mean,e=this.getSubsectionId();$("#"+e+"selOtherNote").click(function(){a.createNewNote(null)}),this.m_noteTypesArr&&this.m_noteTypesArr.length&&$("#"+e).on("click",".create-note-ptrnEle",function(){c=$(this).attr("id"),a.createNewNote(c)}),$("#createMoreNotesContextMenu"+d).click(function(){a.createMoreNotesContextMenu(b,$(this),a.m_noteTypesArr)})},CreateNoteSubsection.prototype.removeClickHandlers=function(){var a=this.getSubsectionId();$("#"+a+"selOtherNote").off("click"),$("#"+a).off("click",".create-note-ptrnEle"),$("#createMoreNotesContextMenu"+this.getCriterion().category_mean).off("click")},CreateNoteSubsection.prototype.saveDirtyComponents=function(a,b){var c=this,d=i18n.discernabu.create_note_i18n,e=null,f=null,g=null,h=null,i=null,j=c.isGapCheckRequired(),k=[],l="",m=[],n=[],o=[];e=MP_Util.generateModalDialogBody("DirtyDataDialog","busy",d.SAVING,""),e.setHeaderTitle(d.UNSAVED_DOCUMENTATION),e.getFooterButton("saveDirtyModal")||(h=new ModalButton("saveDirtyModal"),h.setFocusInd(!0).setCloseOnClick(!1).setText(d.SAVE_BTN),h.setOnClickFunction(function(){c.saveDirtyComponents(a,b)}),e.addFooterButton(h)),e.getFooterButton("cnlModal")||(g=new ModalButton("cnlModal"),g.setText(d.CANCEL_BTN),e.addFooterButton(g)),MP_ModalDialog.updateModalDialogObject(e),MP_ModalDialog.showModalDialog("DirtyDataDialog"),k=b.map(function(a){return new Promise(function(b){a.save(b)})}),Promise.all(k).then(function(b){m=b.filter(function(a){return"S"!==a.status}),0===m.length?(MP_ModalDialog.closeModalDialog("DirtyDataDialog"),j?c.triggerGapChecking(a):c.openDynDocEditor(a)):(n=m.filter(function(a){return a.isStaleWorkflow===!0}),m.length===n.length?(o=n.map(function(a){return a.component.getLabel()}),l="<br>"+o.join("<br>"),MP_ModalDialog.closeModalDialog("DirtyDataDialog"),f=MP_Util.generateModalDialogBody("StaleDataDialog","",d.FAILED_TO_SAVE_MSG_HEADER_STALE_DATA+l+"<br>"+d.FAILED_TO_SAVE_MSG_BODY_STALE_DATA),f.setHeaderTitle(d.FAILED_TO_SAVE_STALE_DATA),f.getFooterButton("okModal")||(i=new ModalButton("okModal"),i.setText(d.OK),f.addFooterButton(i)),MP_ModalDialog.updateModalDialogObject(f),MP_ModalDialog.showModalDialog("StaleDataDialog")):(e=MP_Util.generateModalDialogBody("DirtyDataDialog","",d.FAILED_TO_SAVE_MSG_HEADER_SERVICE,d.FAILED_TO_SAVE_MSG_BODY_SERVICE),e.setFooterButtonText("saveDirtyModal",d.RETRY_BTN),e.setHeaderTitle(d.FAILED_TO_SAVE_SERVICE),e.setFooterButtonDither("saveDirtyModal",!1),MP_ModalDialog.updateModalDialogObject(e),MP_ModalDialog.showModalDialog("DirtyDataDialog")))})},CreateNoteSubsection.prototype.gatherDirtyComponents=function(){var a=null;return"undefined"==typeof MpageDocumentationComponent?[]:this.m_components.filter(function(a){return a instanceof MpageDocumentationComponent}).filter(function(b){return a=b.getEditorInstance(),null!==a&&"undefined"!=typeof a.getAutosaveData&&"undefined"!=typeof a.isEditorDirty&&a.isEditorDirty()})},CreateNoteSubsection.prototype.isGapCheckRequired=function(){if(null===this.m_gapCheckInd){var a=this.m_components,b=a.length;this.m_gapCheckInd=!1;for(var c=0;c<b;c++)if(a[c].getGapCheckCriteria()){this.m_gapCheckInd=!0;break}}return this.m_gapCheckInd},CreateNoteSubsection.prototype.triggerGapChecking=function(a){var b=this,c=this.m_components,d=this.getWorkflowViewId()+"gapCheckResource",e=null,f=MP_Resources.getSharedResource(d);if(!(f&&f.isResourceAvailable()&&f.getResourceData())){var g=new Error("Gap check shared resource not available or properly initialized");throw logger.logError(g),g}e=f.getResourceData(),e.performGapCheck(c,this.m_isOrderPlaced,function(){b.openDynDocEditor(a)})},CreateNoteSubsection.prototype.createNewNote=function(a){a&&this.associationLinkTimer.capture(),this.saveAndOpenEditor(a)},CreateNoteSubsection.prototype.createMoreNotesContextMenu=function(a,b,c){var d=null,e=0,f=this.getCriterion(),g=f.category_mean,h=!1;if(d=MP_MenuManager.getMenuObject("moreNotesContextMenu"+g),!d){d=(new ContextMenu).setId("moreNotesContextMenu"+g).setTypeClass("more-notes-context-menu").setIsRootMenu(!0).setAnchorElementId(b.attr("id")).setAnchorConnectionCorner(["bottom","left"]).setContentConnectionCorner(["top","left"]);var i=null;for(e=a;e<c.length;e++)c[e].isGrouped?(h=!0,i="<span class='create-note-grouper-icon-space create-note-grouper-icon'></span><span class='create-note-grouper-margin'>"+c[e].displayName+"</span>"):i=h?"<span class='create-note-grouper-icon-space'></span><span class='create-note-grouper-margin'>"+c[e].displayName+"</span>":"<span>"+c[e].displayName+"</span>",d.addMenuItem(this.createMoreNotesMenuItem(i,c[e].id));this.displayMoreNotesContextMenu(d,h),MP_MenuManager.addMenuObject(d)}MP_MenuManager.showMenu(d.getId())},CreateNoteSubsection.prototype.displayMoreNotesContextMenu=function(a,b){var c=i18n.discernabu.create_note_i18n,d=this,e=null,f=null;f=b?"<span class='create-note-grouper-icon-space'></span><span class='create-note-grouper-margin'>"+c.SELECT_OTHER_NOTE+"</span>":"<span>"+c.SELECT_OTHER_NOTE+"</span>",e=new MenuSelection(f).setLabel(f),e.setClickFunction(function(){d.createNewNote(null)}),a.addMenuItem(e)},CreateNoteSubsection.prototype.createMoreNotesMenuItem=function(a,b){var c=new MenuSelection(a).setLabel(a),d=this;return c.setClickFunction(function(){d.saveAndOpenEditor(b)}),c},CreateNoteSubsection.prototype.saveAndOpenEditor=function(a){var b=this,c=function(){CERN_EventListener.removeListener({},EventListener.EVENT_DOCUMENTATION_SAVED,c);var d=b.isGapCheckRequired(),e=b.gatherDirtyComponents();e.length>0?b.saveDirtyComponents(a,e):d?b.triggerGapChecking(a):b.openDynDocEditor(a)};CERN_EventListener.addListener({},EventListener.EVENT_DOCUMENTATION_SAVED,c),this.m_isDocumentationInView?CERN_EventListener.fireEvent(null,this,EventListener.EVENT_SAVE_DOCUMENTATION):c()},CreateNoteSubsection.prototype.refreshWorkflowInformation=function(){var a=MP_Resources.getSharedResource("createNoteWorkflow");a&&a.isResourceAvailable()&&(a.setResourceData(null),a.setIsAvailable(!1))},CreateNoteSubsection.prototype.openDynDocEditor=function(a,b){var c=this,d=null,e=this.getCriterion(),f=null,g=e.person_id,h=e.encntr_id,i=0,j=0,k=CERN_Platform.getWrappedDiscernObject("DYNDOC"),l=MP_Resources.getSharedResource("createNoteWorkflow"),m=Promise.resolve();if(c.m_noteId=a,!b&&null!==c.m_noteTypeFilterObj&&null!==a){var n=function(b,d){c.m_existingNoteDetails="continueExisting"===b?d:null,c.openDynDocEditor(a,b)};return void c.getDuplicateNote(a,n)}var o=function(b,e){var l=0;CERN_EventListener.removeListener(c,"createNoteWorkflowAvailable",o,c);var n=c.m_existingNoteDetails;if(null!==c.m_noteId){var p=c.m_noteTypesArr[a],q=null,r=n?n.noteIds:null;if(p){q=[];var s=[],t=[];for(l=0;l<p.values.length;l++){var u=p.values[l].PE_ID;if(!r||r.indexOf(u.toString())===-1){var v={};v.NOTETYPE_ID=p.values[l].PE_ID,v.TEMPLATE_ID=p.values[l].PE_ID2,t.push(p.values[l].PE_ID),s.push(v)}}t.length&&(m=new Promise(function(a){var b=MP_Util.CreateParamArray(t,1);d=["^MINE^",b];var e=(new ScriptRequest).setProgramName("mp_get_event_cd_by_note_type").setParameterArray(d).setResponseHandler(function(b){if("S"===b.getStatus())for(j=b.getResponse().EVENT_CDS,l=0;l<j.length;l++)q.push('{"reference_template_id":'+s[l].TEMPLATE_ID+',"event_cd":'+j[l].EVENT_CD+',"workflow_id":0}');else logger.logError("mp_get_event_cd_by_note_type failed: unable to get response"),a();c.m_noteId=null,k.isAvailable().then(function(b){k.supports("CreateNewNote").then(function(c){if(b&&c&&q&&q.length){var d='{"person_id":'+g+',"encounter_id":'+h+',"note_list":['+q.join(",")+"]}";q=null,k.invoke("CreateNewNote",[d]).then(a)}else a()})})});e.performRequest()}))}}else e&&(f=JSON.parse(e),f=f.RECORD_DATA,i=f.WORKFLOW_ID,m=k.isAvailable().then(function(a){return k.supports("OpenDynDocByWorkflowId").then(function(b){if(a&&b)return k.invoke("OpenDynDocByWorkflowId",[g,h,i])})}));m.then(function(){n&&n.eventIds.length&&k.isAvailable().then(function(a){k.supports("ModifyExistingDocumentByEventId").then(function(b){if(a&&b){var c=n.eventIds;c.reduce(function(a,b){return a.then(function(){return k.invoke("ModifyExistingDocumentByEventId",[g,h,b])})},Promise.resolve())}})}),c.m_existingNoteDetails=null})};l?(CERN_EventListener.addListener(c,"createNoteWorkflowAvailable",o,c),l.isResourceAvailable()?o(null,l.getResourceData()):l.retrieveSharedResourceData()):(d=["^MINE^",e.person_id+".0",e.encntr_id+".0",e.provider_id+".0"],l=MP_Resources.createSharedResourceObj("createNoteWorkflow",c,"MP_GET_WORKFLOW",d,"createNoteWorkflowAvailable"),l&&(l.retrieveSharedResourceData(),CERN_EventListener.addListener(c,"createNoteWorkflowAvailable",o,c),this.isDynDocComponentPresent()&&BroadcastDispatcher&&"function"==typeof BroadcastDispatcher.subscribe&&BroadcastDispatcher.subscribe(BroadcastDispatcher.DYN_DOC_REFRESH,function(){c.refreshWorkflowInformation()})))},CreateNoteSubsection.prototype.addMoreNotesContextMenu=function(a,b){var c=null,d=null,e=this.getCriterion().category_mean,f=i18n.discernabu.create_note_i18n,g=0,h=this.getSubsectionId();for(g=0;g<a;g++)d=$("<div class='create-note-assoc-link create-note-disabled create-note-ptrnEle' note-type-id='"+b.VALS[g].PE_ID+"' data-template-id='"+b.VALS[g].PE_ID2+"' id='"+h+"ptrnEle"+g+"'>"+b.VALS[g].FTXT+"</div>"),this.m_subsectionBodyElement.append(d);c=$("<div id = 'createMoreNotesContextMenu"+e+"' class='create-note-more-link create-note-disabled'>"+f.MORE+"<span class='create-note-more-down-link'></span></div>"),this.m_subsectionBodyElement.append(c)};var PMConvoSubsection=function(a){this.setName("PM Conversation"),this.setHasAssociatedView(!1),this.setWorkflowViewId(a),this.setSubsectionId(a+"pmConvo"),this.m_sectionDisplayHandled=!1,this.m_isDTProcessRunning=!1,this.listenForComponentsInView(),this.m_components=[],this.m_gapCheckInd=null,this.m_dischargeConversationType=400,this.m_transferConversationType=300,this.m_hasValidBedrockEndVisitSettings=!1,this.m_hasValidBedrockDischargeSettings=!1,this.m_dischargeActionLabel=null,this.m_dischargeRegistrationActionId=0,this.m_dischargeRegistrationKey="",this.m_dischargeConservationId=0,this.m_dischargeCheckOut=0,this.m_dischargeDoNotCheckOut=0,this.m_hasValidBedrockTransferSettings=!1,this.m_transferActionLabel=null,this.m_transferConservationId=0,this.m_transferRegistrationActionId=0,this.m_transferRegistrationKey="",this.m_transferCheckOut=0,this.m_transferDoNotCheckOut=0,this.m_EDWorkflow=0,this.m_IVHardStop=0,this.m_promptDisposition=0,this.m_CAIntegration=0,this.m_pageFilters="pageLevelFilters",this.m_pmConvoDischarge="pm-convo-discharge",this.m_pmConvoTransfer="pm-convo-transfer",this.m_pmConvoDisabled="pm-convo-disabled",this.m_pmConvoCheckMarkIcons="pm-convo-check-mark-icons"};PMConvoSubsection.prototype=new NavigatorSubsection,PMConvoSubsection.prototype.constructor=NavigatorSubsection,PMConvoSubsection.prototype.isFilterSetToYes=function(){var a=null,b=this.getWorkflowViewId()+this.m_pageFilters,c=MP_Resources.getSharedResource(b);if(c&&c.isResourceAvailable()){var d=c.getResourceData();if(d)for(var e=d.length,f=0;f<e;f++)if(a=d[f],"PM_CONVERSATION"===a.F_MN&&"1"===a.VALS[0].FTXT)return!0}return!1},PMConvoSubsection.prototype.listenForComponentsInView=function(){CERN_EventListener.addListener(this,EventListener.EVENT_COMPONENTS_IN_VIEW,this.setComponentsInView,this)},PMConvoSubsection.prototype.setComponentsInView=function(a,b){b.workflowViewId===this.getWorkflowViewId()&&(this.m_components=b.componentsInView)},PMConvoSubsection.prototype.generateBodyHTML=function(){var a=i18n.discernabu.pm_conversation,b=this.getSubsectionId();return"<div id='"+b+"'><div class='pm-convo-hdr'>"+a.END_VISIT+"</div><ul><li class='pm-convo-item "+this.m_pmConvoDisabled+"' id='"+b+this.m_pmConvoDischarge+"'>"+a.DISCHARGE+"</li><li class='pm-convo-item "+this.m_pmConvoDisabled+"' id='"+b+this.m_pmConvoTransfer+"'>"+a.TRANSFER+"</li></ul></div>"},PMConvoSubsection.prototype.postProcessing=function(){var a=this.getSubsectionId();this.endVisitPageLevelSettings(),this.m_hasValidBedrockEndVisitSettings?this.m_dischargeRegistrationActionId||this.m_transferRegistrationActionId?this.retrieveRegistrationDetails():this.enableSubsection():($("#"+a+this.m_pmConvoDischarge).hide(),$("#"+a+this.m_pmConvoTransfer).hide())},PMConvoSubsection.prototype.enableSubsection=function(){var a=this,b=this.getSubsectionId();if(a.m_hasValidBedrockDischargeSettings){var c=a.m_dischargeActionLabel;c&&$("#"+b+a.m_pmConvoDischarge).text(c)}else $("#"+b+a.m_pmConvoDischarge).hide();if(a.m_hasValidBedrockTransferSettings){var d=a.m_transferActionLabel;d&&$("#"+b+a.m_pmConvoTransfer).text(d)}else $("#"+b+a.m_pmConvoTransfer).hide();a.m_hasValidBedrockEndVisitSettings&&(a.pmConvoEnable(),a.onClickDischargeLink(),a.onClickTransferLink()),a.m_sectionDisplayHandled=!0},PMConvoSubsection.prototype.pmConvoEnable=function(){var a=this,b=this.getSubsectionId();$("#"+b+a.m_pmConvoDischarge).hasClass(a.m_pmConvoCheckMarkIcons)||$("#"+b+a.m_pmConvoTransfer).hasClass(a.m_pmConvoCheckMarkIcons)||$("#"+b+" ."+a.m_pmConvoDisabled).removeClass(a.m_pmConvoDisabled).css("cursor","pointer")},PMConvoSubsection.prototype.onClickDischargeLink=function(){var a=this,b=this.getSubsectionId(),c=a.isGapCheckRequired();$("#"+b+a.m_pmConvoDischarge).click(function(){if(!a.m_isDTProcessRunning){if($("#"+b+a.m_pmConvoDischarge).hasClass(a.m_pmConvoCheckMarkIcons))return;if(c)return void a.triggerGapChecking(a.m_dischargeConversationType,0);a.launchActionAvailable(a.m_dischargeConversationType)}})},PMConvoSubsection.prototype.onClickTransferLink=function(){var a=this,b=this.getSubsectionId(),c=a.isGapCheckRequired();$("#"+b+a.m_pmConvoTransfer).click(function(){if(!a.m_isDTProcessRunning){if($("#"+b+a.m_pmConvoTransfer).hasClass(a.m_pmConvoCheckMarkIcons))return;if(c)return void a.triggerGapChecking(a.m_transferConversationType,1);a.launchActionAvailable(a.m_transferConversationType)}})},PMConvoSubsection.prototype.isGapCheckRequired=function(){if(null===this.m_gapCheckInd){var a=this.m_components,b=a.length;this.m_gapCheckInd=!1;for(var c=0;c<b;c++)if(a[c].getGapCheckCriteria()){this.m_gapCheckInd=!0;break}}return this.m_gapCheckInd},PMConvoSubsection.prototype.triggerGapChecking=function(a,b){var c=this,d=this.m_components,e=this.getWorkflowViewId()+"gapCheckResource",f=null,g=MP_Resources.getSharedResource(e);if(!(g&&g.isResourceAvailable()&&g.getResourceData())){var h=new Error("Gap check shared resource not available or properly initialized");throw logger.logError(h),h}f=g.getResourceData(),f.performGapCheck(d,b,function(){c.launchActionAvailable(a)})},PMConvoSubsection.prototype.launchActionAvailable=function(a){var b=new CapabilityTimer("CAP:MPG.PM_CONVO - LAUNCH END_VISIT"),c=this.getCriterion().person_id,d=this.getCriterion().encntr_id,e=CERN_Platform.getWrappedDiscernObject("DISCHARGEPROCESS"),f=a===this.m_dischargeConversationType,g=this;g.m_isDTProcessRunning=!0,g.isLaunchRegistrationActionAvailable(e).then(function(h){h?e.invoke("LaunchRegistrationAction",[c,d,f?g.m_dischargeRegistrationKey:g.m_transferRegistrationKey,a,g.m_CAIntegration,g.m_promptDisposition,g.m_IVHardStop,f?g.m_dischargeCheckOut:g.m_transferCheckOut,f?g.m_dischargeDoNotCheckOut:g.m_transferDoNotCheckOut,g.m_EDWorkflow]).then(function(c){
b.addMetaData("settings","Honored Bedrock for RC conversations").capture(),3===c&&g.disableLinkWithCheckMark(a),g.m_isDTProcessRunning=!1}):g.isLaunchConversationAvailable(e).then(function(h){h&&e.invoke("LaunchConversation",[c,d,f?g.m_dischargeConservationId:g.m_transferConservationId,a,g.m_CAIntegration,g.m_promptDisposition,g.m_IVHardStop,f?g.m_dischargeCheckOut:g.m_transferCheckOut,f?g.m_dischargeDoNotCheckOut:g.m_transferDoNotCheckOut,g.m_EDWorkflow]).then(function(c){b.addMetaData("settings","Honored Bedrock for PM conversations").capture(),3===c&&g.disableLinkWithCheckMark(a),g.m_isDTProcessRunning=!1})})}).catch(function(a){g.m_isDTProcessRunning=!1,logger.logJSError(a,null,"pm-conversation.js","launchActionAvailable")})},PMConvoSubsection.prototype.retrieveRegistrationDetails=function(){try{var a=this,b=new MP_Core.ScriptRequest(this,"");b.setProgramName("MP_GET_REGISTRATION_ACTIONS"),b.setParameters(["^MINE^"]),b.setArtifactInfo({artifactId:"pm-conversation",functionName:"retrieveRegistrationDetails"}),MP_Core.XMLCCLRequestCallBack(null,b,function(b){var c=b.getResponse();if("F"!==b.getStatus()){for(var d=0,e=0;e<c.REGISTRATION_ACTIONS.length&&(c.REGISTRATION_ACTIONS[e].REGISTRATION_ACTION_ID===a.m_dischargeRegistrationActionId&&(a.m_dischargeRegistrationKey=c.REGISTRATION_ACTIONS[e].KEY,++d),c.REGISTRATION_ACTIONS[e].REGISTRATION_ACTION_ID===a.m_transferRegistrationActionId&&(a.m_transferRegistrationKey=c.REGISTRATION_ACTIONS[e].KEY,++d),2!==d);e++);a.enableSubsection()}})}catch(a){logger.logJSError(a,"pm-conversation.js: retrieveRegistrationDetails: Failed script request for java conversations")}},PMConvoSubsection.prototype.endVisitPageLevelSettings=function(){var a=this.getWorkflowViewId()+this.m_pageFilters,b=MP_Resources.getSharedResource(a);if(b&&b.isResourceAvailable())for(var c=b.getResourceData(),d=0;d<c.length;d++){var e=c[d];switch(e.F_MN){case"PM_CON_DIS_ACTION_LABEL":this.m_dischargeActionLabel=CERN_Platform.encoding.htmlDecode(e.VALS[0].FTXT);break;case"PM_CON_TRNSFR_ACT_LABEL":this.m_transferActionLabel=CERN_Platform.encoding.htmlDecode(e.VALS[0].FTXT);break;case"PM_CON_DIS_ACT":this.m_dischargeConservationId=e.VALS[0].PE_ID,this.m_hasValidBedrockEndVisitSettings=!0,this.m_hasValidBedrockDischargeSettings=!0;break;case"PM_CON_DIS_ACT_CHKUT":this.m_dischargeCheckOut=e.VALS[0].FTXT,this.m_hasValidBedrockEndVisitSettings=!0,"1"===this.m_dischargeCheckOut&&(this.m_hasValidBedrockDischargeSettings=!0);break;case"PM_CON_DIS_ACT_DO_NOT_CHKUT":this.m_dischargeDoNotCheckOut=e.VALS[0].FTXT,this.m_hasValidBedrockEndVisitSettings=!0,"1"===this.m_dischargeDoNotCheckOut&&(this.m_hasValidBedrockDischargeSettings=!0);break;case"PM_CON_TRNSFR_ACTION":this.m_transferConservationId=e.VALS[0].PE_ID,this.m_hasValidBedrockEndVisitSettings=!0,this.m_hasValidBedrockTransferSettings=!0;break;case"PM_CON_TRNSFR_ACT_CHKUT":this.m_transferCheckOut=e.VALS[0].FTXT,this.m_hasValidBedrockEndVisitSettings=!0,"1"===this.m_transferCheckOut&&(this.m_hasValidBedrockTransferSettings=!0);break;case"PM_CON_TRNFR_ACT_DO_NOT_CHKUT":this.m_transferDoNotCheckOut=e.VALS[0].FTXT,this.m_hasValidBedrockEndVisitSettings=!0,"1"===this.m_transferDoNotCheckOut&&(this.m_hasValidBedrockTransferSettings=!0);break;case"PM_CON_CHRGE_ASST_INTGTION":this.m_CAIntegration=e.VALS[0].FTXT;break;case"PM_CON_IVSTOPTIMES_HARD_STP":this.m_IVHardStop=e.VALS[0].FTXT;break;case"PM_CON_PROMPT_DISPOSITION":this.m_promptDisposition=e.VALS[0].FTXT;break;case"PM_CON_ED_WORKFLOW_MPAGE":this.m_EDWorkflow=e.VALS[0].FTXT;break;case"PM_CON_DIS_REG_ACT":this.m_dischargeRegistrationActionId=e.VALS[0].PE_ID,this.m_hasValidBedrockEndVisitSettings=!0,this.m_hasValidBedrockDischargeSettings=!0;break;case"PM_CON_TRAN_REG_ACT":this.m_transferRegistrationActionId=e.VALS[0].PE_ID,this.m_hasValidBedrockEndVisitSettings=!0,this.m_hasValidBedrockTransferSettings=!0}}},PMConvoSubsection.prototype.disableLinkWithCheckMark=function(a){var b=this.getSubsectionId(),c=a===this.m_dischargeConversationType?this.m_pmConvoDischarge:this.m_pmConvoTransfer;$("#"+b+c).addClass(this.m_pmConvoCheckMarkIcons+" "+this.m_pmConvoDisabled)},PMConvoSubsection.prototype.isLaunchConversationAvailable=function(a){var b=this;return Promise.all([a.isAvailable(),a.supports("LaunchConversation")]).then(function(a){return a&&a[0]&&a[1]&&b.m_hasValidBedrockEndVisitSettings&&(b.m_hasValidBedrockDischargeSettings||b.m_hasValidBedrockTransferSettings)})},PMConvoSubsection.prototype.isLaunchRegistrationActionAvailable=function(a){var b=this;return Promise.all([a.isAvailable(),a.supports("LaunchRegistrationAction")]).then(function(a){return a&&a[0]&&a[1]&&b.m_hasValidBedrockEndVisitSettings&&!(!b.m_dischargeRegistrationKey&&!b.m_transferRegistrationKey)})},DocumentBaseComponent.inherits(MPageComponent);var CERN_DOCUMENT_BASE_O1=function(){function a(a){for(var b=null,c=a.ACTION_PROVIDERS.length;c--;){var d=a.ACTION_PROVIDERS[c];(!b||d.DATE>b.DATE)&&(b=d)}return b}function b(b,c){var d=a(b),e=a(c),f="",g="";return d&&(f=d.EFFECTIVE_DT_TM),e&&(g=e.EFFECTIVE_DT_TM),f>g?-1:f<g?1:0}function c(a){for(var b=null,c=null,d=null,e=null,f="PERFORM",g="COMPLETED",h=a.ACTION_PROVIDERS.length;h--;)if(e=a.ACTION_PROVIDERS[h],c=e.TYPE_CD_MEANING,d=e.STATUS_CD_MEANING,c===f&&d===g){b=e;break}return b}function d(a,b,c,d){if("doc"==a&&(pre=b.getStyles().getId(),!_g(pre+"Drop")||!_g(pre+"Menu"))){var f=Util.cep("img",{src:d+"/images/3943_16.gif"}),g=Util.cep("a",{className:"drop-Down",id:pre+"Drop"}),h=Util.cep("div",{id:pre+"Menu",className:"form-menu menu-hide"});Util.ac(f,g);var i=_g(b.getStyles().getId()),j=Util.Style.g("sec-hd",i,"h2"),k=j[0];Util.ac(g,k),Util.ac(h,k),e(c,b)}}function e(a,b){var c=a,d=b.getStyles().getId()+"Drop",e=_g(d),h=[],i=0,j=c.PRE_COMPLETED;if(j.sort(function(a,b){function c(a,b){return a===b?0:a>b?1:-1}return c(a.DISPLAY.toUpperCase(),b.DISPLAY.toUpperCase())}),j[0])for(var k=(b.getCriterion(),0),l=j.length;k<l;k++){var m=j[k];i+=1,h.push('<div><a id="doc',i,'" href="#">',m.DISPLAY,"</a>",'<span class="favHidden" id="docCKI',i,'">',m.SOURCE_IDENTIFIER,"</span>",'<span class="favHidden" id="docStyleID',i,'">',b.getStyles().getId(),"</span>","</div>")}else h.push("<div>",i18n.discernabu.documents_base_o1.DOCUMENT_FAVS,'<span class="favHidden" id="docCKI',i,'">',i18n.DOCUMENT_FAVS,"</span></div>");var n=h.join(""),o=Util.cep("span");o.innerHTML=n;var p=b.getStyles().getId()+"Menu",q=_g(p);Util.ac(o,q);for(var r=_gbt("a",q),s=r.length,t=s;t--;)Util.addEvent(r[t],"click",f);g(q,b.getStyles().getId()),Util.addEvent(e,"click",function(){Util.Style.ccss(Util.gns(this),"menu-hide")?(_g(b.getStyles().getId()).style.zIndex=2,Util.preventDefault(),Util.Style.rcss(Util.gns(this),"menu-hide")):(_g(b.getStyles().getId()).style.zIndex=1,Util.Style.acss(Util.gns(this),"menu-hide"))})}function f(){try{var a=window.external.DiscernObjectFactory("POWERNOTE");MP_Util.LogDiscernInfo(null,"POWERNOTE","documentbase.js","addDocDet");var b={};if(a){for(var c=Util.gns(this),d=c.firstChild.data,e=Util.gns(c),f=0,g=CERN_MPageComponents.length;f<g;f++){b=CERN_MPageComponents[f];var h=b.getStyles();if(h.getId()==e.firstChild.data)break}var i=b.getCriterion();a.BeginNoteFromPrecompletedNote(i.person_id+".0",i.encntr_id+".0",d+".0"),CERN_DOCUMENT_BASE_O1.GetDocumentsTable(b)}}catch(a){return void alert('An error has occured calling DiscernObjectFactory("POWERNOTE"): '+a.name+" "+a.message)}}function g(a,b){function c(b){if(!b)var b=window.event;b.relatedTarget||b.toElement;b.relatedTarget.id==a.id&&(Util.Style.acss(a,"menu-hide"),_g(d).style.zIndex=1),b.stopPropagation(),Util.cancelBubble(b)}var d,e=b+"Menu";if(a.id==e&&(d=b),!f)var f=window.event;window.attachEvent?Util.addEvent(a,"mouseleave",function(){Util.Style.acss(a,"menu-hide"),_g(d).style.zIndex=1}):Util.addEvent(a,"mouseout",c)}return{GetDocumentsTable:function(a){var b=new MP_Core.XMLCCLRequestThreadManager(CERN_DOCUMENT_BASE_O1.RenderReply,a,!1),c=[],d=null,e=null,f=a.getCriterion(),g=a.getGroups(),h=a.getResultStatusCodes(),i=g&&g.length>0?g[0].getEventSets():null,j=h&&h.length>0?h:null,k=2===a.getScope()?f.encntr_id+".0":"0.0";c.push("^MINE^",f.person_id+".0",k,f.provider_id+".0",a.getLookbackUnits()),c.push(MP_Util.CreateParamArray(i,1)),c.push(MP_Util.CreateParamArray(j,1));var l=a.getLookbackUnitTypeFlag();c.push(f.ppr_cd+".0",l),d=new MP_Core.ScriptRequest(a,"ENG:MPG.DOC.O1 - load documents"),d.setArtifactInfo({artifactId:"document-base-o1",functionName:"GetDocumentsTable"}),d.setProgramName("MP_RETRIEVE_DOCUMENTS_JSON"),d.setParameters(c),d.setAsync(!0),e=new MP_Core.XMLCCLRequestThread("GetDocumentData",a,d),b.addThread(e),a.isPlusAddEnabled()&&(c=[],c.push("^MINE^",f.provider_id),d=new MP_Core.ScriptRequest(a,"ENG:MPG.DOC.O1 - load PCN Favs"),d.setArtifactInfo({artifactId:"document-base-o1",functionName:"GetDocumentsTable"}),d.setProgramName("MP_GET_DOCUMENT_FAVORITES"),d.setParameters(c),d.setAsync(!0),e=new MP_Core.XMLCCLRequestThread("GetPcnFavorites",a,d),b.addThread(e)),b.begin()},RefreshDocumentsTable:function(a,b,c){var d=new MP_Core.XMLCCLRequestThreadManager(CERN_DOCUMENT_BASE_O1.RenderReply,a,!1),e=[],f=null,g=null,h=a.getCriterion(),i=a.getResultStatusCodes(),j=2==a.getScope()?h.encntr_id+".0":"0.0";e.push("^MINE^",h.person_id+".0",j,h.provider_id+".0",a.getLookbackUnits()),e.push(MP_Util.CreateParamArray(c,1)),e.push(MP_Util.CreateParamArray(i,1));var k=a.getLookbackUnitTypeFlag();e.push(h.ppr_cd+".0",k),f=new MP_Core.ScriptRequest(a,"ENG:MPG.DOC.O1 - load documents"),f.setArtifactInfo({artifactId:"document-base-o1",functionName:"RefreshDocumentsTable"}),f.setProgramName("MP_RETRIEVE_DOCUMENTS_JSON"),f.setParameters(e),f.setAsync(!0),g=new MP_Core.XMLCCLRequestThread("GetDocumentData",a,f),d.addThread(g),a.isPlusAddEnabled()&&(e=[],e.push("^MINE^",h.provider_id),f=new MP_Core.ScriptRequest(a,"ENG:MPG.DOC.O1 - load PCN Favs"),f.setArtifactInfo({artifactId:"document-base-o1",functionName:"RefreshDocumentsTable"}),f.setProgramName("MP_GET_DOCUMENT_FAVORITES"),f.setParameters(e),f.setAsync(!0),g=new MP_Core.XMLCCLRequestThread("GetPcnFavorites",a,f),d.addThread(g)),d.begin()},RenderReply:function(a,b){var c=MP_Util.CreateTimer(b.getComponentRenderTimerName()),e="",f=b.getStyles().getNameSpace(),g=[];try{for(var h=a.length;h--;){var i=a[h],j=i.getStatus();switch(i.getName()){case"GetPcnFavorites":var k=i.getResponse();"S"==j&&d(f,b,k,b.getCriterion().static_content);break;case"GetDocumentData":if("F"==j)g.push(i.getError()),MP_Util.Doc.FinalizeComponent(MP_Util.HandleErrorResponse(b.getStyles().getNameSpace(),g.join("<br />")),b,"");else if("S"==j){var l=i.getResponse(),m="";if(m=CERN_DOCUMENT_BASE_O1.RenderComponent(b,l),e=MP_Util.CreateTitleText(b,l.DOCS.length),MP_Util.Doc.FinalizeComponent(m,b,e),b.isScrollingEnabled()&&l.DOCS.length>=b.getScrollNumber()){var n=Util.Style.g(f+"-info-hdr",document.body,"DL");n[0]&&Util.Style.acss(n[0],"hdr-scroll")}}else e=b.isLineNumberIncluded()?"(0)":"",MP_Util.Doc.FinalizeComponent(MP_Util.HandleNoDataResponse(b.getStyles().getNameSpace()),b,e)}}}catch(a){throw c&&(c.Abort(),c=null),a}finally{c&&c.Stop()}},RenderComponent:function(d,e){var f=d.getStyles().getNameSpace(),g=i18n.discernabu.documents_base_o1,h=new mp_formatter.DateTimeFormatter(MPAGE_LOCALE),i="",j=[];j.push("<div class='content-hdr'><dl class='",f,"-info-hdr hdr'><dd class='",f+"-cat-hd'><span></span></dd>"),j.push("<dd class='",f,"-auth-hd'><span>",g.AUTHOR,"</span></dd>"),PathologyComponent&&d instanceof PathologyComponent?j.push("<dd class='",f,"-dt-hd'><span>",g.DATE,"</span></dd>"):j.push("<dd class='",f,"-dt-hd'><span>",g.DATE_TIME,"</span></dd>"),3==d.getDateFormat()&&j.push("<dd class='",f+"-cat-hd'><span></span></dd><dd class='",f,"-auth-hd'><span></span></dd><dd class='",f,"-dt-hd'><span>",g.WITHIN,"</span></dd>"),j.push("</dl></div>"),e.DOCS.sort(b),j.push("<div class='",MP_Util.GetContentClass(d,e.DOCS.length),"'>");for(var k=0,l=e.DOCS.length;k<l;k++){var m="",n="",o=g.UNKNOWN,p=e.DOCS[k],q=p.PERSON_ID+".0",r=p.ENCNTR_ID+".0",s=p.EVENT_ID+".0",t=p.RESULT_STATUS_CD_MEAN,u=p.EVENT_CD_DISP,v=p.PARENT_EVENT_ID+".0",w=p.VIEWER_TYPE,x=null,y=null,z=new Date;p.EFFECTIVE_DT_TM?(z.setISO8601(p.EFFECTIVE_DT_TM),x=MP_Util.DisplayDateByOption(d,z),y=MP_Util.CalcWithinTime(z)):(x=g.UNKNOWN,y=g.UNKNOWN);var A=a(p),B=c(p);if(B&&(o=B.PRSNL_NAME),A&&""!==A.PRSNL_NAME){n=A.PRSNL_NAME;var C=new Date;""!==A.DATE?(C.setISO8601(A.DATE),m=h.format(C,mp_formatter.DateTimeFormatter.FULL_DATE_TIME_4YEAR)):m=g.UNKNOWN}else n=g.UNKNOWN,m=g.UNKNOWN;if(j.push("<dl class='",f,"-info'><dd class='",f+"-cat'><span>",MP_Util.CreateClinNoteLink(q,r,s,u,w,v),"</span>"),"MODIFIED"!==t&&"ALTERED"!==t||j.push("<span class='res-modified'>&nbsp;</span>"),j.push("</dd>"),j.push("<dd class='",f,"-auth'><span>",o,"</span></dd>"),3==d.getDateFormat()?j.push("<dd class='",f,"-dt'><span class='date-time'>",y,"</span></dd>"):j.push("<dd class='",f,"-dt'><span class='date-time'>",x,"</span></dd>"),j.push("<dd class='",f,"-image'>"),""!==p.IMAGE_URL){var D='javascript:MPAGES_SVC_EVENT("'+p.IMAGE_URL+'",^MINE,$PAT_PersonId$^)';j.push("<a class='",f,"-image-found' href='",D,"'>&nbsp;</a>")}else j.push("&nbsp;");j.push("</dd></dl>"),d.isHoverEnabled()&&j.push("<h4 class='det-hd'><span>",g.DOCUMENTATION_DETAILS,"</span></h4><div class='hvr'><dl class='",f,"-det'><dt><span>",g.NAME,":</span></dt><dd class='",f,"-det-name'><span>",u,"</span></dd><dt><span>",g.SUBJECT,":</span></dt><dd class='",f,"-det-subj'><span>",p.SUBJECT,"</span></dd><dt><span>",g.STATUS,":</span></dt><dd class='",f,"-det-status'><span>",p.RESULT_STATUS_CD_DISP,"</span></dd><dt><span>",g.LAST_UPDATED,":</span></dt><dd class='",f,"-det-dt'><span>",m,"</span></dd><dt><span>",g.LAST_UPDATED_BY,":</span></dt><dd class='",f,"-det-dt'><span>",n,"</span></dd></dl></div>")}return j.push("</div>"),i=j.join("")}}}();MeasurementBaseComponent.inherits(MPageComponent);var CERN_MEASUREMENT_BASE_O1=function(){function a(a,b,c){var d=[];c||(c=MP_Util.LoadCodeListJSON(a.CODES)),b||(b=MP_Util.LoadPersonelListJSON(a.PRSNL));for(var e=a.RESULTS,f=0,g=e.length;f<g;f++){var h=e[f];if(h.CLINICAL_EVENTS.length>0)for(var i=0,j=h.CLINICAL_EVENTS.length;i<j;i++)for(var k=h.CLINICAL_EVENTS[i],l=0,m=k.MEASUREMENTS.length;l<m;l++){var n=new MP_Core.Measurement;n.initFromRec(k.MEASUREMENTS[l],c),d.push(n)}}return d}return{LoadMeasurementDataMap:function(a,b,c,d){var e=[],f=a.RESULTS;c||(c=MP_Util.LoadCodeListJSON(a.CODES)),b||(b=MP_Util.LoadPersonelListJSON(a.PRSNL));for(var g=0,h=f.length;g<h;g++){var i=f[g];if(i.CLINICAL_EVENTS.length>0)for(var j=0,k=i.CLINICAL_EVENTS.length;j<k;j++){var l=[],m=null;m=i.EVENT_CD>0?new MP_Core.MapObject(i.EVENT_CD,l):new MP_Core.MapObject(i.EVENT_SET_NAME,l);for(var n=i.CLINICAL_EVENTS[j],o=0,p=n.MEASUREMENTS.length;o<p;o++){var q=new MP_Core.Measurement;q.initFromRec(n.MEASUREMENTS[o],c),l.push(q)}l.length>0&&(d?l.sort(d):l.sort(CERN_MEASUREMENT_BASE_O1.SortByEffectiveDateDesc),e.push(m))}}return e},LoadMeasurementDataArray:function(b,c,d,e){var f=a(b,c,d);return f.length>0&&(e?f.sort(e):f.sort(CERN_MEASUREMENT_BASE_O1.SortByEffectiveDateDesc)),f},LoadMeasurementDataArrayNoSort:function(b,c,d){return a(b,c,d)},SortByEffectiveDateDesc:function(a,b){return a.getDateTime()>b.getDateTime()?-1:a.getDateTime()<b.getDateTime()?1:0}}}(),CERN_DEMO_BANNER_O1=function(){function a(a,b){gen=Util.Style.g(a,b,"SPAN");for(var c=0,d=gen.length;c<d;c++){var e=gen[c];if(e){var f=Util.gns(Util.gns(e));f&&Util.Style.ccss(f,"hvr")&&hs(e,f)}}}return{GetPatientDemographics:function(b,c){var d=["^MINE^",c.person_id+".0",c.encntr_id+".0"],f=new MP_Core.ScriptRequest(null,"USR:MPG.DEMO_BANNER.O1 - load component");f.setArtifactInfo({artifactId:"demo-banner-o1",functionName:"GetPatientDemographics"}),f.setProgramName("MP_GET_PATIENT_DEMO"),f.setParameters(d),MP_Core.XMLCCLRequestCallBack(null,f,function(d){MP_Util.LogScriptCallInfo(null,this,"demobanner.js","GetPatientDemographics");var f=d.getResponse();if(f)try{var g=MP_Util.CreateTimer("ENG:MPG.DEMO_BANNER.O1 - render component"),h="",i="",j=new Date,k=null,m="",n=new Date,o=[],p="",q=0,r="",s=0,t=[],u=new Date,v=new Date,w="",x="",y=null,z=[],A="",B=null,C="";if(k=MP_Util.LoadCodeListJSON(f.CODES),y=f.DEMOGRAPHICS.PATIENT_INFO,x=y.PATIENT_NAME.NAME_FULL,""!==y.ABS_BIRTH_DT_TM){var D="([0-9]{4})(-([0-9]{2})(-([0-9]{2})(T([0-9]{2}):([0-9]{2})(:([0-9]{2})(.([0-9]+))?)?(Z|(([-+])([0-9]{2}):([0-9]{2})))?)?)?)?",E=y.ABS_BIRTH_DT_TM.match(new RegExp(D));j=new Date(E[1],E[3]-1,E[5],E[7],E[8],E[10]),i=j.format("shortDate2")}else""!==y.BIRTH_DT_TM&&(j.setISO8601(y.BIRTH_DT_TM),i=j.format("shortDate2"));""!==y.DECEASED_DT_TM&&(n.setISO8601(y.DECEASED_DT_TM),m=n.format("shortDate2")),y.LOCAL_DECEASED_DT_TM&&y.LOCAL_BIRTH_DT_TM?(u.setISO8601(y.LOCAL_BIRTH_DT_TM),v.setISO8601(y.LOCAL_DECEASED_DT_TM),h=MP_Util.CalcAge(u,v)):y.LOCAL_BIRTH_DT_TM&&(u.setISO8601(y.LOCAL_BIRTH_DT_TM),h=MP_Util.CalcAge(u));var F=f.DEMOGRAPHICS.ENCOUNTER_INFO;for(s=0,e=F.length;s<e;s++){for(C=F[s].REASON_VISIT,q=0,l=F[s].ALIAS.length;q<l;q++)o[q]=MP_Util.GetValueFromArray(F[s].ALIAS[q].ALIAS_TYPE_CD,k),"FIN NBR"==o[q].meaning&&(p=F[s].ALIAS[q].FORMATTED_ALIAS),"MRN"==o[q].meaning&&(w=F[s].ALIAS[q].FORMATTED_ALIAS);if(F[s].ISOLATION_CD>0){var G=MP_Util.GetValueFromArray(F[s].ISOLATION_CD,k);r=G.display}}if(aliasArry=f.DEMOGRAPHICS.PATIENT_INFO.ALIAS,""===w)for(q=0,l=aliasArry.length;q<l;q++)z[q]=MP_Util.GetValueFromArray(aliasArry[q].ALIAS_TYPE_CD,k),"MRN"==z[q].meaning&&(w=aliasArry[q].FORMATTED_ALIAS);B=MP_Util.GetValueFromArray(y.SEX_CD,k),A=B?B.display:i18n.UNKNOWN,t.push("<div id='demobanner'",c.category_mean,"><dl class='dmg-info'><dt class='dmg-pt-name-lbl'><span>",i18n.NAME,"</span></dt><dd class='dmg-pt-name'><span>",x,"</span></dd><dt class='dmg-sex-lbl'><span>",i18n.SEX," ","</span></dt><dd class='dmg-sex'><span>",A," ","</span></dd><dt class='dmg-age-lbl'><span>",i18n.AGE,"</span></dt>"),""!==m?t.push("<span class='dmg-deceased'>",h,"</span><h4 class='det-hd'><span class='dmg-info'>",i18n.AGE,"</span></h4><div class='hvr'><dl class='dmg-info'><dt class='dmg-info'><span >",i18n.DECEASED,":</span></dt><dd class='dmg-info'><span>",m,"</span></dd></dl></div>"):t.push("<dd class='dmg-age'><span>",h,"</span></dd>"),t.push("<dt><span>",i18n.DOB,":</span></dt><dd class='dmg-dob'><span>",i,"</span></dd><dt><span>",i18n.MRN,":</span></dt><dd class='dmg-mrn'><span>",w,"</span></dd><dt><span>",i18n.FIN,":</span></dt><dd class='dmg-fin'><span>",p,"</span></dd><dt><span>",i18n.ISOLATION,":</span></dt><dd class='dmg-isolation'><span>",r,"</span></dd><dt><span>",i18n.VISIT_REASON,":</span></dt><dd class='dmg-rfv'><span>",C,"</span></dd></dl></div>"),b.innerHTML=t.join(""),a("dmg-deceased",_g("demobanner"+c.category_mean))}catch(a){MP_Util.LogJSError(a,null,"demobanner.js","GetPatientDemographics"),g&&(g.Abort(),g=null)}finally{g&&g.Stop()}})}}}();PregnancyBaseUtilComponentStyle.inherits(ComponentStyle);var PREGNANCY_BASE_UTIL_O1=function(){function a(a){var b=a.getError();if(""===b&&0===b.length){var c=a.getResponse(),d=c.STATUS_DATA.STATUS;if("F"!==d)return this.m_deliveryData=c,this.m_deliveryData}return null}return this.m_retrievingData=!1,this.m_label="PregnancyBaseUtil",this.m_componentId=0,this.m_criterion=null,this.m_deliveryData=null,{LoadPregnancyData:function(a,b,c){var d=null,e=[],f=null;b="undefined"==typeof b||b,this.m_criterion=a,this.m_retrievingData||(this.m_retrievingData=!0,e.push("^MINE^",a.person_id+".0",a.encntr_id+".0",a.provider_id+".0",a.ppr_cd+".0",a.position_cd+".0"),d=new MP_Core.ScriptRequest(PREGNANCY_BASE_UTIL_O1,"ENG:MPG.PregnancyBaseUtil.O1 - LoadPregnancyData"),d.setProgramName("MP_GET_EGA_DATA"),d.setParameters(e),d.setAsync(b),f=function(a){PREGNANCY_BASE_UTIL_O1.GetPregnancyData(a,!0),"function"==typeof c&&c()},MP_Core.XMLCCLRequestCallBack(PREGNANCY_BASE_UTIL_O1,d,f))},LoadPregnancyDataAsync:function(a,b){return new Promise(function(c,d){PREGNANCY_BASE_UTIL_O1.LoadPregnancyData(a,b,c)})},LoadDeliveryData:function(b,c){var d=new MP_Core.ScriptRequest(PREGNANCY_BASE_UTIL_O1,"ENG:MPG.PregnancyBaseUtil.O1 - LoadDeliveryData");d.setProgramName("MP_GET_DELIVERY_SUMMARY"),d.setParameters(b),d.setAsync(!0),MP_Core.XMLCCLRequestCallBack(PREGNANCY_BASE_UTIL_O1,d,function(b){c(a(b))})},CheckPregnancySummaryLoadRequirement:function(a){var b,c,d=this.m_criterion.getPatientInfo(),e="",f="",g="",h=!1,i="";if(d.getBirthSex()&&"FEMALE"===d.getBirthSex().meaning&&(this.isfemale=!0),d.getAdminSex()&&"FEMALE"===d.getAdminSex().meaning&&(this.isfemale=!0),this.isfemale===!0?m_pregId<0?(e=pregnancyBaseUtili18n.RETREIVING_PREG_ERROR,h=!0):0===m_pregId&&(e=pregnancyBaseUtili18n.NOACTIVE_PREG_ERROR,f='<input type="button" OnClick="PREGNANCY_BASE_UTIL_O1.addOrReopenPregnancy(0);" value="'+pregnancyBaseUtili18n.ADD_PREGNANCY+'">',h=!0,1==m_reopenPregInd&&(g='<input type="button" OnClick="PREGNANCY_BASE_UTIL_O1.addOrReopenPregnancy(1);" value="'+pregnancyBaseUtili18n.REOPEN_PREGNANCY+'">')):(e=pregnancyBaseUtili18n.NOTFEMALE_ERROR,h=!0),h){1==this.m_criterion.help_file_local_ind?b=this.m_criterion.static_content+"pregnancysummary/index.html":c="https://wiki.ucern.com/display/r1mpagesHP/Pregnancy+Summary+Help",a?MP_Util.Doc.AddPageTitle(pregnancyBaseUtili18n.PREGNANCY_SUMMARY,document.body,this.m_criterion.debug_ind,!0,null,b,c,this.m_criterion,this.m_criterion.category_mean):MP_Util.Doc.AddPageTitle(pregnancyBaseUtili18n.PREGNANCY_SUMMARY,document.body,this.m_criterion.debug_ind,!0,null,b,c,this.m_criterion),MP_Util.Doc.AddCustomizeLink(this.m_criterion);var j=["<div class='pregbase-error-content'><span class=pregbase-alert-icon title=",pregnancyBaseUtili18n.ALERT,":></span><span class=pregbase-error-text>",e,"</span><span class=pregbase-addpreg-button>",f,"</span><span class=pregbase-reopenpreg-button>",g,"</span></div>"],k=j.join("");a?(i=_g(this.m_criterion.category_mean),i.innerHTML=i.innerHTML+k):(i=document.body.innerHTML,document.body.innerHTML=i+k)}return h},addOrReopenPregnancy:function(a){var b=this;try{if(0===a)return PregnancyUtils.addPregnancy(b.m_criterion.person_id,b.m_criterion.encntr_id).then(function(){return PREGNANCY_BASE_UTIL_O1.LoadPregnancyData(b.m_criterion),!0}).catch(function(){return MP_Util.LogError(i18n.discernabu.pregnancybaseutil_o1.PREG_FORM_OBJ_FAILURE),!1});if(1===a)return PregnancyUtils.reopenPregnancy(b.m_criterion.person_id,b.m_criterion.encntr_id).then(function(){return PREGNANCY_BASE_UTIL_O1.LoadPregnancyData(b.m_criterion),!0}).catch(function(){return MP_Util.LogError(i18n.discernabu.pregnancybaseutil_o1.PREG_FORM_OBJ_FAILURE),!1})}catch(b){0===a?MP_Util.LogError(i18n.discernabu.pregnancybaseutil_o1.ADDPREGNANCY_EXCEPTION):MP_Util.LogError(i18n.discernabu.pregnancybaseutil_o1.REOPENPREGNANCY_EXCEPTION)}},GetPregnancyData:function(a,b){var c=null,d=null,e=null,f=null,g=null,h=null,i=null,j=null,k=null;if(this.m_retrievingData=!1,i=a.getError(),""===i&&0===i.length){var l=a.getResponse(),m=l.STATUS_DATA.STATUS;if("S"==m){if(g=new PregnancyInfo,g.setPregnancyId(l.GESTATION_INFO[0].PREGNANCY_ID),g.setLookBack(l.LOOKBACK_DAYS),g.setReopenPregInd(l.REOPEN_PREG_IND),g.setGesAge(l.GESTATION_INFO[0].CURRENT_GEST_AGE),g.setDelGesAge(l.GESTATION_INFO[0].GEST_AGE_AT_DELIVERY),g.setCalculatedEga(),g.setEstDeliveryDate(l.GESTATION_INFO[0].EST_DELIVERY_DATE_FORMATTED),g.setEddId(l.GESTATION_INFO[0].EDD_ID),g.setIsPatientDelivered(l.GESTATION_INFO[0].PATIENT_DELIVERED_IND),l.ONSET_DATE&&(j=new Date,j.setISO8601(l.ONSET_DATE),g.setOnsetDate(j)),f=l.GESTATION_INFO[0].DELIVERED_IND,g.setRtLookBack(g.getCalculatedEga()),g.isPatientDelivered()){k=new Date;var n=l.GESTATION_INFO[0].DELIVERY_DATE_FORMATTED;g.setDeliveryDate(n),g.setRtLookBack(g.getDelGesAge()),e=new Date,e.setISO8601(n),c=k-e,d=Math.round(c/864e5),g.setRtLookBack(g.getRtLookBack()+d)}}else if("Z"==l.STATUS_DATA.STATUS){g=new PregnancyInfo,g.setPregnancyId(0),g.setReopenPregInd(l.REOPEN_PREG_IND);var o=MP_Util.CreateTimer("CAP:MPG.Pregnancy Data Retrieval");o&&(o.SubTimerName="Patient Not Pregnant",o.Stop())}}else g=new PregnancyInfo,g.setPregnancyId(-1);h=MP_Resources.getSharedResource("pregnancyInfo"),h?MP_Resources.setSharedResourceData("pregnancyInfo",g):(h=new SharedResource("pregnancyInfo"),h.setResourceData(g),h.setIsAvailable(!0),h.setIsBeingRetrieved(!1),h.setEventListenerFlag("pregnancyInfoAvailable"),h.setEventListenerObject(new MPageComponent),MP_Resources.addSharedResource("pregnancyInfo",h)),b&&h.notifyResourceConsumers()},getLabel:function(){return this.m_label},getComponentId:function(){return this.m_componentId},getDeliveryData:function(a,b){return this.m_deliveryData||PREGNANCY_BASE_UTIL_O1.LoadDeliveryData(a,b),this.m_deliveryData},setCriterion:function(a){this.m_criterion=a}}}();